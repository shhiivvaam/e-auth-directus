import{k as wF,n as cq,o as Oq,p as CF,q as Dq,u as Rq,t as Mq,_ as Nq}from"./index.B0DSK59H.entry.js";import{w as KS,e as hq,bj as pq,f as Zl,n as lq,m as Pq,aR as Bq,d as $q,b as Iq,h as iq,c as qS,b5 as ou,b6 as Lq,aY as vg,af as hy,y as kr,u as Nn,aN as uq,bf as ii,ae as pR,bw as rl,ak as bR,ag as _r,aF as Xp,by as dq,ad as yF,I as Hj}from"./runtime-core.esm-bundler-zlSgKseS.js";import{useI18n as Fq}from"./vue-i18n.upvyfvU5.entry.js";import"./vue.runtime.esm-bundler-BY4gCD-H.js";import"./index-DjQIVhCu.js";import"./pinia.ZGOsqJmi.entry.js";import"./vue-router.Dt24BTtJ.entry.js";var Hq=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Vq=function(it){return Hq.map(function(Pn){return Pn.toLowerCase()}).indexOf(it.toLowerCase())!==-1},zq=function(it,Pn,Xt){Object.keys(Pn).filter(Vq).forEach(function(an){var bt=Pn[an];typeof bt=="function"&&(an==="onInit"?bt(it,Xt):Xt.on(an.substring(2),function(jt){return bt(jt,Xt)}))})},Uq=function(it,Pn,Xt,an){var bt=it.modelEvents?it.modelEvents:null,jt=Array.isArray(bt)?bt.join(" "):bt;KS(an,function(zn,Mt){Xt&&typeof zn=="string"&&zn!==Mt&&zn!==Xt.getContent({format:it.outputFormat})&&Xt.setContent(zn)}),Xt.on(jt||"change input undo redo",function(){Pn.emit("update:modelValue",Xt.getContent({format:it.outputFormat}))})},Wq=function(it,Pn,Xt,an,bt,jt){an.setContent(jt()),Xt.attrs["onUpdate:modelValue"]&&Uq(Pn,Xt,an,bt),zq(it,Xt.attrs,an)},mq=0,bq=function(it){var Pn=Date.now(),Xt=Math.floor(Math.random()*1e9);return mq++,it+"_"+Xt+mq+String(Pn)},Zq=function(it){return it!==null&&it.tagName.toLowerCase()==="textarea"},fq=function(it){return typeof it>"u"||it===""?[]:Array.isArray(it)?it:it.split(" ")},jq=function(it,Pn){return fq(it).concat(fq(Pn))},Gq=function(it){return it==null},gq=function(){return{listeners:[],scriptId:bq("tiny-script"),scriptLoaded:!1}},qq=function(){var it=gq(),Pn=function(bt,jt,zn,Mt){var Gt=jt.createElement("script");Gt.referrerPolicy="origin",Gt.type="application/javascript",Gt.id=bt,Gt.src=zn;var Xn=function(){Gt.removeEventListener("load",Xn),Mt()};Gt.addEventListener("load",Xn),jt.head&&jt.head.appendChild(Gt)},Xt=function(bt,jt,zn){it.scriptLoaded?zn():(it.listeners.push(zn),bt.getElementById(it.scriptId)||Pn(it.scriptId,bt,jt,function(){it.listeners.forEach(function(Mt){return Mt()}),it.scriptLoaded=!0}))},an=function(){it=gq()};return{load:Xt,reinitialize:an}},Kq=qq(),Yq=function(){return typeof window<"u"?window:global},GS=function(){var it=Yq();return it&&it.tinymce?it.tinymce:null},Xq={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(it){return it==="html"||it==="text"}}},Jp=function(){return Jp=Object.assign||function(it){for(var Pn,Xt=1,an=arguments.length;Xt<an;Xt++){Pn=arguments[Xt];for(var bt in Pn)Object.prototype.hasOwnProperty.call(Pn,bt)&&(it[bt]=Pn[bt])}return it},Jp.apply(this,arguments)},Jq=function(it,Pn,Xt,an){return it(an||"div",{id:Pn,ref:Xt})},Qq=function(it,Pn,Xt){return it("textarea",{id:Pn,visibility:"hidden",ref:Xt})},Vj={selector:void 0,target:void 0},eK=hq({props:Xq,setup:function(it,Pn){var Xt=it.init?Jp(Jp({},it.init),Vj):Jp({},Vj),an=pq(it),bt=an.disabled,jt=an.modelValue,zn=an.tagName,Mt=Zl(null),Gt=null,Xn=it.id||bq("tiny-vue"),Cn=it.init&&it.init.inline||it.inline,qt=!!Pn.attrs["onUpdate:modelValue"],En=!0,At=it.initialValue?it.initialValue:"",Tt="",Xe=function(De){return qt?function(){return jt!=null&&jt.value?jt.value:""}:function(){return De?At:Tt}},nt=function(){var De=Xe(En),ee=Jp(Jp({},Xt),{readonly:it.disabled,target:Mt.value,plugins:jq(Xt.plugins,it.plugins),toolbar:it.toolbar||Xt.toolbar,inline:Cn,setup:function(Ye){Gt=Ye,Ye.on("init",function(Bn){return Wq(Bn,it,Pn,Ye,jt,De)}),typeof Xt.setup=="function"&&Xt.setup(Ye)}});Zq(Mt.value)&&(Mt.value.style.visibility=""),GS().init(ee),En=!1};KS(bt,function(De){var ee;Gt!==null&&(typeof((ee=Gt.mode)===null||ee===void 0?void 0:ee.set)=="function"?Gt.mode.set(De?"readonly":"design"):Gt.setMode(De?"readonly":"design"))}),KS(zn,function(De){var ee;qt||(Tt=Gt.getContent()),(ee=GS())===null||ee===void 0||ee.remove(Gt),lq(function(){return nt()})}),Pq(function(){if(GS()!==null)nt();else if(Mt.value&&Mt.value.ownerDocument){var De=it.cloudChannel?it.cloudChannel:"6",ee=it.apiKey?it.apiKey:"no-api-key",Ye=Gq(it.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ee,"/tinymce/").concat(De,"/tinymce.min.js"):it.tinymceScriptSrc;Kq.load(Mt.value.ownerDocument,Ye,nt)}}),Bq(function(){GS()!==null&&GS().remove(Gt)}),Cn||($q(function(){En||nt()}),Iq(function(){var De;qt||(Tt=Gt.getContent()),(De=GS())===null||De===void 0||De.remove(Gt)}));var Un=function(De){var ee;Tt=Gt.getContent(),(ee=GS())===null||ee===void 0||ee.remove(Gt),Xt=Jp(Jp(Jp({},Xt),De),Vj),lq(function(){return nt()})};return Pn.expose({rerender:Un,getEditor:function(){return Gt}}),function(){return Cn?Jq(iq,Xn,Mt,it.tagName):Qq(iq,Xn,Mt)}}});const tK=""+new URL("FiraMono-Medium-CE-6Frqh.woff2",import.meta.url).href,nK=""+new URL("FiraMono-Medium-CjwgnWCQ.woff",import.meta.url).href,oK=""+new URL("merriweather-regular-D4NWdWaV.woff2",import.meta.url).href,sK=""+new URL("merriweather-regular-B5k5JYwq.woff",import.meta.url).href;function al(it){return getComputedStyle(document.body).getPropertyValue(it)}function rK(it){return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${tK}) format('woff2'),
	url(${nK}) format('woff');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${oK}) format('woff2'),
	url(${sK}) format('woff');
}

::selection {
	background: ${al("--background-normal-alt")};
}
body {
	color: ${al("--theme--form--field--input--foreground")};
	background-color: ${al("--theme--form--field--input--background")};
	margin: 20px;
	font-family: ${al("--theme--fonts--sans--font-family")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${al("--foreground-subdued")};
	background-color: ${al("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${al(`--family-${it}`)}, serif;
	color: ${al("--theme--form--field--input--foreground-accent")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${al(`--family-${it}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${al("--theme--primary-accent")};
	text-decoration: none;
}
ul, ol {
	font-family: ${al(`--family-${it}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${al("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${al("--theme--background-accent")};
	border-radius: ${al("--theme--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${al("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${al("--theme--background-accent")};
	border-radius: ${al("--theme--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${al(`--family-${it}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${al("--theme--form--field--input--border-color")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${al("--theme--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${al("--theme--border-radius")};
}
hr {
	background-color: ${al("--theme--form--field--input--border-color")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${al("--theme--form--field--input--border-color")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function aK(it,Pn,Xt){const an=Zl(!1),bt=Zl(null),jt=Zl();KS(()=>{var qt;return(qt=bt.value)==null?void 0:qt.transformationKey},qt=>{jt.value=Xt.storageAssetPresets.value.find(En=>En.key===qt),jt.value&&(bt.value.width=jt.value.width??void 0,bt.value.height=jt.value.height??void 0)});const zn={icon:"image",tooltip:wF.global.t("wysiwyg_options.image"),onAction:qt=>{if(an.value=!0,qt===!0||qt.isActive()){const En=it.value.selection.getNode(),At=En.getAttribute("src"),Tt=At?new URL(At).searchParams:void 0,Xe=En.getAttribute("alt"),nt=En.getAttribute("loading")==="lazy",Un=Number((Tt==null?void 0:Tt.get("width"))||void 0)||void 0,De=Number((Tt==null?void 0:Tt.get("height"))||void 0)||void 0,ee=(Tt==null?void 0:Tt.get("key"))||void 0;if(At===null||Xe===null)return;ee&&(jt.value=Xt.storageAssetPresets.value.find(Ye=>Ye.key===ee)),bt.value={imageUrl:At,alt:Xe,lazy:nt,width:jt.value?jt.value.width??void 0:Un,height:jt.value?jt.value.height??void 0:De,transformationKey:ee,previewUrl:Cn(At,Pn.value)}}else bt.value=null},onSetup:qt=>{const En=At=>{qt.setActive(At.element.tagName==="IMG")};return it.value.on("NodeChange",En),function(){it.value.off("NodeChange",En)}}};return{imageDrawerOpen:an,imageSelection:bt,closeImageDrawer:Mt,onImageSelect:Gt,saveImage:Xn,imageButton:zn};function Mt(){bt.value=null,an.value=!1}function Gt(qt){const En=qt.type?cq(qt.type,!0):cq(Oq.getType(qt.filename_download),!0),At=CF()+"assets/"+qt.id+"."+En;bt.value={imageUrl:Cn(At,Pn.value),alt:qt.title,lazy:!1,width:qt.width,height:qt.height,previewUrl:Cn(At,Pn.value)}}function Xn(){it.value.fire("focus");const qt=bt.value;if(qt===null)return;const En={},At=new URL(qt.imageUrl,"file://");At.searchParams.delete("width"),At.searchParams.delete("height"),At.searchParams.delete("key"),Xt.storageAssetTransform.value==="all"?qt.transformationKey?En.key=qt.transformationKey:(En.width=qt.width,En.height=qt.height):Xt.storageAssetTransform.value==="presets"&&qt.transformationKey&&(En.key=qt.transformationKey);const Xe=`<img src="${Dq(At.toString().replace("file://",""),En)}" alt="${qt.alt}" ${qt.lazy?'loading="lazy" ':""}/>`;it.value.selection.setContent(Xe),it.value.undoManager.add(),Mt()}function Cn(qt,En){if(!qt.includes(CF()+"assets/"))return qt;try{const At=new URL(qt),Tt=new URLSearchParams(At.search);return En?Tt.set("access_token",En):Tt.delete("access_token"),Array.from(Tt).length>0?`${At.origin}${At.pathname}?${Tt.toString()}`:`${At.origin}${At.pathname}`}catch{return qt}}}function cK(it){const Pn=Zl(!1),Xt={url:null,displayText:null,title:null,newTab:!0},an=Zl(Xt),bt=Zl(null),jt=Zl(null),zn={icon:"link",tooltip:wF.global.t("wysiwyg_options.link"),onAction:()=>{if(it.value.plugins.fullscreen.isFullscreen()&&it.value.execCommand("mceFullScreen"),Pn.value=!0,bt.value){it.value.selection.select(jt.value);const Cn=bt.value.getAttribute("href"),qt=bt.value.getAttribute("title"),En=bt.value.innerText,At=bt.value.getAttribute("target");if(Cn===null||En===null)return;an.value={url:Cn,displayText:En,title:qt||null,newTab:At==="_blank"}}else{const Cn=it.value.selection.getContent();try{const qt=new URL(Cn).toString();Mt({url:qt})}catch{Mt({displayText:Cn||null})}}},onSetup:Cn=>{const qt=En=>{let At=En.element;for(jt.value=En.element,bt.value=null;At&&At.id!=="tinymce";){if(At.tagName==="A"){bt.value=At;break}At=At.parentElement}Cn.setActive(!!bt.value)};return it.value.on("NodeChange",qt),function(){it.value.off("NodeChange",qt)}}};return{linkDrawerOpen:Pn,linkSelection:an,linkNode:bt,closeLinkDrawer:Gt,saveLink:Xn,linkButton:zn};function Mt(Cn={}){an.value=Object.assign({},Xt,Cn)}function Gt(){Mt(),Pn.value=!1}function Xn(){it.value.fire("focus");const Cn=an.value;if(Cn.url===null){bt.value&&(it.value.selection.setContent(bt.value.innerText),Gt());return}const qt=`<a href="${Cn.url}" ${Cn.title?`title="${Cn.title}"`:""} ${Cn.newTab?'target="_blank"':""} >${Cn.displayText||Cn.url}</a>`;!bt.value||jt.value===bt.value?it.value.selection.setContent(qt):jt.value&&(jt.value.innerHTML=Cn.displayText||Cn.url,bt.value.setAttribute("data-mce-href",Cn.url),bt.value.setAttribute("href",Cn.url),Cn.title&&bt.value.setAttribute("title",Cn.title),bt.value.setAttribute("target",Cn.newTab?"_blank":"_self"),it.value.selection.select(bt.value),it.value.selection.setNode(bt.value)),it.value.undoManager.add(),Gt()}}function lK(it,Pn){const Xt=Zl(!1),an=Zl(null),bt=Zl(["video","audio"]),jt=Zl(""),zn=Zl(""),Mt={icon:"embed",tooltip:wF.global.t("wysiwyg_options.media"),onAction:Xe=>{if(Xt.value=!0,Xe.isActive()){if(it.value.selection.getContent()===null)return;jt.value=it.value.selection.getContent(),zn.value=jt.value}else an.value=null},onSetup:Xe=>{const nt=Un=>{Xe.setActive(Un.element.tagName==="SPAN"&&Un.element.classList.contains("mce-preview-object"))};return it.value.on("NodeChange",nt),function(){it.value.off("NodeChange",nt)}}},Gt=qS({get(){var Xe;return(Xe=an.value)==null?void 0:Xe.sourceUrl},set(Xe){an.value={...an.value,sourceUrl:Xe},an.value.previewUrl=Tt(Xe,Pn.value)}}),Xn=qS({get(){var Xe;return(Xe=an.value)==null?void 0:Xe.width},set(Xe){an.value!==null&&(an.value={...an.value,width:Xe})}}),Cn=qS({get(){var Xe;return(Xe=an.value)==null?void 0:Xe.height},set(Xe){an.value!==null&&(an.value={...an.value,height:Xe})}});return KS(an,Xe=>{if(jt.value===""){if(Xe===null)return;jt.value=`<${Xe.tag} width="${Xe.width}" height="${Xe.height}" controls><source src="${Xe.sourceUrl}" type="${Xe.type}" /></${Xe.tag}>`}else jt.value=jt.value.replace(/src=".*?"/g,`src="${Xe==null?void 0:Xe.sourceUrl}"`).replace(/width=".*?"/g,`width="${Xe==null?void 0:Xe.width}"`).replace(/height=".*?"/g,`height="${Xe==null?void 0:Xe.height}"`).replace(/type=".*?"/g,`type="${Xe==null?void 0:Xe.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${Xe==null?void 0:Xe.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${Xe==null?void 0:Xe.tag}`)}),KS(jt,Xe=>{var nt,Un,De,ee,Ye;if(Xe==="")an.value=null;else{const Bn=(nt=/<(video|audio|iframe)/g.exec(Xe))==null?void 0:nt[1],tt=((Un=/src="(.*?)"/g.exec(Xe))==null?void 0:Un[1])||void 0,W=Number((De=/width="(.*?)"/g.exec(Xe))==null?void 0:De[1])||void 0,Ot=Number((ee=/height="(.*?)"/g.exec(Xe))==null?void 0:ee[1])||void 0,en=((Ye=/type="(.*?)"/g.exec(Xe))==null?void 0:Ye[1])||void 0;if(tt===void 0)return;const wn=Tt(tt,Pn.value);an.value={tag:Bn,sourceUrl:tt,width:W,height:Ot,type:en,previewUrl:wn}}}),{mediaDrawerOpen:Xt,mediaSelection:an,closeMediaDrawer:qt,openMediaTab:bt,onMediaSelect:En,embed:jt,saveMedia:At,startEmbed:zn,mediaHeight:Cn,mediaWidth:Xn,mediaSource:Gt,mediaButton:Mt};function qt(){jt.value="",zn.value="",an.value=null,Xt.value=!1,bt.value=["video"]}function En(Xe){const nt=CF()+"assets/"+Xe.id,Un=Xe.type.startsWith("audio")?"audio":"video";an.value={sourceUrl:Tt(nt,Pn.value),width:Xe.width||300,height:Xe.height||150,tag:Un,type:Xe.type,previewUrl:Tt(nt,Pn.value)}}function At(){if(it.value.fire("focus"),jt.value!==""){if(zn.value!==""){const Xe=it.value.getContent().replace(zn.value,jt.value);it.value.setContent(Xe)}else it.value.selection.setContent(jt.value);it.value.undoManager.add(),qt()}}function Tt(Xe,nt){if(!Xe.includes(CF()+"assets/"))return Xe;try{const Un=new URL(Xe),De=new URLSearchParams(Un.search);return nt?De.set("access_token",nt):De.delete("access_token"),Array.from(De).length>0?`${Un.origin}${Un.pathname}?${De.toString()}`:`${Un.origin}${Un.pathname}`}catch{return Xe}}}function iK(it){const Pn=Zl(!1),Xt=Zl(),an={icon:"sourcecode",tooltip:wF.global.t("wysiwyg_options.source_code"),onAction:()=>{Pn.value=!0,Xt.value=it.value.getContent()}};return{codeDrawerOpen:Pn,code:Xt,closeCodeDrawer:bt,saveCode:jt,sourceCodeButton:an};function bt(){Pn.value=!1}function jt(){it.value.fire("focus"),it.value.setContent(Xt.value),it.value.undoManager.add(),bt()}}var uK={exports:{}};(function(it){(function(){var Pn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Xt=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},an=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},bt=function(e,n){return jt(function(o,r){return e.eq(n(o),n(r))})},jt=function(e){return{eq:e}},zn=jt(function(e,n){return e===n}),Mt=zn,Gt=function(e){return jt(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Xn=function(e,n){return bt(Gt(e),function(o){return an(o,n)})},Cn=function(e){return jt(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Xn(Mt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},qt=jt(function(e,n){if(e===n)return!0;var o=Pn(e),r=Pn(n);return o!==r?!1:Xt(o)?e===n:o==="array"?Gt(qt).eq(e,n):o==="object"?Cn(qt).eq(e,n):!1});const En=Object.getPrototypeOf,At=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Tt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&At(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Xe=e=>n=>Tt(n)===e,nt=e=>n=>typeof n===e,Un=e=>n=>e===n,De=(e,n)=>Ye(e)&&At(e,n,(o,r)=>En(o)===r),ee=Xe("string"),Ye=Xe("object"),Bn=e=>De(e,Object),tt=Xe("array"),W=Un(null),Ot=nt("boolean"),en=Un(void 0),wn=e=>e==null,_e=e=>!wn(e),ie=nt("function"),ns=nt("number"),so=(e,n)=>{if(tt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},It=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),ao=(e,n)=>o=>e(n(o)),st=e=>()=>e,Po=e=>e,nn=(e,n)=>e===n;function qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const bo=e=>n=>!e(n),zs=e=>()=>{throw new Error(e)},lo=e=>e(),Js=e=>{e()},We=st(!1),ut=st(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return _e(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const Jr=Array.prototype.slice,uo=Array.prototype.indexOf,cs=Array.prototype.push,zo=(e,n)=>uo.call(e,n),Nc=(e,n)=>{const o=zo(e,n);return o===-1?L.none():L.some(o)},Sn=(e,n)=>zo(e,n)>-1,Ro=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},gn=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},ye=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Ct=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},fo=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Bt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Is=(e,n,o)=>(Ct(e,(r,c)=>{o=n(o,r,c)}),o),Bo=(e,n,o)=>(ye(e,(r,c)=>{o=n(o,r,c)}),o),zr=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},ms=(e,n)=>zr(e,n,We),Us=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return L.some(o)}return L.none()},tc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!tt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);cs.apply(n,e[o])}return n},Ps=(e,n)=>tc(gn(e,n)),ls=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},qo=e=>{const n=Jr.call(e,0);return n.reverse(),n},Qr=(e,n)=>Bt(e,o=>!Sn(n,o)),$e=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Je=(e,n)=>{const o=Jr.call(e,0);return o.sort(n),o},on=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),Ft=e=>on(e,0),Jn=e=>on(e,e.length-1),Ko=ie(Array.from)?Array.from:e=>Jr.call(e),wr=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},Hn=(e,n)=>{const o=[],r=ie(n)?c=>Ro(o,u=>n(u,c)):c=>Sn(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},fs=Object.keys,ur=Object.hasOwnProperty,ft=(e,n)=>{const o=fs(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},yo=(e,n)=>Ar(e,(o,r)=>({k:r,v:n(o,r)})),Ar=(e,n)=>{const o={};return ft(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},la=e=>(n,o)=>{e[o]=n},ia=(e,n,o,r)=>{ft(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},ea=(e,n)=>{const o={},r={};return ia(e,n,la(o),la(r)),{t:o,f:r}},Yo=(e,n)=>{const o={};return ia(e,n,la(o),It),o},va=(e,n)=>{const o=[];return ft(e,(r,c)=>{o.push(n(r,c))}),o},Wa=e=>va(e,Po),os=(e,n)=>pn(e,n)?L.from(e[n]):L.none(),pn=(e,n)=>ur.call(e,n),pr=(e,n)=>pn(e,n)&&e[n]!==void 0&&e[n]!==null,Za=(e,n,o=qt)=>Cn(o).eq(e,n),jl=e=>{const n={};return ye(e,o=>{n[o]={}}),fs(n)},Cl=e=>e.length!==void 0,is=Array.isArray,nr=e=>{if(is(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ws=(e,n,o)=>{if(!e)return!1;if(o=o||e,Cl(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(pn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Na=(e,n)=>{const o=[];return Ws(e,(r,c)=>{o.push(n(r,c,e))}),o},cl=(e,n)=>{const o=[];return Ws(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Br=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ue=(e,n,o,r)=>{let c=en(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},re=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Oe=e=>e[e.length-1],He=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},ln=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=c||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!C,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,N=!E&&!C&&!M;return{isiPad:st(c),isiPhone:st(u),isTablet:st(C),isPhone:st(E),isTouch:st(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:st(M),isDesktop:st(N)}},xn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Qn=(e,n)=>{const o=xn(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Vn(r(1),r(2))},Bs=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?pe():Qn(e,o)},pe=()=>Vn(0,0),Vn=(e,n)=>({major:e,minor:n}),Zs={nu:Vn,detect:Bs,unknown:pe},br=(e,n)=>wr(n.brands,o=>{const r=o.brand.toLowerCase();return ms(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Zs.nu(parseInt(o.version,10),0)}))}),Ur=(e,n)=>{const o=String(n).toLowerCase();return ms(e,r=>r.search(o))},Xo=(e,n)=>Ur(e,n).map(o=>{const r=Zs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),wl=(e,n)=>Ur(e,n).map(o=>{const r=Zs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),nc=(e,n)=>e.substring(n),ta=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Or=(e,n)=>Uo(e,n)?nc(e,n.length):e,$o=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?en(r)?!0:c+n.length<=r:!1},Uo=(e,n)=>ta(e,n,0),vr=(e,n)=>ta(e,n,e.length-n.length),na=e=>n=>n.replace(e,""),bc=na(/^\s+|\s+$/g),Gl=na(/^\s+/g),Zc=na(/\s+$/g),Fo=e=>e.length>0,dr=e=>!Fo(e),ya=(e,n)=>n<=0?"":new Array(n+1).join(e),Sl=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},ua=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Os=e=>n=>$o(n,e),hs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>$o(e,"edge/")&&$o(e,"chrome")&&$o(e,"safari")&&$o(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ua],search:e=>$o(e,"chrome")&&!$o(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>$o(e,"msie")||$o(e,"trident")},{name:"Opera",versionRegexes:[ua,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Os("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Os("firefox")},{name:"Safari",versionRegexes:[ua,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>($o(e,"safari")||$o(e,"mobile/"))&&$o(e,"applewebkit")}],Pa=[{name:"Windows",search:Os("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>$o(e,"iphone")||$o(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Os("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Os("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Os("linux"),versionRegexes:[]},{name:"Solaris",search:Os("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Os("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Os("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ql={browsers:st(hs),oses:st(Pa)},jo="Edge",Wr="Chromium",Ba="IE",yr="Opera",oc="Firefox",Pc="Safari",Ca=()=>sc({current:void 0,version:Zs.unknown()}),sc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(jo),isChromium:r(Wr),isIE:r(Ba),isOpera:r(yr),isFirefox:r(oc),isSafari:r(Pc)}},vc={unknown:Ca,nu:sc,edge:st(jo),chromium:st(Wr),ie:st(Ba),opera:st(yr),firefox:st(oc),safari:st(Pc)},Pi="Windows",ja="iOS",ll="Android",da="Linux",yc="macOS",xl="Solaris",Kl="FreeBSD",Ou="ChromeOS",Bi=()=>Ga({current:void 0,version:Zs.unknown()}),Ga=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Pi),isiOS:r(ja),isAndroid:r(ll),isMacOS:r(yc),isLinux:r(da),isSolaris:r(xl),isFreeBSD:r(Kl),isChromeOS:r(Ou)}},su={unknown:Bi,nu:Ga,windows:st(Pi),ios:st(ja),android:st(ll),linux:st(da),macos:st(yc),solaris:st(xl),freebsd:st(Kl),chromeos:st(Ou)},ae={detect:(e,n,o)=>{const r=ql.browsers(),c=ql.oses(),u=n.bind(C=>br(r,C)).orThunk(()=>Xo(r,e)).fold(vc.unknown,vc.nu),f=wl(c,e).fold(su.unknown,su.nu),b=ln(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ve=e=>window.matchMedia(e).matches;let Ue=He(()=>ae.detect(navigator.userAgent,L.from(navigator.userAgentData),ve));const dt=()=>Ue(),sn=navigator.userAgent,vo=dt(),ko=vo.browser,oo=vo.os,us=vo.deviceType,js=sn.indexOf("Windows Phone")!==-1,vt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ko.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ko.isIE(),windowsPhone:js,browser:{current:ko.current,version:ko.version,isChromium:ko.isChromium,isEdge:ko.isEdge,isFirefox:ko.isFirefox,isIE:ko.isIE,isOpera:ko.isOpera,isSafari:ko.isSafari},os:{current:oo.current,version:oo.version,isAndroid:oo.isAndroid,isChromeOS:oo.isChromeOS,isFreeBSD:oo.isFreeBSD,isiOS:oo.isiOS,isLinux:oo.isLinux,isMacOS:oo.isMacOS,isSolaris:oo.isSolaris,isWindows:oo.isWindows},deviceType:{isDesktop:us.isDesktop,isiPad:us.isiPad,isiPhone:us.isiPhone,isPhone:us.isPhone,isTablet:us.isTablet,isTouch:us.isTouch,isWebView:us.isWebView}},Du=/^\s*|\s*$/g,bs=e=>wn(e)?"":(""+e).replace(Du,""),$=(e,n)=>n?n==="array"&&is(e)?!0:typeof e===n:e!==void 0,X=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},oe=pn,Re=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(pn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Pt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ws(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Pt(c,n,o,r),!0)))},ct={trim:bs,isArray:is,is:$,toArray:nr,makeMap:X,each:Ws,map:Na,grep:cl,inArray:Br,hasOwn:oe,extend:Re,walk:Pt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>tt(e)?e:e===""?[]:Na(e.split(n||","),bs),_addCacheSuffix:e=>{const n=vt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},xs=(e,n,o=nn)=>e.exists(r=>o(r,n)),qa=(e,n,o=nn)=>$r(e,n,o).getOr(e.isNone()&&n.isNone()),$s=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},$r=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),il=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),_o=(e,n)=>e?L.some(n):L.none(),Ka=typeof window<"u"?window:Function("return this;")(),qs=(e,n)=>{let o=n??Ka;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Yl=(e,n)=>{const o=e.split(".");return qs(o,n)},Qs=(e,n)=>Yl(e,n),Ru=(e,n)=>{const o=Qs(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},xm=Object.getPrototypeOf,yg=e=>Ru("HTMLElement",e),or=e=>{const n=Yl("ownerDocument.defaultView",e);return Ye(e)&&(yg(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(xm(e).constructor.name))},Tl=8,ma=9,wa=11,Ya=1,Fd=3,To=e=>e.dom.nodeName.toLowerCase(),rc=e=>e.dom.nodeType,$a=e=>n=>rc(n)===e,K=e=>rc(e)===Tl||To(e)==="#comment",se=e=>Te(e)&&or(e.dom),Te=$a(Ya),Me=$a(Fd),un=$a(ma),go=$a(wa),Ls=e=>n=>Te(n)&&To(n)===e,fa=(e,n,o)=>{if(ee(o)||Ot(o)||ns(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Co=(e,n,o)=>{fa(e.dom,n,o)},Zr=(e,n)=>{const o=e.dom;ft(n,(r,c)=>{fa(o,c,r)})},Ks=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Dr=(e,n)=>L.from(Ks(e,n)),Sr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Cr=(e,n)=>{e.dom.removeAttribute(n)},Bc=e=>{const n=e.dom.attributes;return n==null||n.length===0},Xl=e=>Bo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Sa=(e,n)=>{const o=Ks(e,n);return o===void 0||o===""?[]:o.split(" ")},$c=(e,n,o)=>{const c=Sa(e,n).concat([o]);return Co(e,n,c.join(" ")),!0},ui=(e,n,o)=>{const r=Bt(Sa(e,n),c=>c!==o);return r.length>0?Co(e,n,r.join(" ")):Cr(e,n),!1},di=e=>e.dom.classList!==void 0,af=e=>Sa(e,"class"),Mu=(e,n)=>$c(e,"class",n),Jl=(e,n)=>ui(e,"class",n),Cc=(e,n)=>Sn(af(e),n)?Jl(e,n):Mu(e,n),Nu=(e,n)=>{di(e)?e.dom.classList.add(n):Mu(e,n)},Hd=e=>{(di(e)?e.dom.classList:af(e)).length===0&&Cr(e,"class")},$i=(e,n)=>{di(e)?e.dom.classList.remove(n):Jl(e,n),Hd(e)},Cg=(e,n)=>{const o=di(e)?e.dom.classList.toggle(n):Cc(e,n);return Hd(e),o},Vd=(e,n)=>di(e)&&e.dom.classList.contains(n),wg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return ad(r.childNodes[0])},rd=(e,n)=>{const r=(n||document).createElement(e);return ad(r)},Sg=(e,n)=>{const r=(n||document).createTextNode(e);return ad(r)},ad=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},de={fromHtml:wg,fromTag:rd,fromText:Sg,fromDom:ad,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(ad)},Tm=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},jc=(e,n)=>{const o=e.dom;if(o.nodeType!==Ya)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},ru=e=>e.nodeType!==Ya&&e.nodeType!==ma&&e.nodeType!==wa||e.childElementCount===0,xg=(e,n)=>{const o=n===void 0?document:n.dom;return ru(o)?[]:gn(o.querySelectorAll(e),de.fromDom)},Dh=(e,n)=>{const o=n===void 0?document:n.dom;return ru(o)?L.none():L.from(o.querySelector(e)).map(de.fromDom)},Jo=(e,n)=>e.dom===n.dom,wc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ul=e=>de.fromDom(e.dom.ownerDocument),xa=e=>un(e)?e:ul(e),cd=e=>de.fromDom(xa(e).dom.documentElement),mi=e=>de.fromDom(xa(e).dom.defaultView),ac=e=>L.from(e.dom.parentNode).map(de.fromDom),fi=e=>L.from(e.dom.parentElement).map(de.fromDom),Tg=(e,n)=>{const o=ie(n)?n:We;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=de.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Rh=e=>{const n=o=>Bt(o,r=>!Jo(e,r));return ac(e).map(Ta).map(n).getOr([])},El=e=>L.from(e.dom.previousSibling).map(de.fromDom),gi=e=>L.from(e.dom.nextSibling).map(de.fromDom),cf=e=>qo(Tm(e,El)),Sc=e=>Tm(e,gi),Ta=e=>gn(e.dom.childNodes,de.fromDom),Pu=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(de.fromDom)},zd=e=>Pu(e,0),Ql=e=>Pu(e,e.dom.childNodes.length-1),Xa=e=>e.dom.childNodes.length,lf=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return de.fromDom(n)},uf=e=>go(e)&&_e(e.dom.host),df=ie(Element.prototype.attachShadow)&&ie(Node.prototype.getRootNode),Em=st(df),kl=df?e=>de.fromDom(e.dom.getRootNode()):xa,mf=e=>uf(e)?e:lf(xa(e)),Mh=e=>uf(e)?e:de.fromDom(xa(e).dom.body),e1=e=>{const n=kl(e);return uf(n)?L.some(n):L.none()},Nh=e=>de.fromDom(e.dom.host),ff=e=>{if(Em()&&_e(e.target)){const n=de.fromDom(e.target);if(Te(n)&&km(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ft(o)}}return L.from(e.target)},km=e=>_e(e.dom.shadowRoot),au=e=>{const n=Me(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return e1(de.fromDom(n)).fold(()=>o.body.contains(n),ao(au,Nh))};var Eg=(e,n,o,r,c)=>e(o,r)?L.some(o):ie(c)&&c(o)?L.none():n(o,r,c);const Ys=(e,n,o)=>{let r=e.dom;const c=ie(o)?o:We;for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r);if(n(u))return L.some(u);if(c(u))break}return L.none()},xr=(e,n,o)=>Eg((c,u)=>u(c),Ys,e,n,o),Gc=(e,n)=>{const o=e.dom;return o.parentNode?kg(de.fromDom(o.parentNode),r=>!Jo(e,r)&&n(r)):L.none()},kg=(e,n)=>{const o=c=>n(de.fromDom(c));return ms(e.dom.childNodes,o).map(de.fromDom)},_g=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=de.fromDom(r.childNodes[c]);if(n(u))return L.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return L.none()};return o(e.dom)},oa=(e,n,o)=>Ys(e,r=>jc(r,n),o),dn=(e,n)=>Dh(n,e),Ii=(e,n,o)=>Eg((c,u)=>jc(c,u),oa,e,n,o),Ph=e=>Ii(e,"[contenteditable]"),ga=(e,n=!1)=>au(e)?e.dom.isContentEditable:Ph(e).fold(st(n),o=>Ts(o)==="true"),Ts=e=>e.dom.contentEditable,ld=e=>e.style!==void 0&&ie(e.style.getPropertyValue),Ag=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ld(e)&&e.style.setProperty(n,o)},gf=(e,n)=>{ld(e)&&e.style.removeProperty(n)},hf=(e,n,o)=>{const r=e.dom;Ag(r,n,o)},eo=(e,n)=>{const o=e.dom;ft(n,(r,c)=>{Ag(o,c,r)})},Rr=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!au(e)?Ud(o,n):c},Ud=(e,n)=>ld(e)?e.style.getPropertyValue(n):"",qc=(e,n)=>{const o=e.dom,r=Ud(o,n);return L.from(r).filter(c=>c.length>0)},Ic=e=>{const n={},o=e.dom;if(ld(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Kc=(e,n)=>{const o=e.dom;gf(o,n),xs(Dr(e,"style").map(bc),"")&&Cr(e,"style")},sa=e=>e.dom.offsetWidth,xc=(e,n)=>{ac(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},_l=(e,n)=>{gi(e).fold(()=>{ac(e).each(c=>{mr(c,n)})},r=>{xc(r,n)})},_m=(e,n)=>{zd(e).fold(()=>{mr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},mr=(e,n)=>{e.dom.appendChild(n.dom)},Og=(e,n)=>{xc(e,n),mr(n,e)},Hr=(e,n)=>{ye(n,(o,r)=>{const c=r===0?e:n[r-1];_l(c,o)})},Bu=(e,n)=>{ye(n,o=>{mr(e,o)})},hi=e=>{e.dom.textContent="",ye(Ta(e),n=>{Ds(n)})},Ds=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},pi=e=>{const n=Ta(e);n.length>0&&Hr(e,n),Ds(e)},Wd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Ta(de.fromDom(r))},cu=e=>gn(e,de.fromDom),Xs=e=>e.dom.innerHTML,$u=(e,n)=>{const r=ul(e).dom,c=de.fromDom(r.createDocumentFragment()),u=Wd(n,r);Bu(c,u),hi(e),mr(e,c)},Al=e=>{const n=de.fromTag("div"),o=de.fromDom(e.dom.cloneNode(!0));return mr(n,o),Xs(n)},wo=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),id=e=>{const n=de.fromDom(ff(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return wo(n,e.clientX,e.clientY,o,r,c,e)},Am=(e,n)=>o=>{e(o)&&n(id(o))},pf=(e,n,o,r,c)=>{const u=Am(o,r);return e.dom.addEventListener(n,u,c),{unbind:qe(bf,e,n,u,c)}},Bh=(e,n,o,r)=>pf(e,n,o,r,!1),bf=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},$h=(e,n)=>({left:e,top:n,translate:(r,c)=>$h(e+r,n+c)}),x=$h,R=e=>{const n=e.getBoundingClientRect();return x(n.left,n.top)},V=(e,n)=>e!==void 0?e:n!==void 0?n:0,ce=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return x(o.offsetLeft,o.offsetTop);const u=V(r==null?void 0:r.pageYOffset,c.scrollTop),f=V(r==null?void 0:r.pageXOffset,c.scrollLeft),b=V(c.clientTop,o.clientTop),C=V(c.clientLeft,o.clientLeft);return ge(e).translate(f-C,u-b)},ge=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?x(r.offsetLeft,r.offsetTop):au(e)?R(n):x(0,0)},Qe=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return x(o,r)},An=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Kn=(e,n)=>{dt().browser.isSafari()&&ie(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},jn=e=>{const n=e===void 0?window:e;return dt().browser.isFirefox()?L.none():L.from(n.visualViewport)},_n=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),sr=e=>{const n=e===void 0?window:e,o=n.document,r=Qe(de.fromDom(o));return jn(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return _n(r.left,r.top,u,f)},c=>_n(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Mr=(e,n)=>Bt(Ta(e),n),Yc=(e,n)=>{let o=[];return ye(Ta(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Yc(r,n))}),o},Ir=(e,n)=>xg(n,e),Ih=(e,n,o)=>Ys(e,n,o).isSome(),Ub=(e,n)=>Gc(e,n).isSome(),t1=(e,n)=>_g(e,n).isSome();class cc{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Lh="\uFEFF",Ea=" ",n1=e=>e===Lh,lc=e=>e.replace(/\uFEFF/g,""),Rn=/^[ \t\r\n]*$/,bi=e=>Rn.test(e),vf=e=>{for(const n of e)if(!n1(n))return!1;return!0},yf=e=>" \f	\v".indexOf(e)!==-1,Wb=e=>e===`
`||e==="\r",o1=(e,n)=>n<e.length&&n>=0?Wb(e[n]):!1,Li=(e,n=4,o=!0,r=!0)=>{const c=ya(" ",n),u=e.replace(/\t/g,c);return Bo(u,(b,C)=>yf(C)||C===Ea?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||o1(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Ea}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Wb(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},Iu=e=>n=>!!n&&n.nodeType===e,Zd=e=>!!e&&!Object.getPrototypeOf(e),Ht=Iu(1),ei=e=>Ht(e)&&se(de.fromDom(e)),s1=e=>Ht(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Om=e=>{const n=e.toLowerCase();return o=>_e(o)&&o.nodeName.toLowerCase()===n},Fi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Sn(n,r)}return!1}},Dg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ht(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},jd=e=>n=>Ht(n)&&n.hasAttribute(e),Dm=e=>Ht(e)&&e.hasAttribute("data-mce-bogus"),Rg=e=>Ht(e)&&e.getAttribute("data-mce-bogus")==="all",lu=e=>Ht(e)&&e.tagName==="TABLE",Zb=e=>n=>!!(ei(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Tr=Fi(["textarea","input"]),at=Iu(3),Xc=Iu(4),iu=Iu(7),Ia=Iu(8),Cf=Iu(9),ka=Iu(11),ss=Om("br"),Fh=Om("img"),Ze=Zb("true"),Qo=Zb("false"),Hh=Fi(["td","th"]),ha=Fi(["td","th","caption"]),Tc=Fi(["video","audio","object","embed"]),py=Om("li"),ti=Om("details"),by=Om("summary"),ud={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},jb=(e,n,o)=>{const r=de.fromDom(n),c=de.fromDom(e),u=o.getWhitespaceElements();return Ih(c,b=>pn(u,To(b)),qe(Jo,r))},ni=e=>Ht(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),es=(e,n)=>Ht(e)&&pn(n.getNonEmptyElements(),e.nodeName),Lu=jd("data-mce-bookmark"),Rm=e=>fi(de.fromDom(e)).exists(n=>!ga(n)),pa=(e,n,o)=>bi(e.data)&&!jb(e,n,o),r1=(e,n,o,r)=>at(e)&&!pa(e,n,o)&&(!r.includeZwsp||!vf(e.data)),Fu=(e,n,o,r)=>ie(r.isContent)&&r.isContent(n)||es(n,e)||Lu(n)||ni(n)||r1(n,o,e,r)||Qo(n)||Ze(n)&&Rm(n),uu=(e,n,o)=>{const r={...ud,...o};if(r.checkRootAsContent&&Fu(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new cc(c,n);do{if(r.skipBogus&&Ht(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(Ia(c)){c=f.next(!0);continue}if(ss(c)){u++,c=f.next();continue}if(Fu(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},Fs=(e,n,o)=>uu(e,n.dom,{checkRootAsContent:!0,...o}),wf=(e,n,o)=>Fu(e,n,n,{includeZwsp:ud.includeZwsp,...o}),Se=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},vi=e=>{const n=Se(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(b))}}},Sf=e=>{const n=Se(L.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(setInterval(b,e)))}}},ic=()=>{const e=vi(It);return{...e,on:o=>e.get().each(o)}},Hi=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},jr=e=>Hi(e)!=="html",Vr=e=>jr(e.nodeName),S=e=>Hi(e.nodeName),k=["svg","math"],F=()=>{const e=ic(),n=()=>e.get().map(S).getOr("html");return{track:c=>(Vr(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Y="data-mce-block",fe=e=>Bt(fs(e),n=>!/[A-Z]/.test(n)),ze=e=>gn(fe(e),n=>{const o=CSS.escape(n);return`${o}:`+gn(k,r=>`not(${r} ${o})`).join(":")}).join(","),yt=(e,n)=>_e(n.querySelector(e))?(n.setAttribute(Y,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Y),!1),Jt=(e,n)=>{const o=ze(e.getTransparentElements()),r=ze(e.getBlockElements());return Bt(n.querySelectorAll(o),c=>yt(r,c))},Wn=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(uu(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},ho=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();Wn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();Wn(e,f,!1),uu(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),uu(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),uu(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},vs=(e,n,o)=>{const r=e.getBlockElements(),c=de.fromDom(n),u=b=>To(b)in r,f=b=>Jo(b,c);ye(cu(o),b=>{Ys(b,u,f).each(C=>{const E=Mr(b,M=>u(M)&&!e.isValidChild(To(C),To(M)));if(E.length>0){const M=fi(C);ye(E,N=>{Ys(N,u,f).each(P=>{ho(e,P.dom,N.dom)})}),M.each(N=>Jt(e,N.dom))}})})},rs=(e,n,o)=>{ye([...o,...du(e,n)?[n]:[]],r=>ye(Ir(de.fromDom(r),r.nodeName.toLowerCase()),c=>{xf(e,c.dom)&&pi(c)}))},er=(e,n)=>{const o=Jt(e,n);vs(e,n,o),rs(e,n,o)},Ol=(e,n)=>{if(Gd(e,n)){const o=ze(e.getBlockElements());yt(o,n)}},Hu=(e,n,o)=>{const r=u=>Jo(u,de.fromDom(n)),c=Tg(de.fromDom(o),r);on(c,c.length-2).filter(Te).fold(()=>er(e,n),u=>er(e,u.dom))},Lc=e=>e.hasAttribute(Y),Vu=(e,n)=>pn(e.getTransparentElements(),n),Gd=(e,n)=>Ht(n)&&Vu(e,n.nodeName),du=(e,n)=>Gd(e,n)&&Lc(n),xf=(e,n)=>Gd(e,n)&&!Lc(n),yi=(e,n)=>n.type===1&&Vu(e,n.name)&&ee(n.attr(Y)),Vh=dt().browser,Mg=e=>ms(e,Te),zh=e=>Vh.isFirefox()&&To(e)==="table"?Mg(Ta(e)).filter(n=>To(n)==="caption").bind(n=>Mg(Sc(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Uh=(e,n)=>e.children&&Sn(e.children,n),La=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Rr(de.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Uh(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Uh(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=zh(de.fromDom(n))}return{x:r,y:c}},Ao=(e,n={})=>{let o=0;const r={},c=de.fromDom(e),u=xa(c),f=he=>{n.referrerPolicy=he},b=he=>{n.contentCssCors=he},C=he=>{mr(mf(c),he)},E=he=>{const we=mf(c);dn(we,"#"+he).each(Ds)},M=he=>os(r,he).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=he=>new Promise((we,be)=>{let Ae;const ot=ct._addCacheSuffix(he),wt=M(ot);r[ot]=wt,wt.count++;const zt=(Qt,bn)=>{ye(Qt,Js),wt.status=bn,wt.passed=[],wt.failed=[],Ae&&(Ae.onload=null,Ae.onerror=null,Ae=null)},Ve=()=>zt(wt.passed,2),Ie=()=>zt(wt.failed,3);if(we&&wt.passed.push(we),be&&wt.failed.push(be),wt.status===1)return;if(wt.status===2){Ve();return}if(wt.status===3){Ie();return}wt.status=1;const et=de.fromTag("link",u.dom);Zr(et,{rel:"stylesheet",type:"text/css",id:wt.id}),n.contentCssCors&&Co(et,"crossOrigin","anonymous"),n.referrerPolicy&&Co(et,"referrerpolicy",n.referrerPolicy),Ae=et.dom,Ae.onload=Ve,Ae.onerror=Ie,C(et),Co(et,"href",ot)}),P=(he,we)=>{const be=M(he);r[he]=be,be.count++;const Ae=de.fromTag("style",u.dom);Zr(Ae,{rel:"stylesheet",type:"text/css",id:be.id}),Ae.dom.innerHTML=we,C(Ae)},j=he=>Promise.allSettled(gn(he,be=>N(be).then(st(be)))).then(be=>{const Ae=fo(be,ot=>ot.status==="fulfilled");return Ae.fail.length>0?Promise.reject(gn(Ae.fail,ot=>ot.reason)):gn(Ae.pass,ot=>ot.value)}),Q=he=>{const we=ct._addCacheSuffix(he);os(r,we).each(be=>{--be.count===0&&(delete r[we],E(be.id))})};return{load:N,loadRawCss:P,loadAll:j,unload:Q,unloadRawCss:he=>{os(r,he).each(we=>{--we.count===0&&(delete r[he],E(we.id))})},unloadAll:he=>{ye(he,we=>{Q(we)})},_setReferrerPolicy:f,_setContentCssCors:b}},_a=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=kl(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const f=Ao(u,r);return e.set(u,f),f})}}})(),oi=e=>e.nodeName.toLowerCase()==="span",Dl=(e,n)=>_e(e)&&(wf(n,e)||n.isInline(e.nodeName.toLowerCase())),Wh=(e,n,o)=>{const r=new cc(e,n).prev(!1),c=new cc(e,n).next(!1),u=en(r)||Dl(r,o),f=en(c)||Dl(c,o);return u&&f},zu=e=>oi(e)&&e.getAttribute("data-mce-type")==="bookmark",Mm=(e,n,o)=>at(e)&&e.data.length>0&&Wh(e,n,o),qd=e=>Ht(e)?e.childNodes.length>0:!1,dd=e=>ka(e)||Cf(e),Kd=(e,n,o,r)=>{var c;const u=r||n;if(Ht(n)&&zu(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)Kd(e,f[b],o,u);if(Ht(n)){const b=n.childNodes;b.length===1&&zu(b[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(b[0],n))}return!dd(n)&&!wf(o,n)&&!qd(n)&&!Mm(n,u,o)&&e.remove(n),n},Uu=ct.makeMap,a1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zh=/[<>&\"\']/g,Ng=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,YS={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},md={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},XS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},vy=e=>{const n=de.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Gr=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!md[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Gb=Gr("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),fd=(e,n)=>e.replace(n?a1:Yd,o=>md[o]||o),Tf=e=>(""+e).replace(Zh,n=>md[n]||n),Nm=(e,n)=>e.replace(n?a1:Yd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":md[o]||"&#"+o.charCodeAt(0)+";"),mu=(e,n,o)=>{const r=o||Gb;return e.replace(n?a1:Yd,c=>md[c]||r[c]||c)},gd={encodeRaw:fd,encodeAllRaw:Tf,encodeNumeric:Nm,encodeNamed:mu,getEncodeFunc:(e,n)=>{const o=Gr(n)||Gb,r=(f,b)=>f.replace(b?a1:Yd,C=>md[C]!==void 0?md[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),c=(f,b)=>mu(f,b,o),u=Uu(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:mu:u.numeric?Nm:fd},decode:e=>e.replace(Ng,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):YS[o]||String.fromCharCode(o)):XS[n]||Gb[n]||vy(n))},Jc=(e,n)=>(e=ct.trim(e),e?e.split(n||" "):[]),l1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),yy=e=>Ye(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",i1=e=>{const n=o=>tt(o)?gn(o,n):yy(o)?new RegExp(o.source,o.flags):Ye(o)?yo(o,n):o;return n(e)},u1=e=>{const n=/^(~)?(.+)$/;return Ps(Jc(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Cy=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Pg=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},hd=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Pg(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Rl={html4:He(()=>hd("html4")),html5:He(()=>hd("html5")),"html5-strict":He(()=>hd("html5-strict"))},gu=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Rl[e]();return n==="blocks"?L.some(o):n==="phrasing"?L.some(r):n==="flow"?L.some(c):L.none()},Ef=e=>{const n=Cy(e),{phrasingContent:o,flowContent:r}=Pg(e),c={},u=(C,E,M)=>{c[C]={attributes:$e(E,st({})),attributesOrder:E,children:$e(M,st({}))}},f=(C,E="",M="")=>{const N=Jc(M),P=Jc(C);let j=P.length;const Q=[...n,...Jc(E)];for(;j--;)u(P[j],Q.slice(),N)},b=(C,E)=>{const M=Jc(C),N=Jc(E);let P=M.length;for(;P--;){const j=c[M[P]];for(let Q=0,q=N.length;Q<q;Q++)j.attributes[N[Q]]={},j.attributesOrder.push(N[Q])}};return e!=="html5-strict"&&(ye(Jc("acronym applet basefont big font strike tt"),M=>{f(M,"",o)}),ye(Jc("center dir isindex noframes"),M=>{f(M,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ye([c.video,c.audio],C=>{delete C.children.audio,delete C.children.video}),ye(Jc("a form meter progress dfn"),C=>{c[C]&&delete c[C].children[C]}),delete c.caption.children.table,delete c.script,c},wy=e=>e==="-"?"remove":"add",Bg=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Sy=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ps(Jc(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?wy(c):"replace",f=r[2],b=Ps(Jc(r[3],"|"),C=>Bg(C).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},JS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return ye(Jc(e,"|"),f=>{const b=o.exec(f);if(b){const C={},E=b[1],M=b[2].replace(/[\\:]:/g,":"),N=b[3],P=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(M),C.required=!0),E==="-"){delete c[M],u.splice(ct.inArray(u,M),1);return}if(N&&(N==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:M,value:P}),C.defaultValue=P):N==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:M,value:P}),C.forcedValue=P):N==="<"&&(C.validValues=ct.makeMap(P,"?"))),r.test(M)){const j=C;n.attributePatterns=n.attributePatterns||[],j.pattern=l1(M),n.attributePatterns.push(j)}else c[M]||u.push(M),c[M]=C}})},QS=(e,n)=>{ft(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},e2=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ps(Jc(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],C=c[4],E=c[5],M={attributes:{},attributesOrder:[]};if(e.each(N=>QS(N,M)),u==="#"?M.paddEmpty=!0:u==="-"&&(M.removeEmpty=!0),C==="!"&&(M.removeEmptyAttrs=!0),E&&JS(E,M),b&&(M.outputName=f),f==="@")if(e.isNone())e=L.some(M);else return[];return[b?{name:f,element:M,aliasName:b}:{name:f,element:M}]}else return[]})},kf={},$g=ct.makeMap,mo=ct.each,Tn=ct.extend,_f=ct.explode,d1=(e,n={})=>{const o=$g(e," ",$g(e.toUpperCase()," "));return Tn(o,n)},qb=e=>d1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),xy=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),mo(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?$g(r,/[, ]/):_f(r,/[, ]/)}),o}else return},Xd=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(vn,Zo,Fr)=>{const Xr=e[vn];if(Xr)return $g(Xr,/[, ]/,$g(Xr.toUpperCase(),/[, ]/));{let Ma=kf[vn];return Ma||(Ma=d1(Zo,Fr),kf[vn]=Ma),Ma}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",E=Ef(C);e.verify_html===!1&&(e.valid_elements="*[*]");const M=xy(e.valid_styles),N=xy(e.invalid_styles,"map"),P=xy(e.valid_classes,"map"),j=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Q=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),te=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),he="td th iframe video audio object script code",we=b("non_empty_elements",he+" pre svg textarea summary",q),be=b("move_caret_before_on_enter_elements",he+" table",q),Ae="h1 h2 h3 h4 h5 h6",ot=b("text_block_elements",Ae+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),wt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ot),zt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ve=b("transparent_elements","a ins del canvas map"),Ie=b("wrap_block_elements","pre "+Ae);mo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),vn=>{f[vn]=new RegExp("</"+vn+"[^>]*>","gi")});const et=vn=>{const Zo=L.from(o["@"]),Fr=/[*?+]/;ye(e2(Zo,vn??""),({name:Xr,element:Ma,aliasName:Mc})=>{if(Mc&&(o[Mc]=Ma),Fr.test(Xr)){const ba=Ma;ba.pattern=l1(Xr),c.push(ba)}else o[Xr]=Ma})},Qt=vn=>{c=[],ye(fs(o),Zo=>{delete o[Zo]}),et(vn)},bn=(vn,Zo)=>{var Fr,Xr;delete kf.text_block_elements,delete kf.block_elements;const Ma=Zo.extends?!Ji(Zo.extends):!1,Mc=Zo.extends;if(r[vn]=Mc?r[Mc]:{},u[vn]=Mc??vn,we[vn.toUpperCase()]={},we[vn]={},Ma||(wt[vn.toUpperCase()]={},wt[vn]={}),Mc&&!o[vn]&&o[Mc]){const ba=i1(o[Mc]);delete ba.removeEmptyAttrs,delete ba.removeEmpty,o[vn]=ba}else o[vn]={attributesOrder:[],attributes:{}};if(tt(Zo.attributes)){const ba=vl=>{ca.attributesOrder.push(vl),ca.attributes[vl]={}},ca=(Fr=o[vn])!==null&&Fr!==void 0?Fr:{};delete ca.attributesDefault,delete ca.attributesForced,delete ca.attributePatterns,delete ca.attributesRequired,ca.attributesOrder=[],ca.attributes={},ye(Zo.attributes,vl=>{const Au=Cy(C);Bg(vl).each(({preset:Bd,name:$d})=>{Bd?$d==="global"&&ye(Au,ba):ba($d)})}),o[vn]=ca}if(Ot(Zo.padEmpty)){const ba=(Xr=o[vn])!==null&&Xr!==void 0?Xr:{};ba.paddEmpty=Zo.padEmpty,o[vn]=ba}if(tt(Zo.children)){const ba={},ca=Au=>{ba[Au]={}},vl=Au=>{gu(C,Au).each(Bd=>{ye(Bd,ca)})};ye(Zo.children,Au=>{Bg(Au).each(({preset:Bd,name:$d})=>{Bd?vl($d):ca($d)})}),r[vn]=ba}Mc&&ft(r,(ba,ca)=>{ba[Mc]&&(r[ca]=ba=Tn({},r[ca]),ba[vn]=ba[Mc])})},co=vn=>{ye(u1(vn??""),({name:Zo,cloneName:Fr})=>{bn(Zo,{extends:Fr})})},Do=vn=>{Ye(vn)?ft(vn,(Zo,Fr)=>bn(Fr,Zo)):ee(vn)&&co(vn)},ps=vn=>{ye(Sy(vn??""),({operation:Zo,name:Fr,validChildren:Xr})=>{const Ma=Zo==="replace"?{"#comment":{}}:r[Fr],Mc=ca=>{Zo==="remove"?delete Ma[ca]:Ma[ca]={}},ba=ca=>{gu(C,ca).each(vl=>{ye(vl,Mc)})};ye(Xr,({preset:ca,name:vl})=>{ca?ba(vl):Mc(vl)}),r[Fr]=Ma})},Ns=vn=>{const Zo=o[vn];if(Zo)return Zo;let Fr=c.length;for(;Fr--;){const Xr=c[Fr];if(Xr.pattern.test(vn))return Xr}},Yr=()=>{e.valid_elements?(Qt(e.valid_elements),mo(E,(vn,Zo)=>{r[Zo]=vn.children})):(mo(E,(vn,Zo)=>{o[Zo]={attributes:vn.attributes,attributesOrder:vn.attributesOrder},r[Zo]=vn.children}),mo(Jc("strong/b em/i"),vn=>{const Zo=Jc(vn,"/");o[Zo[1]].outputName=Zo[0]}),mo(zt,(vn,Zo)=>{o[Zo]&&(e.padd_empty_block_inline_children&&(o[Zo].paddInEmptyBlock=!0),o[Zo].removeEmpty=!0)}),mo(Jc("ol ul blockquote a table tbody"),vn=>{o[vn]&&(o[vn].removeEmpty=!0)}),mo(Jc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),vn=>{o[vn]&&(o[vn].paddEmpty=!0)}),mo(Jc("span"),vn=>{o[vn].removeEmptyAttrs=!0})),delete o.svg,Do(e.custom_elements),ps(e.valid_children),et(e.extended_valid_elements),ps("+ol[ul|ol],+ul[ul|ol]"),mo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(vn,Zo)=>{o[Zo]&&(o[Zo].parentsRequired=Jc(vn))}),e.invalid_elements&&mo(_f(e.invalid_elements),vn=>{o[vn]&&delete o[vn]}),Ns("span")||et("span[!data-mce-type|*]")},Wc=st(M),As=st(N),_t=st(P),fn=st(te),ts=st(wt),$t=st(ot),On=st(zt),So=st(Object.seal(q)),Vt=st(Q),xo=st(we),Mo=st(be),pc=st(j),Ss=st(Ve),za=st(Ie),ed=st(Object.seal(f)),wm=(vn,Zo)=>{const Fr=r[vn.toLowerCase()];return!!(Fr&&Fr[Zo.toLowerCase()])},zl=(vn,Zo)=>{const Fr=Ns(vn);if(Fr)if(Zo){if(Fr.attributes[Zo])return!0;const Xr=Fr.attributePatterns;if(Xr){let Ma=Xr.length;for(;Ma--;)if(Xr[Ma].pattern.test(Zo))return!0}}else return!0;return!1},Ji=vn=>pn(ts(),vn),_u=vn=>!Uo(vn,"#")&&zl(vn)&&!Ji(vn),Qi=vn=>pn(za(),vn)||_u(vn),td=st(u);return Yr(),{type:C,children:r,elements:o,getValidStyles:Wc,getValidClasses:_t,getBlockElements:ts,getInvalidStyles:As,getVoidElements:So,getTextBlockElements:$t,getTextInlineElements:On,getBoolAttrs:fn,getElementRule:Ns,getSelfClosingElements:Vt,getNonEmptyElements:xo,getMoveCaretBeforeOnEnterElements:Mo,getWhitespaceElements:pc,getTransparentElements:Ss,getSpecialElements:ed,isValidChild:wm,isValid:zl,isBlock:Ji,isInline:_u,isWrapper:Qi,getCustomElements:td,addValidElements:et,setValidElements:Qt,addCustomElements:Do,addValidChildren:ps}},rr=e=>({value:t2(e)}),t2=e=>Or(e,"#").toUpperCase(),Ty=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Kb=e=>{const n=Ty(e.red)+Ty(e.green)+Ty(e.blue);return rr(n)},Ge=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ig=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,e_=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Af=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return e_(c,u,f,b)},t_=e=>Ge.test(e)?"rgb":Ig.test(e)?"rgba":"other",Lg=e=>{const n=Ge.exec(e);if(n!==null)return L.some(Af(n[1],n[2],n[3],"1"));const o=Ig.exec(e);return o!==null?L.some(Af(o[1],o[2],o[3],o[4])):L.none()},Ey=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,pd=e=>Lg(e).map(Kb).map(n=>"#"+n.value).getOr(e),ky=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const C=Lh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let N=0;N<E.length;N++)u[E[N]]=C+N,u[C+N]=E[N];const M={parse:N=>{const P={};let j=!1;const Q=e.url_converter,q=e.url_converter_scope||M,te=(Ve,Ie,et)=>{const Qt=P[Ve+"-top"+Ie];if(!Qt)return;const bn=P[Ve+"-right"+Ie];if(!bn)return;const co=P[Ve+"-bottom"+Ie];if(!co)return;const Do=P[Ve+"-left"+Ie];if(!Do)return;const ps=[Qt,bn,co,Do];let Ns=ps.length-1;for(;Ns--&&ps[Ns]===ps[Ns+1];);Ns>-1&&et||(P[Ve+Ie]=Ns===-1?ps[0]:ps.join(" "),delete P[Ve+"-top"+Ie],delete P[Ve+"-right"+Ie],delete P[Ve+"-bottom"+Ie],delete P[Ve+"-left"+Ie])},he=Ve=>{const Ie=P[Ve];if(!Ie)return;const et=Ie.indexOf(",")>-1?[Ie]:Ie.split(" ");let Qt=et.length;for(;Qt--;)if(et[Qt]!==et[0])return!1;return P[Ve]=et[0],!0},we=(Ve,Ie,et,Qt)=>{he(Ie)&&he(et)&&he(Qt)&&(P[Ve]=P[Ie]+" "+P[et]+" "+P[Qt],delete P[Ie],delete P[et],delete P[Qt])},be=Ve=>(j=!0,u[Ve]),Ae=(Ve,Ie)=>(j&&(Ve=Ve.replace(/\uFEFF[0-9]/g,et=>u[et])),Ie||(Ve=Ve.replace(/\\([\'\";:])/g,"$1")),Ve),ot=Ve=>String.fromCharCode(parseInt(Ve.slice(1),16)),wt=Ve=>Ve.replace(/\\[0-9a-f]+/gi,ot),zt=(Ve,Ie,et,Qt,bn,co)=>{if(bn=bn||co,bn)return bn=Ae(bn),"'"+bn.replace(/\'/g,"\\'")+"'";if(Ie=Ae(Ie||et||Qt||""),!e.allow_script_urls){const Do=Ie.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Do)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Do))return""}return Q&&(Ie=Q.call(q,Ie,"style")),"url('"+Ie.replace(/\'/g,"\\'")+"')"};if(N){N=N.replace(/[\u0000-\u001F]/g,""),N=N.replace(/\\[\"\';:\uFEFF]/g,be).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ie=>Ie.replace(/[;:]/g,be));let Ve;for(;Ve=r.exec(N);){r.lastIndex=Ve.index+Ve[0].length;let Ie=Ve[1].replace(c,"").toLowerCase(),et=Ve[2].replace(c,"");if(Ie&&et){if(Ie=wt(Ie),et=wt(et),Ie.indexOf(C)!==-1||Ie.indexOf('"')!==-1||!e.allow_script_urls&&(Ie==="behavior"||/expression\s*\(|\/\*|\*\//.test(et)))continue;Ie==="font-weight"&&et==="700"?et="bold":(Ie==="color"||Ie==="background-color")&&(et=et.toLowerCase()),t_(et)==="rgb"&&Lg(et).each(Qt=>{et=pd(Ey(Qt)).toLowerCase()}),et=et.replace(o,zt),P[Ie]=j?Ae(et,!0):et}}te("border","",!0),te("border","-width"),te("border","-color"),te("border","-style"),te("padding",""),te("margin",""),we("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(N,P)=>{let j="";const Q=(te,he)=>{const we=he[te];if(we)for(let be=0,Ae=we.length;be<Ae;be++){const ot=we[be],wt=N[ot];wt&&(j+=(j.length>0?" ":"")+ot+": "+wt+";")}},q=(te,he)=>{if(!b||!he)return!0;let we=b["*"];return we&&we[te]?!1:(we=b[he],!(we&&we[te]))};return P&&f?(Q("*",f),Q(P,f)):ft(N,(te,he)=>{te&&q(he,P)&&(j+=(j.length>0?" ":"")+he+": "+te+";")}),j}};return M},jh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gr=e=>e instanceof Event||ie(e.initEvent),Jd=e=>e.isDefaultPrevented===ut||e.isDefaultPrevented===We,n2=e=>wn(e.preventDefault)||gr(e),Wu=(e,n)=>{const o=n??{};for(const r in e)pn(jh,r)||(o[r]=e[r]);return _e(e.composedPath)&&(o.composedPath=()=>e.composedPath()),_e(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),_e(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},_y=(e,n,o,r)=>{var c;const u=Wu(n,r);return u.type=e,wn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),n2(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ut,ie(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ut,ie(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ut,u.stopPropagation()},Jd(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ut:We,u.isPropagationStopped=u.cancelBubble===!0?ut:We,u.isImmediatePropagationStopped=We)),u},m1="mce-data-",Gh=/^(?:mouse|contextmenu)|click/,f1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Ci=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},o2=e=>_e(e)&&Gh.test(e.type),g1=(e,n)=>{const o=_y(e.type,e,document,n);if(o2(e)&&en(e.pageX)&&!en(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Ay=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Ci(e,"DOMContentLoaded",f),Ci(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():f1(e,"DOMContentLoaded",f),o.domLoaded||f1(e,"load",f)};class Of{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=m1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,C=P=>{u.executeHandlers(g1(P||b.event),E)};if(!n||at(n)||Ia(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const M=o.split(" ");let N=M.length;for(;N--;){let P=M[N],j=C,Q=!1,q=!1;if(P==="DOMContentLoaded"&&(P="ready"),u.domLoaded&&P==="ready"&&n.readyState==="complete"){r.call(c,g1({type:P}));continue}!u.hasFocusIn&&(P==="focusin"||P==="focusout")&&(Q=!0,q=P==="focusin"?"focus":"blur",j=te=>{const he=g1(te||b.event);he.type=he.type==="focus"?"focusin":"focusout",u.executeHandlers(he,E)}),f=u.events[E][P],f?P==="ready"&&u.domLoaded?r(g1({type:P})):f.push({func:r,scope:c}):(u.events[E][P]=f=[{func:r,scope:c}],f.fakeName=q,f.capture=Q,f.nativeHandler=j,P==="ready"?Ay(n,j,u):f1(n,q||P,j,Q))}return n=f=null,r}unbind(n,o,r){if(!n||at(n)||Ia(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],E=u[C];if(E){if(r){let M=E.length;for(;M--;)if(E[M].func===r){const N=E.nativeHandler,P=E.fakeName,j=E.capture,Q=E.slice(0,M).concat(E.slice(M+1));Q.nativeHandler=N,Q.fakeName=P,Q.capture=j,u[C]=Q}}(!r||E.length===0)&&(delete u[C],Ci(n,E.fakeName||C,E.nativeHandler,E.capture))}}}else ft(u,(f,b)=>{Ci(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(pn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||at(n)||Ia(n))return this;const c=g1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||at(n)||Ia(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Of.Event=new Of;const Oy=ct.each,s2=ct.grep,Dy="data-mce-style",r2=ct.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),dl=(e,n,o)=>{wn(o)||o===""?Cr(e,n):Co(e,n,o)},wi=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),gt=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&at(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},Yb=(e,n)=>{const o=Ks(n,"style"),r=e.serialize(e.parse(o),To(n));dl(n,Dy,r)},Ec=(e,n)=>ns(e)?pn(r2,n)?e+"":e+"px":e,Xb=(e,n,o)=>{const r=wi(n);wn(o)||o===""?Kc(e,r):hf(e,r,Ec(o,r))},a2=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,C)=>{const E=de.fromDom(f);ie(n.url_converter)&&_e(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const M="data-mce-"+C;dl(E,M,b),dl(E,C,b)},get:(f,b)=>{const C=de.fromDom(f);return Ks(C,"data-mce-"+b)||Ks(C,b)}},u={style:{set:(f,b)=>{const C=de.fromDom(f);r&&dl(C,Dy,b),Cr(C,"style"),ee(b)&&eo(C,e.parse(b))},get:f=>{const b=de.fromDom(f),C=Ks(b,Dy)||Ks(b,"style");return e.serialize(e.parse(C),To(b))}}};return r&&(u.href=u.src=c),u},hr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,C=_a.forElement(de.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],M=n.schema?n.schema:Xd({}),N=ky({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),P=n.ownEvents?new Of:Of.Event,j=M.getBlockElements(),Q=Ne=>ee(Ne)?pn(j,Ne):Ht(Ne)&&(pn(j,Ne.nodeName)||du(M,Ne)),q=Ne=>Ne&&e&&ee(Ne)?e.getElementById(Ne):Ne,te=Ne=>{const Le=q(Ne);return _e(Le)?de.fromDom(Le):null},he=(Ne,Le,kt="")=>{let pt;const Ln=te(Ne);if(_e(Ln)&&Te(Ln)){const Io=WS[Le];Io&&Io.get?pt=Io.get(Ln.dom,Le):pt=Ks(Ln,Le)}return _e(pt)?pt:kt},we=Ne=>{const Le=q(Ne);return wn(Le)?[]:Le.attributes},be=(Ne,Le,kt)=>{fn(Ne,pt=>{if(Ht(pt)){const Ln=de.fromDom(pt),Io=kt===""?null:kt,Pr=Ks(Ln,Le),Sm=WS[Le];Sm&&Sm.set?Sm.set(Ln.dom,Io,Le):dl(Ln,Le,Io),Pr!==Io&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ln.dom,attrName:Le,attrValue:Io})}})},Ae=(Ne,Le)=>Ne.cloneNode(Le),ot=()=>n.root_element||e.body,wt=Ne=>{const Le=sr(Ne);return{x:Le.x,y:Le.y,w:Le.width,h:Le.height}},zt=(Ne,Le)=>La(e.body,q(Ne),Le),Ve=(Ne,Le,kt)=>{fn(Ne,pt=>{const Ln=de.fromDom(pt);Xb(Ln,Le,kt),n.update_styles&&Yb(N,Ln)})},Ie=(Ne,Le)=>{fn(Ne,kt=>{const pt=de.fromDom(kt);ft(Le,(Ln,Io)=>{Xb(pt,Io,Ln)}),n.update_styles&&Yb(N,pt)})},et=(Ne,Le,kt)=>{const pt=q(Ne);if(!(wn(pt)||!ei(pt)&&!s1(pt)))return kt?Rr(de.fromDom(pt),wi(Le)):(Le=Le.replace(/-(\D)/g,(Ln,Io)=>Io.toUpperCase()),Le==="float"&&(Le="cssFloat"),pt.style?pt.style[Le]:void 0)},Qt=Ne=>{const Le=q(Ne);if(!Le)return{w:0,h:0};let kt=et(Le,"width"),pt=et(Le,"height");return(!kt||kt.indexOf("px")===-1)&&(kt="0"),(!pt||pt.indexOf("px")===-1)&&(pt="0"),{w:parseInt(kt,10)||Le.offsetWidth||Le.clientWidth,h:parseInt(pt,10)||Le.offsetHeight||Le.clientHeight}},bn=Ne=>{const Le=q(Ne),kt=zt(Le),pt=Qt(Le);return{x:kt.x,y:kt.y,w:pt.w,h:pt.h}},co=(Ne,Le)=>{if(!Ne)return!1;const kt=tt(Ne)?Ne:[Ne];return Ro(kt,pt=>jc(de.fromDom(pt),Le))},Do=(Ne,Le,kt,pt)=>{const Ln=[];let Io=q(Ne);pt=pt===void 0;const Pr=kt||(ot().nodeName!=="BODY"?ot().parentNode:null);if(ee(Le))if(Le==="*")Le=Ht;else{const Sm=Le;Le=Gk=>co(Gk,Sm)}for(;Io&&!(Io===Pr||wn(Io.nodeType)||Cf(Io)||ka(Io));){if(!Le||Le(Io))if(pt)Ln.push(Io);else return[Io];Io=Io.parentNode}return pt?Ln:null},ps=(Ne,Le,kt)=>{const pt=Do(Ne,Le,kt,!1);return pt&&pt.length>0?pt[0]:null},Ns=(Ne,Le,kt)=>{let pt=Le;if(Ne){ee(Le)&&(pt=Ln=>co(Ln,Le));for(let Ln=Ne[kt];Ln;Ln=Ln[kt])if(ie(pt)&&pt(Ln))return Ln}return null},Yr=(Ne,Le)=>Ns(Ne,Le,"nextSibling"),Wc=(Ne,Le)=>Ns(Ne,Le,"previousSibling"),As=Ne=>ie(Ne.querySelectorAll),_t=(Ne,Le)=>{var kt,pt;const Ln=(pt=(kt=q(Le))!==null&&kt!==void 0?kt:n.root_element)!==null&&pt!==void 0?pt:e;return As(Ln)?Ko(Ln.querySelectorAll(Ne)):[]},fn=function(Ne,Le,kt){const pt=kt??this;if(tt(Ne)){const Ln=[];return Oy(Ne,(Io,Pr)=>{const Sm=q(Io);Sm&&Ln.push(Le.call(pt,Sm,Pr))}),Ln}else{const Ln=q(Ne);return Ln?Le.call(pt,Ln):!1}},ts=(Ne,Le)=>{fn(Ne,kt=>{ft(Le,(pt,Ln)=>{be(kt,Ln,pt)})})},$t=(Ne,Le)=>{fn(Ne,kt=>{const pt=de.fromDom(kt);$u(pt,Le)})},On=(Ne,Le,kt,pt,Ln)=>fn(Ne,Io=>{const Pr=ee(Le)?e.createElement(Le):Le;return _e(kt)&&ts(Pr,kt),pt&&(!ee(pt)&&pt.nodeType?Pr.appendChild(pt):ee(pt)&&$t(Pr,pt)),Ln?Pr:Io.appendChild(Pr)}),So=(Ne,Le,kt)=>On(e.createElement(Ne),Ne,Le,kt,!0),Vt=gd.decode,xo=gd.encodeAllRaw,Mo=(Ne,Le,kt="")=>{let pt="<"+Ne;for(const Ln in Le)pr(Le,Ln)&&(pt+=" "+Ln+'="'+xo(Le[Ln])+'"');return dr(kt)&&pn(M.getVoidElements(),Ne)?pt+" />":pt+">"+kt+"</"+Ne+">"},pc=Ne=>{const Le=e.createElement("div"),kt=e.createDocumentFragment();kt.appendChild(Le),Ne&&(Le.innerHTML=Ne);let pt;for(;pt=Le.firstChild;)kt.appendChild(pt);return kt.removeChild(Le),kt},Ss=(Ne,Le)=>fn(Ne,kt=>{const pt=de.fromDom(kt);return Le&&ye(Ta(pt),Ln=>{Me(Ln)&&Ln.dom.length===0?Ds(Ln):xc(pt,Ln)}),Ds(pt),pt.dom}),za=Ne=>fn(Ne,Le=>{const kt=Le.attributes;for(let pt=kt.length-1;pt>=0;pt--)Le.removeAttributeNode(kt.item(pt))}),ed=Ne=>N.parse(Ne),wm=(Ne,Le)=>N.serialize(Ne,Le),zl=Ne=>{if(Id!==hr.DOM&&e===document){if(o[Ne])return;o[Ne]=!0}let Le=e.getElementById("mceDefaultStyles");if(!Le){Le=e.createElement("style"),Le.id="mceDefaultStyles",Le.type="text/css";const kt=e.head;kt.firstChild?kt.insertBefore(Le,kt.firstChild):kt.appendChild(Le)}Le.styleSheet?Le.styleSheet.cssText+=Ne:Le.appendChild(e.createTextNode(Ne))},Ji=Ne=>{Ne||(Ne=""),ye(Ne.split(","),Le=>{c[Le]=!0,C.load(Le).catch(It)})},_u=(Ne,Le,kt)=>{fn(Ne,pt=>{if(Ht(pt)){const Ln=de.fromDom(pt),Io=Le.split(" ");ye(Io,Pr=>{_e(kt)?(kt?Nu:$i)(Ln,Pr):Cg(Ln,Pr)})}})},Qi=(Ne,Le)=>{_u(Ne,Le,!0)},td=(Ne,Le)=>{_u(Ne,Le,!1)},vn=(Ne,Le)=>{const kt=te(Ne),pt=Le.split(" ");return _e(kt)&&ls(pt,Ln=>Vd(kt,Ln))},Zo=Ne=>{fn(Ne,Le=>Kc(de.fromDom(Le),"display"))},Fr=Ne=>{fn(Ne,Le=>hf(de.fromDom(Le),"display","none"))},Xr=Ne=>{const Le=te(Ne);return _e(Le)&&xs(qc(Le,"display"),"none")},Ma=Ne=>(Ne||"mce_")+u++,Mc=Ne=>{const Le=te(Ne);return _e(Le)?Ht(Le.dom)?Le.dom.outerHTML:Al(Le):""},ba=(Ne,Le)=>{fn(Ne,kt=>{Ht(kt)&&(kt.outerHTML=Le)})},ca=(Ne,Le)=>{const kt=q(Le);return fn(Ne,pt=>{const Ln=kt==null?void 0:kt.parentNode,Io=kt==null?void 0:kt.nextSibling;return Ln&&(Io?Ln.insertBefore(pt,Io):Ln.appendChild(pt)),pt})},vl=(Ne,Le,kt)=>fn(Le,pt=>{var Ln;const Io=tt(Le)?Ne.cloneNode(!0):Ne;return kt&&Oy(s2(pt.childNodes),Pr=>{Io.appendChild(Pr)}),(Ln=pt.parentNode)===null||Ln===void 0||Ln.replaceChild(Io,pt),pt}),Au=(Ne,Le)=>{if(Ne.nodeName!==Le.toUpperCase()){const kt=So(Le);return Oy(we(Ne),pt=>{be(kt,pt.nodeName,he(Ne,pt.nodeName))}),vl(kt,Ne,!0),kt}else return Ne},Bd=(Ne,Le)=>{let kt=Ne;for(;kt;){let pt=Le;for(;pt&&kt!==pt;)pt=pt.parentNode;if(kt===pt)break;kt=kt.parentNode}return!kt&&Ne.ownerDocument?Ne.ownerDocument.documentElement:kt},$d=(Ne,Le,kt)=>Bn(Le)?uu(M,Ne,{...kt,isContent:Ln=>{const Io=Ln.nodeName.toLowerCase();return!!Le[Io]}}):uu(M,Ne,kt),nd=()=>e.createRange(),fg=(Ne,Le,kt)=>{let pt=nd(),Ln,Io;if(Ne&&Le&&Ne.parentNode&&Le.parentNode){const Pr=Ne.parentNode;return pt.setStart(Pr,gt(Ne)),pt.setEnd(Le.parentNode,gt(Le)),Ln=pt.extractContents(),pt=nd(),pt.setStart(Le.parentNode,gt(Le)+1),pt.setEnd(Pr,gt(Ne)+1),Io=pt.extractContents(),Pr.insertBefore(Kd(Id,Ln,M),Ne),kt?Pr.insertBefore(kt,Ne):Pr.insertBefore(Le,Ne),Pr.insertBefore(Kd(Id,Io,M),Ne),Ss(Ne),kt||Le}else return},Lb=(Ne,Le,kt,pt)=>{if(tt(Ne)){let Ln=Ne.length;const Io=[];for(;Ln--;)Io[Ln]=Lb(Ne[Ln],Le,kt,pt);return Io}else return n.collect&&(Ne===e||Ne===r)&&E.push([Ne,Le,kt,pt]),P.bind(Ne,Le,kt,pt||Id)},Fb=(Ne,Le,kt)=>{if(tt(Ne)){let pt=Ne.length;const Ln=[];for(;pt--;)Ln[pt]=Fb(Ne[pt],Le,kt);return Ln}else{if(E.length>0&&(Ne===e||Ne===r)){let pt=E.length;for(;pt--;){const[Ln,Io,Pr]=E[pt];Ne===Ln&&(!Le||Le===Io)&&(!kt||kt===Pr)&&P.unbind(Ln,Io,Pr)}}return P.unbind(Ne,Le,kt)}},uR=(Ne,Le,kt)=>P.dispatch(Ne,Le,kt),gg=(Ne,Le,kt)=>P.dispatch(Ne,Le,kt),Zk=Ne=>{if(Ne&&ei(Ne)){const Le=Ne.getAttribute("data-mce-contenteditable");return Le&&Le!=="inherit"?Le:Ne.contentEditable!=="inherit"?Ne.contentEditable:null}else return null},Id={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:E,styles:N,schema:M,events:P,isBlock:Q,root:null,clone:Ae,getRoot:ot,getViewPort:wt,getRect:bn,getSize:Qt,getParent:ps,getParents:Do,get:q,getNext:Yr,getPrev:Wc,select:_t,is:co,add:On,create:So,createHTML:Mo,createFragment:pc,remove:Ss,setStyle:Ve,getStyle:et,setStyles:Ie,removeAllAttribs:za,setAttrib:be,setAttribs:ts,getAttrib:he,getPos:zt,parseStyle:ed,serializeStyle:wm,addStyle:zl,loadCSS:Ji,addClass:Qi,removeClass:td,hasClass:vn,toggleClass:_u,show:Zo,hide:Fr,isHidden:Xr,uniqueId:Ma,setHTML:$t,getOuterHTML:Mc,setOuterHTML:ba,decode:Vt,encode:xo,insertAfter:ca,replace:vl,rename:Au,findCommonAncestor:Bd,run:fn,getAttribs:we,isEmpty:$d,createRng:nd,nodeIndex:gt,split:fg,bind:Lb,unbind:Fb,fire:gg,dispatch:uR,getContentEditable:Zk,getContentEditableParent:Ne=>{const Le=ot();let kt=null;for(let pt=Ne;pt&&pt!==Le&&(kt=Zk(pt),kt===null);pt=pt.parentNode);return kt},isEditable:Ne=>{if(_e(Ne)){const Le=Ht(Ne)?Ne:Ne.parentElement;return _e(Le)&&ei(Le)&&ga(de.fromDom(Le))}else return!1},destroy:()=>{if(E.length>0){let Ne=E.length;for(;Ne--;){const[Le,kt,pt]=E[Ne];P.unbind(Le,kt,pt)}}ft(c,(Ne,Le)=>{C.unload(Le),delete c[Le]})},isChildOf:(Ne,Le)=>Ne===Le||Le.contains(Ne),dumpRng:Ne=>"startContainer: "+Ne.startContainer.nodeName+", startOffset: "+Ne.startOffset+", endContainer: "+Ne.endContainer.nodeName+", endOffset: "+Ne.endOffset},WS=a2(N,n,st(Id));return Id};hr.DOM=hr(document),hr.nodeIndex=gt;const Pm=hr.DOM,Jb=0,n_=1,Bm=2,Qb=3;class bd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=Pm;let u;const f=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=ct._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Bm}markDone(n){this.states[n]=Bm}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Jb),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,E)=>{os(o.scriptLoadedCallbacks,E).each(M=>{ye(M,N=>N[C](E))}),delete o.scriptLoadedCallbacks[E]},c=C=>{const E=Bt(C,M=>M.status==="rejected");return E.length>0?Promise.reject(Ps(E,({reason:M})=>tt(M)?M:[M])):Promise.resolve()},u=C=>Promise.allSettled(gn(C,E=>o.states[E]===Bm?(r("resolve",E),Promise.resolve()):o.states[E]===Qb?(r("reject",E),Promise.reject(E)):(o.states[E]=n_,o.loadScript(E).then(()=>{o.states[E]=Bm,r("resolve",E);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(c)):Promise.resolve()},()=>(o.states[E]=Qb,r("reject",E),Promise.reject(E)))))),f=C=>(o.loading=!0,u(C).then(E=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return L.from(M).each(Js),c(E)})),b=jl(n);return o.loading?new Promise((C,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,E)})}):f(b)}}bd.ScriptLoader=new bd;const c2=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Ry=e=>Ye(e)&&pn(e,"raw"),ar=e=>tt(e)&&e.length>1,qh={},Lr=Se("en"),l2=()=>os(qh,Lr.get()),uc={getData:()=>yo(qh,e=>({...e})),setCode:e=>{e&&Lr.set(e)},getCode:()=>Lr.get(),add:(e,n)=>{let o=qh[e];o||(qh[e]=o={});const r=gn(fs(n),c=>c.toLowerCase());ft(n,(c,u)=>{const f=u.toLowerCase();f!==u&&c2(r,f)?(pn(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=l2().getOr({}),o=f=>ie(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return pn(n,b)?o(n[b]):os(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Ry(e))return o(e.raw);if(ar(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(C,E)=>pn(f,E)?o(f[E]):C);return u(b)}return u(c(e))},isRtl:()=>l2().bind(e=>os(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>pn(qh,e)},Ml=()=>{const e=[],n={},o={},r=[],c=(q,te)=>{const he=Bt(r,we=>we.name===q&&we.state===te);ye(he,we=>we.resolve())},u=q=>pn(n,q),f=q=>pn(o,q),b=q=>{if(o[q])return o[q].instance},C=(q,te)=>{const he=uc.getCode(),we=","+(te||"")+",";!he||te&&we.indexOf(","+he+",")===-1||bd.ScriptLoader.add(n[q]+"/langs/"+he+".js")},E=(q,te)=>{Ml.languageLoad!==!1&&(u(q)?C(q,te):Q(q,"loaded").then(()=>C(q,te)))},M=(q,te)=>(e.push(te),o[q]={instance:te},c(q,"added"),te),N=q=>{delete n[q],delete o[q]},P=(q,te)=>ee(te)?ee(q)?{prefix:"",resource:te,suffix:""}:{prefix:q.prefix,resource:te,suffix:q.suffix}:te,j=(q,te)=>{if(n[q])return Promise.resolve();let he=ee(te)?te:te.prefix+te.resource+te.suffix;he.indexOf("/")!==0&&he.indexOf("://")===-1&&(he=Ml.baseURL+"/"+he),n[q]=he.substring(0,he.lastIndexOf("/"));const we=()=>(c(q,"loaded"),Promise.resolve());return o[q]?we():bd.ScriptLoader.add(he).then(we)},Q=(q,te="added")=>te==="added"&&f(q)||te==="loaded"&&u(q)?Promise.resolve():new Promise(he=>{r.push({name:q,state:te,resolve:he})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:M,remove:N,createUrl:P,load:j,waitFor:Q}};Ml.languageLoad=!0,Ml.baseURL="",Ml.PluginManager=Ml(),Ml.ThemeManager=Ml(),Ml.ModelManager=Ml();const h1=(e,n)=>{let o=null;return{cancel:()=>{W(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{W(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Df=(e,n)=>{let o=null;const r=()=>{W(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},My=(e,n,o)=>oa(e,n,o).isSome(),Yh=st("mce-annotation"),Qd=st("data-mce-annotation"),Xh=st("data-mce-annotation-uid"),Fg=st("data-mce-annotation-active"),Rf=st("data-mce-annotation-classes"),em=st("data-mce-annotation-attrs"),Hg=e=>n=>Jo(n,e),Vg=(e,n)=>{const o=e.selection.getRng(),r=de.fromDom(o.startContainer),c=de.fromDom(e.getBody()),u=n.fold(()=>"."+Yh(),C=>`[${Qd()}="${C}"]`),f=Pu(r,o.startOffset).getOr(r);return Ii(f,u,Hg(c)).bind(C=>Dr(C,`${Xh()}`).bind(E=>Dr(C,`${Qd()}`).map(M=>{const N=ev(e,E);return{uid:E,name:M,elements:N}})))},c_=e=>Te(e)&&Vd(e,Yh()),Ny=(e,n)=>Sr(e,"data-mce-bogus")||My(e,'[data-mce-bogus="all"]',Hg(n)),ev=(e,n)=>{const o=de.fromDom(e.getBody()),r=Ir(o,`[${Xh()}="${n}"]`);return Bt(r,c=>!Ny(c,o))},i2=(e,n)=>{const o=de.fromDom(e.getBody()),r=Ir(o,`[${Qd()}="${n}"]`),c={};return ye(r,u=>{if(!Ny(u,o)){const f=Ks(u,Xh()),b=os(c,f).getOr([]);c[f]=b.concat([u])}}),c},Py=(e,n)=>{const o=Se({}),r=()=>({listeners:[],previous:ic()}),c=(N,P)=>{u(N,j=>(P(j),j))},u=(N,P)=>{const j=o.get(),Q=os(j,N).getOrThunk(r),q=P(Q);j[N]=q,o.set(j)},f=(N,P,j)=>{c(N,Q=>{ye(Q.listeners,q=>q(!0,N,{uid:P,nodes:gn(j,te=>te.dom)}))})},b=N=>{c(N,P=>{ye(P.listeners,j=>j(!1,N))})},C=(N,P)=>{ye(ev(e,N),j=>{P?Co(j,Fg(),"true"):Cr(j,Fg())})},E=Df(()=>{const N=Je(n.getNames());ye(N,P=>{u(P,j=>{const Q=j.previous.get();return Vg(e,L.some(P)).fold(()=>{Q.each(q=>{b(P),j.previous.clear(),C(q,!1)})},({uid:q,name:te,elements:he})=>{xs(Q,q)||(Q.each(we=>C(we,!1)),f(te,q,he),j.previous.set(q),C(q,!0))}),{previous:j.previous,listeners:j.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(N,P)=>{u(N,j=>({previous:j.previous,listeners:j.listeners.concat([P])}))}}},tv=(e,n)=>{const o=Qd(),r=u=>L.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Xh(),null),u.attr(Qd(),null),u.attr(Fg(),null);const C=L.from(u.attr(em())).map(P=>P.split(",")).getOr([]),E=L.from(u.attr(Rf())).map(P=>P.split(",")).getOr([]);ye(C,P=>u.attr(P,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],N=Qr(M,[Yh()].concat(E));u.attr("class",N.length>0?N.join(" "):null),u.attr(Rf(),null),u.attr(em(),null)};e.serializer.addTempAttr(Fg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},By=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>os(e,c).map(u=>u.settings),getNames:()=>fs(e)}};let nv=0;const Jh=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return nv++,e+"_"+r+nv+String(o)},ov=(e,n)=>{ye(n,o=>{Nu(e,o)})},vR=(e,n)=>{ye(n,o=>{$i(e,o)})},l_=(e,n)=>de.fromDom(e.dom.cloneNode(n)),vd=e=>l_(e,!1),Qh=e=>l_(e,!0),u2=(e,n)=>{const o=de.fromTag(n),r=Xl(e);return Zr(o,r),o},d2=(e,n)=>{const o=u2(e,n);_l(e,o);const r=Ta(e);return Bu(o,r),Ds(e),o},sv=(e,n,o=We)=>{const r=new cc(e,n),c=u=>{let f;do f=r[u]();while(f&&!at(f)&&!o(f));return L.from(f).filter(at)};return{current:()=>L.from(r.current()).filter(at),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Mf=(e,n)=>{const o=n||(f=>e.isBlock(f)||ss(f)||Qo(f)),r=(f,b,C,E)=>{if(at(f)){const M=E(f,b,f.data);if(M!==-1)return L.some({container:f,offset:M})}return C().bind(M=>r(M.container,M.offset,C,E))};return{backwards:(f,b,C,E)=>{const M=sv(f,E??e.getRoot(),o);return r(f,b,()=>M.prev().map(N=>({container:N,offset:N.length})),C).getOrNull()},forwards:(f,b,C,E)=>{const M=sv(f,E??e.getRoot(),o);return r(f,b,()=>M.next().map(N=>({container:N,offset:0})),C).getOrNull()}}},$y=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Me,"text"),p1=e=>$y.get(e),u_=e=>$y.getOption(e),rv=(e,n)=>$y.set(e,n),ep=["td","th"],m2=["thead","tbody","tfoot"],av=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Iy=["li","dd","dt"],f2=["ul","ol","dl"],Qc=["pre","script","textarea","style"],b1=e=>{let n;return o=>(n=n||$e(e,ut),pn(n,To(o)))},Ly=e=>To(e)==="table",tp=e=>Te(e)&&To(e)==="br",g2=b1(av),yd=b1(f2),si=b1(Iy),np=b1(m2),op=b1(ep),v1=b1(Qc),d_=e=>{const n=[];let o=e.dom;for(;o;)n.push(de.fromDom(o)),o=o.lastChild;return n},m_=e=>{const n=Ir(e,"br"),o=Bt(d_(e).slice(-1),tp);n.length===o.length&&ye(o,Ds)},zg=()=>{const e=de.fromTag("br");return Co(e,"data-mce-bogus","1"),e},Ti=e=>{hi(e),mr(e,zg())},h2=(e,n)=>{Ql(e).each(o=>{El(o).each(r=>{n.isBlock(To(e))&&tp(o)&&n.isBlock(To(r))&&Ds(o)})})},ra=Lh,Ug=n1,Ei=lc,yR=e=>e.insertContent(ra,{preserve_zwsp:!0}),cv=Ht,sp=at,Wg=e=>(sp(e)&&(e=e.parentNode),cv(e)&&e.hasAttribute("data-mce-caret")),Cd=e=>sp(e)&&Ug(e.data),ki=e=>Wg(e)||Cd(e),Fy=e=>e.firstChild!==e.lastChild||!ss(e.firstChild),Hy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ra),u=e.parentNode;if(n){const f=e.previousSibling;if(sp(f)){if(ki(f))return f;if(tm(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(sp(f)){if(ki(f))return f;if(jg(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Vy=e=>{const n=e.container();return at(n)?n.data.charAt(e.offset())===ra||e.isAtStart()&&Cd(n.previousSibling):!1},Zg=e=>{const n=e.container();return at(n)?n.data.charAt(e.offset()-1)===ra||e.isAtEnd()&&Cd(n.nextSibling):!1},f_=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(zg().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},jg=e=>sp(e)&&e.data[0]===ra,tm=e=>sp(e)&&e.data[e.data.length-1]===ra,y1=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Dm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Ho=e=>e&&e.hasAttribute("data-mce-caret")?(y1(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Nl=e=>Wg(e.startContainer),hu=Math.round,$m=e=>e?{left:hu(e.left),top:hu(e.top),bottom:hu(e.bottom),right:hu(e.right),width:hu(e.width),height:hu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},cr=(e,n)=>(e=$m(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),p2=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,lv=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,C1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:lv(n.top-e.bottom,e,n)},iv=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:lv(n.bottom-e.top,e,n),g_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Nr=e=>Bo(e,(n,o)=>n.fold(()=>L.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return L.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),L.none()),zy=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},h_=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),p_=(e,n,o)=>Math.min(Math.max(e,n),o),rp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Ut=(e,n)=>{if(Ht(e)&&e.hasChildNodes()){const o=e.childNodes,r=p_(n,0,o.length-1);return o[r]}else return e},b_=(e,n)=>{if(!(n<0&&Ht(e)&&e.hasChildNodes()))return Ut(e,n)},b2=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),uv=e=>ee(e)&&e.charCodeAt(0)>=768&&b2.test(e),Uy=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},v_=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},w1=Ze,S1=Qo,Gg=ss,CR=at,nm=Fi(["script","style","textarea"]),y_=Fi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Im=Fi(["table"]),v2=ki,wd=e=>v2(e)?!1:CR(e)?!nm(e.parentNode):y_(e)||Gg(e)||Im(e)||ap(e),y2=e=>Ht(e)&&e.getAttribute("unselectable")==="true",ap=e=>!y2(e)&&S1(e),C_=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(ap(o))return!1;if(w1(o))return!0}return!0},w_=e=>ap(e)?!Bo(Ko(e.getElementsByTagName("*")),(n,o)=>n||w1(o),!1):!1,S_=e=>y_(e)||w_(e),Wy=(e,n)=>wd(e)&&C_(e,n),dv=Ht,C2=wd,Zy=Dg("display","block table"),x_=Dg("float","left right"),x1=v_(dv,C2,bo(x_)),Nf=bo(Dg("white-space","pre pre-line pre-wrap")),cp=at,mv=ss,jy=hr.nodeIndex,fv=b_,Gy=e=>e?e.createRange():hr.DOM.createRng(),qy=e=>ee(e)&&/[\r\n\t ]/.test(e),Ky=e=>!!e.setStart&&!!e.setEnd,w2=e=>{const n=e.startContainer,o=e.startOffset;if(qy(e.toString())&&Nf(n.parentNode)&&at(n)){const r=n.data;if(qy(r[o-1])||qy(r[o+1]))return!0}return!1},kc=e=>{const n=e.ownerDocument,o=Gy(n),r=n.createTextNode(Ea),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=$m(o.getBoundingClientRect());return c.removeChild(r),u},T_=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&at(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Pf(u)}else return null},S2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Pf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=$m(r[0]):o=$m(e.getBoundingClientRect()),!Ky(e)&&mv(e)&&S2(o)?kc(e):S2(o)&&Ky(e)&&(n=T_(e))!==null&&n!==void 0?n:o},qg=(e,n)=>{const o=cr(e,n);return o.width=1,o.right=o.left+1,o},Yy=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&p2(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=Gy(f.ownerDocument);if(b<f.data.length){if(uv(f.data[b]))return;if(uv(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!w2(C))){o(qg(Pf(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),w2(C)||o(qg(Pf(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),w2(C)||o(qg(Pf(C),!0)))},c=e.container(),u=e.offset();if(cp(c))return r(c,u),n;if(dv(c))if(e.isAtEnd()){const f=fv(c,u);cp(f)&&r(f,f.data.length),x1(f)&&!mv(f)&&o(qg(Pf(f),!1))}else{const f=fv(c,u);if(cp(f)&&r(f,0),x1(f)&&e.isAtEnd())return o(qg(Pf(f),!1)),n;const b=fv(e.container(),e.offset()-1);x1(b)&&!mv(b)&&(Zy(b)||Zy(f)||!x1(f))&&o(qg(Pf(b),!1)),x1(f)&&o(qg(Pf(f),!0))}return n},Be=(e,n,o)=>{const r=()=>(cp(e),n===0),c=()=>cp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=Gy(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=Yy(Be(e,n))),o),b=()=>f().length>0,C=M=>M&&e===M.container()&&n===M.offset(),E=M=>fv(e,M?n-1:n);return{container:st(e),offset:st(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:C,getNode:E}};Be.fromRangeStart=e=>Be(e.startContainer,e.startOffset),Be.fromRangeEnd=e=>Be(e.endContainer,e.endOffset),Be.after=e=>Be(e.parentNode,jy(e)+1),Be.before=e=>Be(e.parentNode,jy(e)),Be.isAbove=(e,n)=>$r(Ft(n.getClientRects()),Jn(e.getClientRects()),C1).getOr(!1),Be.isBelow=(e,n)=>$r(Jn(n.getClientRects()),Ft(e.getClientRects()),iv).getOr(!1),Be.isAtStart=e=>e?e.isAtStart():!1,Be.isAtEnd=e=>e?e.isAtEnd():!1,Be.isTextPosition=e=>e?at(e.container()):!1,Be.isElementPosition=e=>!Be.isTextPosition(e);const om=(e,n)=>{at(n)&&n.data.length===0&&e.remove(n)},E_=(e,n,o)=>{n.insertNode(o),om(e,o.previousSibling),om(e,o.nextSibling)},x2=(e,n,o)=>{const r=L.from(o.firstChild),c=L.from(o.lastChild);n.insertNode(o),r.each(u=>om(e,u.previousSibling)),c.each(u=>om(e,u.nextSibling))},T1=(e,n,o)=>{ka(o)?x2(e,n,o):E_(e,n,o)},pu=at,E1=Dm,T2=hr.nodeIndex,Xy=e=>{const n=e.parentNode;return E1(n)?Xy(n):n},ml=e=>e?ue(e.childNodes,(n,o)=>(E1(o)&&o.nodeName!=="BR"?n=n.concat(ml(o)):n.push(o),n),[]):[],gv=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&pu(o);)n+=o.data.length;return n},E2=e=>n=>e===n,k_=e=>{let n,o;n=ml(Xy(e)),o=re(n,E2(e),e),n=n.slice(0,o+1);const r=ue(n,(c,u,f)=>(pu(u)&&pu(n[f-1])&&c++,c),0);return n=cl(n,Fi([e.nodeName])),o=re(n,E2(e),e),o-r},k2=e=>(pu(e)?"text()":e.nodeName.toLowerCase())+"["+k_(e)+"]",__=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},_2=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(pu(r))u=gv(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(k2(r));let f=__(e,r);return f=cl(f,bo(Dm)),o=o.concat(Na(f,b=>k2(b))),o.reverse().join("/")+","+u},A_=(e,n,o)=>{let r=ml(e);return r=cl(r,(c,u)=>!pu(c)||!pu(r[u-1])),r=cl(r,Fi([n])),r[o]},O_=(e,n)=>{let o=e,r=0;for(;pu(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!pu(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return pu(e)&&n>e.data.length&&(n=e.data.length),Be(e,n)},A2=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=ue(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),A_(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!pu(u)&&u.parentNode){let f;return c==="after"?f=T2(u)+1:f=T2(u),Be(u.parentNode,f)}return O_(u,parseInt(c,10))},lp=Qo,D_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&at(c);c=c.previousSibling)r+=e(c.data).length;return r},O2=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(at(u))b.push(o?D_(n,u,f):f);else{let E=0;const M=u.childNodes;f>=M.length&&M.length&&(E=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+E)}for(let E=u;E&&E!==C;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},qr=(e,n,o,r)=>{const c=n.dom,u=O2(c,e,o,r,!0),f=n.isForward(),b=Nl(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=O2(c,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},hv=(e,n,o)=>{let r=0;return ct.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},D2=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ht(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},R2=e=>(D2(e,!0),D2(e,!1),e),pv=(e,n)=>{if(Ht(e)&&(e=Ut(e,n),lp(e)))return e;if(ki(e)){at(e)&&Wg(e)&&(e=e.parentNode);let o=e.previousSibling;if(lp(o)||(o=e.nextSibling,lp(o)))return o}},el=e=>pv(e.startContainer,e.startOffset)||pv(e.endContainer,e.endOffset),fl=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||lp(r)){const f=r.nodeName;return{name:f,index:hv(o.dom,f,r)}}const u=el(c);if(u){const f=u.tagName;return{name:f,index:hv(o.dom,f,u)}}return qr(e,o,n,c)},M2=e=>{const n=e.getRng();return{start:_2(e.dom.getRoot(),Be.fromRangeStart(n)),end:_2(e.dom.getRoot(),Be.fromRangeEnd(n)),forward:e.isForward()}},N2=e=>({rng:e.getRng(),forward:e.isForward()}),Jy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},P2=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:hv(o,b,f)};const E=R2(r.cloneRange());if(!u){E.collapse(!1);const N=Jy(o,c+"_end",n);T1(o,E,N)}r=R2(r),r.collapse(!0);const M=Jy(o,c+"_start",n);return T1(o,r,M),e.moveToBookmark({id:c,keep:!0,forward:C}),{id:c,forward:C}},B2=(e,n,o=!1)=>n===2?fl(Ei,o,e):n===3?M2(e):n?N2(e):P2(e,!1),Qy=qe(fl,Po,!0),eC=e=>{const n=u=>u(e),o=st(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ut,isError:We,map:u=>Pl.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return c},bv=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:We,isError:ut,map:n,mapError:r=>Pl.error(r(e)),bind:n,exists:We,forall:ut,getOr:Po,or:Po,getOrThunk:lo,orThunk:lo,getOrDie:zs(String(e)),each:It,toOptional:L.none};return o},Pl={value:eC,error:bv,fromOption:(e,n)=>e.fold(()=>bv(n),eC)},ys={generate:e=>{if(!tt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ye(e,(r,c)=>{const u=fs(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!tt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const E=C.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...N)=>{if(N.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+N.length);return N[c].apply(null,C)},match:N=>{const P=fs(N);if(n.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+P.join(","));if(!ls(n,Q=>Sn(P,Q)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+n.join(", "));return N[f].apply(null,C)},log:N=>{console.log(N,{constructors:n,constructor:f,params:C})}}}}),o}};ys.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Sd=e=>{const n=[],o=[];return ye(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},k1=e=>e.type==="inline-command"||e.type==="inline-format",$2=e=>e.type==="block-command"||e.type==="block-format",vv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,yv=e=>{var n;const o=c=>Pl.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let b;if(tt(e.format)){if(!ls(e.format,ee))return o(c+" pattern has non-string items in the `format` array");b=e.format}else if(ee(e.format))b=[e.format];else return o(c+" pattern has non-string `format` parameter");return Pl.value(u(b))}else return e.cmd!==void 0?ee(e.cmd)?Pl.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Ye(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,b)=>({type:"inline-command",start:c,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Pl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},Bf=e=>Bt(e,$2),_c=e=>Bt(e,k1),$f=(e,n)=>({inlinePatterns:_c(e),blockPatterns:Bf(e),dynamicPatternsLookup:n}),nC=(e,n)=>({...e,blockPatterns:Bt(e.blockPatterns,o=>vv(o,n))}),I2=e=>{const n=Sd(gn(e,yv));return ye(n.errors,o=>console.error(o.message,o.pattern)),n.values},R_=e=>n=>{const o=e(n);return I2(o)},ip=dt().deviceType,oC=ip.isTouch(),sC=hr.DOM,rC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Bo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[bc(u)]=bc(f),o},{})},aC=e=>De(e,RegExp),Kt=e=>n=>n.options.get(e),_1=e=>ee(e)||Ye(e),cC=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const c=rC(o);return{value:os(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},up=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:cC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:cC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&Fo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Sn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Ot(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||so(o,ee);return r?ee(o)?{value:gn(o.split(","),bc),valid:r}:tt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Jg(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||so(o,ee);return r?{value:tt(o)?o:gn(o.split(","),bc),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Ot(o)||ee(o);return r?o===!1||ip.isiPhone()||ip.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!oC}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||ie(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:_1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:_1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:_1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:_1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>so(o,Ye)||o===!1?{value:I2(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ie(o)?{value:R_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>so(o,aC)?{value:o,valid:!0}:aC(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Sn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Sn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:uc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:sC.getAttrib(e.getElement(),"placeholder")})})},Zu=Kt("iframe_attrs"),M_=Kt("doctype"),Ac=Kt("document_base_url"),N_=Kt("body_id"),If=Kt("body_class"),lC=Kt("content_security_policy"),L2=Kt("br_in_pre"),tl=Kt("forced_root_block"),Lf=Kt("forced_root_block_attrs"),Cv=Kt("newline_behavior"),Ff=Kt("br_newline_selector"),P_=Kt("no_newline_selector"),B_=Kt("keep_styles"),Fa=Kt("end_container_on_empty_block"),Aa=Kt("automatic_uploads"),Ha=Kt("images_reuse_filename"),Rs=Kt("images_replace_blob_uris"),Ja=Kt("icons"),Oa=Kt("icons_url"),iC=Kt("images_upload_url"),wv=Kt("images_upload_base_path"),uC=Kt("images_upload_credentials"),F2=Kt("images_upload_handler"),H2=Kt("content_css_cors"),Sv=Kt("referrer_policy"),xv=Kt("language"),Kg=Kt("language_url"),dC=Kt("indent_use_margin"),SF=Kt("indentation"),Yg=Kt("content_css"),$_=Kt("content_style"),ri=Kt("font_css"),wR=Kt("directionality"),I_=Kt("inline_boundaries_selector"),Vi=Kt("object_resizing"),A1=Kt("resize_img_proportional"),O1=Kt("placeholder"),xd=Kt("event_root"),Bl=Kt("service_message"),Hf=Kt("theme"),mC=Kt("theme_url"),Tv=Kt("model"),V2=Kt("model_url"),Xg=Kt("inline_boundaries"),fC=Kt("formats"),gC=Kt("preview_styles"),z2=Kt("format_empty_lines"),U2=Kt("format_noneditable_selector"),D1=Kt("custom_ui_selector"),Jg=Kt("inline"),hC=Kt("hidden_input"),pC=Kt("submit_patch"),W2=Kt("add_form_submit_trigger"),Z2=Kt("add_unload_trigger"),L_=Kt("custom_undo_redo_levels"),Ev=Kt("disable_nodechange"),j2=Kt("readonly"),F_=Kt("editable_root"),G2=Kt("content_css_cors"),R1=Kt("plugins"),H_=Kt("external_plugins"),q2=Kt("block_unsupported_drop"),$l=Kt("visual"),bC=Kt("visual_table_class"),vC=Kt("visual_anchor_class"),yC=Kt("iframe_aria_text"),kv=Kt("setup"),V_=Kt("init_instance_callback"),z_=Kt("urlconverter_callback"),_v=Kt("auto_focus"),K2=Kt("browser_spellcheck"),CC=Kt("protect"),wC=Kt("paste_block_drop"),M1=Kt("paste_data_images"),SC=Kt("paste_preprocess"),Y2=Kt("paste_postprocess"),X2=Kt("newdocument_content"),J2=Kt("paste_webkit_styles"),U_=Kt("paste_remove_styles_if_webkit"),Q2=Kt("paste_merge_formats"),ex=Kt("smart_paste"),tx=Kt("paste_as_text"),Av=Kt("paste_tab_spaces"),dp=Kt("allow_html_data_urls"),nx=Kt("text_patterns"),W_=Kt("text_patterns_lookup"),Ov=Kt("noneditable_class"),Z_=Kt("editable_class"),ju=Kt("noneditable_regexp"),Dv=Kt("preserve_cdata"),Rv=Kt("highlight_on_focus"),Mv=Kt("xss_sanitization"),Il=Kt("init_content_sync"),Vf=e=>e.options.isSet("text_patterns_lookup"),zf=e=>ct.explode(e.options.get("font_size_style_values")),j_=e=>ct.explode(e.options.get("font_size_classes")),Uf=e=>e.options.get("encoding")==="xml",N1=e=>ct.explode(e.options.get("images_file_types")),G_=Kt("table_tab_navigation"),q_=Kt("details_initial_state"),ox=Kt("details_serialized_state"),Nv=Kt("sandbox_iframes"),Pv=e=>e.options.get("sandbox_iframes_exclusions"),K_=Kt("convert_unsafe_embeds"),P1=Kt("license_key"),xC=Kt("api_key"),Y_=Ht,TC=at,EC=e=>{const n=e.parentNode;n&&n.removeChild(e)},Bv=e=>{const n=Ei(e);return{count:e.length-n.length,text:n}},X_=e=>{let n;for(;(n=e.data.lastIndexOf(ra))!==-1;)e.deleteData(n,1)},Qg=(e,n)=>(Wf(e),n),sx=(e,n)=>{const o=Bv(e.data.substr(0,n.offset())),r=Bv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(X_(e),Be(e,n.offset()-o.count)):n},kC=(e,n)=>{const o=n.container(),r=Nc(Ko(o.childNodes),e).map(c=>c<n.offset()?Be(o,n.offset()-1):n).getOr(n);return Wf(e),r},rx=(e,n)=>TC(e)&&n.container()===e?sx(e,n):Qg(e,n),$v=(e,n)=>n.container()===e.parentNode?kC(e,n):Qg(e,n),J_=(e,n)=>Be.isTextPosition(n)?rx(e,n):$v(e,n),Wf=e=>{Y_(e)&&ki(e)&&(Fy(e)?e.removeAttribute("data-mce-caret"):EC(e)),TC(e)&&(X_(e),e.data.length===0&&EC(e))},SR=Qo,mp=Tc,Iv=Hh,fp="*[contentEditable=false],video,audio,embed,object",gp=(e,n,o)=>{const r=cr(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Q_=e=>{var n,o;const r=Ir(de.fromDom(e),fp);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(tm(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,jg(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},ax=(e,n,o,r)=>{const c=ic();let u,f;const b=tl(e),C=e.dom,E=(q,te)=>{let he;if(M(),Iv(te))return null;if(o(te)){const we=f_(b,te,q),be=gp(n,te,q);C.setStyle(we,"top",be.top),C.setStyle(we,"caret-color","transparent"),f=we;const Ae=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(Ae,{...be}),C.add(n,Ae),c.set({caret:Ae,element:te,before:q}),q&&C.addClass(Ae,"mce-visual-caret-before"),N(),he=te.ownerDocument.createRange(),he.setStart(we,0),he.setEnd(we,0)}else return f=Hy(te,q),he=te.ownerDocument.createRange(),Lv(f.nextSibling)?(he.setStart(f,0),he.setEnd(f,0)):(he.setStart(f,1),he.setEnd(f,1)),he;return he},M=()=>{Q_(n),f&&(Wf(f),f=null),c.on(q=>{C.remove(q.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},N=()=>{u=setInterval(()=>{c.on(q=>{r()?C.toggleClass(q.caret,"mce-visual-caret-hidden"):C.addClass(q.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(q=>{const te=gp(n,q.element,q.before);C.setStyles(q.caret,{...te})})},destroy:()=>clearInterval(u)}},eA=()=>vt.browser.isFirefox(),Lv=e=>SR(e)||mp(e),Fm=e=>(Lv(e)||lu(e)&&eA())&&fi(de.fromDom(e)).exists(ga),_C=Ze,AC=Qo,tA=Tc,OC=Dg("display","block table table-cell table-caption list-item"),cx=ki,lx=Wg,ix=Ht,hp=at,Fv=wd,eh=e=>e>0,Hm=e=>e<0,B1=(e,n)=>{let o;for(;o=e(n);)if(!lx(o))return o;return null},pp=(e,n,o,r,c)=>{const u=new cc(e,r),f=AC(e)||lx(e);let b;if(Hm(n)){if(f&&(b=B1(u.prev.bind(u),!0),o(b)))return b;for(;b=B1(u.prev.bind(u),c);)if(o(b))return b}if(eh(n)){if(f&&(b=B1(u.next.bind(u),!0),o(b)))return b;for(;b=B1(u.next.bind(u),c);)if(o(b))return b}return null},nA=(e,n)=>{const o=c=>_C(c.dom),r=c=>c.dom===n;return Ys(de.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Td=(e,n)=>{for(;e&&e!==n;){if(OC(e))return e;e=e.parentNode}return null},zi=(e,n,o)=>Td(e.container(),o)===Td(n.container(),o),Hv=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return ix(o)?L.from(o.childNodes[r+e]):L.none()},oA=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},xR=(e,n,o)=>Td(n,e)===Td(o,e),th=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&cx(u)&&(u=u[r]),AC(u)||tA(u)){if(xR(n,u,c))return u;break}if(Fv(u))break;c=c.parentNode}return null},bp=qe(oA,!0),vp=qe(oA,!1),nl=(e,n,o)=>{let r;const c=qe(th,!0,n),u=qe(th,!1,n),f=o.startContainer,b=o.startOffset;if(Wg(f)){const C=hp(f)?f.parentNode:f,E=C.getAttribute("data-mce-caret");if(E==="before"&&(r=C.nextSibling,Fm(r)))return bp(r);if(E==="after"&&(r=C.previousSibling,Fm(r)))return vp(r)}if(!o.collapsed)return o;if(at(f)){if(cx(f)){if(e===1){if(r=u(f),r)return bp(r);if(r=c(f),r)return vp(r)}if(e===-1){if(r=c(f),r)return vp(r);if(r=u(f),r)return bp(r)}return o}if(tm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?bp(r):o;if(jg(f)&&b<=1)return e===-1&&(r=c(f),r)?vp(r):o;if(b===f.data.length)return r=u(f),r?bp(r):o;if(b===0)return r=c(f),r?vp(r):o}return o},Vv=(e,n)=>Hv(e?0:-1,n).filter(AC),nh=(e,n,o)=>{const r=nl(e,n,o);return e===-1?Be.fromRangeStart(r):Be.fromRangeEnd(r)},zv=e=>L.from(e.getNode()).map(de.fromDom),ux=e=>L.from(e.getNode(!0)).map(de.fromDom),DC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Uv=(e,n)=>{const o=zi(e,n);return!o&&ss(e.getNode())?!0:o};var dc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(dc||(dc={}));const Wv=Qo,Gu=at,RC=Ht,MC=ss,Vm=wd,dx=S_,Zf=Wy,Zv=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},jv=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,NC=(e,n)=>{if(eh(e)){if(Vm(n.previousSibling)&&!Gu(n.previousSibling))return Be.before(n);if(Gu(n))return Be(n,0)}if(Hm(e)){if(Vm(n.nextSibling)&&!Gu(n.nextSibling))return Be.after(n);if(Gu(n))return Be(n,n.data.length)}return Hm(e)?MC(n)?Be.before(n):Be.after(n):Be.before(n)},oh=(e,n)=>{const o=n.nextSibling;return o&&Vm(o)?Gu(o)?Be(o,0):Be.before(o):yp(dc.Forwards,Be.after(n),e)},yp=(e,n,o)=>{let r,c,u,f;if(!RC(o)||!n)return null;if(n.isEqual(Be.after(o))&&o.lastChild){if(f=Be.after(o.lastChild),Hm(e)&&Vm(o.lastChild)&&RC(o.lastChild))return MC(o.lastChild)?Be.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(Gu(b)){if(Hm(e)&&C>0)return Be(b,--C);if(eh(e)&&C<b.length)return Be(b,++C);r=b}else{if(Hm(e)&&C>0&&(c=jv(b,C-1),Vm(c)))return!dx(c)&&(u=pp(c,e,Zf,c),u)?Gu(u)?Be(u,u.data.length):Be.after(u):Gu(c)?Be(c,c.data.length):Be.before(c);if(eh(e)&&C<b.childNodes.length&&(c=jv(b,C),Vm(c)))return MC(c)?oh(o,c):!dx(c)&&(u=pp(c,e,Zf,c),u)?Gu(u)?Be(u,0):Be.before(u):Gu(c)?Be(c,0):Be.after(c);r=c||f.getNode()}if(r&&(eh(e)&&f.isAtEnd()||Hm(e)&&f.isAtStart())&&(r=pp(r,e,ut,o,!0),Zf(r,o)))return NC(e,r);c=r&&pp(r,e,Zf,o);const E=Oe(Bt(Zv(b,o),Wv));return E&&(!c||!E.contains(c))?(eh(e)?f=Be.after(E):f=Be.before(E),f):c?NC(e,c):null},Fc=e=>({next:n=>yp(dc.Forwards,n,e),prev:n=>yp(dc.Backwards,n,e)}),mx=(e,n,o)=>{const r=e?Be.before(o):Be.after(o);return Ui(e,n,r)},PC=e=>ss(e)?Be.before(e):Be.after(e),BC=e=>Be.isTextPosition(e)?e.offset()===0:wd(e.getNode()),fx=e=>{if(Be.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return wd(e.getNode(!0))},$C=(e,n)=>!Be.isTextPosition(e)&&!Be.isTextPosition(n)&&e.getNode()===n.getNode(!0),gx=e=>!Be.isTextPosition(e)&&ss(e.getNode()),hx=(e,n,o)=>e?!$C(n,o)&&!gx(n)&&fx(n)&&BC(o):!$C(o,n)&&BC(n)&&fx(o),Ui=(e,n,o)=>{const r=Fc(n);return L.from(e?r.next(o):r.prev(o))},zm=(e,n,o)=>Ui(e,n,o).bind(r=>zi(o,r,n)&&hx(e,o,r)?Ui(e,n,r):L.some(r)),px=(e,n,o,r)=>zm(e,n,o).bind(c=>r(c)?px(e,n,c,r):L.some(c)),sh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return at(o)?L.some(Be(o,e?0:o.data.length)):o?wd(o)?L.some(e?Be.before(o):PC(o)):mx(e,n,o):L.none()},gl=qe(Ui,!0),_i=qe(Ui,!1),hl=qe(sh,!0),Wi=qe(sh,!1),Gv="_mce_caret",Zi=e=>Ht(e)&&e.id===Gv,rh=(e,n)=>{let o=n;for(;o&&o!==e;){if(Zi(o))return o;o=o.parentNode}return null},sA=e=>ee(e.start),bx=e=>pn(e,"rng"),rA=e=>pn(e,"id"),vx=e=>pn(e,"name"),yx=e=>ct.isArray(e.start),IC=e=>!vx(e)&&Ot(e.forward)?e.forward:!0,LC=(e,n)=>(Ht(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Oc=(e,n)=>{const o=L.from(A2(e.getRoot(),n.start)),r=L.from(A2(e.getRoot(),n.end));return $r(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:IC(n)}})},FC=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ra);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},jf=e=>!e.hasChildNodes(),Cp=(e,n)=>Wi(e).fold(We,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),HC=(e,n,o)=>jf(n)&&rh(e,n)?(FC(n,o),!0):!1,qv=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let C=c.length-1;f&&C>=1;C--){const E=f.childNodes;if(HC(u,f,r))return!0;if(c[C]>E.length-1)return HC(u,f,r)?!0:Cp(f,r);f=E[c[C]]}at(f)&&(b=Math.min(c[0],f.data.length)),Ht(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},$1=e=>at(e)&&e.data.length>0,VC=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):$1(r.nextSibling)?(f=r.nextSibling,b=0):$1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):$1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const C=r.previousSibling,E=r.nextSibling;ct.each(ct.grep(r.childNodes),N=>{at(N)&&(N.data=N.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(at(E)&&at(C)&&!vt.browser.isOpera()){const N=C.data.length;C.appendData(E.data),e.remove(E),f=C,b=N}}return L.some(Be(f,b))}else return L.none()},wp=(e,n)=>{const o=e.createRng();return qv(e,!0,n,o)&&qv(e,!1,n,o)?L.some({range:o,forward:IC(n)}):L.none()},zC=(e,n)=>{const o=VC(e,"start",n),r=VC(e,"end",n);return $r(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(LC(e,c.container()),c.offset()),f.setEnd(LC(e,u.container()),u.offset()),{range:f,forward:IC(n)}})},sm=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),ah=(e,n)=>{const o=e.dom;if(n){if(yx(n))return wp(o,n);if(sA(n))return Oc(o,n);if(rA(n))return zC(o,n);if(vx(n))return sm(o,n);if(bx(n))return L.some({range:n.rng,forward:IC(n)})}return L.none()},Cx=(e,n,o)=>B2(e,n,o),Um=(e,n)=>{ah(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ji=e=>Ht(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",rm=(e=>n=>e===n)(Ea),ch=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,UC=e=>!ch(e)&&!rm(e)&&!n1(e),Kv=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Sx=e=>Ps(e,n=>{const o=rp(n);return o?[de.fromDom(o)]:[]}),aA=e=>Kv(e).length>1,cA=e=>Bt(Sx(e),op),xx=e=>Ir(e,"td[data-mce-selected],th[data-mce-selected]"),Gf=(e,n)=>{const o=xx(n);return o.length>0?o:cA(e)},Sp=e=>Gf(Kv(e.selection.getSel()),de.fromDom(e.getBody())),I1=(e,n)=>oa(e,"table",n),lA=e=>{const n=e.startContainer,o=e.startOffset;return at(n)?o===0?L.some(de.fromDom(n)):L.none():L.from(n.childNodes[o]).map(de.fromDom)},iA=e=>{const n=e.endContainer,o=e.endOffset;return at(n)?o===n.data.length?L.some(de.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(de.fromDom)},xp=e=>zd(e).fold(st([e]),n=>[e].concat(xp(n))),WC=e=>Ql(e).fold(st([e]),n=>To(n)==="br"?El(n).map(o=>[e].concat(WC(o))).getOr([]):[e].concat(WC(n))),Yv=(e,n)=>$r(lA(n),iA(n),(o,r)=>{const c=ms(xp(e),qe(Jo,o)),u=ms(WC(e),qe(Jo,r));return c.isSome()&&u.isSome()}).getOr(!1),ZC=(e,n,o,r)=>{const c=o,u=new cc(o,c),f=Yo(e.schema.getMoveCaretBeforeOnEnterElements(),(C,E)=>!Sn(["td","th","table"],E.toLowerCase()));let b=o;do{if(at(b)&&ct.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},jC=e=>{const n=e.selection.getSel();return _e(n)&&n.rangeCount>0},Tp=(e,n)=>{const o=Sp(e);o.length>0?ye(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},GC=(e,n,o)=>{const r=P2(e,n);o(r),e.moveToBookmark(r)},Ep=e=>ns(e==null?void 0:e.nodeType),qC=e=>Ht(e)&&!ji(e)&&!Zi(e)&&!Dm(e),Wo=(e,n)=>{if(qC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},am=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Qo(u);GC(r,!0,()=>{n()}),f&&Qo(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&lh(c,r)},lh=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Wo(e,b)&&Ht(u)){const C=u.childNodes,E=e.getRoot();let M;if(f<C.length){const N=C[f];M=new cc(N,(o=e.getParent(N,e.isBlock))!==null&&o!==void 0?o:E)}else{const N=C[C.length-1];M=new cc(N,(r=e.getParent(N,e.isBlock))!==null&&r!==void 0?r:E),M.next(!0)}for(let N=M.current();N;N=M.next()){if(e.getContentEditable(N)==="false")return;if(at(N)&&!YC(N)){c.setStart(N,0),n.setRng(c);return}}}},L1=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ht(e)||!YC(e))return e}},KC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||du(e,n),Wm=(e,n,o)=>e.schema.isValidChild(n,o),YC=(e,n=!1)=>{if(_e(e)&&at(e)){const o=n?e.data.replace(/ /g," "):e.data;return bi(o)}else return!1},Xv=e=>_e(e)&&at(e)&&e.length===0,XC=(e,n)=>{const o="[data-mce-cef-wrappable]",r=U2(e),c=dr(r)?o:`${o},${r}`;return jc(de.fromDom(n),c)},JC=(e,n)=>{const o=e.dom;return qC(n)&&o.getContentEditable(n)==="false"&&XC(e,n)&&o.select('[contenteditable="true"]',n).length===0},ih=(e,n)=>ie(e)?e(n):(_e(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Jv=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),uh=(e,n)=>{if(wn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=pd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Qv=(e,n,o)=>{const r=e.getStyle(n,o);return uh(r,o)},Tx=(e,n)=>{let o;return e.getParent(n,r=>Ht(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},kp=(e,n,o)=>e.getParents(n,o,e.getRoot()),e0=(e,n,o)=>{const r=e.formatter.get(n);return _e(r)&&Ro(r,o)},uA=(e,n)=>e0(e,n,r=>{const c=u=>ie(u)||u.length>1&&u.charAt(0)==="%";return Ro(["styles","attributes"],u=>os(r,u).exists(f=>{const b=tt(f)?f:Wa(f);return Ro(b,c)}))}),t0=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Yo(u,(f,b)=>Ro(r,C=>C===b));return e0(e,n,u=>{const f=c(u);return e0(e,o,b=>{const C=c(b);return Za(f,C)})})},Zm=e=>pr(e,"block"),dA=e=>Zm(e)&&e.wrapper===!0,F1=e=>Zm(e)&&e.wrapper!==!0,bu=e=>pr(e,"selector"),mc=e=>pr(e,"inline"),mA=e=>bu(e)&&mc(e)&&xs(os(e,"mixed"),!0),Ed=e=>bu(e)&&e.expand!==!1&&!mc(e),fA=e=>{const n=[];let o=e;for(;o;){if(at(o)&&o.data!==ra||o.childNodes.length>1)return[];Ht(o)&&n.push(o),o=o.firstChild}return n},Ex=e=>fA(e).length>0,H1=e=>Zi(e.dom)&&Ex(e.dom),_p=ji,kx=kp,_x=YC,TR=KC,ER=e=>ss(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ax=(e,n)=>{let o=n;for(;o;){if(Ht(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Ox=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Wt=(e,n,o)=>Ox(e,n,o,r=>rm(r)||ch(r)),fc=(e,n,o)=>Ox(e,n,o,UC),V1=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(M,N,P)=>{const j=Mf(e),Q=c?j.backwards:j.forwards;return L.from(Q(M,N,(q,te)=>_p(q.parentNode)?-1:(f=q,P(c,q,te)),b))};return C(o,r,Wt).bind(M=>u?C(M.container,M.offset+(c?-1:0),fc):L.some(M)).orThunk(()=>f?L.some({container:f,offset:c?0:f.length}):L.none())},gc=(e,n,o,r,c)=>{const u=r[c];at(r)&&dr(r.data)&&u&&(r=u);const f=kx(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const E=n[C];if(!(_e(E.collapsed)&&E.collapsed!==o.collapsed)&&bu(E)&&e.is(f[b],E.selector))return f[b]}return r},vu=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(Zm(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(at(o)?o.parentNode:o,E=>E!==f&&TR(e.schema,E),C)}if(u&&Zm(b)&&b.wrapper&&(u=kx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Jv(u,"br")););return u||o},QC=(e,n,o,r)=>{const c=o.parentNode;return _e(o[r])?!1:c===n||wn(c)||e.isBlock(c)?!0:QC(e,n,c,r)},dh=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(at(o)&&!_x(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const E=at(C)&&!QC(e,b,C,f);if(!_p(C)&&!ER(C)&&!_x(C,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},n0=e=>_p(e.parentNode)||_p(e),qf=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return Ht(c)&&c.hasChildNodes()&&(c=Ut(c,u),at(c)&&(u=0)),Ht(f)&&f.hasChildNodes()&&(f=Ut(f,n.collapsed?b:b-1),at(f)&&(b=f.data.length)),c=Ax(e,c),f=Ax(e,f),n0(c)&&(c=_p(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,at(c)&&(u=n.collapsed?c.length:0)),n0(f)&&(f=_p(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,at(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(V1(e,e.getRoot(),c,u,!0,r).each(({container:N,offset:P})=>{c=N,u=P}),V1(e,e.getRoot(),f,b,!1,r).each(({container:N,offset:P})=>{f=N,b=P})),(mc(C)||C.block_expand)&&((!mc(C)||!at(c)||u===0)&&(c=dh(e,o,c,u,!0)),(!mc(C)||!at(f)||b===f.data.length)&&(f=dh(e,o,f,b,!1))),Ed(C)&&(c=gc(e,o,n,c,"previousSibling"),f=gc(e,o,n,f,"nextSibling")),(Zm(C)||bu(C))&&(c=vu(e,o,c,"previousSibling"),f=vu(e,o,f,"nextSibling"),Zm(C)&&(e.isBlock(c)||(c=dh(e,o,c,u,!0),at(c)&&(u=0)),e.isBlock(f)||(f=dh(e,o,f,b,!1),at(f)&&(b=f.data.length)))),Ht(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Ht(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},z1=(e,n,o)=>{var r;const c=n.startOffset,u=Ut(n.startContainer,c),f=n.endOffset,b=Ut(n.endContainer,f-1),C=te=>{const he=te[0];at(he)&&he===u&&c>=he.data.length&&te.splice(0,1);const we=te[te.length-1];return f===0&&te.length>0&&we===b&&at(we)&&te.splice(te.length-1,1),te},E=(te,he,we)=>{const be=[];for(;te&&te!==we;te=te[he])be.push(te);return be},M=(te,he)=>e.getParent(te,we=>we.parentNode===he,he),N=(te,he,we)=>{const be=we?"nextSibling":"previousSibling";for(let Ae=te,ot=Ae.parentNode;Ae&&Ae!==he;Ae=ot){ot=Ae.parentNode;const wt=E(Ae===te?Ae:Ae[be],be);wt.length&&(we||wt.reverse(),o(C(wt)))}};if(u===b)return o(C([u]));const P=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return N(u,P,!0);if(e.isChildOf(b,u))return N(b,P);const j=M(u,P)||u,Q=M(b,P)||b;N(u,j,!0);const q=E(j===u?j:j.nextSibling,"nextSibling",Q===b?Q.nextSibling:Q);q.length&&o(C(q)),N(b,Q)},Dx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],gA=e=>Me(e)&&p1(e)===ra,hA=(e,n,o,r)=>ac(n).fold(()=>"skipping",c=>r==="br"||gA(n)?"valid":c_(n)?"existing":Zi(n.dom)?"caret":Ro(Dx,u=>jc(n,u))?"valid-block":!Wm(e,o,r)||!Wm(e,To(c),o)?"invalid-child":"valid"),pA=(e,n)=>{const o=qf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Kf=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;Nu(e,Yh()),Co(e,`${Xh()}`,f),Co(e,`${Qd()}`,r);const{attributes:C={},classes:E=[]}=c(f,b);if(Zr(e,C),ov(e,E),u){E.length>0&&Co(e,`${Rf()}`,E.join(","));const M=fs(C);M.length>0&&Co(e,`${em()}`,M.join(","))}},U1=e=>{$i(e,Yh()),Cr(e,`${Xh()}`),Cr(e,`${Qd()}`),Cr(e,`${Fg()}`);const n=Dr(e,`${em()}`).map(r=>r.split(",")).getOr([]),o=Dr(e,`${Rf()}`).map(r=>r.split(",")).getOr([]);ye(n,r=>Cr(e,r)),vR(e,o),Cr(e,`${Rf()}`),Cr(e,`${em()}`)},W1=(e,n,o,r,c)=>{const u=de.fromTag("span",e);return Kf(u,n,o,r,c,!1),u},o0=(e,n,o,r,c,u)=>{const f=[],b=W1(e.getDoc(),o,u,r,c),C=ic(),E=()=>{C.clear()},M=()=>C.get().getOrThunk(()=>{const Q=vd(b);return f.push(Q),C.set(Q),Q}),N=Q=>{ye(Q,P)},P=Q=>{switch(hA(e,Q,"span",To(Q))){case"invalid-child":{E();const te=Ta(Q);N(te),E();break}case"valid-block":{E(),Kf(Q,o,u,r,c,!0);break}case"valid":{const te=M();Og(Q,te);break}}},j=Q=>{const q=gn(Q,de.fromDom);N(q)};return z1(e.dom,n,Q=>{E(),j(Q)}),f},Ai=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Sp(e).length>0,b=Jh("mce-annotation");if(u.collapsed&&!f&&pA(e,u),c.getRng().collapsed&&!f){const C=W1(e.getDoc(),b,r,n,o.decorate);$u(C,Ea),c.getRng().insertNode(C.dom),c.select(C.dom)}else GC(c,!1,()=>{Tp(e,C=>{o0(e,C,b,n,o.decorate,r)})})})},cm=e=>{const n=By();tv(e,n);const o=Py(e,n),r=Ls("span"),c=u=>{ye(u,f=>{r(f)?pi(f):U1(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Ai(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Vg(e,L.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();ft(i2(e,u),(b,C)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=i2(e,u);return yo(f,b=>gn(b,C=>C.dom))}}},Yf=e=>({getBookmark:qe(Cx,e),moveToBookmark:qe(Um,e)});Yf.isBookmarkNode=ji;const Xf=(e,n,o)=>o.collapsed?!1:Ro(o.getClientRects(),r=>g_(r,e,n)),bA=(e,n)=>e.dispatch("PreProcess",n),s0=(e,n)=>e.dispatch("PostProcess",n),r0=e=>{e.dispatch("remove")},vA=e=>{e.dispatch("detach")},yA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},CA=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},wA=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Rx=e=>{e.dispatch("PreInit")},a0=e=>{e.dispatch("PostRender")},SA=e=>{e.dispatch("Init")},c0=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Hc=(e,n,o)=>{e.dispatch(n,o)},yu=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Gi=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},l0=(e,n)=>e.dispatch("BeforeSetContent",n),i0=(e,n)=>e.dispatch("SetContent",n),Mx=(e,n)=>e.dispatch("BeforeGetContent",n),ew=(e,n)=>e.dispatch("GetContent",n),Nx=(e,n)=>{e.dispatch("AutocompleterStart",n)},tw=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Px=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Bx=e=>{e.dispatch("AutocompleterEnd")},xA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),TA=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),u0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),nw=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),mt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||mt.metaKeyPressed(e),metaKeyPressed:e=>vt.os.isMacOS()||vt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ll="data-mce-selected",$x="table,img,figure.image,hr,video,span.mce-preview-object,details",ow=Math.abs,Z1=Math.round,j1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},d0=e=>e.type==="longpress"||e.type.indexOf("touch")===0,G1=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,C,E,M,N,P,j,Q,q,te,he,we,be,Ae,ot,wt;const zt=Vt=>_e(Vt)&&(Fh(Vt)||o.is(Vt,"figure.image")),Ve=Vt=>Tc(Vt)||o.hasClass(Vt,"mce-preview-object"),Ie=(Vt,xo)=>{if(d0(Vt)){const Mo=Vt.touches[0];return zt(Vt.target)&&!Xf(Mo.clientX,Mo.clientY,xo)}else return zt(Vt.target)&&!Xf(Vt.clientX,Vt.clientY,xo)},et=Vt=>{const xo=Vt.target;Ie(Vt,n.selection.getRng())&&!Vt.isDefaultPrevented()&&n.selection.select(xo)},Qt=Vt=>o.hasClass(Vt,"mce-preview-object")&&_e(Vt.firstElementChild)?[Vt,Vt.firstElementChild]:o.is(Vt,"figure.image")?[Vt.querySelector("img")]:[Vt],bn=Vt=>{const xo=Vi(n);return!xo||Vt.getAttribute("data-mce-resize")==="false"||Vt===n.getBody()?!1:o.hasClass(Vt,"mce-preview-object")&&_e(Vt.firstElementChild)?jc(de.fromDom(Vt.firstElementChild),xo):jc(de.fromDom(Vt),xo)},co=(Vt,xo)=>{if(Ve(xo))return Vt.create("img",{src:vt.transparentSrc});if(lu(xo)){const pc=Uo(E.name,"n")?Ft:Jn,Ss=xo.cloneNode(!0);return pc(Vt.select("tr",Ss)).each(za=>{const ed=Vt.select("td,th",za);Vt.setStyle(za,"height",null),ye(ed,wm=>Vt.setStyle(wm,"height",null))}),Ss}else return xo.cloneNode(!0)},Do=(Vt,xo,Mo)=>{if(_e(Mo)){const pc=Qt(Vt);ye(pc,Ss=>{Ss.style[xo]||!n.schema.isValid(Ss.nodeName.toLowerCase(),xo)?o.setStyle(Ss,xo,Mo):o.setAttrib(Ss,xo,""+Mo)})}},ps=(Vt,xo,Mo)=>{Do(Vt,"width",xo),Do(Vt,"height",Mo)},Ns=Vt=>{let xo,Mo,pc,Ss,za;xo=Vt.screenX-N,Mo=Vt.screenY-P,be=xo*E[2]+q,Ae=Mo*E[3]+te,be=be<5?5:be,Ae=Ae<5?5:Ae,(zt(f)||Ve(f))&&A1(n)!==!1?pc=!mt.modifierPressed(Vt):pc=mt.modifierPressed(Vt),pc&&(ow(xo)>ow(Mo)?(Ae=Z1(be*he),be=Z1(Ae/he)):(be=Z1(Ae/he),Ae=Z1(be*he))),ps(b,be,Ae),Ss=E.startPos.x+xo,za=E.startPos.y+Mo,Ss=Ss>0?Ss:0,za=za>0?za:0,o.setStyles(C,{left:Ss,top:za,display:"block"}),C.innerHTML=be+" &times; "+Ae,E[2]<0&&b.clientWidth<=be&&o.setStyle(b,"left",j+(q-be)),E[3]<0&&b.clientHeight<=Ae&&o.setStyle(b,"top",Q+(te-Ae)),xo=u.scrollWidth-ot,Mo=u.scrollHeight-wt,xo+Mo!==0&&o.setStyles(C,{left:Ss-xo,top:za-Mo}),we||(CA(n,f,q,te,"corner-"+E.name),we=!0)},Yr=()=>{const Vt=we;we=!1,Vt&&(Do(f,"width",be),Do(f,"height",Ae)),o.unbind(r,"mousemove",Ns),o.unbind(r,"mouseup",Yr),c!==r&&(o.unbind(c,"mousemove",Ns),o.unbind(c,"mouseup",Yr)),o.remove(b),o.remove(C),o.remove(M),Wc(f),Vt&&(wA(n,f,be,Ae,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Wc=Vt=>{$t();const xo=o.getPos(Vt,u),Mo=xo.x,pc=xo.y,Ss=Vt.getBoundingClientRect(),za=Ss.width||Ss.right-Ss.left,ed=Ss.height||Ss.bottom-Ss.top;f!==Vt&&(_t(),f=Vt,be=Ae=0);const wm=n.dispatch("ObjectSelected",{target:Vt});bn(Vt)&&!wm.isDefaultPrevented()?ft(j1,(zl,Ji)=>{const _u=td=>{const vn=Qt(f)[0];N=td.screenX,P=td.screenY,q=vn.clientWidth,te=vn.clientHeight,he=te/q,E=zl,E.name=Ji,E.startPos={x:za*zl[0]+Mo,y:ed*zl[1]+pc},ot=u.scrollWidth,wt=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=co(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Mo,top:pc,margin:0}),ps(b,za,ed),b.removeAttribute(Ll),u.appendChild(b),o.bind(r,"mousemove",Ns),o.bind(r,"mouseup",Yr),c!==r&&(o.bind(c,"mousemove",Ns),o.bind(c,"mouseup",Yr)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},q+" &times; "+te)};let Qi=o.get("mceResizeHandle"+Ji);Qi&&o.remove(Qi),Qi=o.add(u,"div",{id:"mceResizeHandle"+Ji,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ji+"-resize; margin:0; padding:0"}),o.bind(Qi,"mousedown",td=>{td.stopImmediatePropagation(),td.preventDefault(),_u(td)}),zl.elm=Qi,o.setStyles(Qi,{left:za*zl[0]+Mo-Qi.offsetWidth/2,top:ed*zl[1]+pc-Qi.offsetHeight/2})}):_t(!1)},As=h1(Wc,0),_t=(Vt=!0)=>{As.cancel(),$t(),f&&Vt&&f.removeAttribute(Ll),ft(j1,(xo,Mo)=>{const pc=o.get("mceResizeHandle"+Mo);pc&&(o.unbind(pc),o.remove(pc))})},fn=(Vt,xo)=>o.isChildOf(Vt,xo),ts=Vt=>{if(we||n.removed||n.composing)return;const xo=Vt.type==="mousedown"?Vt.target:e.getNode(),Mo=Ii(de.fromDom(xo),$x).map(Ss=>Ss.dom).filter(Ss=>o.isEditable(Ss.parentElement)||Ss.nodeName==="IMG"&&o.isEditable(Ss)).getOrUndefined(),pc=_e(Mo)?o.getAttrib(Mo,Ll,"1"):"1";if(ye(o.select(`img[${Ll}],hr[${Ll}]`),Ss=>{Ss.removeAttribute(Ll)}),_e(Mo)&&fn(Mo,u)&&n.hasFocus()){On();const Ss=e.getStart(!0);if(fn(Ss,Mo)&&fn(e.getEnd(!0),Mo)){o.setAttrib(Mo,Ll,pc),As.throttle(Mo);return}}_t()},$t=()=>{ft(j1,Vt=>{Vt.elm&&(o.unbind(Vt.elm),delete Vt.elm)})},On=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{On(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ts),n.on("keyup compositionend",Vt=>{f&&f.nodeName==="TABLE"&&ts(Vt)}),n.on("hide blur",_t),n.on("contextmenu longpress",et,!0)}),n.on("remove",$t),{isResizable:bn,showResizeRect:Wc,hideResizeRect:_t,updateResizeRect:ts,destroy:()=>{As.cancel(),f=b=M=null}}},Ix=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Lx=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},sw=(e,n,o)=>{const r=e.document.createRange();return Ix(r,n),Lx(r,o),r},rw=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},jm=ys.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),aw=(e,n,o)=>n(de.fromDom(o.startContainer),o.startOffset,de.fromDom(o.endContainer),o.endOffset),Fx=(e,n)=>n.match({domRange:o=>({ltr:st(o),rtl:L.none}),relative:(o,r)=>({ltr:He(()=>sw(e,o,r)),rtl:He(()=>L.some(sw(e,r,o)))}),exact:(o,r,c,u)=>({ltr:He(()=>rw(e,o,r,c,u)),rtl:He(()=>L.some(rw(e,c,u,o,r)))})}),EA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>jm.rtl(de.fromDom(c.endContainer),c.endOffset,de.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>aw(e,jm.ltr,o)):aw(e,jm.ltr,o)},kA=(e,n)=>{const o=Fx(e,n);return EA(e,o)};jm.ltr,jm.rtl;const ai={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},pl=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return L.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),L.some(f)})},Ap=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},kR=document.caretPositionFromPoint?pl:document.caretRangeFromPoint?Ap:L.none,_A=(e,n,o)=>{const r=de.fromDom(e.document);return kR(r,n,o).map(c=>ai.create(de.fromDom(c.startContainer),c.startOffset,de.fromDom(c.endContainer),c.endOffset))},cw=ys.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Vo=(e,n,o,r)=>e.fold(n,o,r),_R=e=>e.fold(Po,Po,Po),Vx=cw.before,zx=cw.on,AR=cw.after,Jf={before:Vx,on:zx,after:AR,cata:Vo,getStart:_R},q1=ys.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),AA=e=>q1.exact(e.start,e.soffset,e.finish,e.foffset),OA=e=>e.match({domRange:n=>de.fromDom(n.startContainer),relative:(n,o)=>Jf.getStart(n),exact:(n,o,r,c)=>n}),DA=q1.domRange,m0=q1.relative,K1=q1.exact,Ux=e=>{const n=OA(e);return mi(n)},OR=ai.create,Op={domRange:DA,relative:m0,exact:K1,exactFromRange:AA,getWin:Ux,range:OR},lw=(e,n)=>{const o=To(e);return o==="input"?Jf.after(e):Sn(["br","img"],o)?n===0?Jf.before(e):Jf.after(e):Jf.on(e,n)},DR=(e,n)=>{const o=e.fold(Jf.before,lw,Jf.after),r=n.fold(Jf.before,lw,Jf.after);return Op.relative(o,r)},Wx=(e,n,o,r)=>{const c=lw(e,n),u=lw(o,r);return Op.relative(c,u)},RA=e=>e.match({domRange:n=>{const o=de.fromDom(n.startContainer),r=de.fromDom(n.endContainer);return Wx(o,n.startOffset,r,n.endOffset)},relative:DR,exact:Wx}),In=(e,n)=>{const r=document.createDocumentFragment();return ye(e,c=>{r.appendChild(c.dom)}),de.fromDom(r)},i=e=>{const n=Op.getWin(e).dom,o=(c,u,f,b)=>rw(n,c,u,f,b),r=RA(e);return kA(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>_A(e,n,o),p=(e,n,o)=>{const r=mi(de.fromDom(o));return m(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},v=(e,n)=>_e(e)&&_e(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,T=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},D=(e,n,o)=>T(e,n,o)!==null,I=(e,n,o)=>D(e,n,r=>r.nodeName===o),Z=(e,n)=>ki(e)&&!D(e,n,Zi),J=(e,n,o)=>{const r=n.parentNode;if(r){const c=new cc(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(ss(u))return!0}return!1},me=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},ke=(e,n)=>{let o=n;for(;o&&o!==e;){if(Qo(o))return!0;o=o.parentNode}return!1},lt=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let C,E;if(!b)return L.none();const M=e.getParent(b,e.isBlock)||u;if(r&&ss(c)&&n&&e.isEmpty(M))return L.some(Be(b,e.nodeIndex(c)));const N=new cc(c,M);for(;E=N[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||Z(E,u))return L.none();if(at(E)&&E.data.length>0)return I(E,u,"A")?L.none():L.some(Be(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return L.none();C=E}return Ia(C)?L.none():o&&C?L.some(Be(C,0)):L.none()},Lt=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const E=Ht(b)&&C===b.childNodes.length,M=e.schema.getNonEmptyElements();let N=o;if(ki(b))return L.none();if(Ht(b)&&C>b.childNodes.length-1&&(N=!1),Cf(b)&&(b=c,C=0),b===c){if(N&&(u=b.childNodes[C>0?C-1:0],u&&(ki(u)||M[u.nodeName]||lu(u))))return L.none();if(b.hasChildNodes()){if(C=Math.min(!N&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=at(b)&&E?b.data.length:0,!n&&b===c.lastChild&&lu(b)||ke(c,b)||ki(b)||ti(b))return L.none();if(b.hasChildNodes()&&!lu(b)){u=b;const P=new cc(b,c);do{if(Qo(u)||ki(u)){f=!1;break}if(at(u)&&u.data.length>0){C=N?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!ha(u)){C=e.nodeIndex(u),b=u.parentNode,N||C++,f=!0;break}}while(u=N?P.next():P.prev())}}}return n&&(at(b)&&C===0&&lt(e,E,n,!0,b).each(P=>{b=P.container(),C=P.offset(),f=!0}),Ht(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&ss(u)&&!me(u,"A")&&!J(e,u,!1)&&!J(e,u,!0)&&lt(e,E,n,!0,u).each(P=>{b=P.container(),C=P.offset(),f=!0}))),N&&!n&&at(b)&&C===b.data.length&&lt(e,E,n,!1,b).each(P=>{b=P.container(),C=P.offset(),f=!0}),f&&b?L.some(Be(b,C)):L.none()},Dt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Be.fromRangeStart(n);return Lt(e,o,!0,r).each(u=>{(!o||!Be.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Lt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?L.none():L.some(r)},St=(e,n)=>e.splitText(n),rn=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&at(n)){if(o>0&&o<n.data.length)if(r=St(n,o),n=r.previousSibling,c>o){c=c-o;const u=St(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(at(n)&&o>0&&o<n.data.length&&(n=St(n,o),o=0),at(r)&&c>0&&c<r.data.length){const u=St(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},rt=e=>({walk:(u,f)=>z1(e,u,f),split:rn,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=qf(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>Dt(e,u).fold(We,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});rt.compareRanges=v,rt.getCaretRangeFromPoint=p,rt.getSelectedNode=rp,rt.getNode=Ut;const Mn=((e,n)=>{const o=(b,C)=>{if(!ns(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const E=b.dom;ld(E)&&(E.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const E=Rr(b,e);return parseFloat(E)||0}return C},c=r,u=(b,C)=>Bo(C,(E,M)=>{const N=Rr(b,M),P=N===void 0?0:parseInt(N,10);return isNaN(P)?E:E+P},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,C,E)=>{const M=u(b,E);return C>M?C-M:0}}})("height",e=>{const n=e.dom;return au(e)?n.getBoundingClientRect().height:n.offsetHeight}),Nt=e=>Mn.get(e),ds=()=>de.fromDom(document),Ms=(e,n)=>e.view(n).fold(st([]),r=>{const c=e.owner(r),u=Ms(e,c);return[r].concat(u)}),Es=(e,n)=>{const o=n.owner(e);return Ms(n,o)};var lm=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(de.fromDom)},owner:e=>xa(e)});const Qf=e=>{const n=ds(),o=Qe(n),r=Es(e,lm),c=ge(e),u=Is(r,(f,b)=>{const C=ge(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return x(u.left+c.left+o.left,u.top+c.top+o.top)},eg=e=>To(e)==="textarea",Cs=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Fl=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Hl=(e,n)=>{const o=Ta(e);if(o.length===0||eg(e))return{element:e,offset:n};if(n<o.length&&!eg(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return eg(r)?{element:e,offset:n}:To(r)==="img"?{element:r,offset:1}:Me(r)?{element:r,offset:p1(r).length}:{element:r,offset:Ta(r).length}}},Cu=(e,n)=>{const o=ce(e),r=Nt(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},wu=(e,n)=>{const o=Hl(e,n),r=de.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ra+"</span>");return xc(o.element,r),Cu(r,()=>Ds(r))},Oo=e=>Cu(de.fromDom(e),It),Kr=(e,n,o,r)=>{to(e,(c,u)=>Y1(e,n,o,r),o)},im=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(Cs(e,u))return;const f=Qe(n).top;o(e,n,f,r,c),Fl(e,u)},Y1=(e,n,o,r)=>{const c=de.fromDom(e.getBody()),u=de.fromDom(e.getDoc());sa(c);const f=wu(de.fromDom(o.startContainer),o.startOffset);im(e,u,n,f,r),f.cleanup()},Oi=(e,n,o,r)=>{const c=de.fromDom(e.getDoc());im(e,c,o,Oo(n),r)},to=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(de.fromDom(r),de.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},iw=(e,n,o,r,c)=>{const u=n.pos;if(r)An(u.left,u.top,c);else{const f=u.top-o+n.height;An(-e.getBody().getBoundingClientRect().left,f,c)}},uw=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,C=c.bottom,E=C-b>=r;b<o?iw(e,c,r,u!==!1,n):b>f?iw(e,c,r,E?u!==!1:u===!0,n):C>f&&!E&&iw(e,c,r,u===!0,n)},f0=(e,n,o,r,c)=>{const u=mi(n).dom.innerHeight;uw(e,n,o,u,r,c)},Zx=(e,n,o,r,c)=>{const u=mi(n).dom.innerHeight;uw(e,n,o,u,r,c);const f=Qf(r.element),b=sr(window);f.top<b.y?Kn(r.element,c!==!1):f.top>b.bottom&&Kn(r.element,c===!0)},mh=(e,n,o)=>Kr(e,f0,n,o),Gm=(e,n,o)=>Oi(e,n,f0,o),jx=(e,n,o)=>Kr(e,Zx,n,o),X1=(e,n,o)=>Oi(e,n,Zx,o),xF=(e,n,o)=>{(e.inline?Gm:X1)(e,n,o)},dw=(e,n,o)=>{(e.inline?mh:jx)(e,n,o)},g0=(e,n=!1)=>e.dom.focus({preventScroll:n}),J1=e=>{const n=kl(e).dom;return e.dom===n.activeElement},MA=(e=ds())=>L.from(e.dom.activeElement).map(de.fromDom),RR=e=>MA(kl(e)).filter(n=>e.dom.contains(n.dom)),MR=(e,n)=>{const o=Me(n)?p1(n).length:Ta(n).length+1;return e>o?o:e<0?0:e},TF=e=>Op.range(e.start,MR(e.soffset,e.start),e.finish,MR(e.foffset,e.finish)),NR=(e,n)=>!Zd(n.dom)&&(wc(e,n)||Jo(e,n)),NA=e=>n=>NR(e,n.start)&&NR(e,n.finish),zj=e=>e.inline||vt.browser.isFirefox(),EF=e=>Op.range(de.fromDom(e.startContainer),e.startOffset,de.fromDom(e.endContainer),e.endOffset),PR=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(EF)},PA=e=>{const n=mi(e);return PR(n.dom).filter(NA(e))},BA=(e,n)=>L.from(n).filter(NA(e)).map(TF),$A=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},mw=e=>{const n=zj(e)?PA(de.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},Gx=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>BA(de.fromDom(e.getBody()),o)).bind($A),BR=e=>{Gx(e).each(n=>e.selection.setRng(n))},$R={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},IR=(e,n)=>(ns(n)||(n=0),setTimeout(e,n)),kF=(e,n)=>(ns(n)||(n=0),setInterval(e,n)),qu={setEditorTimeout:(e,n,o)=>IR(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=kF(()=>{e.removed?clearInterval(r):n()},o);return r}},LR=e=>e.type==="nodechange"&&e.selectionChange,FR=(e,n)=>{const o=()=>{n.throttle()};hr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{hr.DOM.unbind(document,"mouseup",o)})},HR=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},VR=(e,n)=>{HR(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{LR(o)||mw(e)})},_F=e=>{const n=h1(()=>{mw(e)},0);e.on("init",()=>{e.inline&&FR(e,n),VR(e,n)}),e.on("remove",()=>{n.cancel()})};let h0;const LA=hr.DOM,AF=e=>Ht(e)&&$R.isEditorUIElement(e),FA=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},qx=(e,n)=>{const o=D1(e);return LA.getParent(n,c=>AF(c)||(o?e.dom.is(c,o):!1))!==null},HA=e=>{try{const n=kl(de.fromDom(e.getElement()));return MA(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},OF=(e,n)=>{const o=n.editor;_F(o);const r=(c,u)=>{if(Rv(c)&&c.inline!==!0){const f=de.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;FA(HA(o))&&r(o,Nu),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{qu.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!FA(HA(o))||c!==o)&&r(o,$i),!qx(o,HA(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),h0||(h0=c=>{const u=e.activeEditor;u&&ff(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!qx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},LA.bind(document,"focusin",h0))},Kx=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&h0&&(LA.unbind(document,"focusin",h0),h0=null)},zR=e=>{e.on("AddEditor",qe(OF,e)),e.on("RemoveEditor",qe(Kx,e))},DF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),UR=e=>e.collapsed?L.from(Ut(e.startContainer,e.startOffset)).map(de.fromDom):L.none(),WR=(e,n)=>UR(n).bind(o=>np(o)?L.some(o):wc(e,o)?L.none():L.some(e)),ZR=(e,n)=>{WR(de.fromDom(e.getBody()),n).bind(o=>hl(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},VA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},RF=e=>J1(e)||RR(e).isSome(),MF=e=>_e(e.iframeElement)&&J1(de.fromDom(e.iframeElement)),NF=e=>{const n=e.getBody();return n&&RF(de.fromDom(n))},jR=e=>{const n=kl(de.fromDom(e.getElement()));return MA(n).filter(o=>!FA(o.dom)&&qx(e,o.dom)).isSome()},Q1=e=>e.inline?NF(e):MF(e),fw=e=>Q1(e)||jR(e),PF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{Gx(f).each(b=>{f.selection.setRng(b),r=b})};!Q1(e)&&e.hasEditableRoot()&&c(e);const u=DF(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){VA(u),e.hasEditableRoot()||c(e),ZR(e,r),zA(e);return}e.inline||(vt.browser.isOpera()||VA(o),e.getWin().focus()),(vt.browser.isFirefox()||e.inline)&&(VA(o),ZR(e,r)),zA(e)},zA=e=>e.editorManager.setActive(e),UA=(e,n)=>{e.removed||(n?zA(e):PF(e))},GR=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),WA=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return L.from(u).map(de.fromDom).map(b=>!r||!n.collapsed?Pu(b,c(b,f)).getOr(b):b).bind(b=>Te(b)?L.some(b):ac(b).filter(Te)).map(b=>b.dom).getOr(e)},ZA=(e,n,o=!1)=>WA(e,n,!0,o,(r,c)=>Math.min(Xa(r),c)),jA=(e,n,o=!1)=>WA(e,n,!1,o,(r,c)=>c>0?c-1:c),qR=(e,n)=>{const o=e;for(;e&&at(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},BF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),at(o)&&at(r)&&(o.length===c?o=qR(o.nextSibling,!0):o=o.parentNode,u===0?r=qR(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=at(f)?f.parentNode:f;return ei(b)?b:e},$F=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||ZA(u,n,n.collapsed),e.isBlock),b=e.getParent(r||jA(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let C;const E=new cc(f,u);for(;(C=E.next())&&C!==b;)e.isBlock(C)&&c.push(C)}return b&&f!==b&&b!==u&&c.push(b),c},IF=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(ZC(e,f,r,!0),ZC(e,f,r,!1)),f})),p0=(e,n)=>gn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),KR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},gw=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},YR=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!bi(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},GA=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Di{static create(n,o){const r=new Di(n,KR[n]||1);return o&&ft(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return _e(n)&&ft(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Di(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=gw(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=gw(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(GA(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||GA(f))return!1}if(f.type===8||f.type===3&&!YR(f)||f.type===3&&f.parent&&o[f.parent.name]&&bi((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=gw(f,u));return!0}walk(n){return gw(this,null,n)}}const LF=ct.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),XR=e=>ee(e.nodeValue)&&e.nodeValue.includes(ra),JR=e=>`${e.length===0?"":`${gn(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,FF=(e,n)=>n.querySelectorAll(JR(e)),QR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>XR(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),eM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(XR(n)){const o=n.parentNode;return o&&pn(LF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),HF=e=>QR(e).nextNode()!==null,VF=e=>eM(e).nextNode()!==null,zF=(e,n)=>n.querySelector(JR(e))!==null,UF=(e,n)=>{ye(FF(e,n),o=>{const r=de.fromDom(o);Ks(r,"data-mce-bogus")==="all"?Ds(r):ye(e,c=>{Sr(r,c)&&Cr(r,c)})})},tM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},Yx=A(tM,QR),nM=A(tM,eM),qA=(e,n)=>{const o=[{condition:qe(zF,n),action:qe(UF,n)},{condition:HF,action:Yx},{condition:VF,action:nM}];let r=e,c=!1;return ye(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},oM=e=>{const n=Ir(e,"[data-mce-bogus]");ye(n,o=>{Ks(o,"data-mce-bogus")==="all"?Ds(o):tp(o)?(xc(o,de.fromText(Lh)),Ds(o)):pi(o)})},sM=e=>{const n=Ir(e,"input");ye(n,o=>{Cr(o,"name")})},WF=(e,n)=>{const o=tl(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},ZF=(e,n)=>{const o=e.getDoc(),r=kl(de.fromDom(e.getBody())),c=de.fromTag("div",o);Co(c,"data-mce-bogus","all"),eo(c,{position:"fixed",left:"-9999999px",top:"0"}),$u(c,n.innerHTML),oM(c),sM(c);const u=Mh(r);mr(u,c);const f=Ei(c.dom.innerText);return Ds(c),f},jF=(e,n,o)=>{let r;return n.format==="raw"?r=ct.trim(Ei(qA(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=ZF(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=WF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!v1(de.fromDom(o))&&ee(r)?ct.trim(r):r},GF=(e,n)=>L.from(e.getBody()).fold(st(n.format==="tree"?new Di("body",11):""),o=>jF(e,n,o)),KA=ct.makeMap,rM=e=>{const n=[];e=e||{};const o=e.indent,r=KA(e.indent_before||""),c=KA(e.indent_after||""),u=gd.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,E)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let M=0,N=C.length;M<N;M++){const P=C[M];n.push(" ",P.name,'="',u(P.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&c[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&c[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},fh=(e={},n=Xd())=>{const o=rM(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:C=>{var E;o.text((E=C.value)!==null&&E!==void 0?E:"",C.raw)},8:C=>{var E;o.comment((E=C.value)!==null&&E!==void 0?E:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var E;o.doctype((E=C.value)!==null&&E!==void 0?E:"")},4:C=>{var E;o.cdata((E=C.value)!==null&&E!==void 0?E:"")},11:C=>{let E=C;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=C=>{var E;const M=f[C.type];if(M)M(C);else{const N=C.name,P=N in n.getVoidElements();let j=C.attributes;if(u&&j&&j.length>1){const Q=[];Q.map={};const q=n.getElementRule(C.name);if(q){for(let te=0,he=q.attributesOrder.length;te<he;te++){const we=q.attributesOrder[te];if(we in j.map){const be=j.map[we];Q.map[we]=be,Q.push({name:we,value:be})}}for(let te=0,he=j.length;te<he;te++){const we=j[te].name;if(!(we in Q.map)){const be=j.map[we];Q.map[we]=be,Q.push({name:we,value:be})}}j=Q}}if(o.start(N,j,P),jr(N))ee(C.value)&&o.text(C.value,!0),o.end(N);else if(!P){let Q=C.firstChild;if(Q){(N==="pre"||N==="textarea")&&Q.type===3&&((E=Q.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(Q);while(Q=Q.next)}o.end(N)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},YA=new Set;ye(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{YA.add(n)});const aM=new Set;ye(["background-color"],n=>{aM.add(n)});const cM=["font","text-decoration","text-emphasis"],qF=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),b0=(e,n)=>fs(qF(e,n)),KF=e=>YA.has(e),YF=e=>aM.has(e),lM=(e,n)=>Ro(b0(e,n),o=>KF(o)),XF=(e,n)=>lM(e,n)&&Ro(b0(e,n),o=>YF(o)),JF=e=>Bt(e,n=>Ro(cM,o=>Uo(n,o))),QF=(e,n,o)=>{const r=b0(e,n),c=b0(e,o),u=f=>{var b,C;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return Fo(E)&&Fo(M)&&E!==M};return Ro(r,f=>{const b=C=>Ro(C,E=>E===f);if(!b(c)&&b(cM)){const C=JF(c);return Ro(C,u)}else return u(f)})},iM=(e,n,o)=>L.from(o.container()).filter(at).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),XA=qe(iM,!0,ch),JA=qe(iM,!1,ch),e6=e=>{const n=e.container();return at(n)&&(n.data.length===0||Ug(n.data)&&Yf.isBookmarkNode(n.parentNode))},Dp=(e,n)=>o=>Hv(e?0:-1,o).filter(n).isSome(),uM=e=>Fh(e)&&Rr(de.fromDom(e),"display")==="block",dM=e=>Qo(e)&&!Rg(e),t6=Dp(!0,uM),n6=Dp(!1,uM),mn=Dp(!0,Tc),v0=Dp(!1,Tc),QA=Dp(!0,lu),eO=Dp(!1,lu),tg=Dp(!0,dM),Rp=Dp(!1,dM),o6=e=>e.slice(0,-1),s6=(e,n,o)=>wc(n,e)?o6(Tg(e,r=>o(r)||Jo(r,n))):[],mM=(e,n)=>s6(e,n,We),gh=(e,n)=>[e].concat(mM(e,n)),y0=(e,n,o)=>px(e,n,o,e6),fM=e=>n=>e.isBlock(To(n)),r6=(e,n,o)=>ms(gh(de.fromDom(n.container()),e),fM(o)),gM=(e,n,o,r)=>y0(e,n.dom,o).forall(c=>r6(n,o,r).fold(()=>!zi(c,o,n.dom),u=>!zi(c,o,n.dom)&&wc(u,de.fromDom(c.container())))),Zn=(e,n,o,r)=>r6(n,o,r).fold(()=>y0(e,n.dom,o).forall(c=>!zi(c,o,n.dom)),c=>y0(e,c.dom,o).isNone()),tO=qe(Zn,!1),ro=qe(Zn,!0),hM=qe(gM,!1),Uj=qe(gM,!0),Wj=e=>zv(e).exists(tp),Xx=(e,n,o,r)=>{const c=Bt(gh(de.fromDom(o.container()),n),f=>r.isBlock(To(f))),u=Ft(c).getOr(n);return Ui(e,u.dom,o).filter(Wj)},pM=(e,n,o)=>zv(n).exists(tp)||Xx(!0,e,n,o).isSome(),nO=(e,n,o)=>ux(n).exists(tp)||Xx(!1,e,n,o).isSome(),bM=qe(Xx,!1),a6=qe(Xx,!0),Fn=e=>Be.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),vM=(e,n,o)=>{const r=Bt(gh(de.fromDom(n.container()),e),c=>o.isBlock(To(c)));return Ft(r).getOr(e)},yM=(e,n,o)=>Fn(n)?JA(n):JA(n)||_i(vM(e,n,o).dom,n).exists(JA),CM=(e,n,o)=>Fn(n)?XA(n):XA(n)||gl(vM(e,n,o).dom,n).exists(XA),hw=e=>Sn(["pre","pre-wrap"],e),Jx=e=>zv(e).bind(n=>xr(n,Te)).exists(n=>hw(Rr(n,"white-space"))),c6=(e,n)=>_i(e.dom,n).isNone(),l6=(e,n)=>gl(e.dom,n).isNone(),i6=(e,n,o)=>c6(e,n)||l6(e,n)||tO(e,n,o)||ro(e,n,o)||nO(e,n,o)||pM(e,n,o),wM=e=>_e(e)&&Qo(e)&&OC(e),SM=(e,n)=>o=>wM(new cc(o,e)[n]()),Zj=(e,n)=>{const o=gl(e.dom,n).getOr(n),r=SM(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},jj=(e,n)=>{const o=_i(e.dom,n).getOr(n),r=SM(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},xM=(e,n,o)=>Jx(n)?!1:i6(e,n,o)||yM(e,n,o)||CM(e,n,o),pw=(e,n,o)=>Jx(n)?!1:tO(e,n,o)||hM(e,n,o)||nO(e,n,o)||yM(e,n,o)||jj(e,n),u6=e=>{const n=e.container(),o=e.offset();return at(n)&&o<n.data.length?Be(n,o+1):e},bw=(e,n,o)=>Jx(n)?!1:ro(e,n,o)||Uj(e,n,o)||pM(e,n,o)||CM(e,n,o)||Zj(e,n),Qx=(e,n,o)=>pw(e,n,o)||bw(e,u6(n),o),TM=(e,n)=>rm(e.charAt(n)),po=(e,n)=>ch(e.charAt(n)),EM=e=>{const n=e.container();return at(n)&&$o(n.data,Ea)},eT=e=>{const n=e.split("");return gn(n,(o,r)=>rm(o)&&r>0&&r<n.length-1&&UC(n[r-1])&&UC(n[r+1])?" ":o).join("")},oO=(e,n,o,r)=>{const c=n.data,u=Be(n,0);return!o&&TM(c,0)&&!Qx(e,u,r)?(n.data=" "+c.slice(1),!0):o&&po(c,0)&&pw(e,u,r)?(n.data=Ea+c.slice(1),!0):!1},kM=e=>{const n=e.data,o=eT(n);return o!==n?(e.data=o,!0):!1},sO=(e,n,o,r)=>{const c=n.data,u=Be(n,c.length-1);return!o&&TM(c,c.length-1)&&!Qx(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&po(c,c.length-1)&&bw(e,u,r)?(n.data=c.slice(0,-1)+Ea,!0):!1},_M=(e,n,o)=>{const r=n.container();if(!at(r))return L.none();if(EM(n)){const c=oO(e,r,!1,o)||kM(r)||sO(e,r,!1,o);return _o(c,n)}else if(Qx(e,n,o)){const c=oO(e,r,!0,o)||sO(e,r,!0,o);return _o(c,n)}else return L.none()},AM=e=>{const n=de.fromDom(e.getBody());e.selection.isCollapsed()&&_M(n,Be.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},OM=(e,n,o,r)=>{if(o===0)return;const c=de.fromDom(e),u=Ys(c,E=>r.isBlock(To(E))).getOr(c),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&bw(u,Be(e,e.data.length),r),C=n===0&&pw(u,Be(e,0),r);e.replaceData(n,o,Li(f,4,C,b))},vw=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Gl(r).length;OM(e,n,c,o)},rO=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-Zc(r).length;OM(e,n-c,c,o)},aO=(e,n,o,r,c=!0)=>{const u=Zc(e.data).length,f=c?e:n,b=c?n:e;return c?f.appendData(b.data):f.insertData(0,b.data),Ds(de.fromDom(b)),r&&vw(f,u,o),f},d6=(e,n)=>{const o=e.container(),r=e.offset();return!Be.isTextPosition(e)&&o===n.parentNode&&r>Be.before(n).offset()},m6=(e,n)=>d6(n,e)?Be(n.container(),n.offset()-1):n,f6=e=>at(e)?Be(e,0):Be.before(e),g6=e=>at(e)?Be(e,e.data.length):Be.after(e),DM=e=>wd(e.previousSibling)?L.some(g6(e.previousSibling)):e.previousSibling?Wi(e.previousSibling):L.none(),RM=e=>wd(e.nextSibling)?L.some(f6(e.nextSibling)):e.nextSibling?hl(e.nextSibling):L.none(),cO=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>_i(e,Be.before(o))).orThunk(()=>gl(e,Be.after(n))),lO=(e,n)=>gl(e,Be.after(n)).orThunk(()=>_i(e,Be.before(n))),h6=(e,n)=>DM(n).orThunk(()=>RM(n)).orThunk(()=>cO(e,n)),p6=(e,n)=>RM(n).orThunk(()=>DM(n)).orThunk(()=>lO(e,n)),b6=(e,n,o)=>e?p6(n,o):h6(n,o),v6=(e,n,o)=>b6(e,n,o).map(qe(m6,o)),MM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},y6=e=>n=>n.dom===e,C6=(e,n)=>n&&pn(e.schema.getBlockElements(),To(n)),w6=(e,n,o)=>{if(Fs(e,n)){const r=de.fromHtml('<br data-mce-bogus="1">');return o?ye(Ta(n),c=>{H1(c)||Ds(c)}):hi(n),mr(n,r),L.some(Be.before(r.dom))}else return L.none()},NM=(e,n,o,r)=>{const c=El(e).filter(Me),u=gi(e).filter(Me);return Ds(e),il(c,u,n,(f,b,C)=>{const E=f.dom,M=b.dom,N=E.data.length;return aO(E,M,o,r),C.container()===M?Be(E,N):C}).orThunk(()=>(r&&(c.each(f=>rO(f.dom,f.dom.length,o)),u.each(f=>vw(f.dom,0,o))),n))},S6=(e,n)=>pn(e.schema.getTextInlineElements(),To(n)),eb=(e,n,o,r=!0,c=!1)=>{const u=v6(n,e.getBody(),o.dom),f=Ys(o,qe(C6,e),y6(e.getBody())),b=NM(o,u,e.schema,S6(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>w6(e.schema,C,c)).fold(()=>{r&&MM(e,n,b)},C=>{r&&MM(e,n,L.some(C))})},tb=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,x6=e=>tb.test(e),Mp=(e,n)=>jc(de.fromDom(n),I_(e))&&!du(e.schema,n)&&e.dom.isEditable(n),PM=e=>{var n;return hr.DOM.getStyle(e,"direction",!0)==="rtl"||x6((n=e.textContent)!==null&&n!==void 0?n:"")},T6=(e,n,o)=>Bt(hr.DOM.getParents(o.container(),"*",n),e),hh=(e,n,o)=>{const r=T6(e,n,o);return L.from(r[r.length-1])},BM=(e,n,o)=>{const r=Td(n,e),c=Td(o,e);return _e(r)&&r===c},$M=e=>Vy(e)||Zg(e),Ku=(e,n)=>{const o=n.container(),r=n.offset();return e?Cd(o)?at(o.nextSibling)?Be(o.nextSibling,0):Be.after(o):Vy(n)?Be(o,r+1):n:Cd(o)?at(o.previousSibling)?Be(o.previousSibling,o.previousSibling.data.length):Be.before(o):Zg(n)?Be(o,r-1):n},ci=qe(Ku,!0),IM=qe(Ku,!1),LM=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},E6=e=>{e.execCommand("delete")},tT=e=>LM(e,"Delete"),FM=e=>LM(e,"ForwardDelete"),nb=e=>n=>xs(ac(n),e,Jo),k6=e=>g2(e)||si(e),nT=(e,n)=>wc(e,n)?xr(n,k6,nb(e)):L.none(),Er=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},yw=(e,n,o)=>$r(hl(o),Wi(o),(r,c)=>{const u=Ku(!0,r),f=Ku(!1,c),b=Ku(!1,n);return e?gl(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):_i(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),ob=e=>(K(e)?El(e):Ql(e)).bind(ob).orThunk(()=>L.some(e)),HM=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=ob(o).getOr(o),f=de.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Er(e,r):Fs(e.schema,f,{checkRootAsContent:!1})&&(Ti(f),r&&e.selection.setCursorLocation(f.dom,0)),!Jo(o,f)){const b=xs(ac(f),o)?[]:Rh(f);ye(b.concat(Ta(o)),C=>{!Jo(C,f)&&!wc(C,f)&&Fs(e.schema,C)&&Ds(C)})}},C0=e=>n=>Jo(e,n),Su=e=>Ir(e,"td,th"),w0=(e,n)=>I1(de.fromDom(e),n),tr=e=>$r(e.startTable,e.endTable,(n,o)=>{const r=t1(n,u=>Jo(u,o)),c=t1(o,u=>Jo(u,n));return!r&&!c?e:{...e,startTable:r?L.none():e.startTable,endTable:c?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),Cw=e=>tr(e),VM=(e,n)=>{const o=w0(e.startContainer,n),r=w0(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=$r(o,r,Jo).getOr(!1);return Cw({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},oT=(e,n)=>({start:e,end:n}),iO=(e,n,o)=>({rng:e,table:n,cells:o}),sb=ys.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),S0=(e,n)=>Ii(de.fromDom(e),"td,th",n),sT=e=>!Jo(e.start,e.end),ww=(e,n)=>I1(e.start,n).bind(o=>I1(e.end,n).bind(r=>_o(Jo(o,r),o))),uO=(e,n)=>!sT(e)&&ww(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),zM=(e,n)=>{const o=S0(e.startContainer,n),r=S0(e.endContainer,n);return $r(o,r,oT)},UM=e=>n=>I1(n,e).bind(o=>Jn(Su(o)).map(r=>oT(n,r))),WM=e=>n=>I1(n,e).bind(o=>Ft(Su(o)).map(r=>oT(r,n))),rT=e=>n=>ww(n,e).map(o=>iO(n,o,Su(o))),dO=(e,n,o,r)=>{if(o.collapsed||!e.forall(sT))return L.none();if(n.isSameTable){const c=e.bind(rT(r));return L.some({start:c,end:c})}else{const c=S0(o.startContainer,r),u=S0(o.endContainer,r),f=c.bind(UM(r)).bind(rT(r)),b=u.bind(WM(r)).bind(rT(r));return L.some({start:f,end:b})}},rb=(e,n)=>Us(e,o=>Jo(o,n)),aT=e=>$r(rb(e.cells,e.rng.start),rb(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),mO=(e,n,o)=>e.exists(r=>uO(r,o)&&Yv(r.start,n)),ZM=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},_6=(e,n,o,r)=>dO(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=aT(c).getOr([]);if(u&&c.cells.length===f.length)return L.some(sb.fullTable(c.table));if(f.length>0){if(u)return L.some(sb.partialTable(f,L.none()));{const b=ZM(o,n);return L.some(sb.partialTable(f,L.some({...n,rng:b})))}}else return L.none()}),jM=(e,n,o,r)=>dO(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(aT).getOr([]),b=u.bind(aT).getOr([]);if(f.length>0&&b.length>0){const C=ZM(o,n);return L.some(sb.multiTable(f,b,C))}else return L.none()}),GM=(e,n)=>{const o=C0(e),r=zM(n,o),c=VM(n,o);return mO(r,n,o)?r.map(u=>sb.singleCellTable(n,u.start)):c.isMultiTable?jM(r,c,n,o):_6(r,c,n,o)},fO=e=>ye(e,n=>{Cr(n,"contenteditable"),Ti(n)}),cT=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(de.fromDom),qM=(e,n,o)=>{o.each(r=>{n?Ds(r):(Ti(r),e.selection.setCursorLocation(r.dom,0))})},lT=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),iT(e,c,n,!1).each(u=>u())},gO=e=>{const n=Sp(e),o=de.fromDom(e.selection.getNode());Hh(o.dom)&&Fs(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Ro(n,r=>Jo(r,o))&&Co(o,"data-mce-selected","1")},hO=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=cT(e,f?u.endContainer:u.startContainer);u.deleteContents(),qM(e,f,b.filter(qe(Fs,e.schema)));const C=f?n[0]:n[n.length-1];return lT(e,C,r,f),Fs(e.schema,C)?L.none():L.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);fO(c),gO(e)}),KM=(e,n,o,r)=>L.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];lT(e,u,c,!0),lT(e,f,c,!1);const b=Fs(e.schema,u)?n:n.slice(1),C=Fs(e.schema,f)?o:o.slice(0,-1);fO(b.concat(C)),r.deleteContents(),gO(e)}),iT=(e,n,o,r=!0)=>L.some(()=>{HM(e,n,o,r)}),YM=(e,n)=>L.some(()=>eb(e,!1,n)),XM=(e,n,o)=>GM(n,o).bind(r=>r.fold(qe(iT,e),qe(YM,e),qe(hO,e),qe(KM,e))),JM=(e,n)=>Sw(e,n),QM=(e,n,o,r)=>uT(n,r).fold(()=>XM(e,n,o),c=>JM(e,c)),pO=(e,n,o)=>{const r=de.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?hO(e,o,L.none()):QM(e,r,c,n)},bO=(e,n)=>ms(gh(n,e),op),uT=(e,n)=>ms(gh(n,e),Ls("caption")),eN=(e,n,o,r,c)=>zm(o,e.getBody(),c).bind(u=>bO(n,de.fromDom(u.getNode())).bind(f=>Jo(f,r)?L.none():L.some(It))),Sw=(e,n)=>L.some(()=>{Ti(n),e.selection.setCursorLocation(n.dom,0)}),tN=(e,n,o,r)=>hl(e.dom).bind(c=>Wi(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),nN=(e,n)=>Sw(e,n),vO=(e,n,o)=>uT(e,de.fromDom(o.getNode())).fold(()=>L.some(It),r=>_o(!Jo(r,n),It)),dT=(e,n,o,r,c)=>zm(o,e.getBody(),c).fold(()=>L.some(It),u=>tN(r,o,c,u)?nN(e,r):vO(n,r,u)),yO=(e,n,o,r)=>{const c=Be.fromRangeStart(e.selection.getRng());return bO(o,r).bind(u=>Fs(e.schema,u,{checkRootAsContent:!1})?Sw(e,u):eN(e,o,n,u,c))},mT=(e,n,o,r)=>{const c=Be.fromRangeStart(e.selection.getRng());return Fs(e.schema,r)?Sw(e,r):dT(e,o,n,r,c)},CO=(e,n)=>e?QA(n):eO(n),fT=(e,n)=>{const o=Be.fromRangeStart(e.selection.getRng());return CO(n,o)||Ui(n,e.getBody(),o).exists(r=>CO(n,r))},wO=(e,n,o)=>{const r=de.fromDom(e.getBody());return uT(r,o).fold(()=>yO(e,n,r,o).orThunk(()=>_o(fT(e,n),It)),c=>mT(e,n,r,c))},ab=(e,n)=>{const o=de.fromDom(e.selection.getStart(!0)),r=Sp(e);return e.selection.isCollapsed()&&r.length===0?wO(e,n,o):pO(e,o,r)},ph=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ze(o)||Qo(o))return o;o=o.parentNode}return null},oN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],x0=ct.each,xw=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const M={};return x0(n.getAttribs(E),N=>{const P=N.nodeName.toLowerCase();P!=="style"&&!c(P)&&(M[P]=n.getAttrib(E,P))}),M},C=(E,M)=>{for(const N in E)if(pn(E,N)){const P=M[N];if(en(P)||E[N]!==P)return!1;delete M[N]}for(const N in M)if(pn(M,N))return!1;return!0};return Ht(u)&&Ht(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!ji(u)&&!ji(f)},c=u=>Ro(oN,f=>Uo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},gT=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),T0=e=>e.name==="summary",Np=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},SO=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const C=r.nodes[c];C?C.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const E=r.attributes[C];E?E.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},A6=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Np(o,c=>{SO(e,n,c,r)}),r},sN=(e,n)=>{const o=(r,c)=>{ft(r,u=>{const f=Ko(u.nodes);ye(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const E=f[C];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||wn(E.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},xO=(e,n,o,r={})=>{const c=A6(e,n,o);sN(c,r)},hT=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Di("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Di("#text",3)).value=Ea},O6=e=>{var n;return bh(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Ea},bh=(e,n)=>{const o=e==null?void 0:e.firstChild;return _e(o)&&o===e.lastChild&&o.name===n},cb=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},pT=(e,n,o,r)=>r.isEmpty(n,o,c=>cb(e,c)),ol=(e,n)=>_e(e)&&(n(e)||e.name==="br"),D6=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},TO=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&TO(c,n,o);e.unwrap()}},qm=(e,n,o,r=It)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=ct.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,E=M=>M!==o&&!b[M.name];for(let M=0;M<e.length;M++){const N=e[M];let P,j,Q;if(!N.parent||C.has(N))continue;if(c[N.name]&&N.parent.name==="li"){let te=N.next;for(;te&&c[te.name];){te.name="li",C.add(te),N.parent.insert(te,N.parent);te=te.next}N.unwrap();continue}const q=[N];for(P=N.parent;P&&!n.isValidChild(P.name,N.name)&&E(P);P=P.parent)q.push(P);if(P&&q.length>1)if(rN(n,N,P))TO(N,n);else{q.reverse(),j=q[0].clone(),r(j);let te=j;for(let he=0;he<q.length-1;he++){n.isValidChild(te.name,q[he].name)&&he>0?(Q=q[he].clone(),r(Q),te.append(Q)):Q=te;for(let we=q[he].firstChild;we&&we!==q[he+1];){const be=we.next;Q.append(we),we=be}te=Q}pT(n,u,f,j)?P.insert(N,q[0],!0):(P.insert(j,q[0],!0),P.insert(N,j)),P=q[0],(pT(n,u,f,P)||bh(P,"br"))&&P.empty().remove()}else if(N.parent){if(N.name==="li"){let te=N.prev;if(te&&(te.name==="ul"||te.name==="ol")){te.append(N);continue}if(te=N.next,te&&(te.name==="ul"||te.name==="ol")&&te.firstChild){te.insert(N,te.firstChild,!0);continue}const he=new Di("ul",1);r(he),N.wrap(he);continue}if(n.isValidChild(N.parent.name,"div")&&n.isValidChild("div",N.name)){const te=new Di("div",1);r(te),N.wrap(te)}else TO(N,n)}}},ws=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},rN=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&ws(o,"a")?!0:T0(o)&&gT(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,R6=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},M6=e=>{const n=Be.fromRangeStart(e),o=Be.fromRangeEnd(e),r=e.commonAncestorContainer;return Ui(!1,r,o).map(c=>!zi(n,o,r)&&zi(n,c,r)?R6(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},lr=e=>e.collapsed?e:M6(e),aN=e=>_e(e.firstChild)&&e.firstChild===e.lastChild,Tw=e=>e.name==="br"||e.value===Ea,Ew=(e,n)=>e.getBlockElements()[n.name]&&aN(n)&&Tw(n.firstChild),bT=(e,n)=>{const o=e.getNonEmptyElements();return _e(n)&&(n.isEmpty(o)||Ew(e,n))},vT=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),bT(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},cN=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},Gj=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return cN(c)},N6=e=>{var n;return Bt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},qj=e=>e.data===Ea||ss(e),P6=e=>_e(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&qj(e.firstChild),B6=e=>!e.firstChild||P6(e),Kj=e=>e.length>0&&B6(e[e.length-1])?e.slice(0,-1):e,EO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},Vc=(e,n)=>!!EO(e,n),lN=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},iN=(e,n)=>{const o=Be.before(e),c=Fc(n).next(o);return c?c.toRange():null},uN=(e,n)=>{const o=Be.after(e),c=Fc(n).prev(o);return c?c.toRange():null},$6=(e,n,o,r)=>{const c=lN(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),ct.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),uN(n[n.length-1],o)},I6=(e,n,o)=>{const r=e.parentNode;return r&&ct.each(n,c=>{r.insertBefore(c,e)}),iN(e,o)},xu=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),uN(n[0],o)),Km=(e,n,o,r)=>{const c=Gj(n,e,r),u=EO(n,o.startContainer),f=Kj(N6(c.firstChild)),b=1,C=2,E=n.getRoot(),M=N=>{const P=Be.fromRangeStart(o),j=Fc(n.getRoot()),Q=N===b?j.prev(P):j.next(P),q=Q==null?void 0:Q.getNode();return q?EO(n,q)!==u:!0};return u?M(b)?I6(u,f,E):M(C)?xu(u,f,E,n):$6(u,f,E,o):null},L6=["pre"],kO=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,E=Sn(L6,u.name);if(C&&E){const M=u.attr("contenteditable")!=="false",N=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,P=L.from(ph(r,o)).forall(Ze);return M&&N&&P}else return!1},kw=Hh,F6=(e,n,o)=>{if(_e(o)){const r=e.getParent(n.endContainer,kw);return o===r&&Yv(de.fromDom(o),n)}else return!1},H6=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},_w=(e,n,o)=>{L.from(e.getParent(n,"td,th")).map(de.fromDom).each(r=>h2(r,o))},yT=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=xw(e),f="*[data-mce-fragment]",b=r.select(f);ct.each(b,C=>{const E=P=>_e(o[P.nodeName.toLowerCase()]),M=P=>P.childNodes.length===1;if((P=>!(lM(r,P)||XF(r,P)))(C)&&E(C)&&M(C)){const P=b0(r,C),j=(he,we)=>ls(he,be=>Sn(we,be)),Q=he=>M(C)&&r.is(he,f)&&E(he)&&(he.nodeName===C.nodeName&&j(P,b0(r,he))||Q(he.children[0])),q=he=>_e(he)&&he!==c&&(u.compare(C,he)||q(he.parentElement)),te=he=>_e(he)&&he!==c&&r.is(he,f)&&(QF(r,C,he)||te(he.parentElement));(Q(C.children[0])||q(C.parentElement)&&!te(C.parentElement))&&r.remove(C,!0)}})}},_O=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},V6=e=>{ct.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Ym=e=>!!e.getAttribute("data-mce-fragment"),z6=(e,n)=>_e(n)&&!e.schema.getVoidElements()[n.nodeName],U6=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=ph(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let E=f.createRng();const M=n.previousSibling;if(at(M)){E.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const j=n.nextSibling;at(j)&&(M.appendData(j.data),(c=j.parentNode)===null||c===void 0||c.removeChild(j))}else E.setStartBefore(n),E.setEndBefore(n);const N=j=>{let Q=Be.fromRangeStart(j);return Q=Fc(e.getBody()).next(Q),Q==null?void 0:Q.toRange()},P=f.getParent(n,f.isBlock);if(f.remove(n),P&&f.isEmpty(P)){const j=kw(P);hi(de.fromDom(P)),E.setStart(P,0),E.setEnd(P,0),!j&&!Ym(P)&&(u=N(E))?(E=u,f.remove(P)):f.add(P,f.create("br",j?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},kd=e=>{const n=e.dom,o=lr(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,kw);F6(n,o,r)?iT(e,o,de.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&at(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},Aw=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},um=(e,n,o)=>{var r;return Ro(o.children(),gT)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},W6=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,E=fh({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ei(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let N=u.getRng();const P=N.startContainer,j=e.getBody();P===j&&u.isCollapsed()&&f.isBlock(j.firstChild)&&z6(e,j.firstChild)&&f.isEmpty(j.firstChild)&&(N=f.createRng(),N.setStart(j.firstChild,0),N.setEnd(j.firstChild,0),u.setRng(N)),u.isCollapsed()||kd(e);const Q=u.getNode(),q={context:Q.nodeName.toLowerCase(),data:o.data,insert:!0},te=b.parse(n,q);if(o.paste===!0&&vT(e.schema,te)&&Vc(f,Q))return N=Km(E,f,u.getRng(),te),N&&u.setRng(N),n;o.paste===!0&&kO(f,te,Q,e.getBody())&&((r=te.firstChild)===null||r===void 0||r.unwrap()),_O(te);let he=te.lastChild;if(he&&he.attr("id")==="mce_marker"){const we=he;for(he=he.prev;he;he=he.walk(!0))if(he.type===3||!f.isBlock(he.name)){he.parent&&e.schema.isValidChild(he.parent.name,"span")&&he.parent.insert(we,he,he.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(Q),!q.invalid&&!um(f,Q,te))n=E.serialize(te),H6(e,n,Q);else{e.selection.setContent(M);let we=u.getNode(),be;const Ae=e.getBody();for(Cf(we)?we=be=Ae:be=we;be&&be!==Ae;)we=be,be=be.parentNode;n=we===Ae?Ae.innerHTML:f.getOuterHTML(we);const ot=b.parse(n),wt=Aw(ot),zt=wt.bind(D6).getOr(ot);wt.each(Qt=>Qt.replace(te));const Ve=te.children(),Ie=(c=te.parent)!==null&&c!==void 0?c:ot;te.unwrap();const et=Bt(Ve,Qt=>rN(e.schema,Qt,Ie));qm(et,e.schema,zt),xO(b.getNodeFilters(),b.getAttributeFilters(),ot),n=E.serialize(ot),we===Ae?f.setHTML(Ae,n):f.setOuterHTML(we,n)}return yT(e,C),U6(e,f.get("mce_marker")),V6(e.getBody()),_w(f,u.getStart(),e.schema),Hu(e.schema,e.getBody(),u.getStart()),n},ks=e=>e instanceof Di,E0=e=>{Q1(e)&&hl(e.getBody()).each(n=>{const o=n.getNode(),r=lu(o)?hl(o).getOr(n):n;e.selection.setRng(r.toRange())})},k0=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&E0(e)},dN=(e,n,o,r)=>{if(o=Ei(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=tl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Lf(e),o)):o||(o=c),k0(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=fh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=v1(de.fromDom(n))?o:ct.trim(o);return k0(e,c,r.no_selection),{content:c,html:c}}},AO=(e,n,o,r)=>{xO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=fh({validate:!1},e.schema).serialize(o),u=Ei(v1(de.fromDom(n))?c:ct.trim(c));return k0(e,u,r.no_selection),{content:o,html:u}},OO=(e,n,o)=>L.from(e.getBody()).map(r=>ks(n)?AO(e,r,n,o):dN(e,r,n,o)).getOr({content:n,html:ks(o.content)?"":o.content}),mN=e=>ie(e)?e:We,DO=(e,n,o)=>{let r=e.dom;const c=mN(o);for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return L.none()},RO=(e,n,o)=>{const r=n(e),c=mN(o);return r.orThunk(()=>c(e)?L.none():DO(e,n,c))},CT=Jv,MO=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(bu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Ow=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>MO(e,b,o)?!0:b.parentNode===u||!!ng(e,b,o,r,!0));return!!ng(e,f,o,r,c)},Dw=(e,n,o)=>mc(o)&&CT(n,o.inline)||Zm(o)&&CT(n,o.block)?!0:bu(o)?Ht(n)&&e.is(n,o.selector):!1,Rw=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ie(o.onmatch))return o.onmatch(n,o,r);if(f){if(Cl(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):Qv(e,n,f[C]))return!0}else for(const C in f)if(pn(f,C)){const E=b?e.getAttrib(n,C):Qv(e,n,C),M=ih(f[C],u),N=wn(E)||dr(E);if(N&&wn(M))continue;if(c&&N&&!o.exact||(!c||o.exact)&&!CT(E,uh(M,C)))return!1}}return!0},ng=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ht(n))for(let b=0;b<u.length;b++){const C=u[b];if(Dw(e.dom,n,C)&&Rw(f,n,C,"attributes",c,r)&&Rw(f,n,C,"styles",c,r)){const E=C.classes;if(E){for(let M=0;M<E.length;M++)if(!e.dom.hasClass(n,ih(E[M],r)))return}return C}}},NO=(e,n,o,r,c)=>{if(r)return Ow(e,r,n,o,c);if(r=e.selection.getNode(),Ow(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Ow(e,u,n,o,c))},Z6=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!c[C]&&ng(e,f,C,o)&&(c[C]=!0,r.push(C))}},e.dom.getRoot()),r},j6=(e,n)=>{const o=c=>Jo(c,de.fromDom(e.getBody())),r=(c,u)=>ng(e,c.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(c=>RO(de.fromDom(c),u=>wr(n,f=>r(u,f)),o)).getOrNull()},G6=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=kp(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!bu(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},fN=(e,n,o)=>Bo(o,(r,c)=>{const u=uA(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Mw=ra,q6=(e,n)=>e.importNode(n,!0),PO=e=>{if(e){const n=new cc(e,e);for(let o=n.current();o;o=n.next())if(at(o))return o}return null},wT=e=>{const n=de.fromTag("span");return Zr(n,{id:Gv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&mr(n,de.fromText(Mw)),n},K6=e=>{const n=PO(e);return n&&n.data.charAt(0)===Mw&&n.deleteData(0,1),n},BO=(e,n,o)=>{const r=e.dom,c=e.selection;if(Ex(n))eb(e,!1,de.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,E=u.endContainer,M=u.endOffset,N=K6(n);r.remove(n,!0),b===N&&C>0&&u.setStart(N,C-1),E===N&&M>0&&u.setEnd(N,M-1),f&&r.isEmpty(f)&&Ti(de.fromDom(f)),c.setRng(u)}},ST=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)BO(e,n,o);else if(n=rh(e.getBody(),c.getStart()),!n)for(;n=r.get(Gv);)BO(e,n,o)},Y6=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,qe(KC,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(m_(de.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},$O=(e,n)=>(e.appendChild(n),n),Yu=(e,n)=>{var o;const r=Is(e,(u,f)=>$O(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return $O(r,c.createTextNode(Mw))},X6=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,C=Bt(fs(f.get()),N=>N!==r&&!$o(N,"removeformat")),E=fN(e,o,C);if(Bt(E,N=>!t0(e,N,r)).length>0){const N=o.cloneNode(!1);return b.add(n,N),f.remove(r,c,N,u),b.remove(N),L.some(N)}else return L.none()},gN=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=rh(e.getBody(),c.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&M.test(E.charAt(b))&&M.test(E.charAt(b-1))){const N=c.getBookmark();f.collapse(!0);let P=qf(e.dom,f,u);P=rn(P),e.formatter.apply(n,o,P),c.moveToBookmark(N)}else{let N=r?PO(r):null;(!r||(N==null?void 0:N.data)!==Mw)&&(r=q6(e.getDoc(),wT(!0).dom),N=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(N,b)}},IO=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),E=C.startContainer,M=C.startOffset;let N=E;at(E)&&(M!==E.data.length&&(f=!0),N=N.parentNode);const P=[];let j;for(;N;){if(ng(e,N,n,o,r)){j=N;break}N.nextSibling&&(f=!0),P.push(N),N=N.parentNode}if(j)if(f){const Q=u.getBookmark();C.collapse(!0);let q=qf(c,C,b,!0);q=rn(q),e.formatter.remove(n,o,q,r),u.moveToBookmark(Q)}else{const Q=rh(e.getBody(),j),q=_e(Q)?c.getParents(j.parentNode,ut,Q):[],te=wT(!1).dom;Y6(e,te,Q??j);const he=X6(e,te,j,n,o,r),we=Yu([...P,...he.toArray(),...q],te);Q&&BO(e,Q,_e(Q)),u.setCursorLocation(we,1),c.isEmpty(j)&&c.remove(j)}},LO=(e,n,o)=>{const r=e.selection,c=e.getBody();ST(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Mw&&ST(e,rh(c,r.getStart()),!0),(n===37||n===39)&&ST(e,rh(c,r.getStart()),!0)},hN=e=>at(e)&&vr(e.data,Ea),pN=e=>{e.on("mouseup keydown",n=>{LO(e,n.keyCode,hN(e.selection.getRng().endContainer))})},bN=e=>{const n=wT(!1),o=Yu(e,n.dom);return{caretContainer:n,caretPosition:Be(o,0)}},vN=(e,n)=>{const{caretContainer:o,caretPosition:r}=bN(n);return xc(de.fromDom(e),o),Ds(de.fromDom(e)),r},FO=(e,n)=>{const{caretContainer:o,caretPosition:r}=bN(n);return e.insertNode(o.dom),r},HO=(e,n)=>{if(Zi(n.dom))return!1;const o=e.schema.getTextInlineElements();return pn(o,To(n))&&!Zi(n.dom)&&!Dm(n.dom)},qi={},yN=Fi(["pre"]),J6=(e,n)=>{qi[e]||(qi[e]=[]),qi[e].push(n)},Yj=(e,n)=>{pn(qi,e)&&ye(qi[e],o=>{o(n)})};J6("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return yN(f)&&Sn(c,f)},r=(c,u)=>{const f=de.fromDom(u),b=xa(f).dom;Ds(f),Bu(de.fromDom(c),[de.fromTag("br",b),de.fromTag("br",b),...Ta(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Bt(Bt(c,yN),o(c));ye(u,f=>{r(f.previousSibling,f)})}});const xT=["fontWeight","fontStyle","color","fontSize","fontFamily"],Q6=e=>Ye(e.styles)&&Ro(fs(e.styles),n=>Sn(xT,n)),Xj=e=>ms(e,n=>mc(n)&&n.inline==="span"&&Q6(n)),CN=(e,n)=>{const o=e.get(n);return tt(o)?Xj(o):L.none()},TT=(e,n)=>_i(n,Be.fromRangeStart(e)).isNone(),dm=(e,n)=>gl(n,Be.fromRangeEnd(e)).exists(o=>!ss(o.getNode())||gl(n,o).isSome())===!1,ET=e=>n=>py(n)&&e.isEditable(n),kT=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return TT(o,n[0])&&dm(o,n[0])?n:[];{const r=Ft(n).filter(f=>TT(o,f)).toArray(),c=Jn(n).filter(f=>dm(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},VO=e=>Bt(kT(e),ET(e.dom)),wN=e=>Bt(e.getSelectedBlocks(),ET(e.dom)),_T=ct.each,zO=e=>Ht(e)&&!ji(e)&&!Zi(e)&&!Dm(e),UO=(e,n)=>{for(let o=e;o;o=o[n]){if(at(o)&&Fo(o.data))return e;if(Ht(o)&&!ji(o))return o}return e},AT=(e,n,o)=>{const r=xw(e),c=ei(n)&&e.dom.isEditable(n),u=ei(o)&&e.dom.isEditable(o);if(c&&u){const f=UO(n,"previousSibling"),b=UO(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const E=C;C=C.nextSibling,f.appendChild(E)}return e.dom.remove(b),ct.each(ct.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},SN=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=AT(e,L1(r),r))!==null&&c!==void 0?c:r;AT(e,u,L1(u,!0))}},xN=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";_T(e.select(r,o),c=>{zO(c)&&e.isEditable(c)&&_T(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},WO=(e,n,o)=>{_T(e.childNodes,r=>{zO(r)&&(n(r)&&o(r),r.hasChildNodes()&&WO(r,n,o))})},lb=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},ZO=(e,n)=>o=>!!(o&&Qv(e,o,n)),TN=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),lb(e,r)},Pp=ys.generate([{keep:[]},{rename:["name"]},{removed:[]}]),e8=/^(src|href|style)$/,jO=ct.each,OT=Jv,t8=e=>/^(TR|TH|TD)$/.test(e.nodeName),EN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),GO=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Ht(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return at(r)&&o&&c>=r.data.length&&(r=new cc(r,e.getBody()).next()||r),at(r)&&!o&&c===0&&(r=new cc(r,e.getBody()).prev()||r),r},kN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return t8(e)&&r?e.nodeName==="TR"&&r[o]||r:e},Nw=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},Bp=(e,n,o,r,c)=>{const u=de.fromDom(n),f=de.fromDom(e.create(r,c)),b=o?Sc(u):cf(u);return Bu(f,b),o?(xc(u,f),_m(f,u)):(_l(u,f),mr(f,u)),f.dom},n8=(e,n)=>n.links&&e.nodeName==="A",_N=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=tl(e);Zm(o)&&r===u.getRoot()&&(!o.list_block||!OT(n,o.list_block))&&ye(Ko(n.childNodes),b=>{Wm(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=Nw(u,b,f),u.setAttribs(c,Lf(e))):c=null}),!(mA(o)&&!OT(o.inline,n))&&u.remove(n,!0)},Pw=(e,n,o)=>ns(e)?{name:n,value:null}:{name:e,value:ih(n,o)},qO=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},KO=(e,n,o,r,c)=>{let u=!1;jO(o.styles,(f,b)=>{const{name:C,value:E}=Pw(b,f,r),M=uh(E,C);(o.remove_similar||W(E)||!Ht(c)||OT(Qv(e,c,C),M))&&e.setStyle(n,C,""),u=!0}),u&&qO(e,n)},o8=(e,n,o)=>{n==="removeformat"?ye(wN(e.selection),r=>{ye(xT,c=>e.dom.setStyle(r,c,"")),qO(e.dom,r)}):CN(e.formatter,n).each(r=>{ye(wN(e.selection),c=>KO(e.dom,c,r,o,null))})},YO=(e,n,o,r,c)=>{const u=e.dom,f=xw(e),b=e.schema;if(mc(n)&&Vu(b,n.inline)&&du(b,r)&&r.parentElement===e.getBody())return _N(e,r,n),Pp.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Dw(u,r,n)&&!n8(r,n))return Pp.keep();const C=r,E=n.preserve_attributes;if(mc(n)&&n.remove==="all"&&tt(E)){const M=Bt(u.getAttribs(C),N=>Sn(E,N.name.toLowerCase()));if(u.removeAllAttribs(C),ye(M,N=>u.setAttrib(C,N.name,N.value)),M.length>0)return Pp.rename("span")}if(n.remove!=="all"){KO(u,C,n,o,c),jO(n.attributes,(N,P)=>{const{name:j,value:Q}=Pw(P,N,o);if(n.remove_similar||W(Q)||!Ht(c)||OT(u.getAttrib(c,j),Q)){if(j==="class"){const q=u.getAttrib(C,j);if(q){let te="";if(ye(q.split(/\s+/),he=>{/mce\-\w+/.test(he)&&(te+=(te?" ":"")+he)}),te){u.setAttrib(C,j,te);return}}}if(e8.test(j)&&C.removeAttribute("data-mce-"+j),j==="style"&&Fi(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(j),u.setStyle(C,"list-style-type","none");return}j==="class"&&C.removeAttribute("className"),C.removeAttribute(j)}}),jO(n.classes,N=>{N=ih(N,o),(!Ht(c)||u.hasClass(c,N))&&u.removeClass(C,N)});const M=u.getAttribs(C);for(let N=0;N<M.length;N++){const P=M[N].nodeName;if(!f.isAttributeInternal(P))return Pp.keep()}}return n.remove!=="none"?(_N(e,C,n),Pp.removed()):Pp.keep()},s8=(e,n,o,r,c)=>{let u;return n.parentNode&&ye(kp(e.dom,n.parentNode).reverse(),f=>{if(!u&&Ht(f)&&f.id!=="_start"&&f.id!=="_end"){const b=ng(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},ib=(e,n,o,r)=>YO(e,n,o,r,r).fold(st(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),st(null)),AN=(e,n,o,r,c,u,f,b)=>{var C,E;let M,N;const P=e.dom;if(o){const j=o.parentNode;for(let Q=r.parentNode;Q&&Q!==j;Q=Q.parentNode){let q=P.clone(Q,!1);for(let te=0;te<n.length&&(q=ib(e,n[te],b,q),q!==null);te++);q&&(M&&q.appendChild(M),N||(N=q),M=q)}(!f.mixed||!P.isBlock(o))&&(r=(C=P.split(o,r))!==null&&C!==void 0?C:r),M&&N&&((E=c.parentNode)===null||E===void 0||E.insertBefore(M,c),N.appendChild(c),mc(f)&&SN(e,f,b,M))}return r},ON=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,E=q=>{const te=s8(e,q,n,o,c);return AN(e,u,te,q,q,!0,f,o)},M=q=>ji(q)&&Ht(q)&&(q.id==="_start"||q.id==="_end"),N=q=>Ro(u,te=>$p(e,te,o,q,q)),P=q=>{const te=Ko(q.childNodes),we=N(q)||Ro(u,ot=>Dw(b,q,ot)),be=q.parentNode;if(!we&&_e(be)&&Ed(f)&&N(be),f.deep&&te.length)for(let ot=0;ot<te.length;ot++)P(te[ot]);ye(["underline","line-through","overline"],ot=>{Ht(q)&&e.dom.getStyle(q,"text-decoration")===ot&&q.parentNode&&Tx(b,q.parentNode)===ot&&$p(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ot}},void 0,q)})},j=q=>{const te=b.get(q?"_start":"_end");if(te){let he=te[q?"firstChild":"lastChild"];return M(he)&&(he=he[q?"firstChild":"lastChild"]),at(he)&&he.data.length===0&&(he=q?te.previousSibling||te.nextSibling:te.nextSibling||te.previousSibling),b.remove(te,!0),he}else return null},Q=q=>{let te,he,we=qf(b,q,u,q.collapsed);if(f.split){if(we=rn(we),te=GO(e,we,!0),he=GO(e,we),te!==he){if(te=kN(te,!0),he=kN(he,!1),EN(b,te,he)){const Ae=L.from(te.firstChild).getOr(te);E(Bp(b,Ae,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(EN(b,he,te)){const Ae=L.from(he.lastChild).getOr(he);E(Bp(b,Ae,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}te=Nw(b,te,"span",{id:"_start","data-mce-type":"bookmark"}),he=Nw(b,he,"span",{id:"_end","data-mce-type":"bookmark"});const be=b.createRng();be.setStartAfter(te),be.setEndBefore(he),z1(b,be,Ae=>{ye(Ae,ot=>{!ji(ot)&&!ji(ot.parentNode)&&E(ot)})}),E(te),E(he),te=j(!0),he=j()}else te=he=E(te);we.startContainer=te.parentNode?te.parentNode:te,we.startOffset=b.nodeIndex(te),we.endContainer=he.parentNode?he.parentNode:he,we.endOffset=b.nodeIndex(he)+1}z1(b,we,be=>{ye(be,P)})};if(r){if(Ep(r)){const q=b.createRng();q.setStartBefore(r),q.setEndAfter(r),Q(q)}else Q(r);Gi(e,n,r,o);return}!C.isCollapsed()||!mc(f)||Sp(e).length?(am(e,()=>Tp(e,Q),q=>mc(f)&&NO(e,n,o,q)),e.nodeChanged()):IO(e,n,o,c),o8(e,n,o),Gi(e,n,r,o)},XO=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&ON(e,n,o,r,c)},$p=(e,n,o,r,c)=>YO(e,n,o,r,c).fold(We,u=>(e.dom.rename(r,u),!0),ut),JO=ct.each,r8=(e,n,o,r)=>{const c=u=>{if(ei(u)&&Ht(u.parentNode)&&e.isEditable(u)){const f=Tx(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ct.walk(r,c,"childNodes"),c(r))},DN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=ZO(e,"fontSize");WO(r,u=>c(u)&&e.isEditable(u),TN(e,"backgroundColor",ih(n.styles.backgroundColor,o)))}},a8=(e,n,o,r)=>{if(mc(n)&&(n.inline==="sub"||n.inline==="sup")){const c=ZO(e,"fontSize");WO(r,f=>c(f)&&e.isEditable(f),TN(e,"fontSize",""));const u=Bt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},c8=(e,n,o,r)=>{JO(n,c=>{mc(c)&&JO(e.dom.select(c.inline,r),u=>{zO(u)&&$p(e,c,o,u,c.exact?u:null)}),xN(e.dom,c,r)})},DT=(e,n,o,r,c)=>{const u=c.parentNode;ng(e,u,o,r)&&$p(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>ng(e,f,o,r)?($p(e,n,r,c),!0):!1)},Bw=ct.each,QO=(e,n,o,r)=>{if(z2(e)&&mc(n)&&o.parentNode){const c=qb(e.schema),u=Ub(de.fromDom(o),f=>Zi(f.dom));return pr(c,r)&&uu(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},RN=(e,n,o,r)=>{if(Bw(o.styles,(c,u)=>{e.setStyle(n,u,ih(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},l8=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,E=(Q,q=u)=>{ie(q.onformat)&&q.onformat(Q,q,o,r),RN(b,Q,q,o),Bw(q.attributes,(te,he)=>{b.setAttrib(Q,he,ih(te,o))}),Bw(q.classes,te=>{const he=ih(te,o);b.hasClass(Q,he)||b.addClass(Q,he)})},M=(Q,q)=>{let te=!1;return Bw(Q,he=>bu(he)?b.getContentEditable(q)==="false"&&!he.ceFalseOverride||_e(he.collapsed)&&he.collapsed!==f?!0:b.is(q,he.selector)&&!Zi(q)?(E(q,he),te=!0,!1):!0:!1),te},N=Q=>{if(ee(Q)){const q=b.create(Q);return E(q),q}else return null},P=(Q,q,te)=>{const he=[];let we=!0;const be=u.inline||u.block,Ae=N(be),ot=Ve=>dA(u)&&ng(e,Ve,n,o),wt=(Ve,Ie,et)=>{const Qt=F1(u)&&KC(e.schema,Ve)&&Wm(e,Ie,be);return et&&Qt},zt=(Ve,Ie,et,Qt)=>{const bn=Ve.nodeName.toLowerCase(),co=Wm(e,be,bn)&&Wm(e,Ie,be),Do=!te&&at(Ve)&&Ug(Ve.data),ps=Zi(Ve),Ns=!mc(u)||!Q.isBlock(Ve);return(et||Qt)&&co&&!Do&&!ps&&Ns};z1(Q,q,Ve=>{let Ie;const et=Qt=>{let bn=!1,co=we,Do=!1;const ps=Qt.parentNode,Ns=ps.nodeName.toLowerCase(),Yr=Q.getContentEditable(Qt);_e(Yr)&&(co=we,we=Yr==="true",bn=!0,Do=JC(e,Qt));const Wc=we&&!bn;if(ss(Qt)&&!QO(e,u,Qt,Ns)){Ie=null,Zm(u)&&Q.remove(Qt);return}if(ot(Qt)){Ie=null;return}if(wt(Qt,Ns,Wc)){const As=Q.rename(Qt,be);E(As),he.push(As),Ie=null;return}if(bu(u)){let As=M(c,Qt);if(!As&&_e(ps)&&Ed(u)&&(As=M(c,ps)),!mc(u)||As){Ie=null;return}}_e(Ae)&&zt(Qt,Ns,Wc,Do)?(Ie||(Ie=Q.clone(Ae,!1),ps.insertBefore(Ie,Qt),he.push(Ie)),Do&&bn&&(we=co),Ie.appendChild(Qt)):(Ie=null,ye(Ko(Qt.childNodes),et),bn&&(we=co),Ie=null)};ye(Ve,et)}),u.links===!0&&ye(he,Ve=>{const Ie=et=>{et.nodeName==="A"&&E(et,u),ye(Ko(et.childNodes),Ie)};Ie(Ve)}),ye(he,Ve=>{const Ie=bn=>{let co=0;return ye(bn.childNodes,Do=>{!Xv(Do)&&!ji(Do)&&co++}),co},et=bn=>ms(bn.childNodes,qC).filter(Do=>Q.getContentEditable(Do)!=="false"&&Dw(Q,Do,u)).map(Do=>{const ps=Q.clone(Do,!1);return E(ps),Q.replace(ps,bn,!0),Q.remove(Do,!0),ps}).getOr(bn),Qt=Ie(Ve);if((he.length>1||!Q.isBlock(Ve))&&Qt===0){Q.remove(Ve,!0);return}(mc(u)||Zm(u)&&u.wrapper)&&(!u.exact&&Qt===1&&(Ve=et(Ve)),c8(e,c,o,Ve),DT(e,u,n,o,Ve),DN(Q,u,o,Ve),r8(Q,u,o,Ve),a8(Q,u,o,Ve),SN(e,u,o,Ve))})},j=Ep(r)?r:C.getNode();if(b.getContentEditable(j)==="false"&&!JC(e,j)){r=j,M(c,r),yu(e,n,r,o);return}if(u){if(r)if(Ep(r)){if(!M(c,r)){const Q=b.createRng();Q.setStartBefore(r),Q.setEndAfter(r),P(b,qf(b,Q,c),!0)}}else P(b,r,!0);else!f||!mc(u)||Sp(e).length?(C.setRng(lr(C.getRng())),am(e,()=>{Tp(e,(Q,q)=>{const te=q?Q:qf(b,Q,c);P(b,te,!1)})},ut),e.nodeChanged()):gN(e,n,o),CN(e.formatter,n).each(Q=>{ye(VO(e.selection),q=>RN(b,q,Q,o))});Yj(n,e)}yu(e,n,r,o)},e4=(e,n,o,r)=>{(r||e.selection.isEditable())&&l8(e,n,o,r)},RT=e=>pn(e,"vars"),MN=(e,n)=>{e.set({}),n.on("NodeChange",o=>{$w(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(c=>Ep(c)?c:c.startContainer).bind(c=>Ht(c)?L.some(c):L.from(c.parentElement)).getOrThunk(()=>NN(n));$w(n,r,e.get())})},NN=e=>e.selection.getStart(),PN=(e,n,o,r,c)=>zr(n,b=>{const C=e.formatter.matchNode(b,o,c??{},r);return!en(C)},b=>MO(e,b,o)?!0:r?!1:_e(e.formatter.matchNode(b,o,c,!0))),BN=(e,n)=>{const o=n??NN(e);return Bt(kp(e.dom,o),r=>Ht(r)&&!Dm(r))},$w=(e,n,o)=>{const r=BN(e,n);ft(o,(c,u)=>{const f=b=>{const C=PN(e,r,u,b.similar,RT(b)?b.vars:void 0),E=C.isSome();if(b.state.get()!==E){b.state.set(E);const M=C.getOr(n);RT(b)?b.callback(E,{node:M,format:u,parents:r}):ye(b.callbacks,N=>N(E,{node:M,format:u,parents:r}))}};ye([c.withSimilar,c.withoutSimilar],f),ye(c.withVars,f)})},vh=(e,n,o,r,c,u)=>{const f=n.get();ye(o.split(","),b=>{const C=os(f,b).getOrThunk(()=>{const M={withSimilar:{state:Se(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Se(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),E=()=>{const M=BN(e);return PN(e,M,b,c,u).isSome()};if(en(u)){const M=c?C.withSimilar:C.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(E())}else C.withVars.push({state:Se(E()),similar:c,vars:u,callback:r})}),n.set(f)},i8=(e,n,o)=>{const r=e.get();ye(n.split(","),c=>os(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Bt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Bt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Bt(u.withVars,f=>f.callback!==o)}})),e.set(r)},t4=(e,n,o,r,c,u)=>(vh(e,n,o,r,c,u),{unbind:()=>i8(n,o,r)}),Ra=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(NO(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?XO(e,n,o,r):e4(e,n,o,r))},MT=ct.explode,NT=()=>{const e={};return{addFilter:(c,u)=>{ye(MT(c),f=>{pn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Wa(e),removeFilter:(c,u)=>{ye(MT(c),f=>{if(pn(e,f))if(_e(u)){const b=e[f],C=Bt(b.callbacks,E=>E!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},yh=(e,n)=>{ye(n,o=>{e.attr(o,null)})},$N=(e,n,o)=>{e.addNodeFilter("font",r=>{ye(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),C=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&Sl(C).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),yh(c,["color","face","size"])})})},IN=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";ye(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Iw=(e,n,o)=>{var r;const c=ky();n.convert_fonts_to_spans&&$N(e,c,ct.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),IN(e,o,c)},u8=(e,n,o)=>{n.inline_styles&&Iw(e,n,o)},d8=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),_0=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},n4=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?_0(r):decodeURIComponent(r);return L.some({type:c[1],data:f,base64Encoded:u})}else return L.none()},Ip=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return L.some(new Blob([c],{type:e}))},m8=e=>new Promise((n,o)=>{n4(e).bind(({type:r,data:c,base64Encoded:u})=>Ip(r,c,u)).fold(()=>o("Invalid data URI"),n)}),Lp=e=>Uo(e,"blob:")?d8(e):Uo(e,"data:")?m8(e):Promise.reject("Unknown URI format"),LN=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let _d=0;const Lw=e=>"blobid"+_d++,PT=(e,n,o)=>n4(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return L.none();{const f=u?r:btoa(r);return o(f,c)}}),BT=(e,n,o)=>{const r=e.create(Lw(),n,o);return e.add(r),r},FN=(e,n,o=!1)=>PT(n,o,(r,c)=>L.from(e.getByData(r,c)).orThunk(()=>Ip(c,r).map(u=>BT(e,u,r)))),$T=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Uo(n,"blob:")){const r=e.getByUri(n);return _e(r)?Promise.resolve(r):Lp(n).then(c=>LN(c).then(u=>PT(u,!1,f=>L.some(BT(e,c,f))).getOrThunk(o)))}else return Uo(n,"data:")?FN(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},f8=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,mm=e=>L.from(e.match(f8)).bind(n=>on(n,1)).map(n=>Uo(n,"www.")?n.substring(4):n),Fw=(e,n)=>{L.from(e.attr("src")).bind(mm).forall(o=>!Sn(n,o))&&e.attr("sandbox","")},IT=(e,n)=>Uo(e,`${n}/`),o4=e=>en(e)?"iframe":IT(e,"image")?"img":IT(e,"video")?"video":IT(e,"audio")?"audio":"iframe",s4=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=o4(e),b=new Di(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&Fw(b,u),b},ub=e=>_e(e.attr("data-mce-bogus")),r4=e=>e.attr("src")===vt.transparentSrc||_e(e.attr("data-mce-placeholder")),g8=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");r4(c)||ub(c)||wn(u)||FN(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>ye(c,r))}},HN=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",C=>{let E=C.length;const M=P=>P.split(" ").filter(Q=>Q.length>0).concat(["noopener"]).sort().join(" "),N=P=>{const j=P?ct.trim(P):"";return/\b(noopener)\b/g.test(j)?j:M(j)};if(!n.allow_unsafe_link_target)for(;E--;){const P=C[E];P.name==="a"&&P.attr("target")==="_blank"&&P.attr("rel",N(P.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let E=C.length,M,N,P,j;for(;E--;)if(j=C[E],j.name==="a"&&j.firstChild&&!j.attr("href"))for(P=j.parent,M=j.lastChild;M&&P;)N=M.prev,P.insert(M,j),M=N}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let E=C.length,M,N;for(;E--;)if(M=C[E],N=M.parent,N&&(N.name==="ul"||N.name==="ol"))if(M.prev&&M.prev.name==="li")M.prev.append(M);else{const P=new Di("li",1);P.attr("style","list-style-type: none"),M.wrap(P)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var E;let M=C.length;for(;M--;){const N=C[M],P=(E=N.attr("class"))!==null&&E!==void 0?E:"",j=ct.explode(P," ");let Q="";for(let q=0;q<j.length;q++){const te=j[q];let he=!1,we=u["*"];we&&we[te]&&(he=!0),we=u[N.name],!he&&we&&we[te]&&(he=!0),he&&(Q&&(Q+=" "),Q+=te)}Q.length||(Q=null),N.attr("class",Q)}}),g8(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Hn((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>ye(C,E=>{E.replace(s4({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",C=>ye(C,E=>Fw(E,b)))},{entries:VN,setPrototypeOf:zN,isFrozen:h8,getPrototypeOf:p8,getOwnPropertyDescriptor:Hw}=Object;let{freeze:Tu,seal:fm,create:a4}=Object,{apply:c4,construct:LT}=typeof Reflect<"u"&&Reflect;c4||(c4=function(n,o,r){return n.apply(o,r)}),Tu||(Tu=function(n){return n}),fm||(fm=function(n){return n}),LT||(LT=function(n,o){return new n(...o)});const UN=gm(Array.prototype.forEach),b8=gm(Array.prototype.pop),Vw=gm(Array.prototype.push),FT=gm(String.prototype.toLowerCase),l4=gm(String.prototype.toString),v8=gm(String.prototype.match),Xm=gm(String.prototype.replace),y8=gm(String.prototype.indexOf),C8=gm(String.prototype.trim),Ad=gm(RegExp.prototype.test),zw=w8(TypeError);function gm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return c4(e,n,r)}}function w8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return LT(e,o)}}function Hs(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:FT,zN&&zN(e,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const f=o(u);f!==u&&(h8(n)||(n[c]=f),u=f)}e[u]=!0}return e}function db(e){const n=a4(null);for(const[o,r]of VN(e))n[o]=r;return n}function HT(e,n){for(;e!==null;){const r=Hw(e,n);if(r){if(r.get)return gm(r.get);if(typeof r.value=="function")return gm(r.value)}e=p8(e)}function o(r){return console.warn("fallback value for",r),null}return o}const mb=Tu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),i4=Tu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),u4=Tu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),S8=Tu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),d4=Tu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),WN=Tu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ZN=Tu(["#text"]),jN=Tu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),m4=Tu(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GN=Tu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),VT=Tu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x8=fm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),T8=fm(/<%[\w\W]*|[\w\W]*%>/gm),E8=fm(/\${[\w\W]*}/gm),k8=fm(/^data-[\-\w.\u00B7-\uFFFF]/),_8=fm(/^aria-[\-\w]+$/),zT=fm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qN=fm(/^(?:\w+script|data):/i),Jj=fm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),A0=fm(/^html$/i);var KN=Object.freeze({__proto__:null,MUSTACHE_EXPR:x8,ERB_EXPR:T8,TMPLIT_EXPR:E8,DATA_ATTR:k8,ARIA_ATTR:_8,IS_ALLOWED_URI:zT,IS_SCRIPT_OR_DATA:qN,ATTR_WHITESPACE:Jj,DOCTYPE_NAME:A0});const YN=()=>typeof window>"u"?null:window,A8=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function Uw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:YN();const n=No=>Uw(No);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:c}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:C,NodeFilter:E,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:P,trustedTypes:j}=e,Q=C.prototype,q=HT(Q,"cloneNode"),te=HT(Q,"nextSibling"),he=HT(Q,"childNodes"),we=HT(Q,"parentNode");if(typeof f=="function"){const No=c.createElement("template");No.content&&No.content.ownerDocument&&(c=No.content.ownerDocument)}let be,Ae="";const{implementation:ot,createNodeIterator:wt,createDocumentFragment:zt,getElementsByTagName:Ve}=c,{importNode:Ie}=o;let et={};n.isSupported=typeof VN=="function"&&typeof we=="function"&&ot&&ot.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Qt,ERB_EXPR:bn,TMPLIT_EXPR:co,DATA_ATTR:Do,ARIA_ATTR:ps,IS_SCRIPT_OR_DATA:Ns,ATTR_WHITESPACE:Yr}=KN;let{IS_ALLOWED_URI:Wc}=KN,As=null;const _t=Hs({},[...mb,...i4,...u4,...d4,...ZN]);let fn=null;const ts=Hs({},[...jN,...m4,...GN,...VT]);let $t=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),On=null,So=null,Vt=!0,xo=!0,Mo=!1,pc=!0,Ss=!1,za=!1,ed=!1,wm=!1,zl=!1,Ji=!1,_u=!1,Qi=!0,td=!1;const vn="user-content-";let Zo=!0,Fr=!1,Xr={},Ma=null;const Mc=Hs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ba=null;const ca=Hs({},["audio","video","img","source","image","track"]);let vl=null;const Au=Hs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bd="http://www.w3.org/1998/Math/MathML",$d="http://www.w3.org/2000/svg",nd="http://www.w3.org/1999/xhtml";let fg=nd,Lb=!1,Fb=null;const uR=Hs({},[Bd,$d,nd],l4);let gg;const Zk=["application/xhtml+xml","text/html"],uF="text/html";let Ul,Yp=null;const dF=c.createElement("form"),jk=function(t){return t instanceof RegExp||t instanceof Function},Id=function(t){if(!(Yp&&Yp===t)){if((!t||typeof t!="object")&&(t={}),t=db(t),gg=Zk.indexOf(t.PARSER_MEDIA_TYPE)===-1?gg=uF:gg=t.PARSER_MEDIA_TYPE,Ul=gg==="application/xhtml+xml"?l4:FT,As="ALLOWED_TAGS"in t?Hs({},t.ALLOWED_TAGS,Ul):_t,fn="ALLOWED_ATTR"in t?Hs({},t.ALLOWED_ATTR,Ul):ts,Fb="ALLOWED_NAMESPACES"in t?Hs({},t.ALLOWED_NAMESPACES,l4):uR,vl="ADD_URI_SAFE_ATTR"in t?Hs(db(Au),t.ADD_URI_SAFE_ATTR,Ul):Au,ba="ADD_DATA_URI_TAGS"in t?Hs(db(ca),t.ADD_DATA_URI_TAGS,Ul):ca,Ma="FORBID_CONTENTS"in t?Hs({},t.FORBID_CONTENTS,Ul):Mc,On="FORBID_TAGS"in t?Hs({},t.FORBID_TAGS,Ul):{},So="FORBID_ATTR"in t?Hs({},t.FORBID_ATTR,Ul):{},Xr="USE_PROFILES"in t?t.USE_PROFILES:!1,Vt=t.ALLOW_ARIA_ATTR!==!1,xo=t.ALLOW_DATA_ATTR!==!1,Mo=t.ALLOW_UNKNOWN_PROTOCOLS||!1,pc=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ss=t.SAFE_FOR_TEMPLATES||!1,za=t.WHOLE_DOCUMENT||!1,zl=t.RETURN_DOM||!1,Ji=t.RETURN_DOM_FRAGMENT||!1,_u=t.RETURN_TRUSTED_TYPE||!1,wm=t.FORCE_BODY||!1,Qi=t.SANITIZE_DOM!==!1,td=t.SANITIZE_NAMED_PROPS||!1,Zo=t.KEEP_CONTENT!==!1,Fr=t.IN_PLACE||!1,Wc=t.ALLOWED_URI_REGEXP||zT,fg=t.NAMESPACE||nd,$t=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&jk(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($t.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&jk(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($t.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($t.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ss&&(xo=!1),Ji&&(zl=!0),Xr&&(As=Hs({},[...ZN]),fn=[],Xr.html===!0&&(Hs(As,mb),Hs(fn,jN)),Xr.svg===!0&&(Hs(As,i4),Hs(fn,m4),Hs(fn,VT)),Xr.svgFilters===!0&&(Hs(As,u4),Hs(fn,m4),Hs(fn,VT)),Xr.mathMl===!0&&(Hs(As,d4),Hs(fn,GN),Hs(fn,VT))),t.ADD_TAGS&&(As===_t&&(As=db(As)),Hs(As,t.ADD_TAGS,Ul)),t.ADD_ATTR&&(fn===ts&&(fn=db(fn)),Hs(fn,t.ADD_ATTR,Ul)),t.ADD_URI_SAFE_ATTR&&Hs(vl,t.ADD_URI_SAFE_ATTR,Ul),t.FORBID_CONTENTS&&(Ma===Mc&&(Ma=db(Ma)),Hs(Ma,t.FORBID_CONTENTS,Ul)),Zo&&(As["#text"]=!0),za&&Hs(As,["html","head","body"]),As.table&&(Hs(As,["tbody"]),delete On.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw zw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw zw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');be=t.TRUSTED_TYPES_POLICY,Ae=be.createHTML("")}else be===void 0&&(be=A8(j,r)),be!==null&&typeof Ae=="string"&&(Ae=be.createHTML(""));Tu&&Tu(t),Yp=t}},WS=Hs({},["mi","mo","mn","ms","mtext"]),Ne=Hs({},["foreignobject","desc","title","annotation-xml"]),Le=Hs({},["title","style","font","a","script"]),kt=Hs({},i4);Hs(kt,u4),Hs(kt,S8);const pt=Hs({},d4);Hs(pt,WN);const Ln=function(t){let s=we(t);(!s||!s.tagName)&&(s={namespaceURI:fg,tagName:"template"});const a=FT(t.tagName),l=FT(s.tagName);return Fb[t.namespaceURI]?t.namespaceURI===$d?s.namespaceURI===nd?a==="svg":s.namespaceURI===Bd?a==="svg"&&(l==="annotation-xml"||WS[l]):!!kt[a]:t.namespaceURI===Bd?s.namespaceURI===nd?a==="math":s.namespaceURI===$d?a==="math"&&Ne[l]:!!pt[a]:t.namespaceURI===nd?s.namespaceURI===$d&&!Ne[l]||s.namespaceURI===Bd&&!WS[l]?!1:!pt[a]&&(Le[a]||!kt[a]):!!(gg==="application/xhtml+xml"&&Fb[t.namespaceURI]):!1},Io=function(t){Vw(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},Pr=function(t,s){try{Vw(n.removed,{attribute:s.getAttributeNode(t),from:s})}catch{Vw(n.removed,{attribute:null,from:s})}if(s.removeAttribute(t),t==="is"&&!fn[t])if(zl||Ji)try{Io(s)}catch{}else try{s.setAttribute(t,"")}catch{}},Sm=function(t){let s,a;if(wm)t="<remove></remove>"+t;else{const g=v8(t,/^[\r\n\t ]+/);a=g&&g[0]}gg==="application/xhtml+xml"&&fg===nd&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const l=be?be.createHTML(t):t;if(fg===nd)try{s=new P().parseFromString(l,gg)}catch{}if(!s||!s.documentElement){s=ot.createDocument(fg,"template",null);try{s.documentElement.innerHTML=Lb?Ae:l}catch{}}const d=s.body||s.documentElement;return t&&a&&d.insertBefore(c.createTextNode(a),d.childNodes[0]||null),fg===nd?Ve.call(s,za?"html":"body")[0]:za?s.documentElement:d},Gk=function(t){return wt.call(t.ownerDocument||t,t,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},Rj=function(t){return t instanceof N&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof M)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},qk=function(t){return typeof b=="object"?t instanceof b:t&&typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},Oh=function(t,s,a){et[t]&&UN(et[t],l=>{l.call(n,s,a,Yp)})},dR=function(t){let s;if(Oh("beforeSanitizeElements",t,null),Rj(t))return Io(t),!0;const a=Ul(t.nodeName);if(Oh("uponSanitizeElement",t,{tagName:a,allowedTags:As}),t.hasChildNodes()&&!qk(t.firstElementChild)&&(!qk(t.content)||!qk(t.content.firstElementChild))&&Ad(/<[/\w]/g,t.innerHTML)&&Ad(/<[/\w]/g,t.textContent))return Io(t),!0;if(!As[a]||On[a]){if(!On[a]&&mF(a)&&($t.tagNameCheck instanceof RegExp&&Ad($t.tagNameCheck,a)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(a)))return!1;if(Zo&&!Ma[a]){const l=we(t)||t.parentNode,d=he(t)||t.childNodes;if(d&&l){const g=d.length;for(let h=g-1;h>=0;--h)l.insertBefore(q(d[h],!0),te(t))}}return Io(t),!0}return t instanceof C&&!Ln(t)||(a==="noscript"||a==="noembed"||a==="noframes")&&Ad(/<\/no(script|embed|frames)/i,t.innerHTML)?(Io(t),!0):(Ss&&t.nodeType===3&&(s=t.textContent,s=Xm(s,Qt," "),s=Xm(s,bn," "),s=Xm(s,co," "),t.textContent!==s&&(Vw(n.removed,{element:t.cloneNode()}),t.textContent=s)),Oh("afterSanitizeElements",t,null),!1)},mR=function(t,s,a){if(Qi&&(s==="id"||s==="name")&&(a in c||a in dF))return!1;if(!(xo&&!So[s]&&Ad(Do,s))){if(!(Vt&&Ad(ps,s))){if(!fn[s]||So[s]){if(!(mF(t)&&($t.tagNameCheck instanceof RegExp&&Ad($t.tagNameCheck,t)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(t))&&($t.attributeNameCheck instanceof RegExp&&Ad($t.attributeNameCheck,s)||$t.attributeNameCheck instanceof Function&&$t.attributeNameCheck(s))||s==="is"&&$t.allowCustomizedBuiltInElements&&($t.tagNameCheck instanceof RegExp&&Ad($t.tagNameCheck,a)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(a))))return!1}else if(!vl[s]){if(!Ad(Wc,Xm(a,Yr,""))){if(!((s==="src"||s==="xlink:href"||s==="href")&&t!=="script"&&y8(a,"data:")===0&&ba[t])){if(!(Mo&&!Ad(Ns,Xm(a,Yr,"")))){if(a)return!1}}}}}}return!0},mF=function(t){return t.indexOf("-")>0},fF=function(t){let s,a,l,d;Oh("beforeSanitizeAttributes",t,null);const{attributes:g}=t;if(!g)return;const h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fn};for(d=g.length;d--;){s=g[d];const{name:y,namespaceURI:w}=s;a=y==="value"?s.value:C8(s.value);const _=a;if(l=Ul(y),h.attrName=l,h.attrValue=a,h.keepAttr=!0,h.forceKeepAttr=void 0,Oh("uponSanitizeAttribute",t,h),a=h.attrValue,h.forceKeepAttr)continue;if(!h.keepAttr){Pr(y,t);continue}if(!pc&&Ad(/\/>/i,a)){Pr(y,t);continue}Ss&&(a=Xm(a,Qt," "),a=Xm(a,bn," "),a=Xm(a,co," "));const O=Ul(t.nodeName);if(!mR(O,l,a)){Pr(y,t);continue}if(td&&(l==="id"||l==="name")&&(Pr(y,t),a=vn+a),be&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!w)switch(j.getAttributeType(O,l)){case"TrustedHTML":{a=be.createHTML(a);break}case"TrustedScriptURL":{a=be.createScriptURL(a);break}}if(a!==_)try{w?t.setAttributeNS(w,y,a):t.setAttribute(y,a)}catch{Pr(y,t)}}Oh("afterSanitizeAttributes",t,null)},Mj=function No(t){let s;const a=Gk(t);for(Oh("beforeSanitizeShadowDOM",t,null);s=a.nextNode();)Oh("uponSanitizeShadowNode",s,null),!dR(s)&&(s.content instanceof u&&No(s.content),fF(s));Oh("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(No){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,a,l,d;if(Lb=!No,Lb&&(No="<!-->"),typeof No!="string"&&!qk(No))if(typeof No.toString=="function"){if(No=No.toString(),typeof No!="string")throw zw("dirty is not a string, aborting")}else throw zw("toString is not a function");if(!n.isSupported)return No;if(ed||Id(t),n.removed=[],typeof No=="string"&&(Fr=!1),Fr){if(No.nodeName){const y=Ul(No.nodeName);if(!As[y]||On[y])throw zw("root node is forbidden and cannot be sanitized in-place")}}else if(No instanceof b)s=Sm("<!---->"),a=s.ownerDocument.importNode(No,!0),a.nodeType===1&&a.nodeName==="BODY"||a.nodeName==="HTML"?s=a:s.appendChild(a);else{if(!zl&&!Ss&&!za&&No.indexOf("<")===-1)return be&&_u?be.createHTML(No):No;if(s=Sm(No),!s)return zl?null:_u?Ae:""}s&&wm&&Io(s.firstChild);const g=Gk(Fr?No:s);for(;l=g.nextNode();)dR(l)||(l.content instanceof u&&Mj(l.content),fF(l));if(Fr)return No;if(zl){if(Ji)for(d=zt.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return(fn.shadowroot||fn.shadowrootmode)&&(d=Ie.call(o,d,!0)),d}let h=za?s.outerHTML:s.innerHTML;return za&&As["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&Ad(A0,s.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+s.ownerDocument.doctype.name+`>
`+h),Ss&&(h=Xm(h,Qt," "),h=Xm(h,bn," "),h=Xm(h,co," ")),be&&_u?be.createHTML(h):h},n.setConfig=function(No){Id(No),ed=!0},n.clearConfig=function(){Yp=null,ed=!1},n.isValidAttribute=function(No,t,s){Yp||Id({});const a=Ul(No),l=Ul(t);return mR(a,l,s)},n.addHook=function(No,t){typeof t=="function"&&(et[No]=et[No]||[],Vw(et[No],t))},n.removeHook=function(No){if(et[No])return b8(et[No])},n.removeHooks=function(No){et[No]&&(et[No]=[])},n.removeAllHooks=function(){et={}},n}var UT=Uw();const Qa=ct.each,Qj=ct.trim,eG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],tG={ftp:21,http:80,https:443,mailto:25},nG=["img","video"],hm=(e,n)=>_e(e)?!e:_e(n)?!Sn(nG,n):!0,WT=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Ch=(e,n,o)=>{const r=WT(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?hm(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Vl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=gd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Ch(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Qj(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Vl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&Qa(eG,(b,C)=>{let E=f[C];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[b]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Vl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Vl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?tG[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?c+="/"+C[u]:c+=C[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];Qa(u,N=>{N&&b.push(N)});const C=[];for(let N=f.length-1;N>=0;N--)if(!(f[N].length===0||f[N]===".")){if(f[N]===".."){r++;continue}if(r>0){r--;continue}C.push(f[N])}const E=b.length-r;let M;return E<=0?M=qo(C).join("/"):M=b.slice(0,E).join("/")+"/"+qo(C).join("/"),M.indexOf("/")!==0&&(M="/"+M),c&&M.lastIndexOf("/")!==M.length-1&&(M+=c),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const O8=ct.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),f4="data-mce-type";let fb=0;const gb=(e,n,o,r,c)=>{var u,f,b,C;const E=n.validate,M=o.getSpecialElements();e.nodeType===Tl&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const N=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){_e(c)&&(c.allowedTags[N]=!0);return}if(e.nodeType!==Ya||N==="body")return;const P=de.fromDom(e),j=Sr(P,f4),Q=Ks(P,"data-mce-bogus");if(!j&&ee(Q)){Q==="all"?Ds(P):pi(P);return}const q=o.getElementRule(N);if(E&&!q){pn(M,N)?Ds(P):pi(P);return}else _e(c)&&(c.allowedTags[N]=!0);if(E&&q&&!j){if(ye((b=q.attributesForced)!==null&&b!==void 0?b:[],te=>{Co(P,te.name,te.value==="{$uid}"?`mce_${fb++}`:te.value)}),ye((C=q.attributesDefault)!==null&&C!==void 0?C:[],te=>{Sr(P,te.name)||Co(P,te.name,te.value==="{$uid}"?`mce_${fb++}`:te.value)}),q.attributesRequired&&!Ro(q.attributesRequired,te=>Sr(P,te))){pi(P);return}if(q.removeEmptyAttrs&&Bc(P)){pi(P);return}q.outputName&&q.outputName!==N&&d2(P,q.outputName)}},O0=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=ZT(n,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,g4(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&Uo(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):jT(e,f)&&(c.forceKeepAttr=!0)},ZT=(e,n,o,r,c,u)=>o!=="html"&&!jr(r)?!0:!(c in O8&&Ch(e,u,r))&&(!e.validate||n.isValid(r,c)||Uo(c,"data-")||Uo(c,"aria-")),jT=(e,n)=>e.hasAttribute(f4)&&(n==="id"||n==="class"||n==="style"),g4=(e,n)=>e in n.getBoolAttrs(),XN=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,C=f.value;!ZT(n,o,r,e.tagName.toLowerCase(),b,C)&&!jT(e,b)?e.removeAttribute(b):g4(b,o)&&e.setAttribute(b,b)}},D8=(e,n,o)=>{const r=UT();return r.addHook("uponSanitizeElement",(c,u)=>{gb(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{O0(c,e,n,o.current(),u)}),r},R8=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},JN=e=>{const n=S(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};UT().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};UT().sanitize(e,o)}else throw new Error("Not a namespace element")},M8=(e,n)=>{const o=F();if(e.sanitize){const r=D8(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,R8(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:JN}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=b.nextNode();){const E=o.track(C);gb(C,e,n,E),Ht(C)&&XN(C,e,n,E)}o.reset()},sanitizeNamespaceElement:It}},QN=ct.makeMap,eP=ct.extend,tP=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",f=n.childNodes;for(let b=0,C=f.length;b<C;b++){const E=f[b],M=new Di(E.nodeName.toLowerCase(),E.nodeType);if(Ht(E)){const N=E.attributes;for(let P=0,j=N.length;P<j;P++){const Q=N[P];M.attr(Q.name,Q.value)}jr(M.name)&&(r(E),M.value=E.innerHTML)}else at(E)?(M.value=E.data,u&&(M.raw=!0)):(Ia(E)||Xc(E)||iu(E))&&(M.value=E.data);jr(M.name)||tP(M,E,o,r),e.append(M)}},N8=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;ye(n,b=>b(f)),wn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];ye(o,f=>f(u))}},nP=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=eP(QN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=qb(n),E=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,P=we=>{let be=we.parent;for(;_e(be);){if(be.name in f)return!0;be=be.parent}return!1},j=we=>{let be=we;for(;_e(be);){if(be.name in C)return pT(n,u,f,be);be=be.parent}return!1},Q=we=>we.name in b||yi(n,we)||jr(we.name)&&we.parent===e,q=(we,be)=>{const Ae=be?we.prev:we.next;return _e(Ae)||wn(we.parent)?!1:Q(we.parent)&&(we.parent!==e||r.isRootContent===!0)};return[we=>{var be;if(we.type===3&&!P(we)){let Ae=(be=we.value)!==null&&be!==void 0?be:"";Ae=Ae.replace(E," "),(ol(we.prev,Q)||q(we,!0))&&(Ae=Ae.replace(M,"")),Ae.length===0?we.remove():we.value=Ae}},we=>{var be;if(we.type===1){const Ae=n.getElementRule(we.name);if(c&&Ae){const ot=pT(n,u,f,we);Ae.paddInEmptyBlock&&ot&&j(we)?hT(o,r,Q,we):Ae.removeEmpty&&ot?Q(we)?we.remove():we.unwrap():Ae.paddEmpty&&(ot||O6(we))&&hT(o,r,Q,we)}}else if(we.type===3&&!P(we)){let Ae=(be=we.value)!==null&&be!==void 0?be:"";(we.next&&Q(we.next)||q(we,!1))&&(Ae=Ae.replace(N,"")),Ae.length===0?we.remove():we.value=Ae}}]},P8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},og=(e={},n=Xd())=>{const o=NT(),r=NT(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=M8(c,n),b=(be,Ae,ot="html")=>{const wt=ot==="xhtml"?"application/xhtml+xml":"text/html",zt=pn(n.getSpecialElements(),Ae.toLowerCase()),Ve=zt?`<${Ae}>${be}</${Ae}>`:be,Ie=ot==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ve}</body></html>`:`<body>${Ve}</body>`,et=u.parseFromString(Ie,wt).body;return f.sanitizeHtmlElement(et,wt),zt?et.firstChild:et},C=o.addFilter,E=o.getFilters,M=o.removeFilter,N=r.addFilter,P=r.getFilters,j=r.removeFilter,Q=(be,Ae)=>{rN(n,be)&&Ae.push(be)},q=(be,Ae)=>{const ot=ee(Ae.attr(f4)),wt=Ae.type===1&&!pn(be,Ae.name)&&!yi(n,Ae)&&!jr(Ae.name);return Ae.type===3||wt&&!ot},te=(be,Ae)=>{const ot=eP(QN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),wt=/^[ \t\r\n]+/,zt=/[ \t\r\n]+$/;let Ve=be.firstChild,Ie=null;const et=Qt=>{var bn,co;Qt&&(Ve=Qt.firstChild,Ve&&Ve.type===3&&(Ve.value=(bn=Ve.value)===null||bn===void 0?void 0:bn.replace(wt,"")),Ve=Qt.lastChild,Ve&&Ve.type===3&&(Ve.value=(co=Ve.value)===null||co===void 0?void 0:co.replace(zt,"")))};if(n.isValidChild(be.name,Ae.toLowerCase())){for(;Ve;){const Qt=Ve.next;q(ot,Ve)?(Ie||(Ie=new Di(Ae,1),Ie.attr(c.forced_root_block_attrs),be.insert(Ie,Ve)),Ie.append(Ve)):(et(Ie),Ie=null),Ve=Qt}et(Ie)}},we={schema:n,addAttributeFilter:N,getAttributeFilters:P,removeAttributeFilter:j,addNodeFilter:C,getNodeFilters:E,removeNodeFilter:M,parse:(be,Ae={})=>{var ot;const wt=c.validate,zt=(ot=Ae.context)!==null&&ot!==void 0?ot:c.root_name,Ve=b(be,zt,Ae.format);er(n,Ve);const Ie=new Di(zt,11);tP(Ie,Ve,n.getSpecialElements(),f.sanitizeNamespaceElement),Ve.innerHTML="";const[et,Qt]=nP(Ie,n,c,Ae),bn=[],co=wt?Yr=>Q(Yr,bn):It,Do={nodes:{},attributes:{}},ps=Yr=>SO(E(),P(),Yr,Do);if(N8(Ie,[et,ps],[Qt,co]),bn.reverse(),wt&&bn.length>0)if(Ae.context){const{pass:Yr,fail:Wc}=fo(bn,As=>As.parent===Ie);qm(Wc,n,Ie,ps),Ae.invalid=Yr.length>0}else qm(bn,n,Ie,ps);const Ns=P8(c,Ae);return Ns&&(Ie.name==="body"||Ae.isRootContent)&&te(Ie,Ns),Ae.invalid||sN(Do,Ae),Ie}};return HN(we,c),u8(we,c,n),we},oP=e=>ks(e)?fh({validate:!1}).serialize(e):e,sP=(e,n,o)=>{const r=oP(e),c=n(r);if(c.isDefaultPrevented())return c;if(ks(e))if(c.content!==r){const u=og({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},h4=e=>({sanitize:Mv(e),sandbox_iframes:Nv(e),sandbox_iframes_exclusions:Pv(e)}),rP=(e,n)=>{if(n.no_events)return Pl.value(n);{const o=Mx(e,n);return o.isDefaultPrevented()?Pl.error(ew(e,{content:"",...o}).content):Pl.value(o)}},p4=(e,n,o)=>o.no_events?n:sP(n,c=>ew(e,{...o,content:c}),h4(e)).content,b4=(e,n)=>{if(n.no_events)return Pl.value(n);{const o=sP(n.content,r=>l0(e,{...n,content:r}),h4(e));return o.isDefaultPrevented()?(i0(e,o),Pl.error(void 0)):Pl.value(o)}},v4=(e,n,o)=>{o.no_events||i0(e,{...o,content:n})},GT=(e,n,o)=>({element:e,width:n,rows:o}),y4=(e,n)=>({element:e,cells:n}),aP=(e,n)=>({x:e,y:n}),C4=(e,n)=>Dr(e,n).bind(Sl).getOr(1),cP=(e,n,o,r,c)=>{const u=C4(c,"rowspan"),f=C4(c,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=y4(Qh(r),[]));for(let E=n;E<n+f;E++){const M=b[C].cells;M[E]=C===o&&E===n?c:vd(c)}}},lP=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},B8=(e,n,o)=>{for(;lP(e,n,o);)n++;return n},iP=e=>Bo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),uP=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Jo(c[u],n))return L.some(aP(u,r))}return L.none()},qT=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const C=f[b].cells,E=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(y4(f[b].element,E))}return u},Ww=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?qT(e,r,c,u,f):qT(e,r,f,u,c);return GT(e.element,iP(b),b)},dP=(e,n)=>{const o=vd(e.element),r=de.fromTag("tbody");return Bu(r,n),mr(o,r),o},mP=e=>gn(e.rows,n=>{const o=gn(n.cells,c=>{const u=Qh(c);return Cr(u,"colspan"),Cr(u,"rowspan"),u}),r=vd(n.element);return Bu(r,o),r}),KT=e=>{const n=GT(vd(e),0,[]);return ye(Ir(e,"tr"),(o,r)=>{ye(Ir(o,"td,th"),(c,u)=>{cP(n,B8(n,u,r),r,o,c)})}),GT(n.element,iP(n.rows),n.rows)},$8=e=>dP(e,mP(e)),I8=(e,n,o)=>uP(e,n).bind(r=>uP(e,o).map(c=>Ww(e,r,c))),hb=e=>ms(e,n=>To(n)==="ul"||To(n)==="ol"),w4=(e,n)=>ms(e,o=>To(o)==="li"&&Yv(o,n)).fold(st([]),o=>hb(e).map(r=>{const c=de.fromTag(To(r)),u=Yo(Ic(r),(f,b)=>Uo(b,"list-style"));return eo(c,u),[de.fromTag("li"),c]}).getOr([])),fP=(e,n)=>{const o=Bo(n,(r,c)=>(mr(c,r),c),e);return n.length>0?In([o]):o},Zw=e=>si(e)?ac(e).filter(yd).fold(st([]),n=>[e,n]):yd(e)?[e]:[],gP=(e,n,o)=>{const r=de.fromDom(n.commonAncestorContainer),c=gh(r,e),u=Bt(c,C=>o.isWrapper(To(C))),f=w4(c,n),b=u.concat(f.length?f:Zw(r));return gn(b,vd)},YT=()=>In([]),hP=(e,n,o)=>fP(de.fromDom(n.cloneContents()),gP(e,n,o)),pP=(e,n)=>oa(n,"table",qe(Jo,e)),L8=(e,n)=>pP(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=KT(o);return I8(u,r,c).map(f=>In([$8(f)]))}).getOrThunk(YT),F8=(e,n,o)=>n.length>0&&n[0].collapsed?YT():hP(e,n[0],o),H8=(e,n,o)=>{const r=Gf(n,e);return r.length>0?L8(e,r):F8(e,n,o)},D0=(e,n)=>n>=0&&n<e.length&&ch(e.charAt(n)),bP=e=>Ei(e.innerText),vP=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),V8=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=vP(r),f=de.fromDom(n.cloneContents());oM(f),sM(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=bP(b),E=Ei((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),D0(E,0)||D0(E,E.length-1)){const M=r.getOr(c),N=bP(M),P=N.indexOf(C);if(P===-1)return C;{const j=D0(N,P-1),Q=D0(N,P+C.length);return(j?" ":"")+C+(Q?" ":"")}}else return C}).getOr(""),z8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=p0(e,Kv(c)),f=n.contextual?H8(de.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},U8=(e,n)=>{if(n.format==="text")return V8(e);{const o=z8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},W8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),Z8=(e,n,o={})=>{const r=W8(o,n);return rP(e,r).fold(Po,c=>{const u=U8(e,c);return p4(e,u,c)})},S4=0,yP=1,CP=2,j8=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(M,N,P)=>({start:M,end:N,diag:P}),f=(M,N,P,j,Q)=>{const q=C(M,N,P,j);if(q===null||q.start===N&&q.diag===N-j||q.end===M&&q.diag===M-P){let te=M,he=P;for(;te<N||he<j;)te<N&&he<j&&e[te]===n[he]?(Q.push([S4,e[te]]),++te,++he):N-M>j-P?(Q.push([CP,e[te]]),++te):(Q.push([yP,n[he]]),++he)}else{f(M,q.start,P,q.start-q.diag,Q);for(let te=q.start;te<q.end;++te)Q.push([S4,e[te]]);f(q.end,N,q.end-q.diag,j,Q)}},b=(M,N,P,j)=>{let Q=M;for(;Q-N<j&&Q<P&&e[Q]===n[Q-N];)++Q;return u(M,Q,N)},C=(M,N,P,j)=>{const Q=N-M,q=j-P;if(Q===0||q===0)return null;const te=Q-q,he=q+Q,we=(he%2===0?he:he+1)/2;r[1+we]=M,c[1+we]=N+1;let be,Ae,ot,wt,zt;for(be=0;be<=we;++be){for(Ae=-be;Ae<=be;Ae+=2){for(ot=Ae+we,Ae===-be||Ae!==be&&r[ot-1]<r[ot+1]?r[ot]=r[ot+1]:r[ot]=r[ot-1]+1,wt=r[ot],zt=wt-M+P-Ae;wt<N&&zt<j&&e[wt]===n[zt];)r[ot]=++wt,++zt;if(te%2!==0&&te-be<=Ae&&Ae<=te+be&&c[ot-te]<=r[ot])return b(c[ot-te],Ae+M-P,N,j)}for(Ae=te-be;Ae<=te+be;Ae+=2){for(ot=Ae+we-te,Ae===te-be||Ae!==te+be&&c[ot+1]<=c[ot-1]?c[ot]=c[ot+1]-1:c[ot]=c[ot-1],wt=c[ot]-1,zt=wt-M+P-Ae;wt>=M&&zt>=P&&e[wt]===n[zt];)c[ot]=wt--,zt--;if(te%2===0&&-be<=Ae&&Ae<=be&&c[ot]<=r[ot+te])return b(c[ot],Ae+M-P,N,j)}}return null},E=[];return f(0,e.length,0,n.length,E),E},jw=e=>Ht(e)?e.outerHTML:at(e)?gd.encodeRaw(e.data,!1):Ia(e)?"<!--"+e.data+"-->":"",li=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},G8=(e,n,o)=>{const r=li(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},XT=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},pb=(e,n)=>{let o=0;ye(e,r=>{r[0]===S4?o++:r[0]===yP?(G8(n,r[1],o),o++):r[0]===CP&&XT(n,o)})},wP=(e,n)=>Bt(gn(Ko(e.childNodes),A(Ei,jw)),o=>o.length>0),Eu=(e,n)=>{const o=gn(Ko(n.childNodes),jw);return pb(j8(o,e),n),n},bb=He(()=>document.implementation.createHTMLDocument("undo")),SP=e=>e.querySelector("iframe")!==null,q8=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),xP=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),JT=e=>{const n=e.serializer.getTempAttrs(),o=qA(e.getBody(),n);return SP(o)?q8(wP(o)):xP(Ei(o.innerHTML))},QT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Eu(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:_e(r)&&yx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},vb=e=>e.type==="fragmented"?e.fragments.join(""):e.content,eE=e=>{const n=de.fromTag("body",bb());return $u(n,vb(e)),ye(Ir(n,"*[data-mce-bogus]"),pi),Xs(n)},K8=(e,n)=>vb(e)===vb(n),TP=(e,n)=>eE(e)===eE(n),x4=(e,n)=>!e||!n?!1:K8(e,n)?!0:TP(e,n),Gw=e=>e.get()===0,R0=(e,n,o)=>{Gw(o)&&(e.typing=n)},EP=(e,n)=>{e.typing&&(R0(e,!1,n),e.add())},Y8=e=>{e.typing&&(e.typing=!1,e.add())},sg=(e,n,o)=>{Gw(n)&&o.set(Qy(e.selection))},T4=(e,n,o,r,c,u,f)=>{const b=JT(e),C=ct.extend(u||{},b);if(!Gw(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&x4(E,C))return null;n.data[o.get()]&&c.get().each(P=>{n.data[o.get()].beforeBookmark=P});const M=L_(e);if(M&&n.data.length>M){for(let P=0;P<n.data.length-1;P++)n.data[P]=n.data[P+1];n.data.length--,o.set(n.data.length)}C.bookmark=Qy(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const N={level:C,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",N),e.dispatch("change",N)):e.dispatch("AddUndo",N),C},X8=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},tE=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];QT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},E4=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],QT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},kP=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,R0(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],QT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},_P=e=>{e.clear(),e.add()},AP=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!x4(JT(e),n.data[0]),J8=(e,n)=>n.get()<e.data.length-1&&!e.typing,Q8=(e,n,o)=>(EP(e,n),e.beforeChange(),e.ignore(o),e.add()),e7=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},t7=(e,n)=>{const o=e.dom,r=_e(n)?n:e.getBody();ye(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=bC(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,C=vC(e);b&&e.hasVisual?o.addClass(c,C):o.removeClass(c,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},OP=e=>({init:{bindEvents:It},undoManager:{beforeChange:(n,o)=>sg(e,n,o),add:(n,o,r,c,u,f)=>T4(e,n,o,r,c,u,f),undo:(n,o,r)=>kP(e,n,o,r),redo:(n,o)=>E4(e,n,o),clear:(n,o)=>X8(e,n,o),reset:n=>_P(n),hasUndo:(n,o)=>AP(e,n,o),hasRedo:(n,o)=>J8(n,o),transact:(n,o,r)=>Q8(n,o,r),ignore:(n,o)=>e7(n,o),extra:(n,o,r,c)=>tE(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>NO(e,n,o,r,c),matchAll:(n,o)=>Z6(e,n,o),matchNode:(n,o,r,c)=>ng(e,n,o,r,c),canApply:n=>G6(e,n),closest:n=>j6(e,n),apply:(n,o,r)=>e4(e,n,o,r),remove:(n,o,r,c)=>XO(e,n,o,r,c),toggle:(n,o,r)=>Ra(e,n,o,r),formatChanged:(n,o,r,c,u)=>t4(e,n,o,r,c,u)},editor:{getContent:n=>GF(e,n),setContent:(n,o)=>OO(e,n,o),insertContent:(n,o)=>W6(e,n,o),addVisual:n=>t7(e,n)},selection:{getContent:(n,o)=>Z8(e,n,o)},autocompleter:{addDecoration:It,removeDecoration:It},raw:{getModel:()=>L.none()}}),DP=e=>{const n=E=>Ye(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,M,N)=>r.transact(N),ignore:(E,M)=>r.ignore(M),extra:(E,M,N,P)=>r.extra(N,P)},formatter:{match:(E,M,N,P)=>c.match(E,n(M),P),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,M,N)=>c.apply(E,n(M)),remove:(E,M,N,P)=>c.remove(E,n(M)),toggle:(E,M,N)=>c.toggle(E,n(M)),formatChanged:(E,M,N,P,j)=>c.formatChanged(M,N,P,j)},editor:{getContent:E=>u.getContent(E),setContent:(E,M)=>({content:u.setContent(E,M),html:""}),insertContent:(E,M)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>L.some(C.getRawModel())}}},n7=()=>{const e=st(null),n=st("");return{init:{bindEvents:It},undoManager:{beforeChange:It,add:e,undo:e,redo:e,clear:It,reset:It,hasUndo:We,hasRedo:We,transact:e,ignore:It,extra:It},formatter:{match:We,matchAll:st([]),matchNode:st(void 0),canApply:We,closest:n,apply:It,remove:It,toggle:It,formatChanged:st({unbind:It})},editor:{getContent:n,setContent:st({content:"",html:""}),insertContent:st(""),addVisual:It},selection:{getContent:n},autocompleter:{addDecoration:It,removeDecoration:It},raw:{getModel:st(L.none())}}},rg=e=>pn(e.plugins,"rtc"),o7=e=>os(e.plugins,"rtc").bind(n=>L.from(n.setup)),RP=e=>{const n=e;return o7(e).fold(()=>(n.rtcInstance=OP(e),L.none()),o=>(n.rtcInstance=n7(),L.some(()=>o().then(r=>(n.rtcInstance=DP(r),r.rtc.isRemote)))))},qw=e=>e.rtcInstance?e.rtcInstance:OP(e),ec=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},MP=(e,n,o)=>{ec(e).undoManager.beforeChange(n,o)},k4=(e,n,o,r,c,u,f)=>ec(e).undoManager.add(n,o,r,c,u,f),NP=(e,n,o,r)=>ec(e).undoManager.undo(n,o,r),PP=(e,n,o)=>ec(e).undoManager.redo(n,o),_4=(e,n,o)=>{ec(e).undoManager.clear(n,o)},BP=(e,n)=>{ec(e).undoManager.reset(n)},$P=(e,n,o)=>ec(e).undoManager.hasUndo(n,o),IP=(e,n,o)=>ec(e).undoManager.hasRedo(n,o),s7=(e,n,o,r)=>ec(e).undoManager.transact(n,o,r),A4=(e,n,o)=>{ec(e).undoManager.ignore(n,o)},r7=(e,n,o,r,c)=>{ec(e).undoManager.extra(n,o,r,c)},nE=(e,n,o,r,c)=>ec(e).formatter.match(n,o,r,c),a7=(e,n,o)=>ec(e).formatter.matchAll(n,o),c7=(e,n,o,r,c)=>ec(e).formatter.matchNode(n,o,r,c),l7=(e,n)=>ec(e).formatter.canApply(n),LP=(e,n)=>ec(e).formatter.closest(n),FP=(e,n,o,r)=>{ec(e).formatter.apply(n,o,r)},i7=(e,n,o,r,c)=>{ec(e).formatter.remove(n,o,r,c)},u7=(e,n,o,r)=>{ec(e).formatter.toggle(n,o,r)},d7=(e,n,o,r,c,u)=>ec(e).formatter.formatChanged(n,o,r,c,u),m7=(e,n)=>qw(e).editor.getContent(n),f7=(e,n,o)=>qw(e).editor.setContent(n,o),HP=(e,n,o)=>qw(e).editor.insertContent(n,o),oG=(e,n,o)=>ec(e).selection.getContent(n,o),g7=(e,n)=>ec(e).editor.addVisual(n),VP=e=>ec(e).init.bindEvents(),h7=(e,n={})=>{const o=n.format?n.format:"html";return oG(e,o,n)},zP=e=>e.dom.length===0?(Ds(e),L.none()):L.some(e),p7=(e,n)=>e.filter(o=>Yf.isBookmarkNode(o.dom)).bind(n?gi:El),b7=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(aO(u,f,c,!1,!r),o.setStart(f,b)):(aO(f,u,c,!1,!r),o.setEnd(f,b))},v7=(e,n,o)=>{ac(e).each(r=>{const c=e.dom;n&&pw(r,Be(c,0),o)?vw(c,0,o):!n&&bw(r,Be(c,c.length),o)&&rO(c,c.length,o)})},O4=(e,n,o,r,c)=>{e.bind(u=>((r?rO:vw)(u.dom,r?u.dom.length:0,c),n.filter(Me).map(b=>b7(u,b,o,r,c)))).orThunk(()=>p7(n,r).or(n).filter(Me).map(f=>v7(f,r,c)))},y7=(e,n,o)=>{const r=L.from(n.firstChild).map(de.fromDom),c=L.from(n.lastChild).map(de.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(El).filter(Me).bind(zP),f=c.bind(gi).filter(Me).bind(zP);O4(u,r,e,!0,o),O4(f,c,e,!1,o),e.collapse(!1)},C7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),w7=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return fh({validate:!1},e.schema).serialize(u)}else return n.content},S7=(e,n,o={})=>{const r=C7(o,n);b4(e,r).each(c=>{const u=w7(e,c),f=e.selection.getRng();y7(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),dw(e,f),v4(e,u,c)})},UP=(e,n,o)=>{if(pn(e,n)){const r=Bt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var sG=(e,n)=>{let o,r;const c=(b,C)=>ms(C,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,E=u(C),M={};ft(o,(N,P)=>{c(P,E).each(j=>{r[P]||(ye(N,Q=>{Q(!0,{node:j,selector:P,parents:E})}),r[P]=N),M[P]=N})}),ft(r,(N,P)=>{M[P]||(delete r[P],ye(N,j=>{j(!1,{node:C,selector:P,parents:E})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{UP(o,b,C),UP(r,b,C)}})}};const x7=e=>!!(e&&e.ownerDocument)&&wc(de.fromDom(e.ownerDocument),de.fromDom(e)),T7=e=>e?x7(e.startContainer)&&x7(e.endContainer):!1,WP=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=sG(e,r),b=(_t,fn)=>{const ts=e.createRng();_e(_t)&&_e(fn)?(ts.setStart(_t,fn),ts.setEnd(_t,fn),Ae(ts),he(!1)):(ZC(e,ts,r.getBody(),!0),Ae(ts))},C=_t=>h7(r,_t),E=(_t,fn)=>S7(r,_t,fn),M=_t=>ZA(r.getBody(),be(),_t),N=_t=>jA(r.getBody(),be(),_t),P=(_t,fn)=>Wc.getBookmark(_t,fn),j=_t=>Wc.moveToBookmark(_t),Q=(_t,fn)=>(IF(e,_t,fn).each(Ae),_t),q=()=>{const _t=be(),fn=we();return!_t||_t.item?!1:_t.compareEndPoints?_t.compareEndPoints("StartToEnd",_t)===0:!fn||_t.collapsed},te=()=>{const _t=be(),fn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return fn.length>0?ls(fn,ts=>e.isEditable(ts.parentElement)):GR(e,_t)},he=_t=>{const fn=be();fn.collapse(!!_t),Ae(fn)},we=()=>n.getSelection?n.getSelection():n.document.selection,be=()=>{let _t;const fn=($t,On,So)=>{try{return On.compareBoundaryPoints($t,So)}catch{return-1}},ts=n.document;if(_e(r.bookmark)&&!Q1(r)){const $t=Gx(r);if($t.isSome())return $t.map(On=>p0(r,[On])[0]).getOr(ts.createRange())}try{const $t=we();$t&&!Zd($t.anchorNode)&&($t.rangeCount>0?_t=$t.getRangeAt(0):_t=ts.createRange(),_t=p0(r,[_t])[0])}catch{}if(_t||(_t=ts.createRange()),Cf(_t.startContainer)&&_t.collapsed){const $t=e.getRoot();_t.setStart($t,0),_t.setEnd($t,0)}return c&&u&&(fn(_t.START_TO_START,_t,c)===0&&fn(_t.END_TO_END,_t,c)===0?_t=u:(c=null,u=null)),_t},Ae=(_t,fn)=>{if(!T7(_t))return;const ts=we();if(_t=r.dispatch("SetSelectionRange",{range:_t,forward:fn}).range,ts){u=_t;try{ts.removeAllRanges(),ts.addRange(_t)}catch{}fn===!1&&ts.extend&&(ts.collapse(_t.endContainer,_t.endOffset),ts.extend(_t.startContainer,_t.startOffset)),c=ts.rangeCount>0?ts.getRangeAt(0):null}if(!_t.collapsed&&_t.startContainer===_t.endContainer&&(ts!=null&&ts.setBaseAndExtent)&&_t.endOffset-_t.startOffset<2&&_t.startContainer.hasChildNodes()){const On=_t.startContainer.childNodes[_t.startOffset];On&&On.nodeName==="IMG"&&(ts.setBaseAndExtent(_t.startContainer,_t.startOffset,_t.endContainer,_t.endOffset),(ts.anchorNode!==_t.startContainer||ts.focusNode!==_t.endContainer)&&ts.setBaseAndExtent(On,0,On,1))}r.dispatch("AfterSetSelectionRange",{range:_t,forward:fn})},ot=_t=>(E(e.getOuterHTML(_t)),_t),wt=()=>BF(r.getBody(),be()),zt=(_t,fn)=>$F(e,be(),_t,fn),Ve=()=>{const _t=we(),fn=_t==null?void 0:_t.anchorNode,ts=_t==null?void 0:_t.focusNode;if(!_t||!fn||!ts||Zd(fn)||Zd(ts))return!0;const $t=e.createRng(),On=e.createRng();try{$t.setStart(fn,_t.anchorOffset),$t.collapse(!0),On.setStart(ts,_t.focusOffset),On.collapse(!0)}catch{return!0}return $t.compareBoundaryPoints($t.START_TO_START,On)<=0},Yr={dom:e,win:n,serializer:o,editor:r,expand:(_t={type:"word"})=>Ae(rt(e).expand(be(),_t)),collapse:he,setCursorLocation:b,getContent:C,setContent:E,getBookmark:P,moveToBookmark:j,select:Q,isCollapsed:q,isEditable:te,isForward:Ve,setNode:ot,getNode:wt,getSel:we,setRng:Ae,getRng:be,getStart:M,getEnd:N,getSelectedBlocks:zt,normalize:()=>{const _t=be(),fn=we();if(!aA(fn)&&jC(r)){const ts=Dt(e,_t);return ts.each($t=>{Ae($t,Ve())}),ts.getOr(_t)}return _t},selectorChanged:(_t,fn)=>(f(_t,fn),Yr),selectorChangedWithUnbind:f,getScrollContainer:()=>{let _t,fn=e.getRoot();for(;fn&&fn.nodeName!=="BODY";){if(fn.scrollHeight>fn.clientHeight){_t=fn;break}fn=fn.parentNode}return _t},scrollIntoView:(_t,fn)=>{_e(_t)?xF(r,_t,fn):dw(r,be(),fn)},placeCaretAt:(_t,fn)=>Ae(p(_t,fn,r.getDoc())),getBoundingClientRect:()=>{const _t=be();return _t.collapsed?Be.fromRangeStart(_t).getClientRects()[0]:_t.getBoundingClientRect()},destroy:()=>{n=c=u=null,As.destroy()}},Wc=Yf(Yr),As=G1(Yr,r);return Yr.bookmarkManager=Wc,Yr.controlSelection=As,Yr},rG=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=ct.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const E=M=>M.name in f||yi(o,M);for(let M=0,N=r.length;M<N;M++){let P=r[M],j=P.parent;if(j&&E(j)&&P===j.lastChild){let Q=P.prev;for(;Q;){const q=Q.name;if(q!=="span"||Q.attr("data-mce-type")!=="bookmark"){q==="br"&&(P=null);break}Q=Q.prev}if(P&&(P.remove(),pT(o,b,C,j))){const q=o.getElementRule(j.name);q&&(q.removeEmpty?j.remove():q.paddEmpty&&hT(e,u,E,j))}}else{let Q=P;for(;j&&j.firstChild===Q&&j.lastChild===Q&&(Q=j,!f[j.name]);)j=j.parent;if(Q===j){const q=new Di("#text",3);q.value=Ea,P.replace(q)}}}})},E7=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const E=r[C];let M=E.attr(u);M!==void 0?(E.attr(c,M.length>0?M:null),E.attr(u,null)):(M=E.attr(c),c==="style"?M=o.serializeStyle(o.parseStyle(M),E.name):f&&(M=f.call(b,M,c,E.name)),E.attr(c,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(b.firstChild).exists(E=>{var M;return!Ug((M=E.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],E=C.firstChild,M=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const N=C.attr("type");N&&C.attr("type",N==="mce-no/type"?null:N.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ye(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&rG(n,e,e.schema)},aa=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},D4=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");ct.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return bA(e,{...o,node:u}),r&&(c.doc=r),u},aG=(e,n)=>_e(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,k7=(e,n,o)=>aG(e,o)?D4(e,n,o):n,_7=(e,n,o)=>{ct.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},M0=(e,n,o)=>!n.no_events&&e?s0(e,{...n,content:o}).content:o,cG=(e,n,o)=>{const r=Ei(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||v1(de.fromDom(n))?r:ct.trim(r)},lG=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return aa(c),c},bl=(e,n,o)=>fh(e,n).serialize(o),ZP=(e,n,o,r,c)=>{const u=bl(n,o,r);return M0(e,c,u)},jP=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:hr.DOM,u=n&&n.schema?n.schema:Xd(r),f=og(r,u);E7(f,r,c);const b=(C,E={})=>{const M={format:"html",...E},N=k7(n,C,M),P=cG(c,N,M),j=lG(f,P,M);return M.format==="tree"?j:ZP(n,r,u,j,M)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:qe(_7,f,o),getTempAttrs:st(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},R4=(e,n)=>{const o=jP(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},A7="html",O7=(e,n)=>({...e,format:n,get:!0,getInner:!0}),oE=(e,n={})=>{const o=n.format?n.format:A7,r=O7(n,o);return rP(e,r).fold(Po,c=>{const u=m7(e,c);return p4(e,u,c)})},D7="html",M4=(e,n)=>({format:D7,...e,set:!0,content:n}),N4=(e,n,o={})=>{const r=M4(o,n);return b4(e,r).map(c=>{const u=f7(e,c.content,c);return v4(e,u.html,c),u.content}).getOr(n)},GP="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),qP=[],P4="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),B4=[],sE=(e,n)=>{const o=Bt(n,r=>pn(e,r));return Je(o)},R7=e=>{const n=sE(e,GP),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Je(n)},M7=e=>sE(e,qP),KP=(e,n)=>{const o=ct.makeMap(e.plugins," "),c=Bt(n,u=>pn(o,u));return Je(c)},Od=e=>KP(e,P4),N7=e=>KP(e,B4.map(n=>n.name)),P7=(e,n)=>{const o=R7(e),r=Od(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",E=c?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+E+M)}},B7=e=>ms(B4,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),$7=(e,n)=>{const o=M7(e),r=N7(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(B7).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},I7=(e,n)=>{P7(e,n),$7(e,n)},Kw=hr.DOM,L7=e=>{Kw.setStyle(e.id,"display",e.orgDisplay)},rE=e=>L.from(e).each(n=>n.destroy()),F7=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},aE=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Kw.unbind(n,"submit reset",e.formEventDelegate))},H7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&_e(c==null?void 0:c.nextSibling)&&Kw.remove(c.nextSibling),r0(e),e.editorManager.remove(e),!e.inline&&r&&L7(e),vA(e),Kw.remove(e.getContainer()),rE(n),rE(o),e.destroy()}},V7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),rE(o),rE(r)),aE(e),F7(e),e.destroyed=!0}},N0=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>pn(e,c)}})(),P0=Ml.ModelManager,YP=(e,n)=>n.dom[e],U7=(e,n)=>parseInt(Rr(n,e),10),W7=qe(YP,"clientWidth"),Yw=qe(YP,"clientHeight"),XP=qe(U7,"margin-top"),JP=qe(U7,"margin-left"),Z7=e=>e.dom.getBoundingClientRect(),QP=(e,n,o)=>{const r=W7(e),c=Yw(e);return n>=0&&o>=0&&n<=r&&o<=c},j7=(e,n,o,r)=>{const c=Z7(n),u=e?c.left+n.dom.clientLeft+JP(n):0,f=e?c.top+n.dom.clientTop+XP(n):0,b=o-u,C=r-f;return{x:b,y:C}},G7=(e,n,o)=>{const r=de.fromDom(e.getBody()),c=e.inline?r:cd(r),u=j7(e.inline,c,n,o);return QP(c,u.x,u.y)},q7=e=>L.from(e).map(de.fromDom),K7=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return q7(n).map(au).getOr(!1)};var eB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const tB=e=>{const n=[],o=()=>{const P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():eB()},r=()=>L.from(n[0]),c=(P,j)=>P.type===j.type&&P.text===j.text&&!P.progressBar&&!P.timeout&&!j.progressBar&&!j.timeout,u=()=>{r().each(P=>{P.reposition()})},f=P=>{n.push(P)},b=P=>{Us(n,j=>j===P).each(j=>{n.splice(j,1)})},C=(P,j=!0)=>e.removed||!K7(e)?{}:(j&&e.dispatch("BeforeOpenNotification",{notification:P}),ms(n,Q=>c(o().getArgs(Q),P)).getOrThunk(()=>{e.editorManager.setActive(e);const Q=o().open(P,()=>{b(Q)},()=>fw(e));return f(Q),u(),e.dispatch("OpenNotification",{notification:{...Q}}),Q})),E=()=>{r().each(P=>{o().close(P),b(P),u()})},M=st(n);return(P=>{P.on("SkinLoaded",()=>{const j=Bl(P);j&&C({text:j,type:"warning",timeout:0},!1),u()}),P.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(u)}),P.on("remove",()=>{ye(n.slice(),j=>{o().close(j)})}),P.addShortcut("alt+F12","Focus to notification",()=>r().map(j=>de.fromDom(j.getEl())).each(j=>g0(j)))})(e),{open:C,close:E,getNotifications:M}},B0=Ml.PluginManager,Jm=Ml.ThemeManager;var nB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const $4=e=>{let n=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():nB()},r=(q,te)=>(...he)=>te?te.apply(q,he):void 0,c=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=q=>{n.push(q),c(q)},b=q=>{u(q),n=Bt(n,te=>te!==q),n.length===0&&e.focus()},C=()=>L.from(n[n.length-1]),E=q=>{e.editorManager.setActive(e),mw(e),e.ui.show();const te=q();return f(te),te},M=(q,te)=>E(()=>o().open(q,te,b)),N=q=>E(()=>o().openUrl(q,b)),P=(q,te,he)=>{const we=o();we.alert(q,r(he||we,te))},j=(q,te,he)=>{const we=o();we.confirm(q,r(he||we,te))},Q=()=>{C().each(q=>{o().close(q),b(q)})};return e.on("remove",()=>{ye(n,q=>{o().close(q)})}),{open:M,openUrl:N,alert:P,confirm:j,close:Q}},oB=(e,n)=>{e.notificationManager.open({type:"error",text:n})},cE=(e,n)=>{e._skinLoaded?oB(e,n):e.on("SkinLoaded",()=>{oB(e,n)})},Y7=(e,n)=>{cE(e,uc.translate(["Failed to upload image: {0}",n]))},$0=(e,n,o)=>{Hc(e,n,{message:o}),console.error(o)},Xw=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,X7=(e,n,o)=>{$0(e,"PluginLoadError",Xw("plugin",n,o))},J7=(e,n,o)=>{$0(e,"IconsLoadError",Xw("icons",n,o))},Q7=(e,n,o)=>{$0(e,"LanguageLoadError",Xw("language",n,o))},iG=(e,n,o)=>{$0(e,"ThemeLoadError",Xw("theme",n,o))},Qm=(e,n,o)=>{$0(e,"ModelLoadError",Xw("model",n,o))},I4=(e,n,o)=>{const r=uc.translate(["Failed to initialize plugin: {0}",n]);Hc(e,"PluginLoadError",{message:r}),lE(r,o),cE(e,r)},lE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},eH=e=>/^[a-z0-9\-]+$/i.test(e),L4=e=>"content/"+e+"/content.css",tH=e=>tinymce.Resource.has(L4(e)),_s=e=>I0(e,Yg(e)),nH=e=>I0(e,ri(e)),I0=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return gn(n,u=>tH(u)?u:eH(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},oH=e=>{e.contentCSS=e.contentCSS.concat(_s(e),nH(e))},sH=e=>e?Ko(e.getElementsByTagName("img")):[],rH=(e,n)=>{const o={};return{findAll:(c,u=ut)=>{const f=Bt(sH(c),C=>{const E=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!E||E===vt.transparentSrc?!1:Uo(E,"blob:")?!e.isUploaded(E)&&u(C):Uo(E,"data:")?u(C):!1}),b=gn(f,C=>{const E=C.src;if(pn(o,E))return o[E].then(M=>ee(M)?M:{image:C,blobInfo:M.blobInfo});{const M=$T(n,E).then(N=>(delete o[E],{image:C,blobInfo:N})).catch(N=>(delete o[E],N));return o[E]=M,M}});return Promise.all(b)}}},F4=()=>{let o={};const r=(P,j)=>({status:P,resultUri:j}),c=P=>P in o;return{hasBlobUri:c,getResultUri:P=>{const j=o[P];return j?j.resultUri:null},isPending:P=>c(P)?o[P].status===1:!1,isUploaded:P=>c(P)?o[P].status===2:!1,markPending:P=>{o[P]=r(1,null)},markUploaded:(P,j)=>{o[P]=r(2,j)},removeFailed:P=>{delete o[P]},destroy:()=>{o={}}}};let Fp=0;const Ki=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Jw=e=>e+Fp+++Ki(),Hp=()=>{let e=[];const n=N=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[N.toLowerCase()]||"dat",o=(N,P,j,Q,q)=>{if(ee(N))return r({id:N,name:Q,filename:q,blob:P,base64:j});if(Ye(N))return r(N);throw new Error("Unknown input type")},r=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const P=N.id||Jw("blobid"),j=N.name||P,Q=N.blob;return{id:st(P),name:st(j),filename:st(N.filename||j+"."+n(Q.type)),blob:st(Q),base64:st(N.base64),blobUri:st(N.blobUri||URL.createObjectURL(Q)),uri:st(N.uri)}},c=N=>{f(N.id())||e.push(N)},u=N=>ms(e,N).getOrUndefined(),f=N=>u(P=>P.id()===N);return{create:o,add:c,get:f,getByUri:N=>u(P=>P.blobUri()===N),getByData:(N,P)=>u(j=>j.base64()===N&&j.blob().type===P),findFirst:u,removeByUri:N=>{e=Bt(e,P=>P.blobUri()===N?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{ye(e,N=>{URL.revokeObjectURL(N.blobUri())}),e=[]}}},ag=(e,n)=>{const o={},r=(q,te)=>q?q.replace(/\/$/,"")+"/"+te.replace(/^\//,""):te,c=(q,te)=>new Promise((he,we)=>{const be=new XMLHttpRequest;be.open("POST",n.url),be.withCredentials=n.credentials,be.upload.onprogress=ot=>{te(ot.loaded/ot.total*100)},be.onerror=()=>{we("Image upload failed due to a XHR Transport error. Code: "+be.status)},be.onload=()=>{if(be.status<200||be.status>=300){we("HTTP Error: "+be.status);return}const ot=JSON.parse(be.responseText);if(!ot||!ee(ot.location)){we("Invalid JSON: "+be.responseText);return}he(r(n.basePath,ot.location))};const Ae=new FormData;Ae.append("file",q.blob(),q.filename()),be.send(Ae)}),u=ie(n.handler)?n.handler:c,f=()=>new Promise(q=>{q([])}),b=(q,te)=>({url:te,blobInfo:q,status:!0}),C=(q,te)=>({url:"",blobInfo:q,status:!1,error:te}),E=(q,te)=>{ct.each(o[q],he=>{he(te)}),delete o[q]},M=(q,te,he)=>(e.markPending(q.blobUri()),new Promise(we=>{let be,Ae;try{const ot=()=>{be&&(be.close(),Ae=It)},wt=Ve=>{ot(),e.markUploaded(q.blobUri(),Ve),E(q.blobUri(),b(q,Ve)),we(b(q,Ve))},zt=Ve=>{ot(),e.removeFailed(q.blobUri()),E(q.blobUri(),C(q,Ve)),we(C(q,Ve))};Ae=Ve=>{Ve<0||Ve>100||L.from(be).orThunk(()=>L.from(he).map(lo)).each(Ie=>{be=Ie,Ie.progressBar.value(Ve)})},te(q,Ae).then(wt,Ve=>{zt(ee(Ve)?{message:Ve}:Ve)})}catch(ot){we(C(q,ot))}})),N=q=>q===c,P=q=>{const te=q.blobUri();return new Promise(he=>{o[te]=o[te]||[],o[te].push(he)})},j=(q,te)=>(q=ct.grep(q,he=>!e.isUploaded(he.blobUri())),Promise.all(ct.map(q,he=>e.isPending(he.blobUri())?P(he):M(he,u,te))));return{upload:(q,te)=>!n.url&&N(u)?f():j(q,te)}},L0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),iE=(e,n)=>ag(n,{url:iC(e),basePath:wv(e),credentials:uC(e),handler:F2(e)}),H4=e=>{const n=F4(),o=iE(e,n);return{upload:(r,c=!0)=>o.upload(r,c?L0(e):void 0)}},sB=(e,n)=>e.dom.isEmpty(n.dom)&&_e(e.schema.getTextBlockElements()[To(n)]),rB=e=>n=>{sB(e,n)&&mr(n,de.fromHtml('<br data-mce-bogus="1" />'))},aH=e=>{const n=Hp();let o,r;const c=F4(),u=[],f=be=>Ae=>e.selection?be(Ae):[],b=be=>be+(be.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(be,Ae,ot)=>{let wt=0;do wt=be.indexOf(Ae,wt),wt!==-1&&(be=be.substring(0,wt)+ot+be.substr(wt+Ae.length),wt+=ot.length-Ae.length+1);while(wt!==-1);return be},E=(be,Ae,ot)=>{const wt=`src="${ot}"${ot===vt.transparentSrc?' data-mce-placeholder="1"':""}`;return be=C(be,`src="${Ae}"`,wt),be=C(be,'data-mce-src="'+Ae+'"','data-mce-src="'+ot+'"'),be},M=(be,Ae)=>{ye(e.undoManager.data,ot=>{ot.type==="fragmented"?ot.fragments=gn(ot.fragments,wt=>E(wt,be,Ae)):ot.content=E(ot.content,be,Ae)})},N=(be,Ae)=>{const ot=e.convertURL(Ae,"src");M(be.src,Ae),Zr(de.fromDom(be),{src:Ha(e)?b(Ae):Ae,"data-mce-src":ot})},P=()=>(o||(o=iE(e,c)),te().then(f(be=>{const Ae=gn(be,ot=>ot.blobInfo);return o.upload(Ae,L0(e)).then(f(ot=>{const wt=[];let zt=!1;const Ve=gn(ot,(Ie,et)=>{const{blobInfo:Qt,image:bn}=be[et];let co=!1;return Ie.status&&Rs(e)?(Ie.url&&!$o(bn.src,Ie.url)&&(zt=!0),n.removeByUri(bn.src),rg(e)||N(bn,Ie.url)):Ie.error&&(Ie.error.remove&&(M(bn.src,vt.transparentSrc),wt.push(bn),co=!0),Y7(e,Ie.error.message)),{element:bn,status:Ie.status,uploadUri:Ie.url,blobInfo:Qt,removed:co}});return wt.length>0&&!rg(e)?e.undoManager.transact(()=>{ye(cu(wt),Ie=>{const et=ac(Ie);Ds(Ie),et.each(rB(e)),n.removeByUri(Ie.dom.src)})}):zt&&e.undoManager.dispatchChange(),Ve}))}))),j=()=>Aa(e)?P():Promise.resolve([]),Q=be=>ls(u,Ae=>Ae(be)),q=be=>{u.push(be)},te=()=>(r||(r=rH(c,n)),r.findAll(e.getBody(),Q).then(f(be=>{const Ae=Bt(be,ot=>ee(ot)?(cE(e,ot),!1):ot.uriType!=="blob");return rg(e)||ye(Ae,ot=>{M(ot.image.src,ot.blobInfo.blobUri()),ot.image.src=ot.blobInfo.blobUri(),ot.image.removeAttribute("data-mce-src")}),Ae}))),he=()=>{n.destroy(),c.destroy(),r=o=null},we=be=>be.replace(/src="(blob:[^"]+)"/g,(Ae,ot)=>{const wt=c.getResultUri(ot);if(wt)return'src="'+wt+'"';let zt=n.getByUri(ot);return zt||(zt=Bo(e.editorManager.get(),(Ve,Ie)=>Ve||Ie.editorUpload&&Ie.editorUpload.blobCache.getByUri(ot),void 0)),zt?'src="data:'+zt.blob().type+";base64,"+zt.base64()+'"':Ae});return e.on("SetContent",()=>{Aa(e)?j():te()}),e.on("RawSaveContent",be=>{be.content=we(be.content)}),e.on("GetContent",be=>{be.source_view||be.format==="raw"||be.format==="tree"||(be.content=we(be.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",be=>{ye(be,Ae=>{const ot=Ae.attr("src");if(!ot||n.getByUri(ot))return;const wt=c.getResultUri(ot);wt&&Ae.attr("src",wt)})})}),{blobCache:n,addFilter:q,uploadImages:P,uploadImagesAuto:j,scanForImages:te,destroy:he}},cH=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Ht(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{ct.each(f,(b,C)=>{n.setAttrib(c,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ct.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},V4={remove_similar:!0,inherit:!1},yb={selector:"td,th",...V4},aB={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...yb},tablecellverticalalign:{styles:{"vertical-align":"%value"},...yb},tablecellbordercolor:{styles:{borderColor:"%value"},...yb},tablecellclass:{classes:["%value"],...yb},tableclass:{selector:"table",classes:["%value"],...V4},tablecellborderstyle:{styles:{borderStyle:"%value"},...yb},tablecellborderwidth:{styles:{borderWidth:"%value"},...yb}},cB=st(aB),z4=e=>{const n={},o=f=>_e(f)?n[f]:n,r=f=>pn(n,f),c=(f,b)=>{f&&(ee(f)?(tt(b)||(b=[b]),ye(b,C=>{en(C.deep)&&(C.deep=!bu(C)),en(C.split)&&(C.split=!bu(C)||mc(C)),en(C.remove)&&bu(C)&&!mc(C)&&(C.remove="none"),bu(C)&&mc(C)&&(C.mixed=!0,C.block_expand=!0),ee(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):ft(f,(C,E)=>{c(E,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(cH(e)),c(cB()),c(fC(e)),{get:o,has:r,register:c,unregister:u}},U4=ct.each,Dd=hr.DOM,lB=e=>_e(e)&&Ye(e),iB=(e,n)=>{const o=n&&n.schema||Xd({}),r=(C,E)=>{E.classes.length>0&&Dd.addClass(C,E.classes.join(" ")),Dd.setAttribs(C,E.attrs)},c=C=>{const E=ee(C)?{name:C,classes:[],attrs:{}}:C,M=Dd.create(E.name);return r(M,E),M},u=(C,E)=>{const M=o.getElementRule(C.nodeName.toLowerCase()),N=M==null?void 0:M.parentsRequired;return N&&N.length?E&&Sn(N,E)?E:N[0]:!1},f=(C,E,M)=>{let N;const P=E[0],j=lB(P)?P.name:void 0,Q=u(C,j);if(Q)j===Q?(N=P,E=E.slice(1)):N=Q;else if(P)N=P,E=E.slice(1);else if(!M)return C;const q=N?c(N):Dd.create("div");q.appendChild(C),M&&ct.each(M,he=>{const we=c(he);q.insertBefore(we,C)});const te=lB(N)?N.siblings:void 0;return f(q,E,te)},b=Dd.create("div");if(e.length>0){const C=e[0],E=c(C),M=lB(C)?C.siblings:void 0;b.appendChild(f(E,e.slice(1),M))}return b},lH=e=>{e=ct.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":ct.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},cg=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ct.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ct.map(n.split(/(?:~\+|~|\+)/),lH),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],uG=(e,n)=>{let o="",r=gC(e);if(r==="")return"";const c=P=>ee(P)?P.replace(/%(\w+)/g,""):"",u=(P,j)=>Dd.getStyle(j??e.getBody(),P,!0);if(ee(n)){const P=e.formatter.get(n);if(!P)return"";n=P[0]}if("preview"in n){const P=n.preview;if(P===!1)return"";r=P||r}let f=n.block||n.inline||"span",b;const C=cg(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=iB(C,e)):b=iB([f],e);const E=Dd.select(f,b)[0]||b.firstChild;U4(n.styles,(P,j)=>{const Q=c(P);Q&&Dd.setStyle(E,j,Q)}),U4(n.attributes,(P,j)=>{const Q=c(P);Q&&Dd.setAttrib(E,j,Q)}),U4(n.classes,P=>{const j=c(P);Dd.hasClass(E,j)||Dd.addClass(E,j)}),e.dispatch("PreviewFormats"),Dd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),N=/px$/.test(M)?parseInt(M,10):0;return U4(r.split(" "),P=>{let j=u(P,E);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=u(P),pd(j).toLowerCase()==="#ffffff"))&&!(P==="color"&&pd(j).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(j)){if(N===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*N+"px"}P==="border"&&j&&(o+="padding:0 2px;"),o+=P+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),Dd.remove(b),o},dG=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},uB=e=>{const n=z4(e),o=Se({});return dG(e),pN(e),rg(e)||MN(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{FP(e,r,c,u)},remove:(r,c,u,f)=>{i7(e,r,c,u,f)},toggle:(r,c,u)=>{u7(e,r,c,u)},match:(r,c,u,f)=>nE(e,r,c,u,f),closest:r=>LP(e,r),matchAll:(r,c)=>a7(e,r,c),matchNode:(r,c,u,f)=>c7(e,r,c,u,f),canApply:r=>l7(e,r),formatChanged:(r,c,u,f)=>d7(e,o,r,c,u,f),getCssText:qe(uG,e)}},F0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},iH=(e,n,o)=>{const r=Se(!1),c=C=>{R0(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const E=C.command;F0(E)||(EP(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const E=C.command;F0(E)||c(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;const M=vt.os.isMacOS()&&C.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||C.ctrlKey||M)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!x4(JT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(C);return}const M=C.ctrlKey&&!C.altKey||C.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!M){n.beforeChange(),R0(n,!0,o),n.add({},C),r.set(!0);return}(vt.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&c(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},dB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},W4=e=>{const n=ic(),o=Se(0),r=Se(0),c={data:[],typing:!1,beforeChange:()=>{MP(e,o,n)},add:(u,f)=>k4(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=JT(e);u.bookmark=Qy(e.selection),e.dispatch("change",{level:u,lastLevel:on(c.data,r.get()).getOrUndefined()})},undo:()=>NP(e,c,o,r),redo:()=>PP(e,r,c.data),clear:()=>{_4(e,c,r)},reset:()=>{BP(e,c)},hasUndo:()=>$P(e,c,r),hasRedo:()=>IP(e,c,r),transact:u=>s7(e,c,o,u),ignore:u=>{A4(e,o,u)},extra:(u,f)=>{r7(e,c,r,u,f)}};return rg(e)||iH(e,c,o),dB(e),c},mB=[9,27,mt.HOME,mt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,mt.DOWN,mt.UP,mt.LEFT,mt.RIGHT].concat(vt.browser.isFirefox()?[224]:[]),fB="data-mce-placeholder",gB=e=>e.type==="keydown"||e.type==="keyup",wh=e=>{const n=e.keyCode;return n===mt.BACKSPACE||n===mt.DELETE},uH=e=>{if(gB(e)){const n=e.keyCode;return!wh(e)&&(mt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Sn(mB,n))}else return!1},dH=e=>gB(e)&&!(wh(e)||e.type==="keyup"&&e.keyCode===229),mH=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},fH=e=>{var n;const o=e.dom,r=tl(e),c=(n=O1(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(uH(f))return;const C=e.getBody(),E=dH(f)?!1:mH(o,C,r);(o.getAttrib(C,fB)!==""!==E||b)&&(o.setAttrib(C,fB,E?c:null),c0(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};Fo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>qu.setEditorTimeout(e,()=>u(b)))})},gH=(e,n)=>({block:e,position:n}),hH=(e,n)=>({from:e,to:n}),Z4=(e,n)=>{const o=de.fromDom(e),r=de.fromDom(n.container());return nT(o,r).map(c=>gH(c,n))},pH=e=>!(wc(e.to.block,e.from.block)||wc(e.from.block,e.to.block)),bH=e=>!Jo(e.from.block,e.to.block),Qw=(e,n)=>xr(n,c=>op(c)||Ze(c.dom),c=>Jo(c,e)).filter(Te).getOr(e),vH=(e,n)=>{const o=de.fromDom(e);return Jo(Qw(o,n.from.block),Qw(o,n.to.block))},yH=e=>Qo(e.from.block.dom)===!1&&Qo(e.to.block.dom)===!1,mG=e=>{const n=o=>g2(o)||Lc(o.dom)||si(o);return n(e.from.block)&&n(e.to.block)},eS=(e,n,o,r)=>ss(r.position.getNode())&&!Fs(e,r.block)?sh(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Ui(o,n,c).bind(u=>Z4(n,u)):L.some(r)).getOr(r):r,CH=(e,n,o,r)=>{const c=Z4(n,Be.fromRangeStart(r)),u=c.bind(f=>Ui(o,n,f.position).bind(b=>Z4(n,b).map(C=>eS(e,n,o,C))));return $r(c,u,hH).filter(f=>bH(f)&&vH(n,f)&&yH(f)&&mG(f)&&pH(f))},j4=(e,n,o,r)=>r.collapsed?CH(e,n,o,r):L.none(),hB=(e,n,o)=>{const r=o?cf(e).reverse():Sc(e),c=Us(r,u=>n.isBlock(To(u))).fold(st(r),u=>r.slice(0,u));return o?c.reverse():c},wH=(e,n,o,r,c)=>{if(c&&wc(e,n))return hB(n,o,r);if(c&&wc(n,e))return hB(e,o,r);{const u=Ta(n);return Us(u,f=>o.isBlock(To(f))).fold(st(u),f=>u.slice(0,f))}},pB=(e,n,o,r,c)=>{const u=wH(e,n,o,r,c);return ye(u,Ds),u},bB=(e,n,o)=>{const r=gh(o,n);return ms(r.reverse(),c=>Fs(e,c)).each(Ds)},Cb=(e,n)=>Bt(cf(n),o=>!Fs(e,o)).length===0,wb=(e,n,o,r,c,u)=>{if(Fs(r,o))return Ti(o),hl(o.dom);Cb(r,u)&&Fs(r,n)&&xc(u,de.fromTag("br"));const f=_i(o.dom,Be.before(u.dom));return ye(pB(o,n,r,c,!1),b=>{xc(u,b)}),bB(r,e,n),f},uE=(e,n)=>e.isInline(To(n)),dE=(e,n,o,r,c)=>{if(Fs(r,o)){if(Fs(r,n)){const b=Is((C=>{const E=(M,N)=>zd(M).fold(()=>N,P=>uE(r,P)?E(P,N.concat(vd(P))):N);return E(C,[])})(o),(C,E)=>(Og(C,E),E),zg());hi(n),mr(n,b)}return Ds(o),hl(n.dom)}const u=Wi(o.dom);return ye(pB(o,n,r,c,!0),f=>{c&&wc(n,o)?_m(o,f):mr(o,f)}),bB(r,e,n),u},Sb=(e,n)=>{const o=gh(n,e);return L.from(o[o.length-1])},xb=(e,n)=>wc(n,e)?Sb(n,e):L.none(),tS=(e,n)=>{sh(e,n.dom).bind(o=>L.from(o.getNode())).map(de.fromDom).filter(tp).each(Ds)},Tb=(e,n,o,r,c)=>(tS(!0,n),tS(!1,o),xb(n,o).fold(qe(dE,e,n,o,r,c),qe(wb,e,n,o,r,c))),G4=(e,n,o,r,c,u=!1)=>{if(u){if(wc(r,o))return Tb(e,r,o,c,!n);if(wc(o,r))return Tb(e,o,r,c,n)}return n?Tb(e,r,o,c,n):Tb(e,o,r,c,!n)},nS=(e,n)=>{const o=de.fromDom(e.getBody());return j4(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{G4(o,n,c.from.block,c.to.block,e.schema,!0).each(u=>{e.selection.setRng(u.toRange())})})},q4=(e,n,o)=>{const r=n.getRng();return $r(nT(e,de.fromDom(r.startContainer)),nT(e,de.fromDom(r.endContainer)),(c,u)=>Jo(c,u)?L.none():L.some(()=>{r.deleteContents(),G4(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(L.none())},K4=(e,n)=>{const o=de.fromDom(n),r=qe(Jo,e);return Ys(o,op,r).isSome()},vB=(e,n)=>K4(e,n.startContainer)||K4(e,n.endContainer),H0=(e,n)=>{const o=_i(e.dom,Be.fromRangeStart(n)).isNone(),r=gl(e.dom,Be.fromRangeEnd(n)).isNone();return!vB(e,n)&&o&&r},yB=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),CB=e=>{const n=de.fromDom(e.getBody()),o=e.selection.getRng();return H0(n,o)?yB(e):q4(n,e.selection,e.schema)},mE=(e,n)=>e.selection.isCollapsed()?L.none():CB(e),pm=(e,n,o,r,c)=>L.from(n._selectionOverrides.showCaret(e,o,r,c)),wB=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},V0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(wB(n)),SB=(e,n,o)=>{const r=nl(1,e.getBody(),n),c=Be.fromRangeStart(r),u=c.getNode();if(Lv(u))return pm(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Lv(f))return pm(1,e,f,!1,!1);const b=ph(e.dom.getRoot(),c.getNode());return Lv(b)?pm(1,e,b,!1,o):L.none()},fE=(e,n,o)=>n.collapsed?SB(e,n,o).getOr(n):n,Sh=e=>tg(e)||mn(e),Vp=e=>Rp(e)||v0(e),bm=(e,n)=>{at(n)&&n.data.length===0&&e.remove(n)},xB=(e,n,o,r,c,u)=>{pm(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),bm(e.dom,o)},SH=(e,n)=>{const o=e.selection.getRng();if(!at(o.commonAncestorContainer))return L.none();const r=n?dc.Forwards:dc.Backwards,c=Fc(e.getBody()),u=qe(DC,n?c.next:c.prev),f=n?Sh:Vp,b=nh(r,e.getBody(),o),C=u(b),E=C&&Ku(n,C);if(!E||!Uv(b,E))return L.none();if(f(E))return L.some(()=>xB(e,o,b.getNode(),r,n,E));const M=u(E);return M&&f(M)&&Uv(E,M)?L.some(()=>xB(e,o,b.getNode(),r,n,M)):L.none()},Y4=(e,n)=>SH(e,n),X4=(e,n)=>{const o=e.getBody();return n?hl(o).filter(tg):Wi(o).filter(Rp)},J4=e=>{const n=e.selection.getRng();return!n.collapsed&&(X4(e,!0).exists(o=>o.isEqual(Be.fromRangeStart(n)))||X4(e,!1).exists(o=>o.isEqual(Be.fromRangeEnd(n))))},xH=e=>_e(e)&&(op(de.fromDom(e))||si(de.fromDom(e))),Xu=ys.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),TH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ht(o)&&o.getAttribute("data-mce-caret")===r},EH=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!zi(o,r,e);return Vv(!n,o).fold(()=>Vv(n,r).fold(We,u),u)},TB=(e,n,o,r,c)=>{const u=c.getNode(!o);return nT(de.fromDom(n),de.fromDom(r.getNode())).map(f=>Fs(e,f)?Xu.remove(f.dom):Xu.moveToElement(u)).orThunk(()=>L.some(Xu.moveToElement(u)))},EB=(e,n,o,r)=>Ui(n,e,o).bind(c=>xH(c.getNode())||EH(e,n,o,c,r)?L.none():n&&Qo(c.getNode())||!n&&Qo(c.getNode(!0))?TB(r,e,n,o,c):n&&Rp(o)||!n&&tg(o)?L.some(Xu.moveToPosition(c)):L.none()),kH=(e,n)=>wn(n)?L.none():e&&Qo(n.nextSibling)?L.some(Xu.moveToElement(n.nextSibling)):!e&&Qo(n.previousSibling)?L.some(Xu.moveToElement(n.previousSibling)):L.none(),Q4=(e,n,o)=>o.fold(r=>L.some(Xu.remove(r)),r=>L.some(Xu.moveToElement(r)),r=>zi(n,r,e)?L.none():L.some(Xu.moveToPosition(r))),eD=(e,n,o,r)=>TH(n,o)?kH(n,o.getNode(!n)).orThunk(()=>EB(e,n,o,r)):EB(e,n,o,r).bind(c=>Q4(e,o,c)),kB=(e,n,o,r)=>{const c=nl(n?1:-1,e,o),u=Be.fromRangeStart(c),f=de.fromDom(e);return!n&&Rp(u)?L.some(Xu.remove(u.getNode(!0))):n&&tg(u)?L.some(Xu.remove(u.getNode())):!n&&tg(u)&&nO(f,u,r)?bM(f,u,r).map(b=>Xu.remove(b.getNode())):n&&Rp(u)&&pM(f,u,r)?a6(f,u,r).map(b=>Xu.remove(b.getNode())):eD(e,n,u,r)},_H=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),eb(e,n,de.fromDom(o)),!0),AH=(e,n)=>o=>{const r=n?Be.before(o):Be.after(o);return e.selection.setRng(r.toRange()),!0},_B=e=>n=>(e.selection.setRng(n.toRange()),!0),tD=(e,n)=>L.from(ph(e.getBody(),n)),nD=(e,n)=>{const o=e.selection.getNode();return tD(e,o).filter(Qo).fold(()=>kB(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(_H(e,n),AH(e,n),_B(e))),()=>L.some(It))},AB=e=>{ye(Ir(e,".mce-offscreen-selection"),Ds)},OB=(e,n)=>{const o=e.selection.getNode();return Qo(o)&&!Hh(o)?tD(e,o.parentNode).filter(Qo).fold(()=>L.some(()=>{AB(de.fromDom(e.getBody())),eb(e,n,de.fromDom(e.selection.getNode())),Er(e)}),()=>L.some(It)):J4(e)?L.some(()=>{HM(e,e.selection.getRng(),de.fromDom(e.getBody()))}):L.none()},gE=e=>{const n=e.dom,o=e.selection,r=ph(e.getBody(),o.getNode());if(Ze(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Be.before(c).toRange())}return!0},oD=(e,n)=>e.selection.isCollapsed()?nD(e,n):OB(e,n),DB=e=>e.hasOwnProperty("text"),ef=e=>e.hasOwnProperty("marker"),Rd=(e,n)=>{const o=(u,f)=>{if(at(u))return{text:u,offset:f};{const b=n(),C=u.childNodes;return f<C.length?(u.insertBefore(b,C[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},oS=e=>{var n,o;const{start:r,end:c}=e,u=new window.Range;return DB(r)?u.setStart(r.text,r.offset):ef(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),DB(c)?u.setEnd(c.text,c.offset):ef(c)&&(c.before?u.setEndBefore(c.marker):u.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),u},hE=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=c.cloneNode(!1),E=()=>{if(n?FM(e):tT(e),f.firstChild!==c){const M=Rd(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(N=>C.appendChild(N)),f.appendChild(C),e.selection.setRng(oS(M))}};return L.some(E)}return L.none()},pE=(e,n)=>{const o=Be.fromRangeStart(e.selection.getRng());return Ui(n,e.getBody(),o).filter(r=>n?t6(r):n6(r)).bind(r=>Hv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},bE=(e,n)=>e.selection.isCollapsed()?pE(e,n):L.none(),Eb=at,sD=e=>Eb(e)&&e.data[0]===ra,rD=e=>Eb(e)&&e.data[e.data.length-1]===ra,aD=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ra)},RB=e=>{var n;if(Eb(e.previousSibling))return rD(e.previousSibling)||e.previousSibling.appendData(ra),e.previousSibling;if(Eb(e))return sD(e)||e.insertData(0,ra),e;{const o=aD(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},vE=e=>{var n,o;if(Eb(e.nextSibling))return sD(e.nextSibling)||e.nextSibling.insertData(0,ra),e.nextSibling;if(Eb(e))return rD(e)||e.appendData(ra),e;{const r=aD(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},z0=(e,n)=>e?RB(n):vE(n),OH=qe(z0,!0),DH=qe(z0,!1),MB=(e,n)=>at(e.container())?z0(n,e.container()):z0(n,e.getNode()),NB=(e,n)=>{const o=n.get();return o&&e.container()===o&&Cd(o)},yE=(e,n)=>n.fold(o=>{Wf(e.get());const r=OH(o);return e.set(r),L.some(Be(r,r.length-1))},o=>hl(o).map(r=>{if(NB(r,e)){const c=e.get();return Be(c,1)}else{Wf(e.get());const c=MB(r,!0);return e.set(c),Be(c,1)}}),o=>Wi(o).map(r=>{if(NB(r,e)){const c=e.get();return Be(c,c.length-1)}else{Wf(e.get());const c=MB(r,!1);return e.set(c),Be(c,c.length-1)}}),o=>{Wf(e.get());const r=DH(o);return e.set(r),L.some(Be(r,1))}),PB=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},Ri=ys.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),CE=(e,n)=>{const o=Td(n,e);return o||e},RH=(e,n,o)=>{const r=ci(o),c=CE(n,r.container());return hh(e,c,r).fold(()=>gl(c,r).bind(qe(hh,e,c)).map(u=>Ri.before(u)),L.none)},MH=(e,n)=>rh(e,n)===null,BB=(e,n,o)=>hh(e,n,o).filter(qe(MH,n)),NH=(e,n,o)=>{const r=IM(o);return BB(e,n,r).bind(c=>_i(c,r).isNone()?L.some(Ri.start(c)):L.none())},PH=(e,n,o)=>{const r=ci(o);return BB(e,n,r).bind(c=>gl(c,r).isNone()?L.some(Ri.end(c)):L.none())},BH=(e,n,o)=>{const r=IM(o),c=CE(n,r.container());return hh(e,c,r).fold(()=>_i(c,r).bind(qe(hh,e,c)).map(u=>Ri.after(u)),L.none)},$B=e=>!PM(sS(e)),Md=(e,n,o)=>PB([RH,NH,PH,BH],[e,n,o]).filter($B),sS=e=>e.fold(Po,Po,Po,Po),IB=e=>e.fold(st("before"),st("start"),st("end"),st("after")),wE=e=>e.fold(Ri.before,Ri.before,Ri.after,Ri.after),cD=e=>e.fold(Ri.start,Ri.start,Ri.end,Ri.end),$H=(e,n)=>IB(e)===IB(n)&&sS(e)===sS(n),LB=(e,n,o,r,c,u)=>$r(hh(n,o,r),hh(n,o,c),(f,b)=>f!==b&&BM(o,f,b)?Ri.after(e?f:b):u).getOr(u),IH=(e,n)=>e.fold(ut,o=>!$H(o,n)),LH=(e,n,o,r,c)=>{const u=Ku(e,c);return Ui(e,o,u).map(qe(Ku,e)).fold(()=>r.map(wE),C=>Md(n,o,C).map(qe(LB,e,n,o,u,C)).filter(qe(IH,r))).filter($B)},lD=(e,n)=>e?n.fold(A(L.some,Ri.start),L.none,A(L.some,Ri.after),L.none):n.fold(L.none,A(L.some,Ri.before),L.none,A(L.some,Ri.end)),FH=(e,n,o,r)=>{const c=Ku(e,r),u=Md(n,o,c);return Md(n,o,c).bind(qe(lD,e)).orThunk(()=>LH(e,n,o,u,r))},HH=e=>ie(e.selection.getSel().modify),FB=(e,n,o)=>{const r=e?1:-1;return n.setRng(Be(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},VH=(e,n)=>{const o=n.selection.getRng(),r=e?Be.fromRangeEnd(o):Be.fromRangeStart(o);return HH(n)?e&&Vy(r)?FB(!0,n.selection,r):!e&&Zg(r)?FB(!1,n.selection,r):!1:!1};var lg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(lg||(lg={}));const SE=(e,n)=>e===dc.Backwards?qo(n):n,zH=(e,n,o)=>e===dc.Forwards?n.next(o):n.prev(o),xE=(e,n,o,r)=>ss(r.getNode(n===dc.Forwards))?lg.Br:zi(o,r)===!1?lg.Block:lg.Wrap,rS=(e,n,o,r)=>{const c=Fc(o);let u=r;const f=[];for(;u;){const b=zH(n,c,u);if(!b)break;if(ss(b.getNode(!1)))return n===dc.Forwards?{positions:SE(n,f).concat([b]),breakType:lg.Br,breakAt:L.some(b)}:{positions:SE(n,f),breakType:lg.Br,breakAt:L.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=xE(o,n,u,b);return{positions:SE(n,f),breakType:C,breakAt:L.some(b)}}f.push(b),u=b}return{positions:SE(n,f),breakType:lg.Eol,breakAt:L.none()}},HB=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===dc.Backwards?u.concat(c):[c].concat(u)}).getOr([]),iD=(e,n)=>Bo(e,(o,r)=>o.fold(()=>L.some(r),c=>$r(Ft(c.getClientRects()),Ft(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),L.none()),kb=(e,n)=>Ft(n.getClientRects()).bind(o=>iD(e,o.left)),aS=qe(rS,Be.isAbove,-1),cS=qe(rS,Be.isBelow,1),VB=qe(HB,-1,aS),zB=qe(HB,1,cS),UB=(e,n)=>aS(e,n).breakAt.isNone(),WB=(e,n)=>cS(e,n).breakAt.isNone(),UH=e=>hl(e).map(n=>[n].concat(cS(e,n).positions)).getOr([]),WH=e=>Wi(e).map(n=>aS(e,n).positions.concat(n)).getOr([]),ZH=(e,n)=>kb(VB(e,n),n),jH=(e,n)=>kb(zB(e,n),n),GH=Qo,qH=(e,n)=>Math.abs(e.left-n),Nd=(e,n)=>Math.abs(e.right-n),uD=e=>pr(e,"node"),dD=(e,n)=>ue(e,(o,r)=>{const c=Math.min(qH(o,n),Nd(o,n)),u=Math.min(qH(r,n),Nd(r,n));return u===c&&uD(r)&&GH(r.node)||u<c?r:o}),ZB=e=>{const n=o=>gn(o,r=>{const c=$m(r);return c.node=e,c});if(Ht(e))return n(e.getClientRects());if(at(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},jB=e=>Ps(e,ZB);var U0;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(U0||(U0={}));const KH=(e,n,o,r)=>{let c=r;for(;c=pp(c,e,Wy,n);)if(o(c))return},mD=(e,n,o,r,c,u)=>{let f=0;const b=[],C=N=>{let P=jB([N]);e===-1&&(P=P.reverse());for(let j=0;j<P.length;j++){const Q=P[j];if(!o(Q,E)){if(b.length>0&&n(Q,Oe(b))&&f++,Q.line=f,c(Q))return!0;b.push(Q)}}return!1},E=Oe(u.getClientRects());if(!E)return b;const M=u.getNode();return M&&(C(M),KH(e,r,C,M)),b},YH=(e,n)=>n.line>e,XH=(e,n)=>n.line===e,JH=qe(mD,U0.Up,C1,iv),W0=qe(mD,U0.Down,iv,C1),fD=e=>Oe(e.getClientRects()),GB=(e,n,o,r)=>{const c=Fc(n);let u,f,b,C;const E=[];let M=0;e===1?(u=c.next,f=iv,b=C1,C=Be.after(r)):(u=c.prev,f=C1,b=iv,C=Be.before(r));const N=fD(C);do{if(!C.isVisible())continue;const P=fD(C);if(b(P,N))continue;E.length>0&&f(P,Oe(E))&&M++;const j=$m(P);if(j.position=C,j.line=M,o(j))return E;E.push(j)}while(C=u(C));return E},gD=e=>n=>YH(e,n),lS=e=>n=>XH(e,n),xh=(e,n)=>{e.selection.setRng(n),dw(e,e.selection.getRng())},hD=(e,n,o)=>L.some(fE(e,n,o)),qB=(e,n,o,r,c,u)=>{const f=n===dc.Forwards,b=Fc(e.getBody()),C=qe(DC,f?b.next:b.prev),E=f?r:c;if(!o.collapsed){const Q=rp(o);if(u(Q))return pm(n,e,Q,n===dc.Backwards,!1);if(J4(e)){const q=o.cloneRange();return q.collapse(n===dc.Backwards),L.from(q)}}const M=nh(n,e.getBody(),o);if(E(M))return V0(e,M.getNode(!f));let N=C(M);const P=Nl(o);if(N)N=Ku(f,N);else return P?L.some(o):L.none();if(E(N))return pm(n,e,N.getNode(!f),f,!1);const j=C(N);return j&&E(j)&&Uv(N,j)?pm(n,e,j.getNode(!f),f,!1):P?hD(e,N.toRange(),!1):L.none()},QH=(e,n,o,r,c,u)=>{const f=nh(n,e.getBody(),o),b=Oe(f.getClientRects()),C=n===U0.Down,E=e.getBody();if(!b)return L.none();if(J4(e)){const te=C?Be.fromRangeEnd(o):Be.fromRangeStart(o);return(C?jH:ZH)(E,te).orThunk(()=>L.from(te)).map(we=>we.toRange())}const N=(C?W0:JH)(E,gD(1),f),P=Bt(N,lS(1)),j=b.left,Q=dD(P,j);if(Q&&u(Q.node)){const te=Math.abs(j-Q.left),he=Math.abs(j-Q.right);return pm(n,e,Q.node,te<he,!1)}let q;if(r(f)?q=f.getNode():c(f)?q=f.getNode(!0):q=rp(o),q){const te=GB(n,E,gD(1),q);let he=dD(Bt(te,lS(1)),j);if(he||(he=Oe(Bt(te,lS(0))),he))return hD(e,he.position.toRange(),!1)}return P.length===0?KB(e,C).filter(C?c:r).map(te=>fE(e,te.toRange(),!1)):L.none()},KB=(e,n)=>{const o=e.selection.getRng(),r=n?Be.fromRangeEnd(o):Be.fromRangeStart(o),c=nA(r.container(),e.getBody());if(n){const u=cS(c,r);return Jn(u.positions)}else{const u=aS(c,r);return Ft(u.positions)}},eV=(e,n,o)=>KB(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),ku=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},YB=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},XB=(e,n,o)=>yE(n,o).map(r=>(ku(e,r),o)),_b=(e,n,o)=>{const r=Be.fromRangeStart(e);if(e.collapsed)return r;{const c=Be.fromRangeEnd(e);return o?_i(n,c).getOr(c):gl(n,r).getOr(r)}},JB=(e,n,o)=>{const r=e.getBody(),c=_b(e.selection.getRng(),r,o),u=qe(Mp,e);return FH(o,u,r,c).bind(b=>XB(e,n,b))},tV=(e,n,o)=>{const r=gn(Ir(de.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Bt(r,e),u=Bt(o,e);ye(Qr(c,u),qe(YB,!1)),ye(Qr(u,c),qe(YB,!0))},TE=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Be.fromRangeStart(e.selection.getRng());Be.isTextPosition(r)&&!$M(r)&&(ku(e,J_(o,r)),n.set(null))}},nV=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Bt(r,e);ye(c,u=>{const f=Be.fromRangeStart(n.selection.getRng());Md(e,n.getBody(),f).bind(b=>XB(n,o,b))})}},QB=(e,n,o)=>Xg(e)?JB(e,n,o).isSome():!1,e$=(e,n,o)=>Xg(n)?VH(e,n):!1,oV=e=>{const n=Se(null),o=qe(Mp,e);return e.on("NodeChange",r=>{Xg(e)&&(tV(o,e.dom,r.parents),TE(e,n),nV(o,e,n,r.parents))}),n},t$=qe(e$,!0),sV=qe(e$,!1),vm=(e,n,o)=>{if(Xg(e)){const r=KB(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Be.fromRangeEnd(c):Be.fromRangeStart(c)});return Md(qe(Mp,e),e.getBody(),r).exists(c=>{const u=wE(c);return yE(o,u).exists(f=>(ku(e,f),!0))})}else return!1},rV=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},aV=e=>$r(hl(e),Wi(e),(n,o)=>{const r=Ku(!0,n),c=Ku(!1,o);return gl(e,r).forall(u=>u.isEqual(c))}).getOr(!0),n$=(e,n)=>o=>yE(n,o).map(r=>()=>ku(e,r)),o$=(e,n,o,r)=>{const c=e.getBody(),u=qe(Mp,e);e.undoManager.ignore(()=>{e.selection.setRng(rV(o,r)),tT(e),Md(u,c,Be.fromRangeStart(e.selection.getRng())).map(cD).bind(n$(e,n)).each(Js)}),e.nodeChanged()},cV=(e,n)=>{const o=Td(n,e);return o||e},pD=(e,n,o,r)=>{const c=cV(e.getBody(),r.container()),u=qe(Mp,e),f=Md(u,c,r);return f.bind(C=>o?C.fold(st(L.some(cD(C))),L.none,st(L.some(wE(C))),L.none):C.fold(L.none,st(L.some(wE(C))),L.none,st(L.some(cD(C))))).map(n$(e,n)).getOrThunk(()=>{const C=zm(o,c,r),E=C.bind(M=>Md(u,c,M));return $r(f,E,()=>hh(u,c,r).bind(M=>aV(M)?L.some(()=>{eb(e,o,de.fromDom(M))}):L.none())).getOrThunk(()=>E.bind(()=>C.map(M=>()=>{o?o$(e,n,r,M):o$(e,n,M,r)})))})},iS=(e,n,o)=>{if(e.selection.isCollapsed()&&Xg(e)){const r=Be.fromRangeStart(e.selection.getRng());return pD(e,n,o,r)}return L.none()},bD=e=>Xa(e)>1,vD=(e,n)=>{const o=de.fromDom(e.getBody()),r=de.fromDom(e.selection.getStart()),c=gh(r,o);return Us(c,n).fold(st(c),u=>c.slice(0,u))},s$=e=>Xa(e)===1,r$=e=>vD(e,n=>e.schema.isBlock(To(n))||bD(n)),lV=e=>vD(e,n=>e.schema.isBlock(To(n))),Z0=(e,n)=>{const o=qe(HO,e);return Ps(n,r=>o(r)?[r.dom]:[])},uS=e=>{const n=lV(e);return Z0(e,n)},a$=(e,n,o,r)=>{const c=Z0(n,r);if(c.length===0)eb(n,e,o);else{const u=vN(o.dom,c);n.selection.setRng(u.toRange())}},c$=(e,n)=>{const o=Bt(r$(e),s$);return Jn(o).bind(r=>{const c=Be.fromRangeStart(e.selection.getRng());return yw(n,c,r.dom)&&!H1(r)?L.some(()=>a$(n,e,r,o)):L.none()})},l$=(e,n)=>{const o=n.parentElement;return ss(n)&&!W(o)&&e.dom.isEmpty(o)},i$=e=>H1(de.fromDom(e)),dS=(e,n)=>{const o=e.selection.getStart(),r=l$(e,o)||i$(o)?vN(o,n):FO(e.selection.getRng(),n);e.selection.setRng(r.toRange())},yD=(e,n)=>{const o=Qr(n,uS(e));o.length>0&&dS(e,o)},j0=e=>at(e.startContainer),iV=e=>e.startOffset===0&&j0(e),u$=(e,n)=>{const o=n.startContainer.parentElement;return!W(o)&&HO(e,de.fromDom(o))},uV=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!W(n)&&!W(o)&&n.isEqualNode(o)},dV=e=>{const n=e.endContainer;return e.endOffset===(at(n)?n.length:n.childNodes.length)},d$=e=>uV(e)&&dV(e),mV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),m$=e=>d$(e)||mV(e),fG=e=>{const n=e.selection.getRng();return iV(n)&&u$(e,n)&&m$(n)},fV=e=>{if(fG(e)){const n=uS(e);return L.some(()=>{tT(e),yD(e,n)})}else return L.none()},CD=(e,n)=>e.selection.isCollapsed()?c$(e,n):fV(e),gV=(e,n)=>Ih(e,o=>Zi(o.dom),o=>n.isBlock(To(o))),hV=e=>gV(de.fromDom(e.selection.getStart()),e.schema),pV=e=>{const n=e.selection.getRng();return n.collapsed&&(j0(n)||e.dom.isEmpty(n.startContainer))&&!hV(e)},mS=e=>(pV(e)&&dS(e,[]),!0),wD=(e,n,o)=>_e(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),eb(e,n,de.fromDom(o))}):L.none(),bV=(e,n)=>{const o=n?mn:v0,r=n?dc.Forwards:dc.Backwards,c=nh(r,e.getBody(),e.selection.getRng());return o(c)?wD(e,n,c.getNode(!n)):L.from(Ku(n,c)).filter(u=>o(u)&&Uv(c,u)).bind(u=>wD(e,n,u.getNode(!n)))},f$=(e,n)=>{const o=e.selection.getNode();return Tc(o)?wD(e,n,o):L.none()},SD=(e,n)=>e.selection.isCollapsed()?bV(e,n):f$(e,n),Ab=e=>xr(e,n=>Ze(n.dom)||Qo(n.dom)).exists(n=>Ze(n.dom)),EE=e=>Sl(e??"").getOr(0),kE=(e,n)=>{const o=e||Ly(n)?"margin":"padding",r=Rr(n,"direction")==="rtl"?"-right":"-left";return o+r},g$=(e,n,o,r,c,u)=>{const f=kE(o,de.fromDom(u)),b=EE(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+c:"")}else{const C=b+r+c;e.setStyle(u,f,C)}},xD=(e,n)=>ls(n,o=>{const r=kE(dC(e),o),c=qc(o,r).map(EE).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),Th=e=>{const n=zp(e);return!e.mode.isReadOnly()&&(n.length>1||xD(e,n))},TD=e=>yd(e)||si(e),Pd=e=>ac(e).exists(TD),zp=e=>Bt(cu(e.selection.getSelectedBlocks()),n=>!TD(n)&&!Pd(n)&&Ab(n)),_E=(e,n)=>{var o,r;const{dom:c}=e,u=SF(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=EE(u),C=dC(e);ye(zp(e),E=>{g$(c,n,C,b,f,E.dom)})},vV=e=>_E(e,"indent"),ED=e=>_E(e,"outdent"),h$=e=>{if(e.selection.isCollapsed()&&Th(e)){const n=e.dom,o=e.selection.getRng(),r=Be.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&tO(de.fromDom(c),r,e.schema))return L.some(()=>ED(e))}return L.none()},p$=(e,n,o)=>wr([h$,oD,Y4,(r,c)=>iS(r,n,c),nS,ab,bE,SD,mE,CD,hE],r=>r(e,o)).filter(r=>e.selection.isEditable()),yV=(e,n)=>{p$(e,n,!1).fold(()=>{e.selection.isEditable()&&(tT(e),Er(e))},Js)},CV=(e,n)=>{p$(e,n,!0).fold(()=>{e.selection.isEditable()&&FM(e)},Js)},wV=(e,n)=>{e.addCommand("delete",()=>{yV(e,n)}),e.addCommand("forwardDelete",()=>{CV(e,n)})},kD=5,SV=400,b$=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),G0=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>kD||r>kD},AE=e=>{const n=ic(),o=Se(!1),r=Df(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},SV);e.on("touchstart",c=>{b$(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),b$(c).each(u=>{n.on(f=>{G0(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},OE=(e,n)=>pn(e,n.nodeName),v$=(e,n)=>at(n)?!0:Ht(n)?!OE(e.getBlockElements(),n)&&!ji(n)&&!du(e,n)&&!Vr(n):!1,_D=(e,n,o)=>Ro(mM(de.fromDom(o),de.fromDom(n)),r=>OE(e,r.dom)),xV=(e,n)=>{if(at(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||OE(e,n.nextSibling)||Vr(n.nextSibling)}return!1},AD=e=>e.dom.create(tl(e),Lf(e)),TV=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,E=null;const M=tl(e);if(!u||!Ht(u))return;const N=f.nodeName.toLowerCase();if(!r.isValidChild(N,M.toLowerCase())||_D(c,f,u))return;if(f.firstChild===f.lastChild&&ss(f.firstChild)){b=AD(e),b.appendChild(zg().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let P=f.firstChild;for(;P;)if(Ht(P)&&Ol(r,P),v$(r,P)){if(xV(c,P)){C=P,P=P.nextSibling,n.remove(C);continue}if(!b){if(!E&&e.hasFocus()&&(E=Rd(e.selection.getRng(),()=>document.createElement("span"))),!P.parentNode){P=null;break}b=AD(e),f.insertBefore(b,P)}C=P,P=P.nextSibling,b.appendChild(C)}else b=null,P=P.nextSibling;E&&(e.selection.setRng(oS(E)),e.nodeChanged())},y$=(e,n,o)=>{const r=de.fromDom(AD(e)),c=zg();mr(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},EV=e=>{e.on("NodeChange",()=>TV(e))},C$=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,kV=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},w$=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],kV(e,c,Ov(e)));o.content=c}},_V=(e,n)=>ls(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),AV=e=>{const n="contenteditable",o=" "+ct.trim(Z_(e))+" ",r=" "+ct.trim(Ov(e))+" ",c=C$(o),u=C$(r),f=ju(e);f.length>0&&e.on("BeforeSetContent",b=>{w$(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const E=b[C];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const E=b[C];if(!c(E)&&!u(E))continue;const M=E.attr("data-mce-content");f.length>0&&M?_V(f,M)?(E.name="#text",E.type=3,E.raw=!0,E.value=M):E.remove():E.attr(n,null)}})},Ju=e=>dn(de.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),S$=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Ho(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},OD=(e,n)=>{const o=Ju(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),S$(e,o);return}Fy(o)&&(S$(e,o),e.undoManager.add())}},x$=e=>{e.on("keyup compositionstart",qe(OD,e))},DE=Qo,OV=(e,n,o)=>qB(n,e,o,tg,Rp,DE),DV=(e,n,o)=>QH(n,e,o,u=>tg(u)||QA(u),u=>Rp(u)||eO(u),DE),RV=e=>{const n=e.dom.create(tl(e));return n.innerHTML='<br data-mce-bogus="1">',n},T$=(e,n,o)=>{const r=Fc(e.getBody()),c=qe(DC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Be.fromRangeStart(o))){const b=de.fromDom(RV(e));n===1?_l(de.fromDom(u),b):xc(de.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},MV=(e,n)=>{const o=n?dc.Forwards:dc.Backwards,r=e.selection.getRng();return OV(o,e,r).orThunk(()=>(T$(e,o,r),L.none()))},E$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return DV(o,e,r).orThunk(()=>(T$(e,o,r),L.none()))},NV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return PM(o)?!n:n},k$=(e,n)=>MV(e,NV(e.selection,n)).exists(o=>(xh(e,o),!0)),q0=(e,n)=>E$(e,n).exists(o=>(xh(e,o),!0)),ig=(e,n)=>eV(e,n,n?Rp:tg),ug=(e,n)=>X4(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(xh(e,o),!0)),RE=e=>Sn(["figcaption"],To(e)),DD=(e,n,o)=>{const r=qe(Jo,n);return xr(de.fromDom(e.container()),c=>o.isBlock(To(c)),r).filter(RE)},RD=(e,n,o)=>n?WB(e.dom,o):UB(e.dom,o),_$=(e,n)=>{const o=de.fromDom(e.getBody()),r=Be.fromRangeStart(e.selection.getRng());return DD(r,o,e.schema).exists(()=>{if(RD(o,n,r)){const u=y$(e,o,n?mr:_m);return e.selection.setRng(u),!0}else return!1})},A$=(e,n)=>e.selection.isCollapsed()?_$(e,n):!1,O$=(e,n,o)=>{const r=e.selection.getRng(),c=Be.fromRangeStart(r);return e.getBody().firstChild===n&&UB(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},D$=(e,n)=>{const o=e.selection.getRng(),r=Be.fromRangeStart(o);return e.getBody().lastChild===n&&WB(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},PV=(e,n)=>n?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>D$(e,o)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>L.from(e.dom.getParent(o,"details")).map(r=>O$(e,r,o))).getOr(!1),R$=(e,n)=>PV(e,n),M$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},BV=e=>gn(e,n=>({...M$,...n})),$V=e=>gn(e,n=>({...M$,...n})),N$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,P$=(e,n)=>Ps(BV(e),o=>N$(o,n)?[o]:[]),B$=(e,n)=>Ps($V(e),o=>N$(o,n)?[o]:[]),Gn=(e,...n)=>()=>e.apply(null,n),ME=(e,n)=>ms(P$(e,n),o=>o.action()),IV=(e,n)=>wr(B$(e,n),o=>o.action()),$$=(e,n)=>{const o=n?dc.Forwards:dc.Backwards,r=e.selection.getRng();return qB(e,o,r,mn,v0,Tc).exists(c=>(xh(e,c),!0))},LV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return QH(e,o,r,mn,v0,Tc).exists(c=>(xh(e,c),!0))},FV=(e,n)=>eV(e,n,n?v0:mn),I$=ys.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),NE={...I$,none:e=>I$.none(e)},HV=(e,n)=>Mi(e,n,ut),Mi=(e,n,o)=>Ps(Ta(e),r=>jc(r,n)?o(r)?[r]:[]:Mi(r,n,o)),L$=(e,n,o=We)=>{if(o(n))return L.none();if(Sn(e,To(n)))return L.some(n);const r=c=>jc(c,"table")||o(c);return oa(n,e.join(","),r)},fS=(e,n)=>L$(["td","th"],e,n),VV=e=>HV(e,"th,td"),MD=(e,n)=>Ii(e,"table",n),PE=(e,n,o,r,c=ut)=>{const u=r===1;if(!u&&o<=0)return NE.first(e[0]);if(u&&o>=e.length-1)return NE.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?NE.middle(n,b):PE(e,n,f,r,c)}},BE=(e,n)=>MD(e,n).bind(o=>{const r=VV(o);return Us(r,u=>Jo(e,u)).map(u=>({index:u,all:r}))}),zV=(e,n,o)=>BE(e,o).fold(()=>NE.none(e),c=>PE(c.all,e,c.index,1,n)),UV=(e,n,o)=>BE(e,o).fold(()=>NE.none(),c=>PE(c.all,e,c.index,-1,n)),F$=e=>u_(e).filter(n=>n.trim().length!==0||n.indexOf(Ea)>-1).isSome(),WV=e=>se(e)&&Ks(e,"contenteditable")==="false",ZV=["img","br"],jV=e=>F$(e)||Sn(ZV,To(e))||WV(e),ND=e=>_g(e,jV),GV=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),qV=(e,n)=>Ps(n,o=>{const r=GV($m(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),hG=(e,n,o)=>Bo(e,(r,c)=>r.fold(()=>L.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return L.some(b<f?c:u)}),L.none()),H$=(e,n,o,r,c)=>{const u=Ir(de.fromDom(o),"td,th,caption").map(b=>b.dom),f=Bt(qV(e,u),b=>n(b,c));return hG(f,r,c).map(b=>b.cell)},V$=e=>e.bottom,pG=e=>e.top,KV=(e,n)=>e.y<n,YV=(e,n)=>e.y>n,XV=qe(H$,V$,KV),PD=qe(H$,pG,YV),$E=(e,n)=>Ft(n.getClientRects()).bind(o=>XV(e,o.left,o.top)).bind(o=>kb(WH(o),n)),z$=(e,n)=>Jn(n.getClientRects()).bind(o=>PD(e,o.left,o.top)).bind(o=>kb(UH(o),n)),U$=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),JV=e=>e.breakType===lg.Wrap&&e.positions.length===0,QV=e=>e.breakType===lg.Br&&e.positions.length===1,IE=(e,n,o)=>{const r=e(n,o);return JV(r)||!ss(o.getNode())&&QV(r)?!U$(e,n,r):r.breakAt.isNone()},ez=qe(IE,aS),tz=qe(IE,cS),nz=(e,n,o)=>{const r=Be.fromRangeStart(n);return sh(!e,o).exists(c=>c.isEqual(r))},oz=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return eA()&&nz(n,c,o)?(pm(u,e,o,!n,!1).each(f=>{xh(e,f)}),!0):!1},ym=(e,n,o)=>$E(n,o).orThunk(()=>Ft(o.getClientRects()).bind(r=>iD(VB(e,Be.before(n)),r.left))).getOr(Be.before(n)),W$=(e,n,o)=>z$(n,o).orThunk(()=>Ft(o.getClientRects()).bind(r=>iD(zB(e,Be.after(n)),r.left))).getOr(Be.after(n)),BD=(e,n)=>{const o=n.getNode(e);return lu(o)?L.some(o):L.none()},bG=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?_l:xc,c=y$(n,de.fromDom(o),r);xh(n,c)})},sz=(e,n,o)=>{const r=BD(!!n,o),c=n===!1;r.fold(()=>xh(e,o.toRange()),u=>sh(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>xh(e,o.toRange()),f=>bG(n,e,u)))},vG=(e,n,o,r)=>{const c=e.selection.getRng(),u=Be.fromRangeStart(c),f=e.getBody();if(!n&&ez(r,u)){const b=ym(f,o,u);return sz(e,n,b),!0}else if(n&&tz(r,u)){const b=W$(f,o,u);return sz(e,n,b),!0}else return!1},rz=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),Z$=(e,n)=>rz(e,n,oz),K0=(e,n)=>rz(e,n,vG),az=e=>{const n=Op.exact(e,0,e,0);return i(n)},LE=(e,n,o)=>o.fold(L.none,L.none,(r,c)=>ND(c).map(u=>az(u)),r=>(e.execCommand("mceTableInsertRowAfter"),$D(e,n,r))),$D=(e,n,o)=>LE(e,n,zV(o,ga)),j$=(e,n,o)=>LE(e,n,UV(o,ga)),ID=(e,n)=>{const o=["table","li","dl"],r=de.fromDom(e.getBody()),c=b=>{const C=To(b);return Jo(b,r)||Sn(o,C)},u=e.selection.getRng(),f=de.fromDom(n?u.endContainer:u.startContainer);return fS(f,c).map(b=>(MD(b,c).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?$D:j$)(e,c,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},cz=(e,n,o)=>{const r=vt.os.isMacOS()||vt.os.isiOS();ME([{keyCode:mt.RIGHT,action:Gn(k$,e,!0)},{keyCode:mt.LEFT,action:Gn(k$,e,!1)},{keyCode:mt.UP,action:Gn(q0,e,!1)},{keyCode:mt.DOWN,action:Gn(q0,e,!0)},...r?[{keyCode:mt.UP,action:Gn(ug,e,!1),metaKey:!0,shiftKey:!0},{keyCode:mt.DOWN,action:Gn(ug,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:mt.RIGHT,action:Gn(Z$,e,!0)},{keyCode:mt.LEFT,action:Gn(Z$,e,!1)},{keyCode:mt.UP,action:Gn(K0,e,!1)},{keyCode:mt.DOWN,action:Gn(K0,e,!0)},{keyCode:mt.UP,action:Gn(K0,e,!1)},{keyCode:mt.UP,action:Gn(R$,e,!1)},{keyCode:mt.DOWN,action:Gn(R$,e,!0)},{keyCode:mt.RIGHT,action:Gn($$,e,!0)},{keyCode:mt.LEFT,action:Gn($$,e,!1)},{keyCode:mt.UP,action:Gn(LV,e,!1)},{keyCode:mt.DOWN,action:Gn(LV,e,!0)},{keyCode:mt.RIGHT,action:Gn(QB,e,n,!0)},{keyCode:mt.LEFT,action:Gn(QB,e,n,!1)},{keyCode:mt.RIGHT,ctrlKey:!r,altKey:r,action:Gn(t$,e,n)},{keyCode:mt.LEFT,ctrlKey:!r,altKey:r,action:Gn(sV,e,n)},{keyCode:mt.UP,action:Gn(A$,e,!1)},{keyCode:mt.DOWN,action:Gn(A$,e,!0)}],o).each(c=>{o.preventDefault()})},lz=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||cz(e,n,o)})},tf=(e,n)=>({container:e,offset:n}),FE=hr.DOM,Ob=e=>n=>e===n?-1:0,iz=e=>n=>e.isBlock(n)||Sn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",LD=(e,n,o)=>{if(at(e)&&n>=0)return L.some(tf(e,n));{const r=Mf(FE);return L.from(r.backwards(e,n,Ob(e),o)).map(c=>tf(c.container,c.container.data.length))}},uz=(e,n,o)=>{if(at(e)&&n>=e.length)return L.some(tf(e,n));{const r=Mf(FE);return L.from(r.forwards(e,n,Ob(e),o)).map(c=>tf(c.container,0))}},gS=(e,n,o)=>{if(!at(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(tf(e,n));{const c=Mf(FE);return L.from(c.backwards(e,n,Ob(e),o)).bind(u=>{const f=u.container.data;return gS(u.container,n+f.length,o)})}},G$=(e,n,o)=>{if(!at(e))return L.none();const r=e.data;if(n<=r.length)return L.some(tf(e,n));{const c=Mf(FE);return L.from(c.forwards(e,n,Ob(e),o)).bind(u=>G$(u.container,n-r.length,o))}},FD=(e,n,o,r,c)=>{const u=Mf(e,iz(e));return L.from(u.backwards(n,o,r,c))},q$=e=>e.collapsed&&at(e.startContainer),dz=e=>Ei(e.toString().replace(/\u00A0/g," ")),K$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,mz=(e,n)=>e.substring(n.length),fz=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&K$(f))return L.none();if(u===f&&$o(e,o,c,n))break}return L.some(c)},HD=(e,n,o,r=!1)=>{if(!q$(n))return L.none();const c={text:"",offset:0},u=(b,C,E)=>(c.text=E+c.text,c.offset+=C,fz(c.text,c.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return FD(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return L.none();const E=dz(C);return E.lastIndexOf(o)!==0?L.none():L.some({text:mz(E,o),range:C,trigger:o})})},gz=e=>e.nodeType===Fd,VD=e=>e.nodeType===Ya,Y$=e=>{if(gz(e))return tf(e,e.data.length);{const n=e.childNodes;return n.length>0?Y$(n[n.length-1]):tf(e,n.length)}},zD=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?zD(o[n],0):o.length>0&&VD(e)&&o.length===n?Y$(o[o.length-1]):tf(e,n)},hz=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return FD(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!K$(u)}).isSome()},pz=e=>n=>{const o=zD(n.startContainer,n.startOffset);return!hz(e,o)},bz=(e,n,o)=>wr(o.triggers,r=>HD(e,n,r)),vz=(e,n)=>{const o=n(),r=e.selection.getRng();return bz(e.dom,r,o).bind(c=>X$(e,n,c))},X$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",C=Bt(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>pz(e.dom))(o.range,b,o.text));if(C.length===0)return L.none();const E=Promise.all(gn(C,M=>M.fetch(o.text,M.maxResults,r).then(P=>({matchText:o.text,items:P,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return L.some({lookupData:E,context:o})};var nf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(nf||(nf={}));const Va=(e,n,o)=>e.stype===nf.Error?n(e.serror):o(e.svalue),yz=e=>{const n=[],o=[];return ye(e,r=>{Va(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},Cz=(e,n)=>e.stype===nf.Error?{stype:nf.Error,serror:n(e.serror)}:e,wz=(e,n)=>e.stype===nf.Value?{stype:nf.Value,svalue:n(e.svalue)}:e,J$=(e,n)=>e.stype===nf.Value?n(e.svalue):e,UD=(e,n)=>e.stype===nf.Error?n(e.serror):e,WD=e=>({stype:nf.Value,svalue:e}),Eh=e=>({stype:nf.Error,serror:e}),zc={fromResult:e=>e.fold(Eh,WD),toResult:e=>Va(e,Pl.error,Pl.value),svalue:WD,partition:yz,serror:Eh,bind:J$,bindError:UD,map:wz,mapError:Cz,fold:Va},hS=e=>Ye(e)&&fs(e).length>100?" removed due to size":JSON.stringify(e,null,2),ZD=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:st("... (only showing first ten failures)")}]):e;return gn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},pS=(e,n)=>zc.serror([{path:e,getErrorInfo:n}]),HE=(e,n,o)=>pS(e,()=>'Could not find valid *required* value for "'+n+'" in '+hS(o)),VE=(e,n)=>pS(e,()=>'Choice schema did not contain choice key: "'+n+'"'),bS=(e,n,o)=>pS(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+hS(n)),vS=(e,n)=>pS(e,st(n)),Cm=(e,n,o,r)=>os(o,r).fold(()=>bS(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),yS=(e,n)=>({extract:(c,u)=>os(u,e).fold(()=>VE(c,e),b=>Cm(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+fs(n)}),e5=(e,n)=>n,t5=(e,n)=>Bn(e)&&Bn(n)?CS(e,n):n,n5=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)pn(c,u)&&(o[u]=e(o[u],c[u]))}return o},CS=n5(t5),o5=n5(e5),s5=()=>({tag:"required",process:{}}),wS=e=>({tag:"defaultedThunk",process:e}),r5=e=>wS(st(e)),xz=()=>({tag:"option",process:{}}),Tz=(e,n)=>e.length>0?zc.svalue(CS(n,o5.apply(void 0,e))):zc.svalue(n),a5=e=>A(zc.serror,tc)(e),Ez={consolidateObj:(e,n)=>{const o=zc.partition(e);return o.errors.length>0?a5(o.errors):Tz(o.values,n)},consolidateArr:e=>{const n=zc.partition(e);return n.errors.length>0?a5(n.errors):zc.svalue(n.values)}},kz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),_z=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),c5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},jD=e=>{const n=(r,c)=>zc.bindError(e(c),u=>vS(r,u)),o=st("val");return{extract:n,toString:o}},Az=jD(zc.svalue),Oz=(e,n,o,r)=>os(n,o).fold(()=>HE(e,o,n),r),l5=(e,n,o,r)=>{const c=os(e,n).getOrThunk(()=>o(e));return r(c)},i5=(e,n,o)=>o(os(e,n)),u5=(e,n,o,r)=>{const c=os(e,n).map(u=>u===!0?o(e):u);return r(c)},d5=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>zc.svalue(L.none()),C=>{const E=c.extract(n.concat([r]),C);return zc.map(E,L.some)});switch(e.tag){case"required":return Oz(n,o,r,u);case"defaultedThunk":return l5(o,r,e.process,u);case"option":return i5(o,r,f);case"defaultedOptionThunk":return u5(o,r,e.process,f);case"mergeWithThunk":return l5(o,r,st({}),b=>{const C=CS(e.process(o),b);return u(C)})}},Dz=(e,n,o)=>{const r={},c=[];for(const u of o)c5(u,(f,b,C,E)=>{const M=d5(C,e,n,f,E);zc.fold(M,N=>{c.push(...N)},N=>{r[b]=N})},(f,b)=>{r[f]=b(n)});return c.length>0?zc.serror(c):zc.svalue(r)},GD=e=>({extract:(r,c)=>Dz(r,c,e),toString:()=>`obj{
`+gn(e,c=>c5(c,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),m5=e=>({extract:(r,c)=>{const u=gn(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Ez.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Rz=e=>jD(n=>e(n).fold(zc.serror,zc.svalue)),f5=(e,n,o)=>{const r=n.extract([e],o);return zc.mapError(r,c=>({input:o,errors:c}))},Mz=(e,n,o)=>zc.toResult(f5(e,n,o)),g5=e=>`Errors: 
`+ZD(e.errors).join(`
`)+`

Input object: `+hS(e.input),h5=(e,n)=>yS(e,yo(n,GD)),p5=st(Az),SS=(e,n)=>jD(o=>{const r=typeof o;return e(o)?zc.svalue(o):zc.serror(`Expected type: ${n} but got: ${r}`)}),Nz=SS(ns,"number"),zE=SS(ee,"string"),Pz=SS(Ot,"boolean"),qD=SS(ie,"function"),Y0=kz,b5=_z,Bz=e=>Rz(n=>Sn(e,n)?Pl.value(n):Pl.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),KD=(e,n)=>Y0(e,e,s5(),n),v5=e=>KD(e,zE),y5=e=>KD(e,qD),C5=(e,n)=>Y0(e,e,s5(),m5(n)),YD=(e,n)=>Y0(e,e,xz(),n),UE=e=>YD(e,zE),$z=e=>YD(e,qD),w5=(e,n)=>Y0(e,e,r5(n),p5()),Db=(e,n,o)=>Y0(e,e,r5(n),o),S5=(e,n)=>Db(e,n,Nz),Iz=(e,n)=>Db(e,n,zE),x5=(e,n,o)=>Db(e,n,Bz(o)),XD=(e,n)=>Db(e,n,Pz),JD=(e,n)=>Db(e,n,qD),Lz=(e,n,o)=>Db(e,n,m5(o)),Fz=v5("type"),Hz=y5("fetch"),T5=y5("onAction"),Vz=JD("onSetup",()=>It),WE=UE("text"),E5=UE("icon"),k5=UE("tooltip"),zz=UE("label"),_5=XD("active",!1),A5=XD("enabled",!0),O5=XD("primary",!1),Uz=e=>w5("columns",e),xS=e=>Iz("type",e),D5=GD([Fz,v5("trigger"),S5("minChars",1),Uz(1),S5("maxResults",10),$z("matches"),Hz,T5,Lz("highlightOn",[],zE)]),Wz=e=>Mz("Autocompleter",D5,e),TS=[A5,k5,E5,WE,Vz],R5=[_5].concat(TS),Zz=[JD("predicate",We),x5("scope","node",["node","editor"]),x5("position","selection",["node","selection","line"])],jz=TS.concat([xS("contextformbutton"),O5,T5,b5("original",Po)]),M5=R5.concat([xS("contextformbutton"),O5,T5,b5("original",Po)]),Gz=TS.concat([xS("contextformbutton")]),qz=R5.concat([xS("contextformtogglebutton")]),Kz=h5("type",{contextformbutton:jz,contextformtogglebutton:M5});GD([xS("contextform"),JD("initValue",st("")),zz,C5("commands",Kz),YD("launch",h5("type",{contextformbutton:Gz,contextformtogglebutton:qz}))].concat(Zz));const Yz=e=>{const n=e.ui.registry.getAll().popups,o=yo(n,f=>Wz(f).fold(b=>{throw new Error(g5(b))},Po)),r=jl(va(o,f=>f.trigger)),c=Wa(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Bt(c,b=>b.trigger===f)}},Xz=(e,n)=>{const o=Df(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Rc=e=>{const n=ic(),o=Se(!1),r=n.isSet,c=()=>{r()&&(Bx(e),o.set(!1),n.clear())},u=N=>{r()||n.set({trigger:N.trigger,matchLength:N.text.length})},f=He(()=>Yz(e)),b=N=>n.get().map(P=>HD(e.dom,e.selection.getRng(),P.trigger,!0).bind(j=>X$(e,f,j,N))).getOrThunk(()=>vz(e,f)),C=N=>{b(N).fold(c,P=>{u(P.context),P.lookupData.then(j=>{n.get().map(Q=>{const q=P.context;Q.trigger===q.trigger&&(n.set({...Q,matchLength:q.text.length}),o.get()?(Px(e,{range:q.range}),tw(e,{lookupData:j})):(o.set(!0),Px(e,{range:q.range}),Nx(e,{lookupData:j})))})})})},E=(N,P)=>{const j=N.compareBoundaryPoints(window.Range.START_TO_START,P),Q=N.compareBoundaryPoints(window.Range.END_TO_END,P);return j>=0&&Q<=0},M=()=>n.get().bind(({trigger:N})=>{const P=e.selection.getRng();return HD(e.dom,P,N,o.get()).filter(({range:j})=>E(P,j)).map(({range:j})=>j)});e.addCommand("mceAutocompleterReload",(N,P)=>{const j=Ye(P)?P.fetchOptions:{};C(j)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{M().each(N=>{Px(e,{range:N})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>M().isSome()),Xz(e,{cancelIfNecessary:c,load:C})},Jz=dt().browser.isSafari(),Qz=e=>Ti(de.fromDom(e)),N5=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},ZE=(e,n)=>L.from(e.getParent(n.container(),"details")),P5=(e,n)=>ZE(e,n).isSome(),e9=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:c,startDetails:o,endDetails:r})}else return L.none()},B5=(e,n)=>hl(n).exists(o=>o.isEqual(e)),X0=(e,n)=>Wi(n).exists(o=>ss(o.getNode())&&_i(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),wG=(e,n)=>n.startSummary.exists(o=>B5(e,o)),t9=(e,n)=>n.startSummary.exists(o=>X0(e,o)),n9=(e,n)=>n.startDetails.exists(o=>_i(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),of=(e,n,o)=>o.startDetails.exists(r=>gl(e,n).forall(c=>!r.contains(c.container()))),$5=(e,n)=>{const o=n.getNode();en(o)||e.selection.setCursorLocation(o,n.offset())},I5=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?hl(c):Wi(c)).each(f=>$5(e,f))}else $5(e,n)},L5=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(E=>C!==E));return(c||u)&&!(c&&u)||f},F5=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Be.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),C=ZE(r,f),E=b&&r.isEmpty(b),M=W(b==null?void 0:b.previousSibling),N=W(b==null?void 0:b.nextSibling);return E&&(n?N:M)&&zm(!n,u,f).exists(Q=>P5(r,Q)&&!qa(C,ZE(r,Q)))?!0:zm(n,u,f).fold(We,P=>{const j=ZE(r,P);if(P5(r,P)&&!qa(C,j)){if(n||I5(e,P,!1),b&&E){if(n&&M)return!0;if(!n&&N)return!0;I5(e,P,n),e.dom.remove(b)}return!0}else return!1})}else return!1},QD=(e,n,o,r)=>{const u=e.selection.getRng(),f=Be.fromRangeStart(u),b=e.getBody();return r==="selection"?L5(u,n):o?t9(f,n)||of(b,f,n):wG(f,n)||n9(f,n)},dg=(e,n,o)=>e9(e.dom,e.selection.getRng()).fold(()=>F5(e,n,o),r=>QD(e,r,n,o)||F5(e,n,o)),H5=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Be.fromRangeStart(u);return by(c)?(o==="selection"&&N5(u,c)||yw(n,f,c)?Qz(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:E,focusNode:M,focusOffset:N}=b??{};const P=()=>{_e(C)&&_e(E)&&_e(M)&&_e(N)&&(b==null||b.setBaseAndExtent(C,E,M,N))},j=()=>{C=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,M=b==null?void 0:b.focusNode,N=b==null?void 0:b.focusOffset},Q=(te,he)=>{ye(te.childNodes,we=>{Ep(we)&&he.appendChild(we)})},q=e.dom.create("span",{"data-mce-bogus":"1"});Q(c,q),c.appendChild(q),P(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&N5(r.getRng(),q)?Qz(c):(e.execCommand(n?"ForwardDelete":"Delete"),j(),Q(q,c),P()),e.dom.remove(q)}),!0):!1},Up=(e,n,o)=>dg(e,n,o)||Jz&&H5(e,n,o)?L.some(It):L.none(),V5=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:It,inputType:o},f=Wu(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Wp=V5("input"),J0=V5("beforeinput"),e3=dt(),t3=e3.os,z5=t3.isMacOS()||t3.isiOS(),o9=e3.browser.isFirefox(),s9=(e,n,o)=>{const r=o.keyCode===mt.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";IV([{keyCode:mt.BACKSPACE,action:Gn(h$,e)},{keyCode:mt.BACKSPACE,action:Gn(oD,e,!1)},{keyCode:mt.DELETE,action:Gn(oD,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(Y4,e,!1)},{keyCode:mt.DELETE,action:Gn(Y4,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(iS,e,n,!1)},{keyCode:mt.DELETE,action:Gn(iS,e,n,!0)},{keyCode:mt.BACKSPACE,action:Gn(ab,e,!1)},{keyCode:mt.DELETE,action:Gn(ab,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(Up,e,!1,u)},{keyCode:mt.DELETE,action:Gn(Up,e,!0,u)},...z5?[{keyCode:mt.BACKSPACE,altKey:!0,action:Gn(Up,e,!1,f(!0))},{keyCode:mt.DELETE,altKey:!0,action:Gn(Up,e,!0,f(!0))},{keyCode:mt.BACKSPACE,metaKey:!0,action:Gn(Up,e,!1,f(!1))}]:[{keyCode:mt.BACKSPACE,ctrlKey:!0,action:Gn(Up,e,!1,f(!0))},{keyCode:mt.DELETE,ctrlKey:!0,action:Gn(Up,e,!0,f(!0))}],{keyCode:mt.BACKSPACE,action:Gn(bE,e,!1)},{keyCode:mt.DELETE,action:Gn(bE,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(SD,e,!1)},{keyCode:mt.DELETE,action:Gn(SD,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(mE,e,!1)},{keyCode:mt.DELETE,action:Gn(mE,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(nS,e,!1)},{keyCode:mt.DELETE,action:Gn(nS,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(CD,e,!1)},{keyCode:mt.DELETE,action:Gn(CD,e,!0)},{keyCode:mt.BACKSPACE,action:Gn(hE,e,!1)},{keyCode:mt.DELETE,action:Gn(hE,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),J0(e,r).isDefaultPrevented()||(b(),Wp(e,r))})},r9=(e,n,o)=>ME([{keyCode:mt.BACKSPACE,action:Gn(gE,e)},{keyCode:mt.DELETE,action:Gn(gE,e)},...z5?[{keyCode:mt.BACKSPACE,altKey:!0,action:Gn(mS,e)},{keyCode:mt.DELETE,altKey:!0,action:Gn(mS,e)},...o?[{keyCode:o9?224:91,action:Gn(mS,e)}]:[]]:[{keyCode:mt.BACKSPACE,ctrlKey:!0,action:Gn(mS,e)},{keyCode:mt.DELETE,ctrlKey:!0,action:Gn(mS,e)}]],n),U5=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===mt.BACKSPACE,r.isDefaultPrevented()||s9(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||r9(e,r,o),o=!1})},a9=e=>{for(;e;){if(Ht(e)||at(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Q0=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=a9(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Ea),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new cc(n,n);let f=n,b;for(;b=u.current();){if(at(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else ss(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),dw(e,c)},ES=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},n3=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),c9=e=>n3(e).fold(st(""),n=>n.nodeName.toUpperCase()),W5=e=>n3(e).filter(n=>si(de.fromDom(n))).isSome(),jE=e=>{e.innerHTML='<br data-mce-bogus="1">'},l9=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(C=>{const M={...Ic(de.fromDom(n)),...C};r.setStyles(n,M)});const c=L.from(o.class).map(C=>C.split(/\s+/)),u=L.from(n.className).map(C=>Bt(C.split(/\s+/),E=>E!==""));$r(c,u,(C,E)=>{const M=Bt(E,P=>!Sn(C,P)),N=[...C,...M];r.setAttrib(n,"class",N.join(" "))});const f=["style","class"],b=Yo(o,(C,E)=>!Sn(f,E));r.setAttribs(n,b)},kS=(e,n)=>{if(tl(e).toLowerCase()===n.tagName.toLowerCase()){const r=Lf(e);l9(e,n,r)}},i9=(e,n,o,r,c=!0,u,f)=>{const b=e.dom,C=e.schema,E=tl(e),M=o?o.nodeName.toUpperCase():"";let N=n;const P=C.getTextInlineElements();let j;u||M==="TABLE"||M==="HR"?j=b.create(u||E,f||{}):j=o.cloneNode(!1);let Q=j;if(!c)b.setAttrib(j,"style",null),b.setAttrib(j,"class",null);else do if(P[N.nodeName]){if(Zi(N)||ji(N))continue;const q=N.cloneNode(!1);b.setAttrib(q,"id",""),j.hasChildNodes()?(q.appendChild(j.firstChild),j.appendChild(q)):(Q=q,j.appendChild(q))}while((N=N.parentNode)&&N!==r);return kS(e,j),jE(Q),j},o3=(e,n)=>e.dom.getParent(n,ti),u9=(e,n,o)=>{let r=n;for(;r&&r!==e&&W(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return ti(c);r=c}return!1},d9=(e,n,o)=>!n&&o.nodeName.toLowerCase()===tl(e)&&e.dom.isEmpty(o)&&u9(e.getBody(),o,r=>pn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),m9=(e,n,o)=>{var r,c,u;const f=n(tl(e)),b=o3(e,o);b&&(e.dom.insertAfter(f,b),Q0(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},Z5=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,f9=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},s3=(e,n)=>{const o=e==null?void 0:e.parentNode;return _e(o)&&o.nodeName===n},j5=e=>_e(e)&&/^(OL|UL|LI)$/.test(e.nodeName),r3=e=>_e(e)&&/^(LI|DT|DD)$/.test(e.nodeName),xG=e=>j5(e)&&j5(e.parentNode),Uc=e=>{const n=e.parentNode;return r3(n)?n:e},GE=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ht(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},G5=e=>Bo(va(Ic(de.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),g9=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;xG(o)&&(c="LI");const C=r3(r)?G5(r):void 0;let E=r3(r)&&C?n(c,{style:G5(r)}):n(c);if(GE(o,r,!0)&&GE(o,r,!1))if(s3(o,"LI")){const M=Uc(o);u.insertAfter(E,M),f9(o)?u.remove(M):u.remove(o)}else u.replace(E,o);else if(GE(o,r,!0))s3(o,"LI")?(u.insertAfter(E,Uc(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if(GE(o,r,!1))u.insertAfter(E,Uc(o)),u.remove(r);else{o=Uc(o);const M=f.cloneRange();M.setStartAfter(r),M.setEndAfter(o);const N=M.extractContents();if(c==="LI"&&Z5(N,"LI")){const P=Bt(gn(E.children,de.fromDom),bo(Ls("br")));E=N.firstChild,u.insertAfter(N,o),ye(P,j=>_m(de.fromDom(E),j)),C&&E.setAttribute("style",C)}else u.insertAfter(N,o),u.insertAfter(E,o);u.remove(r)}Q0(e,E)},h9=e=>{ye(Yc(de.fromDom(e),Me),n=>{const o=n.dom;o.nodeValue=Ei(o.data)})},p9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},b9=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),a3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,ey=(e,n)=>_e(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",v9=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ht(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||b9(e,u))&&e.remove(u)},c3=(e,n,o)=>at(n)?e?o===1&&n.data.charAt(o-1)===ra?0:o:o===n.data.length-1&&n.data.charAt(o)===ra?n.data.length:o:o,l3=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,c3(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,c3(!1,e.endContainer,e.endOffset)),n},i3=e=>{let n=e;do at(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},y9=(e,n,o,r,c)=>{var u,f;const b=e.dom,C=(u=ES(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!ey(b,E)){if(E=E||C,!E.hasChildNodes()){const j=b.create(n);return kS(e,j),E.appendChild(j),o.setStart(j,0),o.setEnd(j,0),j}let M=r;for(;M&&M.parentNode!==E;)M=M.parentNode;let N;for(;M&&!b.isBlock(M);)N=M,M=M.previousSibling;const P=(f=N==null?void 0:N.parentElement)===null||f===void 0?void 0:f.nodeName;if(N&&P&&e.schema.isValidChild(P,n.toLowerCase())){const j=N.parentNode,Q=b.create(n);for(kS(e,Q),j.insertBefore(Q,N),M=N;M&&!b.isBlock(M);){const q=M.nextSibling;Q.appendChild(M),M=q}o.setStart(r,c),o.setEnd(r,c)}}return r},TG=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ht(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},EG=(e,n)=>{const o=Fa(e);return wn(n)?!1:ee(o)?Sn(ct.explode(o),n.nodeName.toLowerCase()):o},q5={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,C=e.schema,E=C.getNonEmptyElements(),M=e.selection.getRng(),N=tl(e),P=de.fromDom(M.startContainer),j=Pu(P,M.startOffset),Q=j.exists(et=>se(et)&&!ga(et)),q=M.collapsed&&Q,te=(et,Qt)=>i9(e,o,wt,ot,B_(e),et,Qt),he=et=>{const Qt=c3(et,o,r);if(at(o)&&(et?Qt>0:Qt<o.data.length))return!1;if((o.parentNode===wt||o===wt)&&f&&!et||et&&Ht(o)&&o===wt.firstChild)return!0;if(a3(o,"TABLE")||a3(o,"HR"))return f&&!et||!f&&et;const bn=new cc(o,wt);at(o)&&(et&&Qt===0?bn.prev():!et&&Qt===o.data.length&&bn.next());let co;for(;co=bn.current();){if(Ht(co)){if(!co.getAttribute("data-mce-bogus")){const Do=co.nodeName.toLowerCase();if(E[Do]&&Do!=="br")return!1}}else if(at(co)&&!bi(co.data))return!1;et?bn.prev():bn.next()}return!0},we=()=>{let et;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&zt!=="HGROUP"?et=te(N):et=te(),EG(e,u)&&ey(b,u)&&b.isEmpty(wt,void 0,{includeZwsp:!0})?et=b.split(u,wt):b.insertAfter(et,wt),Q0(e,et),et};Dt(b,M).each(et=>{M.setStart(et.startContainer,et.startOffset),M.setEnd(et.endContainer,et.endOffset)}),o=M.startContainer,r=M.startOffset;const be=!!(n&&n.shiftKey),Ae=!!(n&&n.ctrlKey);Ht(o)&&o.hasChildNodes()&&!q&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&at(o)?r=o.data.length:r=0);const ot=ES(b,o);if(!ot||p9(e,o))return;be||(o=y9(e,N,M,o,r));let wt=b.getParent(o,b.isBlock)||b.getRoot();u=_e(wt==null?void 0:wt.parentNode)?b.getParent(wt.parentNode,b.isBlock):null,c=wt?wt.nodeName.toUpperCase():"";const zt=u?u.nodeName.toUpperCase():"";if(zt==="LI"&&!Ae){const et=u;wt=et,u=et.parentNode,c=zt}if(Ht(u)&&d9(e,be,wt))return m9(e,te,wt);if(/^(LI|DT|DD)$/.test(c)&&Ht(u)&&b.isEmpty(wt)){g9(e,te,u,wt,N);return}if(!q&&(wt===e.getBody()||!ey(b,wt)))return;const Ve=wt.parentNode;let Ie;if(q)Ie=te(N),j.fold(()=>{mr(P,de.fromDom(Ie))},et=>{xc(et,de.fromDom(Ie))}),e.selection.setCursorLocation(Ie,0);else if(Wg(wt))Ie=Ho(wt),b.isEmpty(wt)&&jE(wt),kS(e,Ie),Q0(e,Ie);else if(he(!1))Ie=we();else if(he(!0)&&Ve){const et=Be.fromRangeStart(M),Qt=eO(et),bn=de.fromDom(wt),Do=nO(bn,et,e.schema)?bM(bn,et,e.schema).bind(Ns=>L.from(Ns.getNode())):L.none();Ie=Ve.insertBefore(te(),wt);const ps=a3(wt,"HR")||Qt?Ie:Do.getOr(wt);Q0(e,ps)}else{const et=l3(M).cloneRange();et.setEndAfter(wt);const Qt=et.extractContents();h9(Qt),i3(Qt),Ie=Qt.firstChild,b.insertAfter(Qt,wt),v9(b,E,Ie),TG(b,wt),b.isEmpty(wt)&&jE(wt),Ie.normalize(),b.isEmpty(Ie)?(b.remove(Ie),we()):(kS(e,Ie),Q0(e,Ie))}b.setAttrib(Ie,"id",""),e.dispatch("NewBlock",{newBlock:Ie})},fakeEventName:"insertParagraph"},_G=(e,n,o)=>{const r=new cc(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||at(c)&&c.length>0)return!0;return!1},K5=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),dw(e,r)},sf=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Dt(r,c).each(j=>{c.setStart(j.startContainer,j.startOffset),c.setEnd(j.endContainer,j.endOffset)});let b=c.startOffset,C=c.startContainer;if(Ht(C)&&C.hasChildNodes()){const j=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,j&&at(C)?b=C.data.length:b=0}let E=r.getParent(C,r.isBlock);const M=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,N=M?M.nodeName.toUpperCase():"",P=!!(n&&n.ctrlKey);N==="LI"&&!P&&(E=M),at(C)&&b>=C.data.length&&(_G(e.schema,C,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),T1(r,c,u),K5(e,u,f),e.undoManager.add()},C9=(e,n)=>{const o=de.fromTag("br");xc(de.fromDom(n),o),e.undoManager.add()},Y5=(e,n)=>{S9(e.getBody(),n)||_l(de.fromDom(n),de.fromTag("br"));const o=de.fromTag("br");_l(de.fromDom(n),o),K5(e,o.dom,!1),e.undoManager.add()},w9=e=>ss(e.getNode()),S9=(e,n)=>w9(Be.after(n))?!0:gl(e,Be.after(n)).map(o=>ss(o.getNode())).getOr(!1),X5=e=>e&&e.nodeName==="A"&&"href"in e,x9=e=>e.fold(We,X5,X5,We),T9=e=>{const n=qe(Mp,e),o=Be.fromRangeStart(e.selection.getRng());return Md(n,e.getBody(),o).filter(x9)},E9=(e,n)=>{n.fold(It,qe(C9,e),qe(Y5,e),It)},u3={insert:(e,n)=>{const o=T9(e);o.isSome()?o.each(qe(E9,e)):sf(e,n)},fakeEventName:"insertLineBreak"},_S=(e,n)=>n3(e).filter(o=>n.length>0&&jc(de.fromDom(o),n)).isSome(),k9=e=>_S(e,Ff(e)),_9=e=>_S(e,P_(e)),Qu=ys.generate([{br:[]},{block:[]},{none:[]}]),A9=(e,n)=>_9(e),Q5=e=>(n,o)=>W5(n)===e,d3=(e,n)=>(o,r)=>c9(o)===e.toUpperCase()===n,O9=e=>{const n=ES(e.dom,e.selection.getStart());return wn(n)},ty=e=>d3("pre",e),eI=()=>d3("summary",!0),qE=e=>(n,o)=>L2(n)===e,D9=(e,n)=>k9(e),ny=(e,n)=>n,R9=e=>{const n=tl(e),o=ES(e.dom,e.selection.getStart());return _e(o)&&e.schema.isValidChild(o.nodeName,n)},M9=e=>{const n=e.selection.getRng(),o=de.fromDom(n.startContainer),c=Pu(o,n.startOffset).map(u=>se(u)&&!ga(u));return n.collapsed&&c.getOr(!0)},Yi=(e,n)=>(o,r)=>Bo(e,(u,f)=>u&&f(o,r),!0)?L.some(n):L.none(),N9=(e,n)=>PB([Yi([A9],Qu.none()),Yi([ty(!0),O9],Qu.none()),Yi([eI()],Qu.br()),Yi([ty(!0),qE(!1),ny],Qu.br()),Yi([ty(!0),qE(!1)],Qu.block()),Yi([ty(!0),qE(!0),ny],Qu.block()),Yi([ty(!0),qE(!0)],Qu.br()),Yi([Q5(!0),ny],Qu.br()),Yi([Q5(!0)],Qu.block()),Yi([D9],Qu.br()),Yi([ny],Qu.br()),Yi([R9],Qu.block()),Yi([M9],Qu.block())],[e,!!(n&&n.shiftKey)]).getOr(Qu.none()),oy=(e,n,o)=>{n.selection.isCollapsed()||E6(n),!(_e(o)&&J0(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),_e(o)&&Wp(n,e.fakeEventName))},KE=(e,n)=>{const o=()=>oy(u3,e,n),r=()=>oy(q5,e,n),c=N9(e,n);switch(Cv(e)){case"linebreak":c.fold(o,o,It);break;case"block":c.fold(r,r,It);break;case"invert":c.fold(r,o,It);break;default:c.fold(o,r,It);break}},m3=dt(),P9=m3.os.isiOS()&&m3.browser.isSafari(),B9=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),Y8(e.undoManager),e.undoManager.transact(()=>{KE(e,n)}))},Zp=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(at(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},$9=e=>{let n=L.none();const o=c=>{n=L.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(It,f=>c.selection.moveToBookmark(f)),B9(c,u),n=L.none()};e.on("keydown",c=>{c.keyCode===mt.ENTER&&(P9&&Zp(e.selection.getRng())?o(e):B9(e,c))}),e.on("keyup",c=>{c.keyCode===mt.ENTER&&n.each(()=>r(e,c))})},I9=(e,n,o)=>{const r=vt.os.isMacOS()||vt.os.isiOS();ME([{keyCode:mt.END,action:Gn(ig,e,!0)},{keyCode:mt.HOME,action:Gn(ig,e,!1)},...r?[]:[{keyCode:mt.HOME,action:Gn(ug,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:mt.END,action:Gn(ug,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:mt.END,action:Gn(FV,e,!0)},{keyCode:mt.HOME,action:Gn(FV,e,!1)},{keyCode:mt.END,action:Gn(vm,e,!0,n)},{keyCode:mt.HOME,action:Gn(vm,e,!1,n)}],o).each(c=>{o.preventDefault()})},L9=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||I9(e,n,o)})},YE=e=>{e.on("input",n=>{n.isComposing||AM(e)})},tI=dt(),nI=(e,n,o)=>{ME([{keyCode:mt.PAGE_UP,action:Gn(vm,e,!1,n)},{keyCode:mt.PAGE_DOWN,action:Gn(vm,e,!0,n)}],o)},oI=e=>e.stopImmediatePropagation(),f3=e=>e.keyCode===mt.PAGE_UP||e.keyCode===mt.PAGE_DOWN,sI=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",oI,!0):!o&&e.get()&&n.off("NodeChange",oI),e.set(o)},F9=(e,n)=>{if(tI.os.isMacOS())return;const o=Se(!1);e.on("keydown",r=>{f3(r)&&sI(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||nI(e,n,r),f3(r)&&o.get()&&(sI(o,e,!1),e.nodeChanged())})},H9=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Ro(n.getTargetRanges(),o=>!GR(e.dom,o)))&&n.preventDefault()})},XE=(e,n)=>{const o=n.container(),r=n.offset();return at(o)?(o.insertData(r,e),L.some(Be(o,r+e.length))):zv(n).map(c=>{const u=de.fromText(e);return n.isAtEnd()?_l(c,u):xc(c,u),Be(u.dom,e.length)})},JE=qe(XE,Ea),rI=qe(XE," "),g3=(e,n,o)=>xM(e,n,o)?JE(n):rI(n),aI=e=>n=>n.fold(o=>_i(e.dom,Be.before(o)),o=>hl(o),o=>Wi(o),o=>gl(e.dom,Be.after(o))),QE=(e,n,o)=>r=>xM(e,r,o)?JE(n):rI(n),h3=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},cI=(e,n)=>e.isEditable(e.getParent(n,"summary")),V9=e=>{const n=Be.fromRangeStart(e.selection.getRng()),o=de.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=qe(Mp,e),c=Be.fromRangeStart(e.selection.getRng());return Md(r,e.getBody(),c).bind(aI(o)).map(u=>()=>QE(o,n,e.schema)(u).each(h3(e)))}else return L.none()},z9=e=>{const n=()=>{const o=de.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Be.fromRangeStart(e.selection.getRng());g3(o,r,e.schema).each(h3(e))};return _o(vt.browser.isFirefox()&&e.selection.isEditable()&&cI(e.dom,e.selection.getRng().startContainer),n)},ek=(e,n)=>{IV([{keyCode:mt.SPACEBAR,action:Gn(V9,e)},{keyCode:mt.SPACEBAR,action:Gn(z9,e)}],n).each(o=>{n.preventDefault(),J0(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Wp(e,"insertText",{data:" "}))})},lI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||ek(e,n)})},U9=e=>G_(e)?[{keyCode:mt.TAB,action:Gn(ID,e,!0)},{keyCode:mt.TAB,shiftKey:!0,action:Gn(ID,e,!1)}]:[],W9=(e,n)=>{ME([...U9(e)],n).each(o=>{n.preventDefault()})},iI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||W9(e,n)})},Z9=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Rc(e),rg(e))return Se(null);{const n=oV(e);return H9(e),x$(e),lz(e,n),U5(e,n),$9(e),lI(e),YE(e),iI(e),L9(e,n),F9(e,n),n}};class j9{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{mw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&jC(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&jC(n)&&(n.selection.getNode().nodeName==="IMG"?qu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Ev(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=qo(r.dom.getParents(n,ut,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const uI=Jh("image"),G9=e=>{const n=e;return L.from(n[uI])},q9=(e,n)=>{const o=e;o[uI]=n},tk=Jh("event"),K9=e=>{const n=e;return L.from(n[tk])},AS=e=>n=>{const o=n;o[tk]=e},Y9=(e,n)=>AS(n)(e),dI=AS(0),X9=AS(2),J9=AS(1),sy=(e=>n=>{const o=n;return L.from(o[tk]).exists(r=>r===e)})(0),Q9=()=>Object.freeze({length:0,item:e=>null}),p3=Jh("mode"),mI=e=>{const n=e;return L.from(n[p3])},nk=e=>n=>{const o=n;o[p3]=e},fI=(e,n)=>nk(n)(e),gI=nk(0),ok=nk(2),eU=nk(1),hI=e=>n=>{const o=n;return L.from(o[p3]).exists(r=>r===e)},OS=hI(0),DS=hI(1),tU=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(OS(e))if(ee(o)){if(!en(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{OS(e)&&n.remove(o)},clear:()=>{OS(e)&&n.clear()}}),nU=["none","copy","link","move"],oU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],b3=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Sn(nU,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){sy(r)&&Sn(oU,c)&&(o=c)},get items(){return tU(r,e.items)},get files(){return DS(r)?Q9():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{OS(r)&&(q9(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>DS(r)?"":e.getData(c),setData:(c,u)=>{OS(r)&&e.setData(c,u)},clearData:c=>{OS(r)&&e.clearData(c)}};return gI(r),r},sU=e=>{const n=b3(),o=mI(e);return ok(e),dI(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,G9(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ye(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ye(e.files,r=>n.items.add(r)),K9(e).each(r=>{Y9(n,r)}),o.each(r=>{fI(e,r),fI(n,r)}),n},rU=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},pI=(e,n)=>e.setData("text/html",n),bI="x-tinymce/html",sk=st(bI),v3="<!-- "+bI+" -->",aU=e=>v3+e,cU=e=>e.replace(v3,""),vI=e=>e.indexOf(v3)!==-1,ir=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),lU=(e,n)=>{let o="<"+e;const r=va(n,(c,u)=>u+'="'+gd.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},yI=(e,n,o)=>{const r=e.split(/\n\n/),c=lU(n,o),u="</"+n+">",f=gn(r,C=>C.split(/\n/).join("<br />")),b=C=>c+C+u;return f.length===1?f[0]:gn(f,b).join("")},CI="%MCEPASTEBIN%",y3=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},CI);vt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},wI=(e,n)=>{const o=e.dom;if(C3(e)){let r;const c=n.get();for(;r=C3(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},C3=e=>e.dom.get("mcepastebin"),iU=e=>_e(e)&&e.id==="mcepastebin",SI=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Bt(e.getBody().childNodes,iU);ye(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},rk=e=>e===CI,uU=e=>{const n=Se(null);return{create:()=>y3(e,n),remove:()=>wI(e,n),getEl:()=>C3(e),getHtml:()=>SI(e),getLastRng:n.get}},xI=(e,n)=>(ct.each(n,o=>{De(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),dU=e=>{const n=Xd(),o=og({},n);let r="";const c=n.getVoidElements(),u=ct.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const E=C.name,M=C;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let N=C.firstChild;if(N)do b(N);while(N=N.next)}f[E]&&M.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=xI(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},w3=e=>(e=xI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Ea],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),mU=e=>{let n=0;return()=>e+n++},fU=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ct.hasOwn(o,n)?"image/"+o[n]:"image/"+n},ry=(e,n)=>{const o=og({sanitize:Mv(e),sandbox_iframes:Nv(e),sandbox_iframes_exclusions:Pv(e),convert_unsafe_embeds:K_(e)},e.schema);o.addNodeFilter("meta",c=>{ct.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return fh({validate:!0},e.schema).serialize(r)},TI=(e,n)=>({content:e,cancelled:n}),ay=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=TA(e,r,o);return TI(c.node.innerHTML,c.isDefaultPrevented())},RS=(e,n,o)=>{const r=xA(e,n,o),c=ry(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?ay(e,c,o):TI(c,r.isDefaultPrevented())},gU=(e,n,o)=>RS(e,n,o),S3=(e,n)=>(e.insertContent(n,{merge:Q2(e),paste:!0}),!0),jp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),hU=(e,n)=>jp(n)&&Ro(N1(e),o=>vr(n.toLowerCase(),`.${o.toLowerCase()}`)),x3=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),pU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),EI=(e,n,o)=>!e.selection.isCollapsed()&&jp(n)?pU(e,n,o):!1,kI=(e,n,o)=>hU(e,n)?x3(e,n,o):!1,T3=(e,n)=>{ct.each([EI,kI,S3],o=>!o(e,n,S3))},_I=(e,n,o)=>{o||!ex(e)?S3(e,n):T3(e,n)},bU=mU("mceclip"),vU=e=>{const n=b3();return pI(n,e),ok(n),n},E3=(e,n,o,r,c)=>{const u=gU(e,n,o);if(!u.cancelled){const f=u.content,b=()=>_I(e,f,r);c?J0(e,"insertFromPaste",{dataTransfer:vU(f)}).isDefaultPrevented()||(b(),Wp(e,"insertFromPaste")):b()}},ak=(e,n,o,r)=>{const c=o||vI(n);E3(e,cU(n),c,!1,r)},ck=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Li(r,Av(e)),u=yI(c,tl(e),Lf(e));E3(e,u,!1,!0,o)},lk=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},_h=(e,n)=>n in e&&e[n].length>0,AI=e=>_h(e,"text/html")||_h(e,"text/plain"),yU=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return _e(o)?e.dom.encode(o[1]):void 0},CU=(e,n,o,r)=>{const c=bU(),u=Ha(e)&&_e(o.name),f=u?yU(e,o.name):c,b=u?o.name:void 0,C=n.create(c,o,r,f,b);return n.add(C),C},OI=(e,n)=>{n4(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),E=C??CU(e,b,f,u);ak(e,`<img src="${E.blobUri()}">`,!1,!0)})},k3=e=>e.type==="paste",wU=e=>Promise.all(gn(e,n=>LN(n).then(o=>({file:n,uri:o})))),DI=e=>{const n=N1(e);return o=>Uo(o.type,"image/")&&Ro(n,r=>fU(r)===o.type)},RI=(e,n)=>{const o=n.items?Ps(Ko(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Ko(n.files):[];return Bt(o.length>0?o:r,DI(e))},MI=(e,n,o)=>{const r=k3(n)?n.clipboardData:n.dataTransfer;if(M1(e)&&r){const c=RI(e,r);if(c.length>0)return n.preventDefault(),wU(c).then(u=>{o&&e.selection.setRng(o),ye(u,f=>{OI(e,f)})}),!0}return!1},NI=e=>{var n,o;return vt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},SU=e=>mt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,_3=(e,n,o,r,c)=>{let u=w3(o);const f=_h(n,sk())||vI(o),b=!f&&ir(u),C=jp(u);(rk(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(_h(n,"text/plain")&&b?u=n["text/plain"]:u=dU(u)),!rk(u)&&(r?ck(e,u,c):ak(e,u,f,c))},xU=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{SU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||NI(u))return;const f=o.get()==="text"||r;r=!1;const b=lk(u.clipboardData);!AI(b)&&MI(e,u,c())||(_h(b,"text/html")?(u.preventDefault(),_3(e,b,b["text/html"],f,!0)):_h(b,"text/plain")&&_h(b,"text/uri-list")?(u.preventDefault(),_3(e,b,b["text/plain"],f,!0)):(n.create(),qu.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),_3(e,b,C,f,!1)},0)))})},TU=e=>{const n=c=>Uo(c,"webkit-fake-url"),o=c=>Uo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!M1(e)&&r(f))for(const b of c){const C=b.attr("src");ee(C)&&!b.attr("data-mce-object")&&C!==vt.transparentSrc&&(n(C)||!dp(e)&&o(C))&&b.remove()}})},EU=(e,n,o)=>{xU(e,n,o),TU(e)},ik=(e,n)=>{n.get()==="text"?(n.set("html"),u0(e,!1)):(n.set("text"),u0(e,!0)),e.focus()},kU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{ik(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ak(e,r.html,r.internal,!1),r.text&&ck(e,r.text,!1)})},PI=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(sk(),n),!0}catch{return!1}else return!1},BI=(e,n,o,r)=>{PI(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},$I=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),c.setRng(C),qu.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},A3=e=>({html:aU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),II=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),LI=e=>!e.selection.isCollapsed()||II(e),_U=e=>n=>{!n.isDefaultPrevented()&&LI(e)&&e.selection.isEditable()&&BI(n,A3(e),$I(e),()=>{if(vt.browser.isChromium()||vt.browser.isFirefox()){const o=e.selection.getRng();qu.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},AU=e=>n=>{!n.isDefaultPrevented()&&LI(e)&&BI(n,A3(e),$I(e),It)},OU=e=>{e.on("cut",_U(e)),e.on("copy",AU(e))},FI=(e,n)=>{var o,r;return rt.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},HI=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},VI=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},DU=e=>Ro(e.files,n=>/^image\//.test(n.type)),RU=(e,n,o,r)=>{const c=e.getParent(o,f=>du(n,f));if(!W(e.getParent(o,"summary")))return!0;if(c&&pn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!W(f.querySelector(c.nodeName.toLowerCase()))}else return!1},MU=e=>{e.on("input",n=>{const o=r=>W(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Bt(e.dom.select("details"),o);ye(r,c=>{ss(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(zg().dom),c.prepend(u)})}})},NU=(e,n)=>{wC(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),M1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&DU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=FI(e,o);if(wn(r))return;const c=lk(o.dataTransfer),u=_h(c,sk());if((!AI(c)||HI(c))&&MI(e,o,r))return;const f=c[sk()],b=f||c["text/html"]||c["text/plain"],C=RU(e.dom,e.schema,r.startContainer,c),E=n.get();E&&!C||b&&(o.preventDefault(),qu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&C)&&e.execCommand("Delete"),VI(e,r);const M=w3(b);c["text/html"]?ak(e,M,u,!0):ck(e,M,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{M1(e)&&!n.get()&&(o.preventDefault(),VI(e,FI(e,o))),o.type==="dragend"&&n.set(!1)}),MU(e)},PU=e=>{const n=c=>u=>{c(e,u)},o=SC(e);ie(o)&&e.on("PastePreProcess",n(o));const r=Y2(e);ie(r)&&e.on("PastePostProcess",n(r))},BU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},$U=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,O3=e=>ct.trim(e).replace($U,pd).toLowerCase(),zI=(e,n,o)=>{const r=J2(e);if(o||r==="all"||!U_(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,E,M)=>{const N=u.parseStyle(u.decode(E)),P={};for(let Q=0;Q<c.length;Q++){const q=N[c[Q]];let te=q,he=u.getStyle(f,c[Q],!0);/color/.test(c[Q])&&(te=O3(te),he=O3(he)),he!==te&&(P[c[Q]]=q)}const j=u.serializeStyle(P,"span");return j?C+' style="'+j+'"'+M:C+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},IU=e=>{(vt.browser.isChromium()||vt.browser.isSafari())&&BU(e,zI)},LU=e=>{const n=Se(!1),o=Se(tx(e)?"text":"html"),r=uU(e);IU(e),kU(e,o),PU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{OU(e),NU(e,n),EU(e,r,o)})},FU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},HU=e=>{e.parser.addNodeFilter("details",n=>{const o=q_(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=ox(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},VU=e=>{FU(e),HU(e)},zU=ss,UI=at,uk=e=>Qo(e.dom),WI=e=>Ze(e.dom),ZI=e=>n=>Jo(de.fromDom(e),n),jI=(e,n,o)=>xr(de.fromDom(e),r=>WI(r)||o.isBlock(To(r)),ZI(n)).getOr(de.fromDom(n)).dom,D3=(e,n)=>xr(de.fromDom(e),uk,ZI(n)),dk=(e,n,o)=>{const r=new cc(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!zU(f);f=c())wd(f)&&(u=f);return u},UU=(e,n,o)=>{const c=Be.fromRangeStart(e).getNode(),u=jI(c,n,o),f=dk(c,u,!1),b=dk(c,u,!0),C=document.createRange();return D3(f,u).fold(()=>{UI(f)?C.setStart(f,0):C.setStartBefore(f)},E=>C.setStartBefore(E.dom)),D3(b,u).fold(()=>{UI(b)?C.setEnd(b,b.data.length):C.setEndAfter(b)},E=>C.setEndAfter(E.dom)),C},GI=e=>{const n=UU(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(lr(n))},WU=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),GI(e))})};var Rb;(function(e){e.Before="before",e.After="after"})(Rb||(Rb={}));const ZU=(e,n)=>Math.abs(e.left-n),qI=(e,n)=>Math.abs(e.right-n),jU=(e,n)=>e>=n.top&&e<=n.bottom,GU=(e,n)=>e.top<n.bottom&&e.bottom>n.top,qU=(e,n)=>{const o=h_(e,n)/Math.min(e.height,n.height);return GU(e,n)&&o>.5},MS=(e,n)=>{const o=Bt(e,r=>jU(n,r));return Nr(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=fo(e,f=>qU(f,r));return[c,u]})},KU=(e,n)=>({node:e.node,position:ZU(e,n)<qI(e,n)?Rb.Before:Rb.After}),YU=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),mk=(e,n,o,r)=>{const c=N=>wd(N.node)?L.some(N):Ht(N.node)?mk(Ko(N.node.childNodes),n,o,!1):L.none(),u=(N,P,j)=>c(P).filter(Q=>Math.abs(j(N,n,o)-j(Q,n,o))<2&&at(Q.node)),f=(N,P)=>{const j=Je(N,(Q,q)=>P(Q,n,o)-P(q,n,o));return wr(j,c).map(Q=>r&&!at(Q.node)&&j.length>1?u(Q,j[1],P).getOr(Q):Q)},[b,C]=MS(jB(e),o),{pass:E,fail:M}=fo(C,N=>N.top<o);return f(b,YU).orThunk(()=>f(M,zy)).orThunk(()=>f(E,zy))},XU=(e,n,o,r)=>{const c=(u,f)=>{const b=E=>Ht(E)&&E.classList.contains("mce-drag-container"),C=Bt(u.dom.childNodes,bo(b));return f.fold(()=>mk(C,o,r,!0),E=>{const M=Bt(C,N=>N!==E.dom);return mk(M,o,r,!0)}).orThunk(()=>(Jo(u,e)?L.none():fi(u)).bind(M=>c(M,L.some(u))))};return c(n,L.none())},JU=(e,n,o)=>{const r=de.fromDom(e),c=xa(r),f=de.fromPoint(c,n,o).filter(b=>wc(r,b)).getOr(r);return XU(r,f,n,o)},KI=(e,n,o)=>JU(e,n,o).filter(r=>Fm(r.node)).map(r=>KU(r,n)),YI=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},QU=e=>e.inline?YI(e.getBody()):{left:0,top:0},fk=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},XI=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},JI=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=YI(e.getContentAreaContainer()),r=XI(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},eW=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),tW=(e,n)=>eW(QU(e),fk(e),JI(e,n)),QI=e=>({target:e,srcElement:e}),DG=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...QI(o)}),nW=(e,n,o)=>{const r=zs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:It,stopImmediatePropagation:It,stopPropagation:It,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...QI(n)}},eL=(e,n)=>{const o=sU(e);return n==="dragstart"?(dI(o),gI(o)):n==="drop"?(X9(o),ok(o)):(J9(o),eU(o)),o},R3=(e,n,o,r)=>{const c=eL(o,e);return en(r)?nW(e,n,c):DG(e,r,n,c)},Mb=32,oW=100,gk=8,NS=16,tL=Qo,M3=Uy(tL,Ze),nL=(e,n,o)=>tL(o)&&o!==n&&e.isEditable(o.parentElement),sW=(e,n,o)=>wn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),rW=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},oL=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},hk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},aW=hk("left",-Mb),sL=hk("left",Mb),rL=hk("top",-Mb),aL=hk("top",Mb),cL=(e,n,o,r,c,u,f,b,C,E,M,N)=>{let P=0,j=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(P=n.pageX+o-c),n.pageY+r>u&&(j=n.pageY+r-u),e.style.width=o-P+"px",e.style.height=r-j+"px";const Q=C.clientHeight,q=C.clientWidth,te=f+C.getBoundingClientRect().top,he=b+C.getBoundingClientRect().left;M.on(we=>{we.intervalId.clear(),we.dragging&&N&&(f+gk>=Q?we.intervalId.set(aL(E)):f-gk<=0?we.intervalId.set(rL(E)):b+gk>=q?we.intervalId.set(sL(E)):b-gk<=0?we.intervalId.set(aW(E)):te+NS>=window.innerHeight?we.intervalId.set(aL(window)):te-NS<=0?we.intervalId.set(rL(window)):he+NS>=window.innerWidth?we.intervalId.set(sL(window)):he-NS<=0&&we.intervalId.set(aW(window)))})},lL=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},iL=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);lL(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Ti(de.fromDom(o))},cW=e=>e.button===0,lW=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),iW=(e,n)=>o=>{if(cW(o)){const r=ms(n.dom.getParents(o.target),M3).getOr(null);if(_e(r)&&nL(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:b3(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:rW(n,r,r.offsetWidth,r.offsetHeight),intervalId:Sf(oW)})}}},uW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),KI(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Rb.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},PS=(e,n,o,r,c)=>{n==="dragstart"&&pI(r,e.dom.getOuterHTML(o));const u=R3(n,o,r,c);return e.dispatch(n,u)},uL=(e,n)=>{const o=h1((c,u)=>uW(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=PS(n,"dragstart",u.element,u.dataTransfer,c);if(_e(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,C=lW(u,tW(n,c));oL(u.ghost,n.getBody()),cL(u.ghost,C,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},RG=e=>{const n=e.getSel();if(_e(n)){const r=n.getRangeAt(0).startContainer;return at(r)?r.parentNode:r}else return null},dW=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(sW(n,RG(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();PS(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{iL(n.dom,r.element),rU(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}PS(n,"dragend",n.getBody(),r.dataTransfer,o)}}),pk(e)},N3=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>PS(n,"dragend",r.element,r.dataTransfer),c=>PS(n,"dragend",r.element,r.dataTransfer,c))}),pk(e)},mW=(e,n)=>o=>N3(e,n,L.some(o)),pk=e=>{e.on(n=>{n.intervalId.clear(),lL(n.ghost)}),e.clear()},fW=e=>{const n=ic(),o=hr.DOM,r=document,c=iW(n,e),u=uL(n,e),f=dW(n,e),b=mW(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===mt.ESC&&N3(n,e,L.none())})},gW=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Sn(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&cE(e,"Dropped file type is not supported"))}},o=c=>{qx(e,c.target)&&n(c)},r=()=>{const c=hr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];ye(C,E=>{c.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{ye(C,E=>{c.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{qu.setEditorTimeout(e,r,0)})},hW=e=>{fW(e),q2(e)&&gW(e)},dL=e=>{const n=h1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=fE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},bk=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Tc(o)){const r=ph(e.getBody(),o),c=Qo(r)?r:o;e.selection.getNode()!==c&&V0(e,c).each(u=>e.selection.setRng(u))}})})},cy=Qo,P3=(e,n)=>ph(e.getBody(),n),pW=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=ax(e,r,o.isBlock,()=>Q1(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=zt=>_e(zt)&&o.hasClass(zt,"mce-offscreen-selection"),E=zt=>zt!==r&&(cy(zt)||Tc(zt))&&o.isChildOf(zt,r)&&o.isEditable(zt.parentNode),M=zt=>{zt&&n.setRng(zt)},N=(zt,Ve,Ie,et=!0)=>e.dispatch("ShowCaret",{target:Ve,direction:zt,before:Ie}).isDefaultPrevented()?null:(et&&n.scrollIntoView(Ve,zt===-1),c.show(Ie,Ve)),P=zt=>{zt.hasAttribute("data-mce-caret")&&(Ho(zt),n.scrollIntoView(zt))},j=()=>{e.on("click",Ve=>{o.isEditable(Ve.target)||(Ve.preventDefault(),e.focus())}),e.on("blur NewBlock",Ae),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Ve=>{const Ie=Ve.target,et=P3(e,Ie);cy(et)?(Ve.preventDefault(),V0(e,et).each(be)):E(Ie)&&V0(e,Ie).each(be)},!0),e.on("mousedown",Ve=>{const Ie=Ve.target;if(Ie!==r&&Ie.nodeName!=="HTML"&&!o.isChildOf(Ie,r)||!G7(e,Ve.clientX,Ve.clientY))return;Ae(),wt();const et=P3(e,Ie);cy(et)?(Ve.preventDefault(),V0(e,et).each(be)):KI(r,Ve.clientX,Ve.clientY).each(Qt=>{Ve.preventDefault();const bn=N(1,Qt.node,Qt.position===Rb.Before,!1);M(bn),ei(et)?et.focus():e.getBody().focus()})}),e.on("keypress",Ve=>{mt.modifierPressed(Ve)||cy(n.getNode())&&Ve.preventDefault()}),e.on("GetSelectionRange",Ve=>{let Ie=Ve.range;if(b){if(!b.parentNode){b=null;return}Ie=Ie.cloneRange(),Ie.selectNode(b),Ve.range=Ie}}),e.on("SetSelectionRange",Ve=>{Ve.range=te(Ve.range);const Ie=be(Ve.range,Ve.forward);Ie&&(Ve.range=Ie)});const zt=Ve=>Ht(Ve)&&Ve.id==="mcepastebin";e.on("AfterSetSelectionRange",Ve=>{const Ie=Ve.range,et=Ie.startContainer.parentElement;!q(Ie)&&!zt(et)&&wt(),C(et)||Ae()}),hW(e),dL(e),bk(e)},Q=zt=>ki(zt)||jg(zt)||tm(zt),q=zt=>Q(zt.startContainer)||Q(zt.endContainer),te=zt=>{const Ve=e.schema.getVoidElements(),Ie=o.createRng(),et=zt.startContainer,Qt=zt.startOffset,bn=zt.endContainer,co=zt.endOffset;return pn(Ve,et.nodeName.toLowerCase())?Qt===0?Ie.setStartBefore(et):Ie.setStartAfter(et):Ie.setStart(et,Qt),pn(Ve,bn.nodeName.toLowerCase())?co===0?Ie.setEndBefore(bn):Ie.setEndAfter(bn):Ie.setEnd(bn,co),Ie},he=(zt,Ve)=>{const Ie=de.fromDom(e.getBody()),et=e.getDoc(),Qt=dn(Ie,"#"+u).getOrThunk(()=>{const Do=de.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',et);return Co(Do,"id",u),mr(Ie,Do),Do}),bn=o.createRng();hi(Qt),Bu(Qt,[de.fromText(Ea,et),de.fromDom(Ve),de.fromText(Ea,et)]),bn.setStart(Qt.dom.firstChild,1),bn.setEnd(Qt.dom.lastChild,0),eo(Qt,{top:o.getPos(zt,e.getBody()).y+"px"}),g0(Qt);const co=n.getSel();return co&&(co.removeAllRanges(),co.addRange(bn)),bn},we=zt=>{const Ve=zt.cloneNode(!0),Ie=e.dispatch("ObjectSelected",{target:zt,targetClone:Ve});if(Ie.isDefaultPrevented())return null;const et=he(zt,Ie.targetClone),Qt=de.fromDom(zt);return ye(Ir(de.fromDom(e.getBody()),`*[${f}]`),bn=>{Jo(Qt,bn)||Cr(bn,f)}),o.getAttrib(zt,f)||zt.setAttribute(f,"1"),b=zt,wt(),et},be=(zt,Ve)=>{if(!zt)return null;if(zt.collapsed){if(!q(zt)){const bn=Ve?1:-1,co=nh(bn,r,zt),Do=co.getNode(!Ve);if(_e(Do)){if(Fm(Do))return N(bn,Do,Ve?!co.isAtEnd():!1,!1);if(Cd(Do)&&Qo(Do.nextSibling)){const Ns=o.createRng();return Ns.setStart(Do,0),Ns.setEnd(Do,0),Ns}}const ps=co.getNode(Ve);if(_e(ps)){if(Fm(ps))return N(bn,ps,Ve?!1:!co.isAtEnd(),!1);if(Cd(ps)&&Qo(ps.previousSibling)){const Ns=o.createRng();return Ns.setStart(ps,1),Ns.setEnd(ps,1),Ns}}}return null}let Ie=zt.startContainer,et=zt.startOffset;const Qt=zt.endOffset;if(at(Ie)&&et===0&&cy(Ie.parentNode)&&(Ie=Ie.parentNode,et=o.nodeIndex(Ie),Ie=Ie.parentNode),!Ht(Ie))return null;if(Qt===et+1&&Ie===zt.endContainer){const bn=Ie.childNodes[et];if(E(bn))return we(bn)}return null},Ae=()=>{b&&b.removeAttribute(f),dn(de.fromDom(e.getBody()),"#"+u).each(Ds),b=null},ot=()=>{c.destroy(),b=null},wt=()=>{c.hide()};return rg(e)||j(),{showCaret:N,showBlockCaretContainer:P,hideFakeCaret:wt,destroy:ot}},bW=(e,n)=>{let o=n;for(let r=e.previousSibling;at(r);r=r.previousSibling)o+=r.data.length;return o},B3=(e,n,o,r,c)=>{if(at(o)&&(r<0||r>o.data.length))return[];const u=c&&at(o)?[bW(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},$3=(e,n,o,r,c,u,f=!1)=>{const b=B3(e,n,o,r,f),C=B3(e,n,c,u,f);return{start:b,end:C}},mL=(e,n)=>{const o=n.slice(),r=o.pop();return ns(r)?Bo(o,(u,f)=>u.bind(b=>L.from(b.childNodes[f])),L.some(e)).bind(u=>at(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},fL=(e,n)=>mL(e,n.start).bind(({node:o,offset:r})=>mL(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),I3=(e,n,o,r=!1)=>$3(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),ly=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,at(n.firstChild)&&bi(n.firstChild.data)),ly(e,r,o)}},vk=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(at(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),at(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),ly(e,c,o),c!==u&&ly(e,u,o))},yk=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),L3=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Bf(r).concat(e.blockPatterns),inlinePatterns:_c(r).concat(e.inlinePatterns)}},F3=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},gL=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),BS=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},H3=(e,n,o)=>{const r=fL(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),C=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(gL(e,n+"-end"),f),start:C.insertBefore(gL(e,n+"-start"),b)}},Ck=(e,n,o)=>{ly(e,e.get(n.prefix+"-end"),o),ly(e,e.get(n.prefix+"-start"),o)},$S=e=>e.start.length===0,vW=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},wk=(e,n,o,r)=>{const c=n.start;return FD(e,r.container,r.offset,vW(c),o).bind(f=>{var b,C;const E=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&C!==void 0?C:-1;if(E!==-1&&f.offset>=E+c.length){const N=e.createRng();return N.setStart(f.container,f.offset-c.length),N.setEnd(f.container,f.offset),L.some(N)}else{const N=f.offset-c.length;return gS(f.container,N,o).map(P=>{const j=e.createRng();return j.setStart(P.container,P.offset),j.setEnd(f.container,f.offset),j}).filter(P=>P.toString()===c).orThunk(()=>wk(e,n,o,tf(f.container,0)))}})},yW=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),L.some(f)}return LD(o,r,c).bind(f=>wk(e,n,c,f).bind(C=>{var E;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return L.none();if(f.offset===0&&((E=C.endContainer.textContent)===null||E===void 0?void 0:E.length)===C.endOffset)return L.none()}return L.some(C)}))},CW=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return gS(b,C-o.pattern.end.length,n).bind(E=>{const M=$3(c,u,E.container,E.offset,b,C,r);if($S(f))return L.some({matches:[{pattern:f,startRng:M,endRng:M}],position:E});{const N=IS(e,o.remainingPatterns,E.container,E.offset,n,r),P=N.getOr({matches:[],position:E}),j=P.position;return yW(c,f,j.container,j.offset,n,N.isNone()).map(q=>{const te=I3(c,u,q,r);return{matches:P.matches.concat([{pattern:f,startRng:te,endRng:M}]),position:tf(q.startContainer,q.startOffset)}})}})},IS=(e,n,o,r,c,u)=>{const f=e.dom;return LD(o,r,f.getRoot()).bind(b=>{const C=F3(f,c,o,r);for(let E=0;E<n.length;E++){const M=n[E];if(!vr(C,M.end))continue;const N=n.slice();N.splice(E,1);const P=CW(e,c,{pattern:M,remainingPatterns:N,position:b},u);if(P.isNone()&&r>0)return IS(e,n,o,r-1,c,u);if(P.isSome())return P}return L.none()})},hL=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ye(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},wW=(e,n,o,r)=>{const c=BS(e.dom,o);vk(e.dom,c,r),hL(e,n,c)},SW=(e,n,o,r,c)=>{const u=e.dom,f=BS(u,r),b=BS(u,o);vk(u,b,c),vk(u,f,c);const C={prefix:o.prefix,start:o.end,end:r.start},E=BS(u,C);hL(e,n,E)},xW=(e,n)=>{const o=Jh("mce_textpattern"),r=Is(n,(c,u)=>{const f=H3(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Is(r,(c,u)=>{const f=r.length-c.length-1,b=$S(u.pattern)?u.endMarker:H3(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},TW=e=>Je(e,(n,o)=>o.end.length-n.end.length),EW=(e,n)=>{const o=ls(e,r=>Ro(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},pL=(e,n,o,r,c,u)=>{const f=IS(e,c.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=IS(e,TW(c.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return EW(f,b)},V3=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=xW(o,n);ye(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;$S(u.pattern)?wW(e,u.pattern,u.endMarker,b):SW(e,u.pattern,u.startMarker,u.endMarker,b),Ck(o,u.endMarker,b),Ck(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},bL=(e,n,o)=>uz(n,0,n).map(r=>{const c=r.container;return G$(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),vk(e,f,b=>b===n)}),c}),Sk=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=fL(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,C)=>{const E=C.get(b);return tt(E)&&Ft(E).exists(M=>pn(M,"block"))};return yk(n,u).each(b=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,c),n.execCommand(c.cmd,!1,c.value)})}),!0},kW=e=>Je(e,(n,o)=>o.start.length-n.start.length),vL=e=>(n,o)=>{const r=kW(n),c=o.replace(Ea," ");return ms(r,u=>e(u,o,c))},yL=(e,n)=>(o,r,c,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const C=o.dom,E=tl(o);return C.is(r,E)?e(c.blockPatterns,f).map(M=>n&&ct.trim(f).length===M.start.length?[]:[{pattern:M,range:$3(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},_W=e=>/^\s[^\s]/.test(e),AW=Sk((e,n,o)=>{bL(e,n,o).each(r=>{const c=de.fromDom(r),u=p1(c);_W(u)&&rv(c,u.slice(1))})}),xk=vL((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),OW=yL(xk,!0),DW=(e,n)=>{const o=e.selection.getRng();return yk(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=L3(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=pL(e,r,o.startContainer,u,f,!0),C=OW(e,r,f,!0);return{inlineMatches:b,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},RW=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ye(n,r=>AW(e,r)),e.selection.moveToBookmark(o)},MW=Sk(bL),NW=vL((e,n,o)=>n===e.start||o===e.start),PW=yL(NW,!1),BW=(e,n)=>{const o=e.selection.getRng();return yk(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=F3(e.dom,r,o.startContainer,c),f=L3(n,r,u);return PW(e,r,f,!1,u)}).filter(r=>r.length>0)},$W=(e,n)=>{ye(n,o=>MW(e,o))},IW=(e,n)=>DW(e,n).fold(We,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{yR(e),V3(e,o),RW(e,r);const c=e.selection.getRng(),u=LD(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Lh&&(b.deleteData(f.offset-1,1),ly(e.dom,b.parentNode,C=>C===e.dom.getRoot()))})}),!0)),CL=(e,n)=>{const o=e.selection.getRng();yk(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=F3(e.dom,r,o.startContainer,c),f=L3(n,r,u),b=pL(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{V3(e,b)})})},LW=(e,n)=>BW(e,n).fold(We,o=>(e.undoManager.transact(()=>{$W(e,o)}),!0)),z3=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},FW=(e,n)=>z3(e,n,(o,r)=>o===r.keyCode&&!mt.modifierPressed(r)),HW=(e,n)=>z3(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),wL=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>$f(nx(e),W_(e)),c=()=>Vf(e);e.on("keydown",f=>{if(f.keyCode===13&&!mt.modifierPressed(f)&&e.selection.isCollapsed()){const b=nC(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&IW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const b=nC(r(),"space");(b.blockPatterns.length>0||c())&&LW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=nC(r(),"space");(f.inlinePatterns.length>0||c())&&CL(e,f)}};e.on("keyup",f=>{FW(o,f)&&u()}),e.on("keypress",f=>{HW(n,f)&&qu.setEditorTimeout(e,u)})},LS=e=>{wL(e)},VW=e=>{const n=ct.each,o=mt.BACKSPACE,r=mt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=vt.browser,C=b.isFirefox(),E=b.isChromium()||b.isSafari(),M=vt.deviceType.isiPhone()||vt.deviceType.isiPad(),N=vt.os.isMacOS()||vt.os.isiOS(),P=($t,On)=>{try{e.getDoc().execCommand($t,!1,String(On))}catch{}},j=$t=>$t.isDefaultPrevented(),Q=()=>{const $t=So=>{const Vt=c.create("body"),xo=So.cloneContents();return Vt.appendChild(xo),u.serializer.serialize(Vt,{format:"html"})},On=So=>{const Vt=$t(So),xo=c.createRng();xo.selectNode(e.getBody());const Mo=$t(xo);return Vt===Mo};e.on("keydown",So=>{const Vt=So.keyCode;if(!j(So)&&(Vt===r||Vt===o)&&e.selection.isEditable()){const xo=e.selection.isCollapsed(),Mo=e.getBody();if(xo&&!uu(e.schema,Mo)||!xo&&!On(e.selection.getRng()))return;So.preventDefault(),e.setContent(""),Mo.firstChild&&c.isBlock(Mo.firstChild)?e.selection.setCursorLocation(Mo.firstChild,0):e.selection.setCursorLocation(Mo,0),e.nodeChanged()}})},q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},te=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",$t=>{let On;if($t.target===e.getDoc().documentElement)if(On=u.getRng(),e.getBody().focus(),$t.type==="mousedown"){if(ki(On.startContainer))return;u.placeCaretAt($t.clientX,$t.clientY)}else u.setRng(On)})},he=()=>{e.on("keydown",$t=>{if(!j($t)&&$t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const On=u.getNode(),So=On.previousSibling;if(On.nodeName==="HR"){c.remove(On),$t.preventDefault();return}So&&So.nodeName&&So.nodeName.toLowerCase()==="hr"&&(c.remove(So),$t.preventDefault())}}})},we=()=>{Range.prototype.getClientRects||e.on("mousedown",$t=>{if(!j($t)&&$t.target.nodeName==="HTML"){const On=e.getBody();On.blur(),qu.setEditorTimeout(e,()=>{On.focus()})}})},be=()=>{const $t=vC(e);e.on("click",On=>{const So=On.target;/^(IMG|HR)$/.test(So.nodeName)&&c.isEditable(So)&&(On.preventDefault(),e.selection.select(So),e.nodeChanged()),So.nodeName==="A"&&c.hasClass(So,$t)&&So.childNodes.length===0&&c.isEditable(So.parentNode)&&(On.preventDefault(),u.select(So))})},Ae=()=>{const $t=()=>{const So=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Vt=u.getStart();Vt!==e.getBody()&&(c.setAttrib(Vt,"style",null),n(So,xo=>{Vt.setAttributeNode(xo.cloneNode(!0))}))}},On=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",So=>{let Vt;return!j(So)&&(So.keyCode===8||So.keyCode===46)&&On()?(Vt=$t(),e.getDoc().execCommand("delete",!1),Vt(),So.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",So=>{if(!j(So)&&On()){const Vt=$t();qu.setEditorTimeout(e,()=>{Vt()})}})},ot=()=>{e.on("keydown",$t=>{if(!j($t)&&$t.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const On=u.getNode().previousSibling;if(On&&On.nodeName&&On.nodeName.toLowerCase()==="table")return $t.preventDefault(),!1}return!0})},wt=()=>{e.on("keydown",$t=>{if(j($t)||$t.keyCode!==mt.BACKSPACE)return;let On=u.getRng();const So=On.startContainer,Vt=On.startOffset,xo=c.getRoot();let Mo=So;if(!(!On.collapsed||Vt!==0)){for(;Mo.parentNode&&Mo.parentNode.firstChild===Mo&&Mo.parentNode!==xo;)Mo=Mo.parentNode;Mo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Mo),On=c.createRng(),On.setStart(So,0),On.setEnd(So,0),u.setRng(On))}})},zt=()=>{const $t=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),Vi(e)||P("enableObjectResizing",!1)};j2(e)||e.on("BeforeExecCommand mousedown",$t)},Ve=()=>{const $t=()=>{n(c.select("a:not([data-mce-block])"),On=>{var So;let Vt=On.parentNode;const xo=c.getRoot();if((Vt==null?void 0:Vt.lastChild)===On){for(;Vt&&!c.isBlock(Vt);){if(((So=Vt.parentNode)===null||So===void 0?void 0:So.lastChild)!==Vt||Vt===xo)return;Vt=Vt.parentNode}c.add(Vt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",On=>{(On.type==="setcontent"||On.command==="mceInsertLink")&&$t()})},Ie=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",tl(e))})},et=$t=>{const On=$t.getBody(),So=$t.selection.getRng();return So.startContainer===So.endContainer&&So.startContainer===On&&So.startOffset===0&&So.endOffset===On.childNodes.length},Qt=()=>{e.on("keyup focusin mouseup",$t=>{!mt.modifierPressed($t)&&!et(e)&&u.normalize()},!0)},bn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},co=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Do=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",$t=>{let On;$t.target.nodeName==="HTML"&&(On=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(On),e.selection.normalize(),e.nodeChanged())}))},ps=()=>{N&&e.on("keydown",$t=>{mt.metaKeyPressed($t)&&!$t.shiftKey&&($t.keyCode===37||$t.keyCode===39)&&($t.preventDefault(),e.selection.getSel().modify("move",$t.keyCode===37?"backward":"forward","lineboundary"))})},Ns=()=>{e.on("click",$t=>{let On=$t.target;do if(On.tagName==="A"){$t.preventDefault();return}while(On=On.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Yr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",$t=>{$t.preventDefault()})})},Wc=()=>{f.addNodeFilter("br",$t=>{let On=$t.length;for(;On--;)$t[On].attr("class")==="Apple-interchange-newline"&&$t[On].remove()})},As=It,_t=()=>{if(!C||e.removed)return!1;const $t=e.selection.getSel();return!$t||!$t.rangeCount||$t.rangeCount===0},fn=()=>{E&&(te(),be(),Yr(),q(),M&&(co(),Do(),Ns())),C&&(we(),zt(),bn(),ps())},ts=()=>{wt(),Q(),vt.windowsPhone||Qt(),E&&(te(),be(),Ie(),Yr(),ot(),Wc(),M?(co(),Do(),Ns()):q()),C&&(he(),we(),Ae(),zt(),Ve(),bn(),ps(),ot())};return rg(e)?fn():ts(),{refreshContentEditable:As,isHidden:_t}},SL=e=>e.toLowerCase()==="gpl",zW=e=>e.length>=64&&e.length<=255,UW=e=>SL(e)||zW(e)?"VALID":"INVALID",WW=e=>{const n=P1(e);!ee(xC(e))&&(en(n)||UW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},U3=hr.DOM,xL=(e,n)=>{const o=de.fromDom(e.getBody()),r=mf(kl(o)),c=de.fromTag("style");Co(c,"type","text/css"),mr(c,de.fromText(n)),mr(r,c),e.on("remove",()=>{Ds(c)})},ZW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Tk=e=>Yo(e,n=>en(n)===!1),TL=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return Tk({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:ZW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Pv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},EL=e=>{const n=e.options.get;return Tk({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},jW=e=>{const n=e.options.get;return{...TL(e),...EL(e),...Tk({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},GW=e=>{const n=og(TL(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=c.serializeStyle(c.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),Dv(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Di("br",1))}}),n},qW=e=>{const n=_v(e);n&&qu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},KW=e=>{const n=e.dom.getRoot();!e.inline&&(!jC(e)||e.selection.getStart(!0)===n)&&hl(n).each(o=>{const r=o.getNode(),c=lu(r)?hl(r).getOr(o):o;e.selection.setRng(c.toRange())})},YW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,SA(e),e.focus(!0),KW(e),e.nodeChanged({initial:!0});const n=V_(e);ie(n)&&n.call(e,e),qW(e)},W3=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,XW=(e,n,o)=>{const{pass:r,fail:c}=fo(n,b=>tinymce.Resource.has(L4(b))),f=[...r.map(b=>{const C=tinymce.Resource.get(L4(b));return ee(C)?Promise.resolve(W3(e).loadRawCss(b,C)):Promise.resolve()}),W3(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},Z3=e=>{const n=W3(e),o=ri(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let C="";ct.each(e.contentStyles,E=>{C+=E+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(XW(e,r,o)).then(u).catch(u),b=$_(e);return b&&xL(e,b),f},j3=e=>{const n=e.getDoc(),o=e.getBody();Rx(e),K2(e)||(n.body.spellcheck=!1,U3.setAttrib(o,"spellcheck","false")),e.quirks=VW(e),a0(e);const r=wR(e);r!==void 0&&(o.dir=r);const c=CC(e);c&&e.on("BeforeSetContent",u=>{ct.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},kL=e=>{rg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Ek=e=>{e.removed!==!0&&(kL(e),YW(e))},JW=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},_L=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(U3.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=j2(e),e._editableRoot=F_(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&U3.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=aH(e),e.schema=Xd(EL(e)),e.dom=hr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:H2(e),referrerPolicy:Sv(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=GW(e),e.serializer=R4(jW(e),e),e.selection=WP(e.dom,e.getWin(),e.serializer,e),e.annotator=cm(e),e.formatter=uB(e),e.undoManager=W4(e),e._nodeChangeDispatcher=new j9(e),e._selectionOverrides=pW(e),AE(e),VU(e),AV(e),rg(e)||(WU(e),LS(e));const c=Z9(e);wV(e,c),EV(e),fH(e),LU(e);const u=RP(e);j3(e),WW(e),u.fold(()=>{const f=JW(e);Z3(e).then(()=>{Ek(e),f()})},f=>{e.setProgressState(!0),Z3(e).then(()=>{f().then(b=>{e.setProgressState(!1),Ek(e),VP(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),Ek(e),VP(e)})})})},QW=ut,AL=(e,n,o)=>Bh(e,n,QW,o),kk=hr.DOM,eZ=(e,n,o,r)=>{const c=de.fromTag("iframe");return r.each(u=>Co(c,"tabindex",u)),Zr(c,o),Zr(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Nu(c,"tox-edit-area__iframe"),c},tZ=e=>{let n=M_(e)+"<html><head>";Ac(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=N_(e),r=If(e),c=e.translate(yC(e));return lC(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+lC(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},G3=(e,n)=>{const o=vt.browser.isFirefox()?yC(e):"Rich Text Area",r=e.translate(o),c=Dr(de.fromDom(e.getElement()),"tabindex").bind(Sl),u=eZ(e.id,r,Zu(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=tZ(e),kk.add(n.iframeContainer,u)},_k=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,_L(e)};if(Il(e)||vt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=AL(de.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Ak=(e,n)=>{G3(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=kk.isHidden(n.editorContainer)),e.getElement().style.display="none",kk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,_k(e)},mg=hr.DOM,Ok=(e,n,o)=>{const r=B0.get(o),c=B0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ct.trim(o),r&&ct.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ie(u.init)&&(u.init(e,c),n.push(o))}catch(u){I4(e,o,u)}}},iy=e=>e.replace(/^\-/,""),OL=e=>{const n=[];ye(R1(e),o=>{Ok(e,n,iy(o))})},nZ=e=>{const n=ct.trim(Ja(e)),o=e.ui.registry.getAll().icons,r={...N0.get("default").icons,...N0.get(n).icons};ft(r,(c,u)=>{pn(o,u)||e.ui.registry.addIcon(u,c)})},oZ=e=>{const n=Hf(e);if(ee(n)){const o=Jm.get(n);e.theme=o(e,Jm.urls[n])||{},ie(e.theme.init)&&e.theme.init(e,Jm.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},DL=e=>{const n=Tv(e),o=P0.get(n);e.model=o(e,P0.urls[n])},sZ=e=>{const n=e.theme.renderUI;return n?n():qp(e)},q3=e=>{const n=e.getElement(),r=Hf(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},FS=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Gp=e=>{const n=mg.create("div");return mg.insertAfter(n,e),FS(n,n)},qp=e=>{const n=e.getElement();return e.inline?FS(null):Gp(n)},RL=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Hf(e))?sZ(e):ie(Hf(e))?q3(e):qp(e)},rZ=(e,n)=>{const o={show:L.from(n.show).getOr(It),hide:L.from(n.hide).getOr(It),isEnabled:L.from(n.isEnabled).getOr(ut),setEnabled:r=>{e.mode.isReadOnly()||L.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},aZ=async e=>{e.dispatch("ScriptsLoaded"),nZ(e),oZ(e),DL(e),OL(e);const n=await RL(e);rZ(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,oH(e),e.inline?_L(e):Ak(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Nb=hr.DOM,ML=e=>e.charAt(0)==="-",cZ=(e,n)=>{const o=xv(n),r=Kg(n);if(!uc.hasCode(o)&&o!=="en"){const c=Fo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{Q7(n,c,o)})}},lZ=(e,n)=>{const o=Hf(e);if(ee(o)&&!ML(o)&&!pn(Jm.urls,o)){const r=mC(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Jm.load(o,c).catch(()=>{iG(e,c,o)})}},NL=(e,n)=>{const o=Tv(e);if(o!=="plugin"&&!pn(P0.urls,o)){const r=V2(e),c=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;P0.load(o,c).catch(()=>{Qm(e,c,o)})}},iZ=e=>L.from(Oa(e)).filter(Fo).map(n=>({url:n,name:L.none()})),PL=(e,n,o)=>L.from(n).filter(r=>Fo(r)&&!N0.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),uZ=(e,n,o)=>{const r=PL(n,"default",o),c=iZ(n).orThunk(()=>PL(n,Ja(n),""));ye($s([r,c]),u=>{e.add(u.url).catch(()=>{J7(n,u.url,u.name.getOrUndefined())})})},NG=(e,n)=>{const o=(r,c)=>{B0.load(r,c).catch(()=>{X7(e,c,r)})};ft(H_(e),(r,c)=>{o(c,r),e.options.set("plugins",R1(e).concat(c))}),ye(R1(e),r=>{r=ct.trim(r),r&&!B0.urls[r]&&!ML(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},dZ=e=>{const n=Hf(e);return!ee(n)||_e(Jm.get(n))},K3=e=>{const n=Tv(e);return _e(P0.get(n))},mZ=(e,n)=>{const o=bd.ScriptLoader,r=()=>{!e.removed&&dZ(e)&&K3(e)&&aZ(e)};lZ(e,n),NL(e,n),cZ(o,e),uZ(o,e,n),NG(e,n),o.loadQueue().then(r,r)},fZ=(e,n)=>_a.forElement(e,{contentCssCors:G2(n),referrerPolicy:Sv(n)}),BL=e=>{const n=e.id;uc.setCode(xv(e));const o=()=>{Nb.unbind(window,"ready",o),e.render()};if(!Of.Event.domLoaded){Nb.bind(window,"ready",o);return}if(!e.getElement())return;const r=de.fromDom(e.getElement()),c=Xl(r);e.on("remove",()=>{Ct(r.dom.attributes,f=>Cr(r,f.name)),Zr(r,c)}),e.ui.styleSheetLoader=fZ(r,e),Jg(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Nb.getParent(n,"form");u&&(e.formElement=u,hC(e)&&!Tr(e.getElement())&&(Nb.insertAfter(Nb.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Nb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),pC(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=$4(e),e.notificationManager=tB(e),Uf(e)&&e.on("GetContent",f=>{f.save&&(f.content=Nb.encode(f.content))}),W2(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Z2(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),mZ(e,e.suffix)},gZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),nw(e,n))},$L=e=>e._editableRoot,hZ=(e,n)=>({sections:st(e),options:st(n)}),Dk=dt().deviceType,IL=Dk.isPhone(),pZ=Dk.isTablet(),HS=e=>{if(wn(e))return[];{const n=tt(e)?e:e.split(/[ ,]/),o=gn(n,bc);return Bt(o,Fo)}},bZ=(e,n)=>{const o=ea(n,(r,c)=>Sn(e,c));return hZ(o.t,o.f)},LL=(e,n,o={})=>{const r=e.sections(),c=os(r,n).getOr({});return ct.extend({},o,c)},VS=(e,n)=>pn(e.sections(),n),FL=(e,n)=>VS(e,n)?e.sections()[n]:{},Y3=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:os(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),vZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ct.extend({},e.external_plugins,r):r},PG=(e,n)=>[...HS(e),...HS(n)],BG=(e,n,o,r)=>e&&VS(n,"mobile")?r:o,yZ=(e,n,o,r)=>{const c=HS(o.forced_plugins),u=HS(r.plugins),f=FL(n,"mobile"),b=f.plugins?HS(f.plugins):u,C=BG(e,n,u,b),E=PG(c,C);return ct.extend(r,{forced_plugins:c,plugins:E})},HL=(e,n)=>e&&VS(n,"mobile"),CZ=(e,n,o,r,c)=>{var u;const f=e?{mobile:Y3((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=bZ(["mobile"],CS(f,c)),C=ct.extend(o,r,b.options(),HL(e,b)?LL(b,"mobile"):{},{external_plugins:vZ(r,b.options())});return yZ(e,b,r,C)},wZ=(e,n)=>{const o=o5(n);return CZ(IL||pZ,IL,o,e,o)},SZ=(e,n)=>g7(e,n),$G=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{ye("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},IG=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Ro(c,u=>_e(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},VL=e=>{$G(e),IG(e)},zL=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(vt.os.isMacOS()||vt.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},xZ=(e,n,o,r)=>{const c=de.fromDom(e.getRoot());return pw(c,Be.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),bw(c,Be.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},TZ=e=>{if(typeof e!="string"){const n=ct.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},EZ=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?xZ(r,o.getRng(),n,e.schema):n},X3=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=TZ(n);b4(e,{...r,content:EZ(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=HP(e,c.content,r);v4(e,u,c),e.addVisual()})}},LG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{X3(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{X3(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{X3(e,r)},mceInsertContent:(n,o,r)=>{X3(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(X2(e))}})},FG={"font-size":"size","font-family":"face"},kZ=Ls("font"),HG=(e,n,o)=>{const r=u=>qc(u,e).orThunk(()=>kZ(u)?os(FG,e).bind(f=>Dr(u,f)):L.none()),c=u=>Jo(de.fromDom(n),u);return RO(de.fromDom(o),u=>r(u),c)},_Z=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Pb=(e,n)=>L.from(hr.DOM.getStyle(n,e,!0)),Rk=e=>(n,o)=>L.from(o).map(de.fromDom).filter(Te).bind(r=>HG(e,n,r.dom).or(Pb(e,r.dom))).getOr(""),Mk=Rk("font-size"),UL=A(_Z,Rk("font-family")),WL=e=>hl(e.getBody()).bind(n=>{const o=n.container();return L.from(at(o)?o.parentNode:o)}),ZL=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),AZ=(e,n)=>ZL(e).orThunk(qe(WL,e)).map(de.fromDom).filter(Te).bind(n),J3=(e,n)=>AZ(e,ao(L.some,n)),jL=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=zf(e),c=j_(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},OZ=e=>{const n=e.split(/\s*,\s*/);return gn(n,o=>o.indexOf(" ")!==-1&&!(Uo(o,'"')||Uo(o,"'"))?`'${o}'`:o).join(",")},DZ=(e,n)=>{const o=jL(e,n);e.formatter.toggle("fontname",{value:OZ(o)}),e.nodeChanged()},RZ=e=>J3(e,n=>UL(e.getBody(),n.dom)).getOr(""),Kp=(e,n)=>{e.formatter.toggle("fontsize",{value:jL(e,n)}),e.nodeChanged()},MZ=e=>J3(e,n=>Mk(e.getBody(),n.dom)).getOr(""),GL=e=>J3(e,n=>{const o=de.fromDom(e.getBody()),r=RO(n,u=>qc(u,"line-height"),qe(Jo,o)),c=()=>{const u=parseFloat(Rr(n,"line-height")),f=parseFloat(Rr(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),NZ=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Nk=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{DZ(e,c)},FontSize:(o,r,c)=>{Kp(e,c)},LineHeight:(o,r,c)=>{NZ(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ee(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},PZ=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>RZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>MZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>GL(e))},BZ=e=>{Nk(e),PZ(e)},$Z=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},qL=e=>{e.editorCommands.addCommands({Indent:()=>{vV(e)},Outdent:()=>{ED(e)}}),e.editorCommands.addCommands({Outdent:()=>Th(e)},"state")},IZ=e=>{const n=(o,r,c)=>{const u=ee(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Ye(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},LZ=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return L.from(f).map(de.fromDom)},KL=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=ES(o,u);if(!f||!f.isContentEditable)return;const b=n?xc:_l,C=tl(e);LZ(e,c,f,u).each(E=>{const M=i9(e,u,E.dom,f,!1,C);b(E,de.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),Wp(e,"insertParagraph")})},FZ=e=>KL(e,!0),Q3=e=>KL(e,!1),HZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{FZ(e)},InsertNewBlockAfter:()=>{Q3(e)}})},VZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{oy(q5,e)},mceInsertNewLine:(n,o,r)=>{KE(e,r)},InsertLineBreak:(n,o,r)=>{oy(u3,e)}})},hc=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Ht(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ze);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},zZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{UA(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},UZ=e=>{VL(e),zL(e),$Z(e),hc(e),LG(e),IZ(e),qL(e),HZ(e),VZ(e),BZ(e),zZ(e)},eR=["toggleview"],tR=e=>Sn(eR,e.toLowerCase());class Pk{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():BR(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return ie(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!tR(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ie(r)?r(o):!1}queryCommandValue(n){if(!tR(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ie(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ft(n,(c,u)=>{ye(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Bb="data-mce-contenteditable",WZ=(e,n,o)=>{Vd(e,n)&&!o?$i(e,n):o&&Nu(e,n)},nR=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Bk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},ZZ=e=>{ye(Ir(e,'*[contenteditable="true"]'),n=>{Co(n,Bb,"true"),Bk(n,!1)})},jZ=e=>{ye(Ir(e,`*[${Bb}="true"]`),n=>{Cr(n,Bb),Bk(n,!0)})},GZ=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},qZ=e=>{e.selection.setRng(e.selection.getRng())},uy=(e,n)=>{const o=de.fromDom(e.getBody());WZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),GZ(e),e.readonly=!0,Bk(o,!1),ZZ(o)):(e.readonly=!1,e.hasEditableRoot()&&Bk(o,!0),jZ(o),nR(e,"StyleWithCSS",!1),nR(e,"enableInlineTableEditing",!1),nR(e,"enableObjectResizing",!1),fw(e)&&e.focus(),qZ(e),e.nodeChanged())},Ni=e=>e.readonly,YL=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Ni(e)&&ye(n,o=>{o.attr(Bb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Bb,n=>{Ni(e)&&ye(n,o=>{o.attr("contenteditable",o.attr(Bb))})}),e.serializer.addTempAttr(Bb)},KZ=e=>{e.serializer?YL(e):e.on("PreInit",()=>{YL(e)})},YZ=e=>e.type==="click",XZ=["copy"],JZ=e=>Sn(XZ,e.type),QZ=(e,n)=>Ii(n,"a",r=>Jo(r,de.fromDom(e.getBody()))).bind(r=>Dr(r,"href")),ej=(e,n)=>{if(YZ(n)&&!mt.metaKeyPressed(n)){const o=de.fromDom(n.target);QZ(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Or(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else JZ(n)&&e.dispatch(n.type,n)},tj=e=>{e.on("ShowCaret",n=>{Ni(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Ni(e)&&n.preventDefault()})},nj=ct.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class XL{static isNative(n){return!!nj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||We}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=_y(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=We),o){const u={func:o,removed:!1};c&&ct.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let E=this.bindings[C];E||(E=[],this.toggleEvent(C,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[C]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return ft(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=fo(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,ye(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ft(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const zS=e=>(e._eventDispatcher||(e._eventDispatcher=new XL({scope:e,toggleEvent:(n,o)=>{XL.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),oR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return _y(e.toLowerCase(),n??{},r);const c=zS(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return zS(this).on(e,n,o)},off(e,n){return zS(this).off(e,n)},once(e,n){return zS(this).once(e,n)},hasEventListeners(e){return zS(this).has(e)}},$k=hr.DOM;let $b;const Ik=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=xd(e);return o?(e.eventRoot||(e.eventRoot=$k.select(o)[0]),e.eventRoot):e.getBody()},oj=e=>!e.hidden&&!Ni(e),sj=(e,n,o)=>{oj(e)?e.dispatch(n,o):Ni(e)&&ej(e,o)},JL=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=Ik(e,n);if(xd(e)){if($b||($b={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||$b&&(ft($b,(c,u)=>{e.dom.unbind(Ik(e,u))}),$b=null)})),$b[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||$k.isChildOf(u,C))&&sj(f[b],n,c)}};$b[n]=r,$k.bind(o,n,r)}else{const r=c=>{sj(e,n,c)};$k.bind(o,n,r),e.delegates[n]=r}},QL={...oR,bindPendingEventDelegates(){const e=this;ct.each(e._pendingNativeEvents,n=>{JL(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?JL(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Ik(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ft(e.delegates,(r,c)=>{e.dom.unbind(Ik(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},rj=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:so(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},aj=e=>{const n=(()=>{switch(e){case"array":return tt;case"boolean":return Ot;case"function":return ie;case"number":return ns;case"object":return Ye;case"string":return ee;case"string[]":return rj;case"object[]":return o=>so(o,Ye);case"regexp":return o=>De(o,RegExp);default:return ut}})();return o=>sR(o,n,`The value must be a ${e}.`)},cj=e=>ee(e.processor),eF=(e,n)=>{const o=dr(n.message)?"":`. ${n.message}`;return e+o},tF=e=>e.valid,sR=(e,n,o="")=>{const r=n(e);return Ot(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},lj=(e,n,o)=>{if(!en(n)){const r=sR(n,o);if(tF(r))return r.value;console.error(eF(`Invalid default value passed for the "${e}" option`,r))}},ij=(e,n,o=n)=>{const r={},c={},u=(j,Q,q)=>{const te=sR(Q,q);return tF(te)?(c[j]=te.value,!0):(console.warn(eF(`Invalid value passed for the ${j} option`,te)),!1)},f=(j,Q)=>{const q=cj(Q)?aj(Q.processor):Q.processor,te=lj(j,Q.default,q);r[j]={...Q,default:te,processor:q},os(c,j).orThunk(()=>os(n,j)).each(we=>u(j,we,q))},b=j=>pn(r,j);return{register:f,isRegistered:b,get:j=>os(c,j).orThunk(()=>os(r,j).map(Q=>Q.default)).getOrUndefined(),set:(j,Q)=>{if(b(j)){const q=r[j];return q.immutable?(console.error(`"${j}" is an immutable option and cannot be updated`),!1):u(j,Q,q.processor)}else return console.warn(`"${j}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:j=>{const Q=b(j);return Q&&delete c[j],Q},isSet:j=>pn(c,j),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(j,Q)=>Ot(Q)||ns(Q)||ee(Q)||W(Q)||tt(Q)||Bn(Q)?Q:Object.prototype.toString.call(Q))))}catch(j){console.error(j)}}}},uj=["design","readonly"],nF=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&uy(e,u.editorReadOnly),n.set(r),yA(e,r)},dj=(e,n,o,r)=>{if(r!==o.get()){if(!pn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?nF(e,o,n,r):e.on("init",()=>nF(e,o,n,r))}},mj=(e,n,o)=>{if(Sn(uj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},fj=e=>{const n=Se("design"),o=Se({design:{activate:It,deactivate:It,editorReadOnly:!1},readonly:{activate:It,deactivate:It,editorReadOnly:!0}});return KZ(e),tj(e),{isReadOnly:()=>Ni(e),set:r=>dj(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(mj(o.get(),r,c))}}},rR=ct.each,Lk=ct.explode,gj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},oF=ct.makeMap("alt,ctrl,shift,meta,access"),hj=e=>e in oF,pj=e=>{const n={},o=vt.os.isMacOS()||vt.os.isiOS();rR(Lk(e.toLowerCase(),"+"),u=>{hj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=gj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in oF)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class sF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(rR(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return rR(Lk(ct.trim(n)),b=>{const C=u.createShortcut(b,o,f,c);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ct.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=ct.map(Lk(n,">"),pj);return u[u.length-1]=ct.extend(u[u.length-1],{func:r,scope:c||this.editor}),ct.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const bj=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},C=(M,N)=>(P,j)=>{M[P.toLowerCase()]={...j,type:N}},E=(M,N)=>r[M.toLowerCase()]=N;return{addButton:C(e,"button"),addGroupToolbarButton:C(e,"grouptoolbarbutton"),addToggleButton:C(e,"togglebutton"),addMenuButton:C(e,"menubutton"),addSplitButton:C(e,"splitbutton"),addMenuItem:C(n,"menuitem"),addNestedMenuItem:C(n,"nestedmenuitem"),addToggleMenuItem:C(n,"togglemenuitem"),addAutocompleter:C(o,"autocompleter"),addContextMenu:C(c,"contextmenu"),addContextToolbar:C(u,"contexttoolbar"),addContextForm:C(u,"contextform"),addSidebar:C(f,"sidebar"),addView:C(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},vj=()=>{const e=bj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Ib=hr.DOM,aR=ct.extend,yj=ct.each;class Fk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,aR(this,QL);const c=this;this.id=n,this.hidden=!1;const u=wZ(r.defaultOptions,o);this.options=ij(c,u,o),up(c);const f=this.options.get;f("deprecation_warnings")&&I7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const E=Sv(c);E&&(bd.ScriptLoader._setReferrerPolicy(E),hr.DOM.styleSheetLoader._setReferrerPolicy(E));const M=G2(c);_e(M)&&hr.DOM.styleSheetLoader._setContentCssCors(M),Ml.languageLoad=f("language_load"),Ml.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Vl(Ac(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Jg(c),this.hasVisual=$l(c),this.shortcuts=new sF(this),this.editorCommands=new Pk(this),UZ(this);const N=f("cache_suffix");N&&(vt.cacheSuffix=N.replace(/^[\?\&]+/,"")),this.ui={registry:vj(),styleSheetLoader:void 0,show:It,hide:It,setEnabled:It,isEnabled:ut},this.mode=fj(c),r.dispatch("SetupEditor",{editor:this});const P=kv(c);ie(P)&&P.call(c,c)}render(){BL(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Q1(this)}translate(n){return uc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(_e(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:ut,default:o})),!c.isSet(n)&&!en(o)?o:c.get(n)}hasPlugin(n,o){return Sn(R1(this),n)?o?B0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Ib.show(n.getContainer()),Ib.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Ib.hide(n.getContainer()),Ib.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Tr(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Tr(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Ib.getParent(o.id,"form");b&&yj(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return N4(this,n,o)}getContent(n){return oE(this,n)}insertContent(n,o){o&&(n=aR({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?N4(this,this.startContent,{format:"raw"}):N4(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Ib.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ib.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=z_(c);if(ie(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ye(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Vl(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){SZ(this,n)}setEditableRoot(n){gZ(this,n)}hasEditableRoot(){return $L(this)}remove(){H7(this)}destroy(n){V7(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const dy=hr.DOM,Hk=ct.each;let rF=!1,Vk,Xi=[];const zk=e=>{const n=e.type;Hk(Ah.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},cR=e=>{if(e!==rF){const n=hr.DOM;e?(n.bind(window,"resize",zk),n.bind(window,"scroll",zk)):(n.unbind(window,"resize",zk),n.unbind(window,"scroll",zk)),rF=e}},Cj=e=>{const n=Xi;return Xi=Bt(Xi,o=>e!==o),Ah.activeEditor===e&&(Ah.activeEditor=Xi.length>0?Xi[0]:null),Ah.focusedEditor===e&&(Ah.focusedEditor=null),n.length!==Xi.length},aF=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Cj(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},wj=document.compatMode!=="CSS1Compat",Ah={...oR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.1",releaseDate:"2024-07-03",i18n:uc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Vl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Vl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Vl(e.baseURL),e.suffix=o,zR(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ft(r,(c,u)=>{Ml.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=ct.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(M,N)=>M.inline&&N.tagName.toLowerCase()in r,u=M=>{let N=M.id;return N||(N=os(M,"name").filter(P=>!dy.get(P)).getOrThunk(dy.uniqueId),M.setAttribute("id",N)),N},f=M=>{const N=e[M];if(N)return N.apply(n,[])},b=M=>vt.browser.isIE()||vt.browser.isEdge()?(lE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):wj?(lE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(M.selector)?dy.select(M.selector):_e(M.target)?[M.target]:[];let C=M=>{o=M};const E=()=>{let M=0;const N=[];let P;const j=(Q,q,te)=>{const he=new Fk(Q,q,n);N.push(he),he.on("init",()=>{++M===P.length&&C(N)}),he.targetElm=he.targetElm||te,he.render()};dy.unbind(window,"ready",E),f("onpageload"),P=Hn(b(e)),ct.each(P,Q=>{aF(n.get(Q.id))}),P=ct.grep(P,Q=>!n.get(Q.id)),P.length===0?C([]):Hk(P,Q=>{c(e,Q)?lE("Could not initialize inline editor on invalid inline target element",Q):j(u(Q),e,Q)})};return dy.bind(window,"ready",E),new Promise(M=>{o?M(o):C=N=>{M(N)}})},get(e){return arguments.length===0?Xi.slice(0):ee(e)?ms(Xi,n=>n.id===e).getOr(null):ns(e)&&Xi[e]?Xi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Xi.push(e),cR(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Vk||(Vk=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Vk))),e},createEditor(e,n){return this.add(new Fk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Xi.length-1;r>=0;r--)n.remove(Xi[r]);return}if(ee(e)){Hk(dy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,W(n.get(o.id))?null:(Cj(o)&&n.dispatch("RemoveEditor",{editor:o}),Xi.length===0&&window.removeEventListener("beforeunload",Vk),o.remove(),cR(Xi.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Ye(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Fk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Hk(Xi,e=>{e.save()})},addI18n:(e,n)=>{uc.add(e,n)},translate:e=>uc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Vl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Vl(this.baseURL)}};Ah.setup();const Sj=(()=>{const e=ic(),n=u=>({items:u,types:fs(u),getType:f=>os(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),cF=Math.min,my=Math.max,Uk=Math.round,lF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=C),E[1]==="r"&&(r+=b),E[0]==="c"&&(c+=Uk(C/2)),E[1]==="c"&&(r+=Uk(b/2)),E[3]==="b"&&(c-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=Uk(f/2)),E[4]==="c"&&(r-=Uk(u/2)),fy(r,c,u,f)},lR=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=lF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},iR=(e,n,o)=>fy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),xj=(e,n)=>{const o=my(e.x,n.x),r=my(e.y,n.y),c=cF(e.x+e.w,n.x+n.w),u=cF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:fy(o,r,c-o,u-r)},iF=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,E=my(0,n.x-r),M=my(0,n.y-c),N=my(0,u-b),P=my(0,f-C);return r+=E,c+=M,o&&(u+=E,f+=M,r-=N,c-=P),u-=N,f-=P,fy(r,c,u-r,f-c)},fy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Tj={inflate:iR,relativePosition:lF,findBestRelativePosition:lR,intersect:xj,clamp:iF,create:fy,fromClientRect:e=>fy(e.left,e.top,e.width,e.height)},Ej=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...M)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,M))},f=u(e),b=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},kj=(()=>{const e={},n={},o={};return{load:(C,E)=>{const M=`Script at URL "${E}" failed to load`,N=`Script at URL "${E}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const P=new Promise((j,Q)=>{const q=Ej(j,Q);n[C]=q.resolve,bd.ScriptLoader.loadScript(E).then(()=>q.start(N),()=>q.reject(M))});return e[C]=P,P}},add:(C,E)=>{n[C]!==void 0&&(n[C](E),delete n[C]),e[C]=Promise.resolve(E),o[C]=E},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),_j=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let US;try{const e="__storage_test__";US=window.localStorage,US.setItem(e,e),US.removeItem(e)}catch{US=_j()}var Aj=US;const Oj={geom:{Rect:Tj},util:{Delay:qu,Tools:ct,VK:mt,URI:Vl,EventDispatcher:XL,Observable:oR,I18n:uc,LocalStorage:Aj,ImageUploader:H4},dom:{EventUtils:Of,TreeWalker:cc,TextSeeker:Mf,DOMUtils:hr,ScriptLoader:bd,RangeUtils:rt,Serializer:R4,StyleSheetLoader:Ao,ControlSelection:G1,BookmarkManager:Yf,Selection:WP,Event:Of.Event},html:{Styles:ky,Entities:gd,Node:Di,Schema:Xd,DomParser:og,Writer:rM,Serializer:fh},Env:vt,AddOnManager:Ml,Annotator:cm,Formatter:uB,UndoManager:W4,EditorCommands:Pk,WindowManager:$4,NotificationManager:tB,EditorObservable:QL,Shortcuts:sF,Editor:Fk,FocusManager:$R,EditorManager:Ah,DOM:hr.DOM,ScriptLoader:bd.ScriptLoader,PluginManager:B0,ThemeManager:Jm,ModelManager:P0,IconManager:N0,Resource:kj,FakeClipboard:Sj,trim:ct.trim,isArray:ct.isArray,is:ct.is,toArray:ct.toArray,makeMap:ct.makeMap,each:ct.each,map:ct.map,grep:ct.grep,inArray:ct.inArray,extend:ct.extend,walk:ct.walk,resolve:ct.resolve,explode:ct.explode,_addCacheSuffix:ct._addCacheSuffix},Wk=ct.extend(Ah,Oj),Dj=e=>{try{it.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Wk),Dj(Wk)})()})(uK);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){var it=tinymce.util.Tools.resolve("tinymce.ModelManager");const Pn=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},Xt=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&Pn(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},an=i=>m=>Xt(m)===i,bt=i=>m=>typeof m===i,jt=i=>m=>i===m,zn=an("string"),Mt=an("object"),Gt=an("array"),Xn=jt(null),Cn=bt("boolean"),qt=jt(void 0),En=i=>i==null,At=i=>!En(i),Tt=bt("function"),Xe=bt("number"),nt=()=>{},Un=(i,m)=>(...p)=>i(m.apply(null,p)),De=(i,m)=>p=>i(m(p)),ee=i=>()=>i,Ye=i=>i,Bn=(i,m)=>i===m;function tt(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const W=i=>m=>!i(m),Ot=i=>()=>{throw new Error(i)},en=i=>i(),wn=ee(!1),_e=ee(!0);class ie{constructor(m,p){this.tag=m,this.value=p}static some(m){return new ie(!0,m)}static none(){return ie.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ie.some(m(this.value)):ie.none()}bind(m){return this.tag?m(this.value):ie.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ie.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return At(m)?ie.some(m):ie.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ie.singletonNone=new ie(!1);const ns=Array.prototype.slice,so=Array.prototype.indexOf,It=Array.prototype.push,A=(i,m)=>so.call(i,m),ao=(i,m)=>A(i,m)>-1,st=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return!0}return!1},Po=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},nn=(i,m)=>{const p=i.length,v=new Array(p);for(let T=0;T<p;T++){const D=i[T];v[T]=m(D,T)}return v},qe=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];m(T,p)}},bo=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},zs=(i,m)=>{const p=[],v=[];for(let T=0,D=i.length;T<D;T++){const I=i[T];(m(I,T)?p:v).push(I)}return{pass:p,fail:v}},lo=(i,m)=>{const p=[];for(let v=0,T=i.length;v<T;v++){const D=i[v];m(D,v)&&p.push(D)}return p},Js=(i,m,p)=>(bo(i,(v,T)=>{p=m(p,v,T)}),p),We=(i,m,p)=>(qe(i,(v,T)=>{p=m(p,v,T)}),p),ut=(i,m,p)=>{for(let v=0,T=i.length;v<T;v++){const D=i[v];if(m(D,v))return ie.some(D);if(p(D,v))break}return ie.none()},L=(i,m)=>ut(i,m,wn),Jr=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return ie.some(p)}return ie.none()},uo=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!Gt(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);It.apply(m,i[p])}return m},cs=(i,m)=>uo(nn(i,m)),zo=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const T=i[p];if(m(T,p)!==!0)return!1}return!0},Nc=i=>{const m=ns.call(i,0);return m.reverse(),m},Sn=(i,m)=>{const p={};for(let v=0,T=i.length;v<T;v++){const D=i[v];p[String(D)]=m(D,v)}return p},Ro=(i,m)=>{const p=ns.call(i,0);return p.sort(m),p},gn=(i,m)=>m>=0&&m<i.length?ie.some(i[m]):ie.none(),ye=i=>gn(i,0),Ct=i=>gn(i,i.length-1),fo=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return ie.none()},Bt=Object.keys,Is=Object.hasOwnProperty,Bo=(i,m)=>{const p=Bt(i);for(let v=0,T=p.length;v<T;v++){const D=p[v],I=i[D];m(I,D)}},zr=(i,m)=>ms(i,(p,v)=>({k:v,v:m(p,v)})),ms=(i,m)=>{const p={};return Bo(i,(v,T)=>{const D=m(v,T);p[D.k]=D.v}),p},Us=i=>(m,p)=>{i[p]=m},tc=(i,m,p,v)=>{Bo(i,(T,D)=>{(m(T,D)?p:v)(T,D)})},Ps=(i,m)=>{const p={};return tc(i,m,Us(p),nt),p},ls=(i,m)=>{const p=[];return Bo(i,(v,T)=>{p.push(m(v,T))}),p},qo=i=>ls(i,Ye),Qr=(i,m)=>$e(i,m)?ie.from(i[m]):ie.none(),$e=(i,m)=>Is.call(i,m),Je=(i,m)=>$e(i,m)&&i[m]!==void 0&&i[m]!==null,on=i=>{for(const m in i)if(Is.call(i,m))return!1;return!0},Ft=typeof window<"u"?window:Function("return this;")(),Jn=(i,m)=>{let p=m??Ft;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},Ko=(i,m)=>{const p=i.split(".");return Jn(p,m)},wr=(i,m)=>Ko(i,m),Hn=(i,m)=>{const p=wr(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},fs=Object.getPrototypeOf,ur=i=>Hn("HTMLElement",i),ft=i=>{const m=Ko("ownerDocument.defaultView",i);return Mt(i)&&(ur(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(fs(i).constructor.name))},yo=8,Ar=9,la=11,ia=1,ea=3,Yo=i=>i.dom.nodeName.toLowerCase(),va=i=>i.dom.nodeType,Wa=i=>m=>va(m)===i,os=i=>va(i)===yo||Yo(i)==="#comment",pn=i=>pr(i)&&ft(i.dom),pr=Wa(ia),Za=Wa(ea),jl=Wa(Ar),Cl=Wa(la),is=i=>m=>pr(m)&&Yo(m)===i,nr=(i,m,p)=>{if(zn(p)||Cn(p)||Xe(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},Ws=(i,m,p)=>{nr(i.dom,m,p)},Na=(i,m)=>{const p=i.dom;Bo(m,(v,T)=>{nr(p,T,v)})},cl=(i,m)=>{Bo(m,(p,v)=>{p.fold(()=>{re(i,v)},T=>{nr(i.dom,v,T)})})},Br=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},ue=(i,m)=>ie.from(Br(i,m)),re=(i,m)=>{i.dom.removeAttribute(m)},Oe=i=>We(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),He=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return Qn(v.childNodes[0])},ln=(i,m)=>{const v=(m||document).createElement(i);return Qn(v)},xn=(i,m)=>{const v=(m||document).createTextNode(i);return Qn(v)},Qn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},pe={fromHtml:He,fromTag:ln,fromText:xn,fromDom:Qn,fromPoint:(i,m,p)=>ie.from(i.dom.elementFromPoint(m,p)).map(Qn)},Vn=(i,m)=>{const p=i.dom;if(p.nodeType!==ia)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Zs=i=>i.nodeType!==ia&&i.nodeType!==Ar&&i.nodeType!==la||i.childElementCount===0,br=(i,m)=>{const p=m===void 0?document:m.dom;return Zs(p)?[]:nn(p.querySelectorAll(i),pe.fromDom)},Ur=(i,m)=>{const p=m===void 0?document:m.dom;return Zs(p)?ie.none():ie.from(p.querySelector(i)).map(pe.fromDom)},Xo=(i,m)=>i.dom===m.dom,wl=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},nc=Vn,ta=i=>pe.fromDom(i.dom.ownerDocument),Or=i=>jl(i)?i:ta(i),$o=i=>pe.fromDom(Or(i).dom.documentElement),Uo=i=>pe.fromDom(Or(i).dom.defaultView),vr=i=>ie.from(i.dom.parentNode).map(pe.fromDom),na=i=>ie.from(i.dom.parentElement).map(pe.fromDom),bc=(i,m)=>{const p=Tt(m)?m:wn;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,I=pe.fromDom(D);if(T.push(I),p(I)===!0)break;v=D}return T},Gl=i=>ie.from(i.dom.previousSibling).map(pe.fromDom),Zc=i=>ie.from(i.dom.nextSibling).map(pe.fromDom),Fo=i=>nn(i.dom.childNodes,pe.fromDom),dr=(i,m)=>{const p=i.dom.childNodes;return ie.from(p[m]).map(pe.fromDom)},ya=i=>dr(i,0),Sl=(i,m)=>{vr(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},ua=(i,m)=>{Zc(i).fold(()=>{vr(i).each(T=>{hs(T,m)})},v=>{Sl(v,m)})},Os=(i,m)=>{ya(i).fold(()=>{hs(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},hs=(i,m)=>{i.dom.appendChild(m.dom)},Pa=(i,m,p)=>{dr(i,p).fold(()=>{hs(i,m)},v=>{Sl(v,m)})},ql=(i,m)=>{Sl(i,m),hs(m,i)},jo=(i,m)=>{qe(m,(p,v)=>{const T=v===0?i:m[v-1];ua(T,p)})},Wr=(i,m)=>{qe(m,p=>{hs(i,p)})},Ba=i=>{i.dom.textContent="",qe(Fo(i),m=>{yr(m)})},yr=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},oc=i=>{const m=Fo(i);m.length>0&&jo(i,m),yr(i)},Pc=(i,m)=>pe.fromDom(i.dom.cloneNode(m)),Ca=i=>Pc(i,!1),sc=i=>Pc(i,!0),vc=(i,m)=>{const p=pe.fromTag(m),v=Oe(i);return Na(p,v),p},Pi=(i,m)=>{const p=vc(i,m),v=Fo(sc(i));return Wr(p,v),p},ja=(i,m)=>{const p=vc(i,m);ua(i,p);const v=Fo(i);return Wr(p,v),yr(i),p},ll=["tfoot","thead","tbody","colgroup"],da=i=>ao(ll,i),yc=(i,m)=>({rows:i,columns:m}),xl=(i,m)=>({row:i,column:m}),Kl=(i,m,p)=>({element:i,rowspan:m,colspan:p}),Ou=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),Bi=(i,m,p,v,T,D)=>({element:i,rowspan:m,colspan:p,row:v,column:T,isLocked:D}),Ga=(i,m,p)=>({element:i,cells:m,section:p}),su=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),U=(i,m,p)=>({element:i,isNew:m,isLocked:p}),ae=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),ve=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),Ue=(i,m,p)=>({element:i,colspan:m,column:p}),dt=(i,m)=>({element:i,columns:m}),sn=i=>Cl(i)&&At(i.dom.host),vo=Tt(Element.prototype.attachShadow)&&Tt(Node.prototype.getRootNode),ko=ee(vo),oo=vo?i=>pe.fromDom(i.dom.getRootNode()):Or,us=i=>{const m=oo(i);return sn(m)?ie.some(m):ie.none()},js=i=>pe.fromDom(i.dom.host),vt=i=>{if(ko()&&At(i.target)){const m=pe.fromDom(i.target);if(pr(m)&&Du(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return ye(p)}}return ie.from(i.target)},Du=i=>At(i.dom.shadowRoot),bs=i=>{const m=Za(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return us(pe.fromDom(m)).fold(()=>p.body.contains(m),De(bs,js))},$=()=>X(pe.fromDom(document)),X=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return pe.fromDom(m)},oe=(i,m,p)=>lo(bc(i,p),m),Re=(i,m)=>lo(Fo(i),m),Pt=(i,m)=>{let p=[];return qe(Fo(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Pt(v,m))}),p},io=(i,m,p)=>oe(i,v=>Vn(v,m),p),Yt=(i,m)=>Re(i,p=>Vn(p,m)),Gs=(i,m)=>br(m,i);var ct=(i,m,p,v,T)=>i(p,v)?ie.some(p):Tt(T)&&T(p)?ie.none():m(p,v,T);const xs=(i,m,p)=>{let v=i.dom;const T=Tt(p)?p:wn;for(;v.parentNode;){v=v.parentNode;const D=pe.fromDom(v);if(m(D))return ie.some(D);if(T(D))break}return ie.none()},qa=(i,m,p)=>ct((T,D)=>D(T),xs,i,m,p),$s=(i,m)=>{const p=T=>m(pe.fromDom(T));return L(i.dom.childNodes,p).map(pe.fromDom)},$r=(i,m)=>{const p=v=>{for(let T=0;T<v.childNodes.length;T++){const D=pe.fromDom(v.childNodes[T]);if(m(D))return ie.some(D);const I=p(v.childNodes[T]);if(I.isSome())return I}return ie.none()};return p(i.dom)},il=(i,m,p)=>xs(i,v=>Vn(v,m),p),_o=(i,m)=>$s(i,p=>Vn(p,m)),Ka=(i,m)=>Ur(m,i),qs=(i,m,p)=>ct((T,D)=>Vn(T,D),il,i,m,p),Yl=(i,m,p=Bn)=>i.exists(v=>p(v,m)),Qs=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},Ru=(i,m)=>i!=null?m(i):ie.none(),xm=(i,m)=>i?ie.some(m):ie.none(),yg=(i,m)=>i.substring(m),or=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,Tl=(i,m)=>wa(i,m)?yg(i,m.length):i,ma=(i,m,p=0,v)=>{const T=i.indexOf(m,p);return T!==-1?qt(v)?!0:T+m.length<=v:!1},wa=(i,m)=>or(i,m,0),Ya=(i,m)=>or(i,m,i.length-m.length),To=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),rc=i=>i.length>0,$a=i=>{const m=parseFloat(i);return isNaN(m)?ie.none():ie.some(m)},K=i=>i.style!==void 0&&Tt(i.style.getPropertyValue),se=(i,m,p)=>{if(!zn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);K(i)&&i.style.setProperty(m,p)},Te=(i,m)=>{K(i)&&i.style.removeProperty(m)},Me=(i,m,p)=>{const v=i.dom;se(v,m,p)},un=(i,m)=>{const p=i.dom;Bo(m,(v,T)=>{se(p,T,v)})},go=(i,m)=>{const p=i.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!bs(i)?Ls(p,m):T},Ls=(i,m)=>K(i)?i.style.getPropertyValue(m):"",fa=(i,m)=>{const p=i.dom,v=Ls(p,m);return ie.from(v).filter(T=>T.length>0)},Co=(i,m)=>{const p=i.dom;Te(p,m),Yl(ue(i,"style").map(To),"")&&re(i,"style")},Zr=(i,m)=>{const p=i.dom,v=m.dom;K(p)&&K(v)&&(v.style.cssText=p.style.cssText)},Ks=(i,m,p=0)=>ue(i,m).map(v=>parseInt(v,10)).getOr(p),Dr=(i,m)=>Ks(i,m,1),Sr=i=>is("col")(i)?Ks(i,"span",1)>1:Dr(i,"colspan")>1,Cr=i=>Dr(i,"rowspan")>1,Bc=(i,m)=>parseInt(go(i,m),10),Xl=ee(10),Sa=ee(10),$c=(i,m)=>ui(i,m,_e),ui=(i,m,p)=>cs(Fo(i),v=>Vn(v,m)?p(v)?[v]:[]:ui(v,m,p)),di=(i,m,p=wn)=>{if(p(m))return ie.none();if(ao(i,Yo(m)))return ie.some(m);const v=T=>Vn(T,"table")||p(T);return il(m,i.join(","),v)},af=(i,m)=>di(["td","th"],i,m),Mu=i=>$c(i,"th,td"),Jl=i=>Vn(i,"colgroup")?Yt(i,"col"):cs(Hd(i),m=>Yt(m,"col")),Cc=(i,m)=>qs(i,"table",m),Nu=i=>$c(i,"tr"),Hd=i=>Cc(i).fold(ee([]),m=>Yt(m,"colgroup")),$i=(i,m)=>nn(i,p=>{if(Yo(p)==="colgroup"){const v=nn(Jl(p),T=>{const D=Ks(T,"span",1);return Kl(T,1,D)});return Ga(p,v,"colgroup")}else{const v=nn(Mu(p),T=>{const D=Ks(T,"rowspan",1),I=Ks(T,"colspan",1);return Kl(T,D,I)});return Ga(p,v,m(p))}}),Cg=i=>vr(i).map(m=>{const p=Yo(m);return da(p)?p:"tbody"}).getOr("tbody"),Vd=i=>{const m=Nu(i),v=[...Hd(i),...m];return $i(v,Cg)},wg=(i,m)=>$i(i,()=>m),rd=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},Sg=(i,m,p,v)=>{const T=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!T,I=i.isiOS()||i.isAndroid(),Z=I||v("(pointer:coarse)"),J=T||!D&&I&&v("(min-device-width:768px)"),me=D||I&&!J,ke=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,lt=!me&&!J&&!ke;return{isiPad:ee(T),isiPhone:ee(D),isTablet:ee(J),isPhone:ee(me),isTouch:ee(Z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:ee(ke),isDesktop:ee(lt)}},ad=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},Qp=(i,m)=>{const p=ad(i,m);if(!p)return{major:0,minor:0};const v=T=>Number(m.replace(p,"$"+T));return jc(v(1),v(2))},de=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?Tm():Qp(i,p)},Tm=()=>jc(0,0),jc=(i,m)=>({major:i,minor:m}),ru={nu:jc,detect:de,unknown:Tm},xg=(i,m)=>fo(m.brands,p=>{const v=p.brand.toLowerCase();return L(i,T=>{var D;return v===((D=T.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(T=>({current:T.name,version:ru.nu(parseInt(p.version,10),0)}))}),Dh=(i,m)=>{const p=String(m).toLowerCase();return L(i,v=>v.search(p))},Jo=(i,m)=>Dh(i,m).map(p=>{const v=ru.detect(p.versionRegexes,m);return{current:p.name,version:v}}),wc=(i,m)=>Dh(i,m).map(p=>{const v=ru.detect(p.versionRegexes,m);return{current:p.name,version:v}}),ul=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xa=i=>m=>ma(m,i),cd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>ma(i,"edge/")&&ma(i,"chrome")&&ma(i,"safari")&&ma(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ul],search:i=>ma(i,"chrome")&&!ma(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>ma(i,"msie")||ma(i,"trident")},{name:"Opera",versionRegexes:[ul,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xa("firefox")},{name:"Safari",versionRegexes:[ul,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(ma(i,"safari")||ma(i,"mobile/"))&&ma(i,"applewebkit")}],mi=[{name:"Windows",search:xa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>ma(i,"iphone")||ma(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:xa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xa("linux"),versionRegexes:[]},{name:"Solaris",search:xa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ac={browsers:ee(cd),oses:ee(mi)},fi="Edge",Tg="Chromium",Rh="IE",El="Opera",gi="Firefox",cf="Safari",Sc=()=>Ta({current:void 0,version:ru.unknown()}),Ta=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isEdge:v(fi),isChromium:v(Tg),isIE:v(Rh),isOpera:v(El),isFirefox:v(gi),isSafari:v(cf)}},Pu={unknown:Sc,nu:Ta,edge:ee(fi),chromium:ee(Tg),ie:ee(Rh),opera:ee(El),firefox:ee(gi),safari:ee(cf)},zd="Windows",Ql="iOS",Xa="Android",lf="Linux",uf="macOS",df="Solaris",Em="FreeBSD",kl="ChromeOS",mf=()=>Mh({current:void 0,version:ru.unknown()}),Mh=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isWindows:v(zd),isiOS:v(Ql),isAndroid:v(Xa),isMacOS:v(uf),isLinux:v(lf),isSolaris:v(df),isFreeBSD:v(Em),isChromeOS:v(kl)}},e1={unknown:mf,nu:Mh,windows:ee(zd),ios:ee(Ql),android:ee(Xa),linux:ee(lf),macos:ee(uf),solaris:ee(df),freebsd:ee(Em),chromeos:ee(kl)},ff={detect:(i,m,p)=>{const v=ac.browsers(),T=ac.oses(),D=m.bind(J=>xg(v,J)).orThunk(()=>Jo(v,i)).fold(Pu.unknown,Pu.nu),I=wc(T,i).fold(e1.unknown,e1.nu),Z=Sg(I,D,i,p);return{browser:D,os:I,deviceType:Z}}},km=i=>window.matchMedia(i).matches;let au=rd(()=>ff.detect(navigator.userAgent,ie.from(navigator.userAgentData),km));const Eg=()=>au(),Ys=(i,m)=>{const p=(Z,J)=>{if(!Xe(J)&&!J.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+J);const me=Z.dom;K(me)&&(me.style[i]=J+"px")},v=Z=>{const J=m(Z);if(J<=0||J===null){const me=go(Z,i);return parseFloat(me)||0}return J},T=v,D=(Z,J)=>We(J,(me,ke)=>{const lt=go(Z,ke),Lt=lt===void 0?0:parseInt(lt,10);return isNaN(Lt)?me:me+Lt},0);return{set:p,get:v,getOuter:T,aggregate:D,max:(Z,J,me)=>{const ke=D(Z,me);return J>ke?J-ke:0}}},xr=(i,m)=>$a(i).getOr(m),Gc=(i,m,p)=>xr(go(i,m),p),kg=(i,m,p,v)=>{const T=Gc(i,`padding-${p}`,0),D=Gc(i,`padding-${v}`,0),I=Gc(i,`border-${p}-width`,0),Z=Gc(i,`border-${v}-width`,0);return m-T-D-I-Z},_g=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:kg(i,v,"left","right")},oa=i=>Gc(i,"height",i.dom.offsetHeight),dn=i=>Gc(i,"width",i.dom.offsetWidth),Ii=i=>_g(i,"content-box"),Ph=Ys("width",i=>i.dom.offsetWidth),ga=i=>Ph.get(i),Ts=i=>Ph.getOuter(i),ld=Ii,Ag=dn,gf=(i,m,p)=>{const v=i.cells,T=v.slice(0,m),D=v.slice(m),I=T.concat(p).concat(D);return Rr(i,I)},hf=(i,m,p)=>gf(i,m,[p]),eo=(i,m,p)=>{const v=i.cells;v[m]=p},Rr=(i,m)=>ae(i.element,m,i.section,i.isNew),Ud=(i,m)=>{const p=i.cells,v=nn(p,m);return ae(i.element,v,i.section,i.isNew)},qc=(i,m)=>i.cells[m],Ic=(i,m)=>qc(i,m).element,Kc=i=>i.cells.length,sa=i=>{const m=zs(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},xc=(i,m,p)=>{const v=nn(i.cells,p);return ae(m(i.element),v,i.section,!0)},_l="data-snooker-locked-cols",_m=i=>ue(i,_l).bind(m=>ie.from(m.match(/\d+/g))).map(m=>Sn(m,_e)),mr=i=>{const m=We(sa(i).rows,(v,T)=>(qe(T.cells,(D,I)=>{D.isLocked&&(v[I]=!0)}),v),{}),p=ls(m,(v,T)=>parseInt(T,10));return Ro(p)},Og=(i,m)=>i+","+m,Hr=(i,m,p)=>ie.from(i.access[Og(m,p)]),Bu=(i,m,p)=>{const v=hi(i,T=>p(m,T.element));return v.length>0?ie.some(v[0]):ie.none()},hi=(i,m)=>{const p=cs(i.all,v=>v.cells);return lo(p,m)},Ds=i=>{const m={};let p=0;return qe(i.cells,v=>{const T=v.colspan;Po(T,D=>{const I=p+D;m[I]=Ue(v.element,T,I)}),p+=T}),m},pi=i=>{const m={},p=[],T=ye(i).map(Dt=>Dt.element).bind(Cc).bind(_m).getOr({});let D=0,I=0,Z=0;const{pass:J,fail:me}=zs(i,Dt=>Dt.section==="colgroup");qe(me,Dt=>{const St=[];qe(Dt.cells,rn=>{let rt=0;for(;m[Og(Z,rt)]!==void 0;)rt++;const Et=Je(T,rt.toString()),Mn=Bi(rn.element,rn.rowspan,rn.colspan,Z,rt,Et);for(let Nt=0;Nt<rn.colspan;Nt++)for(let ds=0;ds<rn.rowspan;ds++){const Ms=Z+ds,Es=rt+Nt,Dc=Og(Ms,Es);m[Dc]=Mn,I=Math.max(I,Es+1)}St.push(Mn)}),D++,p.push(Ga(Dt.element,St,Dt.section)),Z++});const{columns:ke,colgroups:lt}=Ct(J).map(Dt=>{const St=Ds(Dt);return{colgroups:[dt(Dt.element,qo(St))],columns:St}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:yc(D,I),access:m,all:p,columns:ke,colgroups:lt}},wo={fromTable:i=>{const m=Vd(i);return pi(m)},generate:pi,getAt:Hr,findItem:Bu,filterItems:hi,justCells:i=>cs(i.all,m=>m.cells),justColumns:i=>qo(i.columns),hasColumns:i=>Bt(i.columns).length>0,getColumnAt:(i,m)=>ie.from(i.columns[m])},id=(i,m=_e)=>{const p=i.grid,v=Po(p.columns,Ye),T=Po(p.rows,Ye);return nn(v,D=>Am(()=>cs(T,me=>wo.getAt(i,me,D).filter(ke=>ke.column===D).toArray()),me=>me.colspan===1&&m(me.element),()=>wo.getAt(i,0,D)))},Am=(i,m,p)=>{const v=i();return L(v,m).orThunk(()=>ie.from(v[0]).orThunk(p)).map(I=>I.element)},pf=i=>{const m=i.grid,p=Po(m.rows,Ye),v=Po(m.columns,Ye);return nn(p,T=>Am(()=>cs(v,J=>wo.getAt(i,T,J).filter(me=>me.row===T).fold(ee([]),me=>[me])),J=>J.rowspan===1,()=>wo.getAt(i,T,0)))},Bh=(i,m)=>{if(m<0||m>=i.length-1)return ie.none();const p=i[m].fold(()=>{const T=Nc(i.slice(0,m));return fo(T,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},T=>ie.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return fo(T,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},T=>ie.some({value:T,delta:1}));return p.bind(T=>v.map(D=>{const I=D.delta+T.delta;return Math.abs(D.value-T.value)/I}))},bf=(i,m)=>p=>$h(p)==="rtl"?m:i,$h=i=>go(i,"direction")==="rtl"?"rtl":"ltr",x=Ys("height",i=>{const m=i.dom;return bs(i)?m.getBoundingClientRect().height:m.offsetHeight}),R=i=>x.get(i),V=i=>x.getOuter(i),ce=oa,ge=(i,m)=>({left:i,top:m,translate:(v,T)=>ge(i+v,m+T)}),Qe=ge,An=i=>{const m=i.getBoundingClientRect();return Qe(m.left,m.top)},Kn=(i,m)=>i!==void 0?i:m!==void 0?m:0,jn=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,T=m.documentElement;if(p===i.dom)return Qe(p.offsetLeft,p.offsetTop);const D=Kn(v==null?void 0:v.pageYOffset,T.scrollTop),I=Kn(v==null?void 0:v.pageXOffset,T.scrollLeft),Z=Kn(T.clientTop,p.clientTop),J=Kn(T.clientLeft,p.clientLeft);return _n(i).translate(I-J,D-Z)},_n=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?Qe(v.offsetLeft,v.offsetTop):bs(i)?An(m):Qe(0,0)},sr=(i,m)=>({row:i,y:m}),Mr=(i,m)=>({col:i,x:m}),Yc=i=>jn(i).left+Ts(i),Ir=i=>jn(i).left,Ih=(i,m)=>Mr(i,Ir(m)),Ub=(i,m)=>Mr(i,Yc(m)),t1=i=>jn(i).top,cc=(i,m)=>sr(i,t1(m)),Lh=(i,m)=>sr(i,t1(m)+V(m)),Ea=(i,m,p)=>{if(p.length===0)return[];const v=nn(p.slice(1),(D,I)=>D.map(Z=>i(I,Z))),T=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([T])},n1=i=>-i,lc={delta:Ye,positions:i=>Ea(cc,Lh,i),edge:t1},vf=bf({delta:Ye,edge:Ir,positions:i=>Ea(Ih,Ub,i)},{delta:n1,edge:Yc,positions:i=>Ea(Ub,Ih,i)}),yf={delta:(i,m)=>vf(m).delta(i,m),positions:(i,m)=>vf(m).positions(i,m),edge:i=>vf(i).edge(i)},Wb={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},o1=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",T=Z=>`(?:${Z})?`,I=`[+-]?(?:${["Infinity",i+v+T(i)+T(p),v+i+T(p),i+T(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),Li=(i,m)=>st(m,p=>st(Wb[p],v=>i===v)),Iu=(i,m)=>ie.from(o1.exec(i)).bind(v=>{const T=Number(v[1]),D=v[2];return Li(D,m)?ie.some({value:T,unit:D}):ie.none()}),Zd=/(\d+(\.\d+)?)%/,Ht=/(\d+(\.\d+)?)px|em/,ei=is("col"),s1=is("tr"),Om=(i,m,p)=>{const v=na(i).getOrThunk(()=>X(ta(i)));return m(i)/p(v)*100},Fi=(i,m)=>{Me(i,"width",m+"px")},Dg=(i,m)=>{Me(i,"width",m+"%")},jd=(i,m)=>{Me(i,"height",m+"px")},Dm=i=>{Co(i,"height")},Rg=i=>ce(i)+"px",lu=(i,m,p,v)=>{const T=Cc(i).map(D=>{const I=p(D);return Math.floor(m/100*I)}).getOr(m);return v(i,T),T},Zb=(i,m,p,v)=>{const T=parseFloat(i);return Ya(i,"%")&&Yo(m)!=="table"?lu(m,T,p,v):T},Tr=i=>{const m=Rg(i);return m?Zb(m,i,R,jd):R(i)},at=(i,m,p)=>{const v=p(i),T=Dr(i,m);return v/T},Xc=(i,m)=>fa(i,m).orThunk(()=>ue(i,m).map(p=>p+"px")),iu=i=>Xc(i,"width"),Ia=i=>Xc(i,"height"),Cf=i=>Om(i,ga,ld),ka=i=>ei(i)?ga(i):Ag(i),ss=i=>s1(i)?R(i):at(i,"rowspan",Tr),Fh=i=>iu(i).bind(p=>Iu(p,["fixed","relative","empty"])),Ze=(i,m,p)=>{Me(i,"width",m+p)},Qo=i=>ga(i)+"px",Hh=i=>R(i)+"px",ha=i=>Om(i,ga,ld)+"%",Tc=i=>iu(i).exists(m=>Zd.test(m)),py=i=>iu(i).exists(m=>Ht.test(m)),ti=i=>iu(i).isNone(),by=ee(Zd),ud=is("col"),jb=i=>iu(i).getOrThunk(()=>ka(i)+"px"),ni=i=>Ia(i).getOrThunk(()=>ss(i)+"px"),es=i=>nn(wo.justColumns(i),m=>ie.from(m.element)),Lu=i=>{const m=Eg().browser,p=m.isChromium()||m.isFirefox();return ud(i)?p:!0},Rm=(i,m,p,v,T,D)=>i.filter(v).fold(()=>D(Bh(p,m)),I=>T(I)),pa=(i,m,p,v)=>{const T=id(i),D=wo.hasColumns(i)?es(i):T,I=[ie.some(yf.edge(m))].concat(nn(yf.positions(T,m),J=>J.map(me=>me.x))),Z=W(Sr);return nn(D,(J,me)=>Rm(J,me,I,Z,ke=>{if(Lu(ke))return p(ke);{const lt=Ru(T[me],Ye);return Rm(lt,me,I,Z,Lt=>v(ie.some(ga(Lt))),v)}},v))},r1=i=>i.map(m=>m+"px").getOr(""),Fu=(i,m)=>pa(i,m,jb,r1),uu=(i,m,p)=>pa(i,m,Cf,v=>v.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),Fs=(i,m,p)=>pa(i,m,ka,v=>v.getOrThunk(p.minCellWidth)),wf=(i,m,p,v)=>{const T=pf(i),D=nn(i.all,Z=>ie.some(Z.element)),I=[ie.some(lc.edge(m))].concat(nn(lc.positions(T,m),Z=>Z.map(J=>J.y)));return nn(D,(Z,J)=>Rm(Z,J,I,_e,p,v))},Se=(i,m)=>wf(i,m,ss,p=>p.getOrThunk(Sa)),vi=(i,m)=>wf(i,m,ni,r1),Sf=(i,m)=>()=>bs(i)?m(i):parseFloat(fa(i,"width").getOr("0")),ic=i=>{const m=Sf(i,ga),p=ee(0);return{width:m,pixelWidth:m,getWidths:(T,D)=>Fs(T,i,D),getCellDelta:p,singleColumnWidth:ee([0]),minCellWidth:p,setElementWidth:nt,adjustTableWidth:nt,isRelative:!0,label:"none"}},Hi=i=>{const m=Sf(i,J=>parseFloat(ha(J))),p=Sf(i,ga);return{width:m,pixelWidth:p,getWidths:(J,me)=>uu(J,i,me),getCellDelta:J=>J/p()*100,singleColumnWidth:(J,me)=>[100-J],minCellWidth:()=>Xl()/p()*100,setElementWidth:Dg,adjustTableWidth:J=>{const me=m(),ke=J/100*me,lt=me+ke;Dg(i,lt)},isRelative:!0,label:"percent"}},jr=i=>{const m=Sf(i,ga);return{width:m,pixelWidth:m,getWidths:(I,Z)=>Fs(I,i,Z),getCellDelta:Ye,singleColumnWidth:(I,Z)=>[Math.max(Xl(),I+Z)-I],minCellWidth:Xl,setElementWidth:Fi,adjustTableWidth:I=>{const Z=m()+I;Fi(i,Z)},isRelative:!1,label:"pixel"}},Vr=(i,m)=>by().exec(m)!==null?Hi(i):jr(i),k={getTableSize:i=>iu(i).fold(()=>ic(i),p=>Vr(i,p)),pixelSize:jr,percentageSize:Hi,noneSize:ic},F=(i,m,p,v,T,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:T,selectedCells:D}),Y=(i,m)=>{const p=i.grid.columns;let T=i.grid.rows,D=p,I=0,Z=0;const J=[],me=[];return Bo(i.access,ke=>{if(J.push(ke),m(ke)){me.push(ke);const lt=ke.row,Lt=lt+ke.rowspan-1,Dt=ke.column,St=Dt+ke.colspan-1;lt<T?T=lt:Lt>I&&(I=Lt),Dt<D?D=Dt:St>Z&&(Z=St)}}),F(T,D,I,Z,J,me)},fe=(i,m,p)=>{const v=i[p].element,T=pe.fromTag("td");hs(T,pe.fromTag("br")),(m?hs:Os)(v,T)},ze=(i,m,p,v)=>{const T=lo(i,Z=>Z.section!=="colgroup"),D=m.grid.columns,I=m.grid.rows;for(let Z=0;Z<I;Z++){let J=!1;for(let me=0;me<D;me++)Z<p.minRow||Z>p.maxRow||me<p.minCol||me>p.maxCol||(wo.getAt(m,Z,me).filter(v).isNone()?fe(T,J,Z):J=!0)}},yt=(i,m,p,v)=>{Bo(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&yr(I.element)});const T=lo($c(i,"tr"),I=>I.dom.childElementCount===0);qe(T,yr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&qe($c(i,"th,td"),I=>{re(I,"rowspan"),re(I,"colspan")}),re(i,_l),re(i,"data-snooker-col-series"),k.getTableSize(i).adjustTableWidth(v)},Jt=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=Fs(m,i,p),D=We(T,(me,ke)=>me+ke,0),J=We(T.slice(v.minCol,v.maxCol+1),(me,ke)=>me+ke,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(J)},Wn=(i,m)=>{const p=Lt=>Vn(Lt.element,m),v=sc(i),T=Vd(v),D=k.getTableSize(i),I=wo.generate(T),Z=Y(I,p),J="th:not("+m+"),td:not("+m+")",me=ui(v,"th,td",Lt=>Vn(Lt,J));qe(me,yr),ze(T,I,Z,p);const ke=wo.fromTable(i),lt=Jt(i,ke,D,Z);return yt(v,Z,I,lt),v},ho=" ",rs=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>i(D)?ie.from(D.dom.nodeValue):ie.none();return{get:p,getOption:v,set:(D,I)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=I}}})(Za,"text"),er=i=>rs.get(i),Ol=i=>rs.getOption(i),Hu=(i,m)=>rs.set(i,m),Lc=i=>Yo(i)==="img"?1:Ol(i).fold(()=>Fo(i).length,m=>m.length),Vu=i=>Ol(i).filter(m=>m.trim().length!==0||m.indexOf(ho)>-1).isSome(),Gd=i=>pn(i)&&Br(i,"contenteditable")==="false",du=["img","br"],xf=i=>Vu(i)||ao(du,Yo(i))||Gd(i),yi=i=>$r(i,xf),Vh=i=>Mg(i,xf),Mg=(i,m)=>{const p=v=>{const T=Fo(v);for(let D=T.length-1;D>=0;D--){const I=T[D];if(m(I))return ie.some(I);const Z=p(I);if(Z.isSome())return Z}return ie.none()};return p(i)},zh={scope:["row","col"]},Uh=i=>()=>{const m=pe.fromTag("td",i.dom);return hs(m,pe.fromTag("br",i.dom)),m},La=i=>()=>pe.fromTag("col",i.dom),Ao=i=>()=>pe.fromTag("colgroup",i.dom),fr=i=>()=>pe.fromTag("tr",i.dom),_a=(i,m,p)=>{const v=Pi(i,m);return Bo(p,(T,D)=>{T===null?re(v,D):Ws(v,D,T)}),v},oi=i=>i,Dl=(i,m,p)=>yi(i).map(T=>{const D=p.join(","),I=io(T,D,Z=>Xo(Z,i));return Js(I,(Z,J)=>{const me=Ca(J);return hs(Z,me),me},m)}).getOr(m),Wh=(i,m)=>{Bo(zh,(p,v)=>ue(i,v).filter(T=>ao(p,T)).each(T=>Ws(m,v,T)))},zu=(i,m,p)=>{const v=(I,Z)=>{Zr(I.element,Z),Co(Z,"height"),I.colspan!==1&&Co(Z,"width")},T=I=>{const Z=pe.fromTag(Yo(I.element),m.dom),J=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),me=J.length>0?Dl(I.element,Z,J):Z;return hs(me,pe.fromTag("br")),v(I,Z),Wh(I.element,Z),i(I.element,Z),Z};return{col:I=>{const Z=pe.fromTag(Yo(I.element),m.dom);return v(I,Z),i(I.element,Z),Z},colgroup:Ao(m),row:fr(m),cell:T,replace:_a,colGap:La(m),gap:Uh(m)}},Mm=i=>({col:La(i),colgroup:Ao(i),row:fr(i),cell:Uh(i),replace:oi,colGap:La(i),gap:Uh(i)}),qd=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,Fo(pe.fromDom(v))},dd=i=>nn(i,pe.fromDom),Kd=i=>m=>m.options.get(i),Uu="100%",a1=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return ld(pe.fromDom(v))+"px"},Yd=(i,m)=>mu(i)||!c1(i)?m:Nm(i)?{...m,width:a1(i)}:{...m,width:Uu},Zh=(i,m)=>mu(i)||c1(i)?m:Nm(i)?{...m,width:a1(i)}:{...m,width:Uu},Ng=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=ao(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=ao(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},YS=i=>ie.from(i.options.get("table_clone_elements")),md=i=>{const m=i.options.get("object_resizing");return ao(m.split(","),"table")},XS=Kd("table_header_type"),vy=Kd("table_column_resizing"),Gr=i=>vy(i)==="preservetable",Gb=i=>vy(i)==="resizetable",fd=Kd("table_sizing_mode"),Tf=i=>fd(i)==="relative",Nm=i=>fd(i)==="fixed",mu=i=>fd(i)==="responsive",fu=Kd("table_resize_bars"),c1=Kd("table_style_by_css"),gd=Kd("table_merge_content_on_paste"),Jc=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Zh(i,p)},l1=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Yd(i,p)},yy=Kd("table_use_colgroups"),i1=i=>qs(i,"[contenteditable]"),u1=(i,m=!1)=>bs(i)?i.dom.isContentEditable:i1(i).fold(ee(m),p=>Cy(p)==="true"),Cy=i=>i.dom.contentEditable,Pg=i=>pe.fromDom(i.getBody()),hd=i=>m=>Xo(m,Pg(i)),Rl=i=>{re(i,"data-mce-style");const m=p=>re(p,"data-mce-style");qe(Mu(i),m),qe(Jl(i),m),qe(Nu(i),m)},gu=i=>pe.fromDom(i.selection.getStart()),Ef=i=>i.getBoundingClientRect().width,wy=i=>i.getBoundingClientRect().height,Bg=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return ie.from(v).filter(rc)},Sy=Bg("width"),JS=Bg("height"),QS=i=>/^(\d+(\.\d+)?)%$/.test(i),e2=i=>/^(\d+(\.\d+)?)px$/.test(i),kf=i=>qa(i,is("table")).exists(u1),$g=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,T=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&D>=i.startRow},mo=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Tn=(i,m)=>{let p=!0;const v=tt(mo,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&wo.getAt(i,T,D).exists(v);return p?ie.some(m):ie.none()},_f=(i,m)=>ve(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),d1=(i,m,p)=>{const v=wo.findItem(i,m,Xo),T=wo.findItem(i,p,Xo);return v.bind(D=>T.map(I=>_f(D,I)))},qb=(i,m,p)=>d1(i,m,p).bind(v=>Tn(i,v)),xy=(i,m,p,v)=>wo.findItem(i,m,Xo).bind(T=>{const D=p>0?T.row+T.rowspan-1:T.row,I=v>0?T.column+T.colspan-1:T.column;return wo.getAt(i,D+p,I+v).map(J=>J.element)}),Xd=(i,m,p)=>d1(i,m,p).map(v=>{const T=wo.filterItems(i,tt($g,v));return nn(T,D=>D.element)}),rr=(i,m)=>{const p=(v,T)=>wl(T,v);return wo.findItem(i,m,p).map(v=>v.element)},t2=(i,m,p)=>Cc(i).bind(v=>{const T=Ig(v);return xy(T,i,m,p)}),Ty=(i,m,p)=>{const v=Ig(i);return Xd(v,m,p)},Kb=(i,m,p,v,T)=>{const D=Ig(i),I=Xo(i,p)?ie.some(m):rr(D,m),Z=Xo(i,T)?ie.some(v):rr(D,v);return I.bind(J=>Z.bind(me=>Xd(D,J,me)))},Ge=(i,m,p)=>{const v=Ig(i);return qb(v,m,p)},Ig=wo.fromTable;var e_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Af=()=>{const i=me=>pe.fromDom(me.dom.cloneNode(!1)),m=me=>Or(me).dom,p=me=>pr(me)?Yo(me)==="body"?!0:ao(e_,Yo(me)):!1,v=me=>pr(me)?ao(["br","img","hr","input"],Yo(me)):!1,T=me=>pr(me)&&Br(me,"contenteditable")==="false",D=(me,ke)=>me.dom.compareDocumentPosition(ke.dom),I=(me,ke)=>{const lt=Oe(me);Na(ke,lt)},Z=me=>{const ke=Yo(me);return ao(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ke)},J=me=>pr(me)?ue(me,"lang"):ie.none();return{up:ee({selector:il,closest:qs,predicate:xs,all:bc}),down:ee({selector:Gs,predicate:Pt}),styles:ee({get:go,getRaw:fa,set:Me,remove:Co}),attrs:ee({get:Br,set:Ws,remove:re,copyTo:I}),insert:ee({before:Sl,after:ua,afterAll:jo,append:hs,appendAll:Wr,prepend:Os,wrap:ql}),remove:ee({unwrap:oc,remove:yr}),create:ee({nu:pe.fromTag,clone:i,text:pe.fromText}),query:ee({comparePosition:D,prevSibling:Gl,nextSibling:Zc}),property:ee({children:Fo,name:Yo,parent:vr,document:m,isText:Za,isComment:os,isElement:pr,isSpecial:Z,getLanguage:J,getText:er,setText:Hu,isBoundary:p,isEmptyTag:v,isNonEditable:T}),eq:Xo,is:nc}};const t_=(i,m,p,v)=>{const T=p[0],D=p.slice(1);return v(i,m,T,D)},Lg=(i,m,p)=>p.length>0?t_(i,m,p,Ey):ie.none(),Ey=(i,m,p,v)=>{const T=m(i,p);return Js(v,(D,I)=>{const Z=m(i,I);return pd(i,D,Z)},T)},pd=(i,m,p)=>m.bind(v=>p.filter(tt(i.eq,v))),ky=(i,m)=>tt(i.eq,m),jh=(i,m,p,v=wn)=>{const T=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),I=ke=>Jr(ke,v).fold(()=>ke,Lt=>ke.slice(0,Lt+1)),Z=I(T),J=I(D),me=L(Z,ke=>st(J,ky(i,ke)));return{firstpath:Z,secondpath:J,shared:me}},gr=Lg,Jd=jh,n2=Af(),Wu=(i,m)=>gr(n2,(p,v)=>i(v),m),_y=(i,m,p)=>Jd(n2,i,m,p),m1=i=>il(i,"table"),Gh=(i,m,p)=>{const v=T=>D=>p!==void 0&&p(D)||Xo(D,T);return Xo(i,m)?ie.some({boxes:ie.some([i]),start:i,finish:m}):m1(i).bind(T=>m1(m).bind(D=>{if(Xo(T,D))return ie.some({boxes:Ty(T,i,m),start:i,finish:m});if(wl(T,D)){const I=io(m,"td,th",v(T)),Z=I.length>0?I[I.length-1]:m;return ie.some({boxes:Kb(T,i,T,m,D),start:i,finish:Z})}else if(wl(D,T)){const I=io(i,"td,th",v(D)),Z=I.length>0?I[I.length-1]:i;return ie.some({boxes:Kb(D,i,T,m,D),start:i,finish:Z})}else return _y(i,m).shared.bind(I=>qs(I,"table",p).bind(Z=>{const J=io(m,"td,th",v(Z)),me=J.length>0?J[J.length-1]:m,ke=io(i,"td,th",v(Z)),lt=ke.length>0?ke[ke.length-1]:i;return ie.some({boxes:Kb(Z,i,T,m,D),start:lt,finish:me})}))}))},f1=(i,m)=>{const p=Gs(i,m);return p.length>0?ie.some(p):ie.none()},Ci=(i,m)=>L(i,p=>Vn(p,m)),o2=(i,m,p)=>Ka(i,m).bind(v=>Ka(i,p).bind(T=>Wu(m1,[v,T]).map(D=>({first:v,last:T,table:D})))),g1=(i,m)=>il(i,"table").bind(p=>Ka(p,m).bind(v=>Gh(v,i).bind(T=>T.boxes.map(D=>({boxes:D,start:T.start,finish:T.finish}))))),Ay=(i,m,p,v,T)=>Ci(i,T).bind(D=>t2(D,m,p).bind(I=>g1(I,v))),Of=(i,m)=>f1(i,m),Oy=(i,m,p)=>o2(i,m,p).bind(v=>{const T=J=>Xo(i,J),D="thead,tfoot,tbody,table",I=il(v.first,D,T),Z=il(v.last,D,T);return I.bind(J=>Z.bind(me=>Xo(J,me)?Ge(v.table,v.first,v.last):ie.none()))}),s2=Ye,Dy=i=>{const m=(v,T)=>ue(v,T).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&zo(i,p)?ie.some(i):ie.none()},r2=(i,m,p)=>m.length<=1?ie.none():Oy(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),dl="data-mce-selected",wi="td["+dl+"],th["+dl+"]",gt="["+dl+"]",Yb="data-mce-first-selected",Ec="td["+Yb+"],th["+Yb+"]",Xb="data-mce-last-selected",a2="td["+Xb+"],th["+Xb+"]",hr=gt,Pm={selected:dl,selectedSelector:wi,firstSelected:Yb,firstSelectedSelector:Ec,lastSelected:Xb,lastSelectedSelector:a2},Jb=(i,m,p)=>({element:p,mergable:r2(m,i,Pm),unmergable:Dy(i),selection:s2(i)}),n_=(i,m,p)=>({element:i,clipboard:m,generators:p}),Bm=(i,m,p,v)=>({selection:s2(i),clipboard:p,generators:v}),Qb=i=>Cc(i).bind(m=>Of(m,Pm.firstSelectedSelector)).fold(ee(i),m=>m[0]),bd=i=>(m,p)=>{const v=Yo(m),T=v==="col"||v==="colgroup"?Qb(m):m;return qs(T,i,p)},c2=bd("th,td,caption"),Ry=bd("th,td"),ar=i=>dd(i.model.table.getSelectedCells()),qh=i=>lo(ar(i),m=>Vn(m,Pm.selectedSelector)),Lr=i=>Cc(i[0]).map(m=>{const p=Wn(m,hr);return Rl(p),[p]}),l2=(i,m)=>nn(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),Si=i=>nn(i,m=>m.dom.innerText).join(""),Kh=(i,m)=>{i.on("BeforeGetContent",p=>{const v=T=>{p.preventDefault(),Lr(T).each(D=>{p.content=p.format==="text"?Si(D):l2(i,D)})};if(p.selection===!0){const T=qh(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=ar(i);ye(v).each(T=>{Cc(T).each(D=>{const I=lo(qd(p.content),J=>Yo(J)!=="meta"),Z=is("table");if(gd(i)&&I.length===1&&Z(I[0])){p.preventDefault();const J=pe.fromDom(i.getDoc()),me=Mm(J),ke=n_(T,I[0],me);m.pasteCells(D,ke).each(()=>{i.focus()})}})})}})},xi=(i,m)=>({element:i,offset:m}),o_=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>o_(i,v,p).orThunk(()=>ie.some(v))):ie.none(),s_=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,r_=(i,m)=>{const p=o_(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return xi(p,s_(i,p));const v=i.property().children(p);return v.length>0?r_(i,v[v.length-1]):xi(p,s_(i,p))},a_=r_,uc=Af(),Ml=i=>a_(uc,i),h1=(i,m)=>{Sr(i)||Fh(i).each(v=>{const T=v.value/2;Ze(i,T,v.unit),Ze(m,T,v.unit)})},Df=i=>nn(i,ee(0)),My=(i,m,p,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(p))),Yh=i=>(m,p,v,T)=>{if(i(v)){const D=Math.max(T,m[p]-Math.abs(v)),I=Math.abs(D-m[p]);return v>=0?I:-I}else return v},Qd=Yh(i=>i<0),Xh=Yh(_e),Fg=()=>{const i=(Z,J,me,ke,lt)=>{const Lt=Qd(Z,J,ke,lt);return My(Z,J,me+1,[Lt,0],Df)},m=(Z,J,me,ke)=>{const lt=(100+me)/100,Lt=Math.max(ke,(Z[J]+me)/lt);return nn(Z,(Dt,St)=>(St===J?Lt:Dt/lt)-Dt)},p=(Z,J,me,ke,lt,Lt)=>Lt?m(Z,J,ke,lt):i(Z,J,me,ke,lt);return{resizeTable:(Z,J)=>Z(J),clampTableDelta:Qd,calcLeftEdgeDeltas:p,calcMiddleDeltas:(Z,J,me,ke,lt,Lt,Dt)=>p(Z,me,ke,lt,Lt,Dt),calcRightEdgeDeltas:(Z,J,me,ke,lt,Lt)=>{if(Lt)return m(Z,me,ke,lt);{const Dt=Qd(Z,me,ke,lt);return Df(Z.slice(0,me)).concat([Dt])}},calcRedestributedWidths:(Z,J,me,ke)=>{if(ke){const Lt=(J+me)/J,Dt=nn(Z,St=>St/Lt);return{delta:Lt*100-100,newSizes:Dt}}else return{delta:me,newSizes:Z}}}},Rf=()=>{const i=(I,Z,J,me,ke)=>{const lt=me>=0?J:Z,Lt=Xh(I,lt,me,ke);return My(I,Z,J+1,[Lt,-Lt],Df)};return{resizeTable:(I,Z,J)=>{J&&I(Z)},clampTableDelta:(I,Z,J,me,ke)=>{if(ke){if(J>=0)return J;{const lt=We(I,(Lt,Dt)=>Lt+Dt-me,0);return Math.max(-lt,J)}}else return Qd(I,Z,J,me)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(I,Z,J,me,ke,lt)=>i(I,J,me,ke,lt),calcRightEdgeDeltas:(I,Z,J,me,ke,lt)=>{if(lt)return Df(I);{const Lt=me/I.length;return nn(I,ee(Lt))}},calcRedestributedWidths:(I,Z,J,me)=>({delta:0,newSizes:I})}},em=i=>wo.fromTable(i).grid,Hg=is("th"),Vg=i=>zo(i,m=>Hg(m.element)),c_=(i,m)=>i&&m?"sectionCells":i?"section":"cells",Ny=i=>{const m=i.section==="thead",p=Yl(ev(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:c_(m,p)}:{type:"body"}},ev=i=>{const m=lo(i,p=>Hg(p.element));return m.length===0?ie.some("td"):m.length===i.length?ie.some("th"):ie.none()},i2=i=>{const m=nn(i,T=>Ny(T).type),p=ao(m,"header"),v=ao(m,"footer");if(!p&&!v)return ie.some("body");{const T=ao(m,"body");return p&&!T&&!v?ie.some("header"):!p&&!T&&v?ie.some("footer"):ie.none()}},Py=i=>fo(i.all,m=>{const p=Ny(m);return p.type==="header"?ie.from(p.subType):ie.none()}),tv=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),By=(i,m)=>i.section!==m?ae(i.element,i.cells,m,i.isNew):i,nv=()=>({transformRow:By,transformCell:(i,m,p)=>{const v=p(i.element,m),T=Yo(v)!=="td"?ja(v,"td"):v;return U(T,i.isNew,i.isLocked)}}),Jh=()=>({transformRow:By,transformCell:tv}),ov=()=>({transformRow:(i,m)=>By(i,m==="thead"?"tbody":m),transformCell:tv}),vd={getTableSectionType:(i,m)=>{const p=wo.fromTable(i);switch(Py(p).getOr(m)){case"section":return nv();case"sectionCells":return Jh();case"cells":return ov()}},section:nv,sectionCells:Jh,cells:ov,fallback:()=>({transformRow:Ye,transformCell:tv})},Qh=(i,m,p,v)=>{p===v?re(i,m):Ws(i,m,p)},u2=(i,m,p)=>{Ct(Yt(i,m)).fold(()=>Os(i,p),v=>ua(v,p))},d2=(i,m)=>{const p=_o(i,m).getOrThunk(()=>{const v=pe.fromTag(m,ta(i).dom);return m==="thead"?u2(i,"caption,colgroup",v):m==="colgroup"?u2(i,"caption",v):hs(i,v),v});return Ba(p),p},sv=(i,m)=>{const p=[],v=[],T=Dt=>nn(Dt,St=>{St.isNew&&p.push(St.element);const rn=St.element;return Ba(rn),qe(St.cells,rt=>{rt.isNew&&v.push(rt.element),Qh(rt.element,"colspan",rt.colspan,1),Qh(rt.element,"rowspan",rt.rowspan,1),hs(rn,rt.element)}),rn}),D=Dt=>cs(Dt,St=>nn(St.cells,rn=>(Qh(rn.element,"span",rn.colspan,1),rn.element))),I=(Dt,St)=>{const rn=d2(i,St),Et=(St==="colgroup"?D:T)(Dt);Wr(rn,Et)},Z=Dt=>{_o(i,Dt).each(yr)},J=(Dt,St)=>{Dt.length>0?I(Dt,St):Z(St)},me=[],ke=[],lt=[],Lt=[];return qe(m,Dt=>{switch(Dt.section){case"thead":me.push(Dt);break;case"tbody":ke.push(Dt);break;case"tfoot":lt.push(Dt);break;case"colgroup":Lt.push(Dt);break}}),J(Lt,"colgroup"),J(me,"thead"),J(ke,"tbody"),J(lt,"tfoot"),{newRows:p,newCells:v}},Mf=i=>nn(i,m=>{const p=Ca(m.element);return qe(m.cells,v=>{const T=sc(v.element);Qh(T,"colspan",v.colspan,1),Qh(T,"rowspan",v.rowspan,1),hs(p,T)}),p}),i_=(i,m)=>nn(i,p=>qc(p,m)),$y=(i,m)=>i[m],p1=(i,m)=>{if(i.length===0)return 0;const p=i[0];return Jr(i,T=>!m(p.element,T.element)).getOr(i.length)},u_=(i,m,p,v)=>{const T=$y(i,m),D=T.section==="colgroup",I=p1(T.cells.slice(p),v),Z=D?1:p1(i_(i.slice(m),p),v);return{colspan:I,rowspan:Z}},rv=(i,m)=>{const p=nn(i,T=>nn(T.cells,wn)),v=(T,D,I,Z)=>{for(let J=T;J<T+I;J++)for(let me=D;me<D+Z;me++)p[J][me]=!0};return nn(i,(T,D)=>{const I=cs(T.cells,(Z,J)=>{if(p[D][J]===!1){const me=u_(i,D,J,m);return v(D,J,me.rowspan,me.colspan),[Ou(Z.element,me.rowspan,me.colspan,Z.isNew)]}else return[]});return su(T.element,I,T.section,T.isNew)})},ep=(i,m,p)=>{const v=[];qe(i.colgroups,T=>{const D=[];for(let I=0;I<i.grid.columns;I++){const Z=wo.getColumnAt(i,I).map(J=>U(J.element,p,!1)).getOrThunk(()=>U(m.colGap(),!0,!1));D.push(Z)}v.push(ae(T.element,D,"colgroup",p))});for(let T=0;T<i.grid.rows;T++){const D=[];for(let J=0;J<i.grid.columns;J++){const me=wo.getAt(i,T,J).map(ke=>U(ke.element,p,ke.isLocked)).getOrThunk(()=>U(m.gap(),!0,!1));D.push(me)}const I=i.all[T],Z=ae(I.element,D,I.section,p);v.push(Z)}return v},m2=(i,m)=>ep(i,m,!1),av=i=>rv(i,Xo),Iy=(i,m)=>fo(i.all,p=>L(p.cells,v=>Xo(m,v.element))),f2=(i,m,p)=>{const v=nn(m.selection,D=>af(D).bind(I=>Iy(i,I)).filter(p)),T=Qs(v);return xm(T.length>0,T)},Qc=(i,m,p,v,T)=>(D,I,Z,J)=>{const me=wo.fromTable(D),ke=ie.from(J==null?void 0:J.section).getOrThunk(vd.fallback);return m(me,I).map(Lt=>{const Dt=m2(me,Z),St=i(Dt,Lt,Xo,T(Z),ke),rn=mr(St.grid),rt=av(St.grid);return{info:Lt,grid:rt,cursor:St.cursor,lockedColumns:rn}}).bind(Lt=>{const Dt=sv(D,Lt.grid),St=ie.from(J==null?void 0:J.sizing).getOrThunk(()=>k.getTableSize(D)),rn=ie.from(J==null?void 0:J.resize).getOrThunk(Rf);return p(D,Lt.grid,Lt.info,{sizing:St,resize:rn,section:ke}),v(D),re(D,_l),Lt.lockedColumns.length>0&&Ws(D,_l,Lt.lockedColumns.join(",")),ie.some({cursor:Lt.cursor,newRows:Dt.newRows,newCells:Dt.newCells})})},b1=(i,m)=>af(m.element).bind(p=>Iy(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Ly=(i,m)=>f2(i,m,_e).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),tp=(i,m)=>m.mergable,g2=(i,m)=>m.unmergable,yd=(i,m)=>f2(i,m,_e),si=(i,m)=>f2(i,m,p=>!p.isLocked),np=(i,m)=>Iy(i,m).exists(p=>!p.isLocked),op=(i,m)=>zo(m,p=>np(i,p)),v1=(i,m)=>tp(i,m).filter(p=>op(i,p.cells)),d_=(i,m)=>g2(i,m).filter(p=>op(i,p)),m_=(i,m,p,v)=>{const T=sa(i).rows;if(T.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let I=m.startCol;I<=m.finishCol;I++){const Z=T[D],J=qc(Z,I).isLocked;eo(Z,I,U(v(),!1,J))}return i},zg=(i,m,p,v)=>{const T=sa(i).rows;let D=!0;for(let I=0;I<T.length;I++)for(let Z=0;Z<Kc(T[0]);Z++){const J=T[I],me=qc(J,Z),ke=me.element,lt=p(ke,m);lt&&!D?eo(J,Z,U(v(),!0,me.isLocked)):lt&&(D=!1)}return i},Ti=(i,m)=>We(i,(p,v)=>st(p,T=>m(T.element,v.element))?p:p.concat([v]),[]),h2=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&qe(i,T=>{const D=T.cells[m-1];let I=0;const Z=v();for(;T.cells.length>m+I&&p(D.element,T.cells[m+I].element);)eo(T,m+I,U(Z,!0,T.cells[m+I].isLocked)),I++}),i),ra=(i,m,p,v)=>{const T=sa(i).rows;if(m>0&&m<T.length){const D=T[m-1].cells,I=Ti(D,p);qe(I,Z=>{let J=ie.none();for(let me=m;me<T.length;me++)for(let ke=0;ke<Kc(T[0]);ke++){const lt=T[me],Lt=qc(lt,ke);p(Lt.element,Z.element)&&(J.isNone()&&(J=ie.some(v())),J.each(St=>{eo(lt,ke,U(St,!0,Lt.isLocked))}))}})}return i},Ug=i=>{const m=D=>D(i),p=ee(i),v=()=>T,T={tag:!0,inner:i,fold:(D,I)=>I(i),isValue:_e,isError:wn,map:D=>cv.value(D(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(i)},toOptional:()=>ie.some(i)};return T},Ei=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:wn,isError:_e,map:m,mapError:v=>cv.error(v(i)),bind:m,exists:wn,forall:_e,getOr:Ye,or:Ye,getOrThunk:en,orThunk:en,getOrDie:Ot(String(i)),each:nt,toOptional:ie.none};return p},cv={value:Ug,error:Ei,fromOption:(i,m)=>i.fold(()=>Ei(m),Ug)},sp=(i,m,p)=>{if(i.row>=m.length||i.column>Kc(m[0]))return cv.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),D=Kc(p[0]),I=p.length;return cv.value({rowDelta:v.length-I,colDelta:T.length-D})},Wg=(i,m)=>{const p=Kc(i[0]),v=Kc(m[0]);return{rowDelta:0,colDelta:p-v}},Cd=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},ki=(i,m,p,v)=>{const T=m.section==="colgroup"?p.col:p.cell;return Po(i,D=>U(T(),!0,v(D)))},Fy=(i,m,p,v)=>{const T=i[i.length-1];return i.concat(Po(m,()=>{const D=T.section==="colgroup"?p.colgroup:p.row,I=xc(T,D,Ye),Z=ki(I.cells.length,I,p,J=>$e(v,J.toString()));return Rr(I,Z)}))},Hy=(i,m,p,v)=>nn(i,T=>{const D=ki(m,T,p,wn);return gf(T,v,D)}),Vy=(i,m,p)=>nn(i,v=>We(p,(T,D)=>{const I=ki(1,v,m,_e)[0];return hf(T,D,I)},v)),Zg=(i,m,p)=>{const v=m.colDelta<0?Hy:Ye,T=m.rowDelta<0?Fy:Ye,D=mr(i),I=Kc(i[0]),Z=st(D,ke=>ke===I-1),J=v(i,Math.abs(m.colDelta),p,Z?I-1:I),me=mr(J);return T(J,Math.abs(m.rowDelta),p,Sn(me,_e))},f_=(i,m,p,v)=>{const T=qc(i[m],p),D=tt(v,T.element),I=i[m];return i.length>1&&Kc(I)>1&&(p>0&&D(Ic(I,p-1))||p<I.cells.length-1&&D(Ic(I,p+1))||m>0&&D(Ic(i[m-1],p))||m<i.length-1&&D(Ic(i[m+1],p)))},jg=(i,m,p,v,T,D)=>{const I=i.row,Z=i.column,J=p.length,me=Kc(p[0]),ke=I+J,lt=Z+me+D.length,Lt=Sn(D,_e);for(let Dt=I;Dt<ke;Dt++){let St=0;for(let rn=Z;rn<lt;rn++){if(Lt[rn]){St++;continue}f_(m,Dt,rn,T)&&zg(m,Ic(m[Dt],rn),T,v.cell);const rt=rn-Z-St,Et=qc(p[Dt-I],rt),Mn=Et.element,Nt=v.replace(Mn);eo(m[Dt],rn,U(Nt,!0,Et.isLocked))}}return m},tm=(i,m,p)=>{const v=Kc(m[0]),T=sa(m).cols.length+i.row,D=Po(v-i.column,Z=>Z+i.column),I=L(D,Z=>zo(p,J=>J!==Z)).getOr(v-1);return{row:T,column:I}},y1=(i,m,p)=>lo(p,v=>v>=i.column&&v<=Kc(m[0])+i.column),Ho=(i,m,p,v,T)=>{const D=mr(m),I=tm(i,m,D),Z=sa(p).rows,J=y1(I,Z,D);return sp(I,m,Z).map(ke=>{const lt={...ke,colDelta:ke.colDelta-J.length},Lt=Zg(m,lt,v),Dt=mr(Lt),St=y1(I,Z,Dt);return jg(I,Lt,Z,v,T,St)})},Nl=(i,m,p,v,T)=>{h2(m,i,T,v.cell);const D=Cd(p,m),I=Zg(p,D,v),Z=Cd(m,I),J=Zg(m,Z,v);return nn(J,(me,ke)=>gf(me,i,I[ke].cells))},hu=(i,m,p,v,T)=>{ra(m,i,T,v.cell);const D=mr(m),I=Wg(m,p),Z={...I,colDelta:I.colDelta-D.length},J=Zg(m,Z,v),{cols:me,rows:ke}=sa(J),lt=mr(J),Lt=Wg(p,m),Dt={...Lt,colDelta:Lt.colDelta+lt.length},St=Vy(p,v,lt),rn=Zg(St,Dt,v);return[...me,...ke.slice(0,i),...rn,...ke.slice(i,ke.length)]},$m=(i,m,p,v)=>xc(i,T=>v(T,p),m),cr=(i,m,p,v,T)=>{const{rows:D,cols:I}=sa(i),Z=D.slice(0,m),J=D.slice(m),me=$m(D[p],(ke,lt)=>m>0&&m<D.length&&v(Ic(D[m-1],lt),Ic(D[m],lt))?qc(D[m],lt):U(T(ke.element,v),!0,ke.isLocked),v,T);return[...I,...Z,me,...J]},p2=(i,m,p,v,T,D,I)=>{if(p==="colgroup"||!v){const Z=qc(i,T);return U(I(Z.element,D),!0,!1)}else return qc(i,m)},lv=(i,m,p,v,T)=>nn(i,D=>{const I=m>0&&m<Kc(D)&&v(Ic(D,m-1),Ic(D,m)),Z=p2(D,m,D.section,I,p,v,T);return hf(D,m,Z)}),C1=(i,m)=>cs(i,p=>{const v=p.cells,T=Js(m,(D,I)=>I>=0&&I<D.length?D.slice(0,I).concat(D.slice(I+1)):D,v);return T.length>0?[ae(p.element,T,p.section,p.isNew)]:[]}),iv=(i,m,p)=>{const{rows:v,cols:T}=sa(i);return[...T,...v.slice(0,m),...v.slice(p+1)]},g_=(i,m,p,v)=>Ic(i[m],p)!==void 0&&m>0&&v(Ic(i[m-1],p),Ic(i[m],p)),Nr=(i,m,p)=>m>0&&p(Ic(i,m-1),Ic(i,m)),zy=(i,m,p,v)=>g_(i,m,p,v)||Nr(i[m],p,v),h_=(i,m)=>zo(m,Ye)&&Vg(i.cells)?_e:(v,T,D)=>!(Yo(v.element)==="th"&&m[D]),p_=(i,m)=>zo(m,Ye)&&Vg(i)?_e:(v,T,D)=>!(Yo(v.element)==="th"&&m[T]),rp=(i,m,p,v)=>{const T=I=>I==="row"?Cr(m):Sr(m),D=I=>T(I)?`${I}group`:I;return i?Hg(m)?D(p):null:v&&Hg(m)?D(p==="row"?"col":"row"):null},Ut=(i,m)=>(p,v,T)=>ie.some(rp(i,p.element,"col",m[T])),b_=(i,m)=>(p,v)=>ie.some(rp(i,p.element,"row",m[v])),b2=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),uv=(i,m,p,v,T,D,I)=>{const Z=J=>st(m,me=>p(J.element,me.element));return nn(i,(J,me)=>Ud(J,(ke,lt)=>{if(Z(ke)){const Lt=I(ke,me,lt)?T(ke,p,v):ke;return D(Lt,me,lt).each(Dt=>{cl(Lt.element,{scope:ie.from(Dt)})}),Lt}else return ke}))},Uy=(i,m,p)=>cs(i,(v,T)=>zy(i,T,m,p)?[]:[qc(v,m)]),v_=(i,m,p)=>{const v=i[m];return cs(v.cells,(T,D)=>zy(i,m,D,p)?[]:[T])},w1=(i,m,p,v,T)=>{const D=sa(i).rows,I=cs(m,ke=>Uy(D,ke,v)),Z=nn(D,ke=>Vg(ke.cells)),J=p_(I,Z),me=b_(p,Z);return uv(i,I,v,T,b2,me,J)},S1=(i,m,p,v,T,D,I)=>{const{cols:Z,rows:J}=sa(i),me=J[m[0]],ke=cs(m,rt=>v_(J,rt,T)),lt=nn(me.cells,(rt,Et)=>Vg(Uy(J,Et,T))),Lt=[...J];qe(m,rt=>{Lt[rt]=I.transformRow(J[rt],p)});const Dt=[...Z,...Lt],St=h_(me,lt),rn=Ut(v,lt);return uv(Dt,ke,T,D,I.transformCell,rn,St)},Gg=(i,m,p,v)=>{const T=sa(i).rows,D=nn(m,I=>qc(T[I.row],I.column));return uv(i,D,p,v,b2,ie.none,_e)},nm={generate:i=>{if(!Gt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return qe(i,(v,T)=>{const D=Bt(v);if(D.length!==1)throw new Error("one and only one name per case");const I=D[0],Z=v[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Gt(Z))throw new Error("case arguments must be an array");m.push(I),p[I]=(...J)=>{const me=J.length;if(me!==Z.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+Z.length+" ("+Z+"), got "+me);return{fold:(...lt)=>{if(lt.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+lt.length);return lt[T].apply(null,J)},match:lt=>{const Lt=Bt(lt);if(m.length!==Lt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Lt.join(","));if(!zo(m,St=>ao(Lt,St)))throw new Error("Not all branches were specified when using match. Specified: "+Lt.join(", ")+`
Required: `+m.join(", "));return lt[I].apply(null,J)},log:lt=>{console.log(lt,{constructors:m,constructor:I,params:J})}}}}),p}},Im={...nm.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},v2=(i,m)=>i.length===0?Im.none():i.length===1?Im.only(0):m===0?Im.left(0,1):m===i.length-1?Im.right(m-1,m):m>0&&m<i.length-1?Im.middle(m-1,m,m+1):Im.none(),wd=(i,m,p,v,T)=>{const D=i.slice(0),I=v2(i,m),Z=ee(nn(D,ee(0))),J=Lt=>v.singleColumnWidth(D[Lt],p),me=(Lt,Dt)=>T.calcLeftEdgeDeltas(D,Lt,Dt,p,v.minCellWidth(),v.isRelative),ke=(Lt,Dt,St)=>T.calcMiddleDeltas(D,Lt,Dt,St,p,v.minCellWidth(),v.isRelative),lt=(Lt,Dt)=>T.calcRightEdgeDeltas(D,Lt,Dt,p,v.minCellWidth(),v.isRelative);return I.fold(Z,J,me,ke,lt)},y2=(i,m,p)=>{let v=0;for(let T=i;T<m;T++)v+=p[T]!==void 0?p[T]:0;return v},ap=(i,m)=>{const p=wo.justCells(i);return nn(p,v=>{const T=y2(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},C_=(i,m)=>{const p=wo.justColumns(i);return nn(p,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},w_=(i,m)=>nn(i.all,(p,v)=>({element:p.element,height:m[v]})),S_=i=>Js(i,(m,p)=>m+p,0),Wy=(i,m)=>wo.hasColumns(i)?C_(i,m):ap(i,m),dv=(i,m,p)=>{const v=Wy(i,m);qe(v,T=>{p.setElementWidth(T.element,T.width)})},C2=(i,m,p,v,T)=>{const D=wo.fromTable(i),I=T.getCellDelta(m),Z=T.getWidths(D,T),J=p===D.grid.columns-1,me=v.clampTableDelta(Z,p,I,T.minCellWidth(),J),ke=wd(Z,p,me,T,v),lt=nn(ke,(Lt,Dt)=>Lt+Z[Dt]);dv(D,lt,T),v.resizeTable(T.adjustTableWidth,me,J)},Zy=(i,m,p)=>{const v=wo.fromTable(i),T=Se(v,i),D=nn(T,(J,me)=>p===me?Math.max(m+J,Sa()):J),I=w_(v,D);qe(I,J=>{jd(J.element,J.height)}),qe(wo.justCells(v),J=>{Dm(J.element)});const Z=S_(D);jd(i,Z)},x_=(i,m,p,v,T)=>{const D=wo.generate(m),I=v.getWidths(D,v),Z=v.pixelWidth(),{newSizes:J,delta:me}=T.calcRedestributedWidths(I,Z,p.pixelDelta,v.isRelative);dv(D,J,v),v.adjustTableWidth(me)},x1=(i,m,p,v)=>{const T=wo.generate(m),D=v.getWidths(T,v);dv(T,D,v)},Nf=i=>We(i,(p,v)=>st(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),cp=is("col"),mv=is("colgroup"),jy=i=>Yo(i)==="tr"||mv(i),fv=i=>{const m=Ks(i,"colspan",1),p=Ks(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},Gy=(i,m=fv)=>{const p=Z=>cp(Z.element)?i.col(Z):i.cell(Z),v=Z=>mv(Z.element)?i.colgroup(Z):i.row(Z),T=Z=>{if(jy(Z))return v({element:Z});{const J=Z,me=p(m(J));return D=ie.some({item:J,replacement:me}),me}};let D=ie.none();return{getOrInit:(Z,J)=>D.fold(()=>T(Z),me=>J(Z,me.item)?me.replacement:T(Z))}},qy=i=>m=>{const p=[],v=(I,Z)=>L(p,J=>Z(J.item,I)),T=I=>{const Z=i==="td"?{scope:null}:{},J=m.replace(I,i,Z);return p.push({item:I,sub:J}),J};return{replaceOrInit:(I,Z)=>{if(jy(I)||cp(I))return I;{const J=I;return v(J,Z).fold(()=>T(J),me=>Z(I,me.item)?me.sub:T(J))}}}},Ky=i=>ue(i,"scope").map(m=>m.substr(0,3)),kc={modification:Gy,transform:qy,merging:i=>({unmerge:v=>{const T=Ky(v);return T.each(D=>Ws(v,"scope",D)),()=>{const D=i.cell({element:v,colspan:1,rowspan:1});return Co(D,"width"),Co(v,"width"),T.each(I=>Ws(D,"scope",I)),D}},merge:v=>{const T=()=>{const D=Qs(nn(v,Ky));if(D.length===0)return ie.none();{const I=D[0],Z=["row","col"];return st(D,me=>me!==I&&ao(Z,me))?ie.none():ie.from(I)}};return Co(v[0],"width"),T().fold(()=>re(v[0],"scope"),D=>Ws(v[0],"scope",D+"group")),ee(v[0])}})},T_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],S2=(i,m)=>{const p=i.property().name(m);return ao(["ol","ul"],p)},Pf=(i,m)=>{const p=i.property().name(m);return ao(T_,p)},qg=(i,m)=>ao(["br","img","hr","input"],i.property().name(m)),Yy=Af(),Be=i=>Pf(Yy,i),om=i=>S2(Yy,i),E_=i=>qg(Yy,i),x2=i=>{const m=is("br"),p=J=>zo(J,me=>m(me)||Za(me)&&er(me).trim().length===0),v=J=>Yo(J)==="li"||xs(J,om).isSome(),T=J=>Zc(J).map(me=>Be(me)?!0:E_(me)?Yo(me)!=="img":!1).getOr(!1),D=J=>Vh(J).bind(me=>{const ke=T(me);return vr(me).map(lt=>ke===!0||v(lt)||m(me)||Be(lt)&&!Xo(J,lt)?[]:[pe.fromTag("br")])}).getOr([]),Z=(()=>{const J=cs(i,me=>{const ke=Fo(me);return p(ke)?[]:ke.concat(D(me))});return J.length===0?[pe.fromTag("br")]:J})();Ba(i[0]),Wr(i[0],Z)},T1=i=>u1(i,!0),pu=i=>{Mu(i).length===0&&yr(i)},E1=(i,m)=>({grid:i,cursor:m}),T2=i=>fo(i,m=>fo(m.cells,p=>{const v=p.element;return xm(T1(v),v)})),Xy=(i,m,p)=>{var v,T;const D=sa(i).rows;return ie.from((T=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||T===void 0?void 0:T.element).filter(T1).orThunk(()=>T2(D))},ml=(i,m,p)=>{const v=Xy(i,m,p);return E1(i,v)},gv=i=>We(i,(p,v)=>st(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),E2=(i,m,p,v)=>{const T=m[0].row,D=gv(m),I=Js(D,(Z,J)=>({grid:cr(Z.grid,T,J.row+Z.delta,p,v.getOrInit),delta:Z.delta+1}),{grid:i,delta:0}).grid;return ml(I,T,m[0].column)},k_=(i,m,p,v)=>{const T=gv(m),D=T[T.length-1],I=D.row+D.rowspan,Z=Js(T,(J,me)=>cr(J,I,me.row,p,v.getOrInit),i);return ml(Z,I,m[0].column)},k2=(i,m,p,v)=>{const T=m.details,D=Nf(T),I=D[0].column,Z=Js(D,(J,me)=>({grid:lv(J.grid,I,me.column+J.delta,p,v.getOrInit),delta:J.delta+1}),{grid:i,delta:0}).grid;return ml(Z,T[0].row,I)},__=(i,m,p,v)=>{const T=m.details,D=T[T.length-1],I=D.column+D.colspan,Z=Nf(T),J=Js(Z,(me,ke)=>lv(me,I,ke.column,p,v.getOrInit),i);return ml(J,T[0].row,I)},_2=(i,m,p,v)=>{const T=Nf(m),D=nn(T,Z=>Z.column),I=w1(i,D,!0,p,v.replaceOrInit);return ml(I,m[0].row,m[0].column)},A_=(i,m,p,v)=>{const T=Gg(i,m,p,v.replaceOrInit);return ml(T,m[0].row,m[0].column)},O_=(i,m,p,v)=>{const T=Nf(m),D=nn(T,Z=>Z.column),I=w1(i,D,!1,p,v.replaceOrInit);return ml(I,m[0].row,m[0].column)},A2=(i,m,p,v)=>{const T=Gg(i,m,p,v.replaceOrInit);return ml(T,m[0].row,m[0].column)},lp=(i,m)=>(p,v,T,D,I)=>{const Z=gv(v),J=nn(Z,ke=>ke.row),me=S1(p,J,i,m,T,D.replaceOrInit,I);return ml(me,v[0].row,v[0].column)},D_=lp("thead",!0),O2=lp("tbody",!1),qr=lp("tfoot",!1),hv=(i,m,p,v)=>{const T=Nf(m.details),D=C1(i,nn(T,Z=>Z.column)),I=D.length>0?D[0].cells.length-1:0;return ml(D,T[0].row,Math.min(T[0].column,I))},D2=(i,m,p,v)=>{const T=gv(m),D=iv(i,T[0].row,T[T.length-1].row),I=Math.max(sa(D).rows.length-1,0);return ml(D,Math.min(m[0].row,I),m[0].column)},R2=(i,m,p,v)=>{const T=m.cells;x2(T);const D=m_(i,m.bounds,p,v.merge(T));return E1(D,ie.from(T[0]))},pv=(i,m,p,v)=>{const D=Js(m,(I,Z)=>zg(I,Z,p,v.unmerge(Z)),i);return E1(D,ie.from(m[0]))},el=(i,m,p,v)=>{const D=((J,me)=>{const ke=wo.fromTable(J);return ep(ke,me,!0)})(m.clipboard,m.generators),I=xl(m.row,m.column);return Ho(I,i,D,m.generators,p).fold(()=>E1(i,ie.some(m.element)),J=>ml(J,m.row,m.column))},fl=(i,m,p)=>{const v=wg(i,p.section),T=wo.generate(v);return ep(T,m,!0)},M2=(i,m,p,v)=>{const T=sa(i).rows,D=m.cells[0].column,I=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,I),J=Nl(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,m.cells[0].column)},N2=(i,m,p,v)=>{const T=sa(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,I),J=Nl(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,D)},Jy=(i,m,p,v)=>{const T=sa(i).rows,D=m.cells[0].row,I=T[D],Z=fl(m.clipboard,m.generators,I),J=hu(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,m.cells[0].column)},P2=(i,m,p,v)=>{const T=sa(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,I),J=hu(D,i,Z,m.generators,p);return ml(J,D,m.cells[0].column)},B2=(i,m)=>{const p=wo.fromTable(i);return yd(p,m).bind(T=>{const D=T[T.length-1],I=T[0].column,Z=D.column+D.colspan,J=uo(nn(p.all,me=>lo(me.cells,ke=>ke.column>=I&&ke.column<Z)));return ev(J)}).getOr("")},Qy=(i,m)=>{const p=wo.fromTable(i);return yd(p,m).bind(ev).getOr("")},eC=(i,m)=>{const p=wo.fromTable(i);return yd(p,m).bind(T=>{const D=T[T.length-1],I=T[0].row,Z=D.row+D.rowspan,J=p.all.slice(I,Z);return i2(J)}).getOr("")},bv=(i,m,p,v)=>x1(i,m,p,v.sizing),Lm=(i,m,p,v)=>x_(i,m,p,v.sizing,v.resize),Pl=(i,m)=>st(m,p=>p.column===0&&p.isLocked),tC=(i,m)=>st(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),ys=(i,m)=>{const p=id(i),v=Nf(m);return We(v,(T,D)=>{const Z=p[D.column].map(Ts).getOr(0);return T+Z},0)},Sd=i=>(m,p)=>yd(m,p).filter(v=>!(i?Pl:tC)(m,v)).map(v=>({details:v,pixelDelta:ys(m,v)})),k1=(i,m)=>si(i,m).map(p=>({details:p,pixelDelta:-ys(i,p)})),$2=i=>(m,p)=>Ly(m,p).filter(v=>!(i?Pl:tC)(m,v.cells)),vv=kc.transform("th"),yv=kc.transform("td"),Bf=Qc(E2,yd,nt,nt,kc.modification),_c=Qc(k_,yd,nt,nt,kc.modification),$f=Qc(k2,Sd(!0),Lm,nt,kc.modification),nC=Qc(__,Sd(!1),Lm,nt,kc.modification),I2=Qc(hv,k1,Lm,pu,kc.modification),R_=Qc(D2,yd,nt,pu,kc.modification),ip=Qc(_2,si,nt,nt,vv),oC=Qc(O_,si,nt,nt,yv),sC=Qc(D_,si,nt,nt,vv),rC=Qc(O2,si,nt,nt,yv),aC=Qc(qr,si,nt,nt,yv),Kt=Qc(A_,si,nt,nt,vv),_1=Qc(A2,si,nt,nt,yv),cC=Qc(R2,v1,bv,nt,kc.merging),up=Qc(pv,d_,bv,nt,kc.merging),Zu=Qc(el,b1,bv,nt,kc.modification),M_=Qc(M2,$2(!0),nt,nt,kc.modification),Ac=Qc(N2,$2(!1),nt,nt,kc.modification),N_=Qc(Jy,Ly,nt,nt,kc.modification),If=Qc(P2,Ly,nt,nt,kc.modification),lC=B2,L2=Qy,tl=eC,Lf=(i,m)=>i.dispatch("NewRow",{node:m}),Cv=(i,m)=>i.dispatch("NewCell",{node:m}),Ff=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},P_=(i,m,p,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:T})},B_=i=>{i.dispatch("TableSelectionClear")},Fa=(i,m,p,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:T})},Aa=(i,m,p,v,T)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:T})},Ha={structure:!1,style:!0},Rs={structure:!0,style:!1},Ja={structure:!0,style:!0},Oa=(i,m)=>Tf(i)?k.percentageSize(m):Nm(i)?k.pixelSize(m):k.getTableSize(m),iC=(i,m,p)=>{const v=Kr=>Yo(Pg(Kr))==="table",T=Kr=>!v(i)||em(Kr).rows>1,D=Kr=>!v(i)||em(Kr).columns>1,I=YS(i),Z=Gb(i)?nt:h1,J=Kr=>{switch(XS(i)){case"section":return vd.section();case"sectionCells":return vd.sectionCells();case"cells":return vd.cells();default:return vd.getTableSectionType(Kr,"section")}},me=(Kr,im)=>im.cursor.fold(()=>{const Y1=Mu(Kr);return ye(Y1).filter(bs).map(Oi=>{p.clearSelectedCells(Kr.dom);const to=i.dom.createRng();return to.selectNode(Oi.dom),i.selection.setRng(to),Ws(Oi,"data-mce-selected","1"),to})},Y1=>{const Oi=Ml(Y1),to=i.dom.createRng();return to.setStart(Oi.element.dom,Oi.offset),to.setEnd(Oi.element.dom,Oi.offset),i.selection.setRng(to),p.clearSelectedCells(Kr.dom),ie.some(to)}),ke=(Kr,im,Y1,Oi)=>(to,iw,uw=!1)=>{Rl(to);const f0=pe.fromDom(i.getDoc()),Zx=zu(Y1,f0,I),mh={sizing:Oa(i,to),resize:Gb(i)?Fg():Rf(),section:J(to)};return im(to)?Kr(to,iw,Zx,mh).bind(Gm=>{m.refresh(to.dom),qe(Gm.newRows,X1=>{Lf(i,X1.dom)}),qe(Gm.newCells,X1=>{Cv(i,X1.dom)});const jx=me(to,Gm);return bs(to)&&(Rl(to),uw||Ff(i,to.dom,Oi)),jx.map(X1=>({rng:X1,effect:Oi}))}):ie.none()},lt=ke(R_,T,nt,Rs),Lt=ke(I2,D,nt,Rs),Dt=ke(Bf,_e,nt,Rs),St=ke(_c,_e,nt,Rs),rn=ke($f,_e,Z,Rs),rt=ke(nC,_e,Z,Rs),Et=ke(cC,_e,nt,Rs),Mn=ke(up,_e,nt,Rs),Nt=ke(M_,_e,nt,Rs),ds=ke(Ac,_e,nt,Rs),Ms=ke(N_,_e,nt,Rs),Es=ke(If,_e,nt,Rs),Dc=ke(Zu,_e,nt,Ja),Da=ke(Kt,_e,nt,Rs),lm=ke(_1,_e,nt,Rs),Qf=ke(ip,_e,nt,Rs),eg=ke(oC,_e,nt,Rs),Cs=ke(sC,_e,nt,Rs),Fl=ke(rC,_e,nt,Rs),Hl=ke(aC,_e,nt,Rs);return{deleteRow:lt,deleteColumn:Lt,insertRowsBefore:Dt,insertRowsAfter:St,insertColumnsBefore:rn,insertColumnsAfter:rt,mergeCells:Et,unmergeCells:Mn,pasteColsBefore:Nt,pasteColsAfter:ds,pasteRowsBefore:Ms,pasteRowsAfter:Es,pasteCells:Dc,makeCellsHeader:Da,unmakeCellsHeader:lm,makeColumnsHeader:Qf,unmakeColumnsHeader:eg,makeRowsHeader:Cs,makeRowsBody:Fl,makeRowsFooter:Hl,getTableRowType:tl,getTableCellType:L2,getTableColType:lC}},wv=(i,m,p)=>{const v=Ks(i,m,1);p===1||v<=1?re(i,m):Ws(i,m,Math.min(p,v))},uC=(i,m)=>p=>{const v=p.column+p.colspan-1,T=p.column;return v>=i&&T<m},F2=(i,m,p)=>{if(wo.hasColumns(i)){const v=lo(wo.justColumns(i),uC(m,p)),T=nn(v,I=>{const Z=sc(I.element);return wv(Z,"span",p-m),Z}),D=pe.fromTag("colgroup");return Wr(D,T),[D]}else return[]},H2=(i,m,p)=>nn(i.all,v=>{const T=lo(v.cells,uC(m,p)),D=nn(T,Z=>{const J=sc(Z.element);return wv(J,"colspan",p-m),J}),I=pe.fromTag("tr");return Wr(I,D),I}),Sv=(i,m)=>{const p=wo.fromTable(i);return si(p,m).map(T=>{const D=T[T.length-1],I=T[0].column,Z=D.column+D.colspan,J=F2(p,I,Z),me=H2(p,I,Z);return[...J,...me]})},xv=(i,m,p)=>{const v=wo.fromTable(i);return yd(v,m).bind(D=>{const I=ep(v,p,!1),J=sa(I).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),me=cs(J,lt=>{const Lt=lo(lt.cells,Dt=>!Dt.isLocked);return Lt.length>0?[{...lt,cells:Lt}]:[]}),ke=av(me);return xm(ke.length>0,ke)}).map(D=>Mf(D))},Kg=nm.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),dC=(i,m,p)=>{const v=p.substring(0,p.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):Kg.invalid(p)},Yg={...Kg,from:i=>Ya(i,"%")?dC("%",Kg.percent,i):Ya(i,"px")?dC("px",Kg.pixels,i):Kg.invalid(i)},$_=(i,m)=>nn(i,p=>Yg.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),ri=(i,m,p)=>{const v=p/m;return nn(i,T=>Yg.from(T).fold(()=>T,I=>I*v+"px",I=>I/100*p+"px"))},wR=(i,m)=>{const p=i.fold(()=>ee(""),v=>{const T=v/m;return ee(T+"px")},()=>{const v=100/m;return ee(v+"%")});return Po(m,p)},I_=(i,m,p)=>i.fold(()=>m,v=>ri(m,p,v),v=>$_(m,p)),Vi=(i,m,p)=>{const v=Yg.from(p),T=zo(i,D=>D==="0px")?wR(v,i.length):I_(v,i,m);return Bl(T)},A1=(i,m)=>i.length===0?m:Js(i,(p,v)=>Yg.from(v).fold(ee(0),Ye,Ye)+p,0),O1=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},xd=(i,m)=>Yg.from(i).fold(ee(i),p=>p+m+"px",p=>p+m+"%"),Bl=i=>{if(i.length===0)return i;const m=Js(i,(v,T)=>{const D=Yg.from(T).fold(()=>({value:T,remainder:0}),I=>O1(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([xd(p[p.length-1],Math.round(m.remainder))])},Hf=Yg.from,mC=(i,m,p)=>{qe(m,v=>{const T=i.slice(v.column,v.colspan+v.column),D=A1(T,Xl());Me(v.element,"width",D+p)})},Tv=(i,m,p)=>{qe(m,(v,T)=>{const D=A1([i[T]],Xl());Me(v.element,"width",D+p)})},V2=(i,m,p)=>{qe(p,v=>{Co(v.element,"height")}),qe(m,(v,T)=>{Me(v.element,"height",i[T])})},Xg=i=>Hf(i).fold(ee("px"),ee("px"),ee("%")),fC=(i,m,p)=>{const v=wo.fromTable(i),T=v.all,D=wo.justCells(v),I=wo.justColumns(v);m.each(Z=>{const J=Xg(Z),me=ga(i),ke=Fu(v,i),lt=Vi(ke,me,Z);wo.hasColumns(v)?Tv(lt,I,J):mC(lt,D,J),Me(i,"width",Z)}),p.each(Z=>{const J=R(i),me=vi(v,i),ke=Vi(me,J,Z);V2(ke,T,D),Me(i,"height",Z)})},gC=Tc,z2=py,U2=ti,D1=i=>{re(i,"width"),re(i,"height")},Jg=i=>{const m=ha(i);fC(i,ie.some(m),ie.none()),D1(i)},hC=i=>{const m=Qo(i);fC(i,ie.some(m),ie.none()),D1(i)},pC=i=>{const m=Hh(i);fC(i,ie.none(),ie.some(m)),D1(i)},W2=i=>{Co(i,"width");const m=Jl(i),p=m.length>0?m:Mu(i);qe(p,v=>{Co(v,"width"),D1(v)}),D1(i)},Z2={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},L_=()=>pe.fromTag("th"),Ev=()=>pe.fromTag("td"),j2=()=>pe.fromTag("col"),F_=(i,m,p,v)=>{const T=pe.fromTag("tr");for(let D=0;D<i;D++){const I=v<m||D<p?L_():Ev();D<p&&Ws(I,"scope","row"),v<m&&Ws(I,"scope","col"),hs(I,pe.fromTag("br")),hs(T,I)}return T},G2=i=>{const m=pe.fromTag("colgroup");return Po(i,()=>hs(m,j2())),m},R1=(i,m,p,v)=>Po(i,T=>F_(m,p,v,T)),H_=(i,m,p,v,T,D=Z2)=>{const I=pe.fromTag("table"),Z=T!=="cells";un(I,D.styles),Na(I,D.attributes),D.colGroups&&hs(I,G2(m));const J=Math.min(i,p);if(Z&&p>0){const Dt=pe.fromTag("thead");hs(I,Dt);const rn=R1(p,m,T==="sectionCells"?J:0,v);Wr(Dt,rn)}const me=pe.fromTag("tbody");hs(I,me);const ke=Z?i-J:i,Lt=R1(ke,m,Z?0:p,v);return Wr(me,Lt),I},q2=i=>i.dom.innerHTML,$l=i=>{const m=pe.fromTag("div"),p=pe.fromDom(i.dom.cloneNode(!0));return hs(m,p),q2(m)},bC=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},vC=(i,m)=>{Ka(m,"td,th").each(tt(bC,i))},yC=(i,m)=>{qe(Gs(m,"tr"),p=>{Lf(i,p.dom),qe(Gs(p,"th,td"),v=>{Cv(i,v.dom)})})},kv=i=>zn(i)&&i.indexOf("%")!==-1,V_=(i,m,p,v,T)=>{const D=l1(i),I={styles:D,attributes:Jc(i),colGroups:yy(i)};return i.undoManager.ignore(()=>{const Z=H_(p,m,T,v,XS(i),I);Ws(Z,"data-mce-id","__mce");const J=$l(Z);i.insertContent(J),i.addVisual()}),Ka(Pg(i),'table[data-mce-id="__mce"]').map(Z=>(Nm(i)?hC(Z):mu(i)?W2(Z):(Tf(i)||kv(D.width))&&Jg(Z),Rl(Z),re(Z,"data-mce-id"),yC(i,Z),vC(i,Z),Z.dom)).getOrNull()},z_=(i,m,p,v={})=>{const T=D=>Xe(D)&&D>0;if(T(m)&&T(p)){const D=v.headerRows||0,I=v.headerColumns||0;return V_(i,p,m,I,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var _v=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const K2="x-tinymce/dom-table-",CC=K2+"rows",wC=K2+"columns",M1=i=>{const m=_v.FakeClipboardItem(i);_v.write([m])},SC=i=>{var m;const p=(m=_v.read())!==null&&m!==void 0?m:[];return fo(p,v=>ie.from(v.getType(i)))},Y2=i=>{SC(i).isSome()&&_v.clear()},X2=i=>{i.fold(U_,m=>M1({[CC]:m}))},J2=()=>SC(CC),U_=()=>Y2(CC),Q2=i=>{i.fold(tx,m=>M1({[wC]:m}))},ex=()=>SC(wC),tx=()=>Y2(wC),Av=i=>c2(gu(i),hd(i)).filter(kf),dp=i=>Ry(gu(i),hd(i)).filter(kf),nx=(i,m)=>{const p=hd(i),v=()=>Av(i).each(rt=>{Cc(rt,p).filter(W(p)).each(Et=>{const Mn=pe.fromText("");if(ua(Et,Mn),yr(Et),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Nt=i.dom.createRng();Nt.setStart(Mn.dom,0),Nt.setEnd(Mn.dom,0),i.selection.setRng(Nt),i.nodeChanged()}})}),T=rt=>Av(i).each(Et=>{mu(i)||Nm(i)||Tf(i)||Cc(Et,p).each(Nt=>{rt==="relative"&&!gC(Nt)?Jg(Nt):rt==="fixed"&&!z2(Nt)?hC(Nt):rt==="responsive"&&!U2(Nt)&&W2(Nt),Rl(Nt),Ff(i,Nt.dom,Rs)})}),D=rt=>Cc(rt,p),I=rt=>dp(i).bind(Et=>D(Et).map(Mn=>rt(Mn,Et))),Z=(rt,Et)=>{I(Mn=>{i.formatter.toggle("tableclass",{value:Et},Mn.dom),Ff(i,Mn.dom,Ha)})},J=(rt,Et)=>{I(Mn=>{const Nt=ar(i),Ms=zo(Nt,Es=>i.formatter.match("tablecellclass",{value:Et},Es.dom))?i.formatter.remove:i.formatter.apply;qe(Nt,Es=>Ms("tablecellclass",{value:Et},Es.dom)),Ff(i,Mn.dom,Ha)})},me=()=>{Av(i).each(rt=>{Cc(rt,p).each(Et=>{_o(Et,"caption").fold(()=>{const Mn=pe.fromTag("caption");hs(Mn,pe.fromText("Caption")),Pa(Et,Mn,0),i.selection.setCursorLocation(Mn.dom,0)},Mn=>{is("caption")(rt)&&Ur("td",Et).each(Nt=>i.selection.setCursorLocation(Nt.dom,0)),yr(Mn)}),Ff(i,Et.dom,Rs)})})},ke=rt=>{i.focus()},lt=(rt,Et=!1)=>I((Mn,Nt)=>{const ds=Jb(ar(i),Mn,Nt);rt(Mn,ds,Et).each(ke)}),Lt=()=>I((rt,Et)=>{const Mn=Jb(ar(i),rt,Et),Nt=zu(nt,pe.fromDom(i.getDoc()),ie.none());return xv(rt,Mn,Nt)}),Dt=()=>I((rt,Et)=>{const Mn=Jb(ar(i),rt,Et);return Sv(rt,Mn)}),St=(rt,Et)=>Et().each(Mn=>{const Nt=nn(Mn,ds=>sc(ds));I((ds,Ms)=>{const Es=Mm(pe.fromDom(i.getDoc())),Dc=Bm(ar(i),Ms,Nt,Es);rt(ds,Dc).each(ke)})}),rn=rt=>(Et,Mn)=>Qr(Mn,"type").each(Nt=>{lt(rt(Nt),Mn.no_events)});Bo({mceTableSplitCells:()=>lt(m.unmergeCells),mceTableMergeCells:()=>lt(m.mergeCells),mceTableInsertRowBefore:()=>lt(m.insertRowsBefore),mceTableInsertRowAfter:()=>lt(m.insertRowsAfter),mceTableInsertColBefore:()=>lt(m.insertColumnsBefore),mceTableInsertColAfter:()=>lt(m.insertColumnsAfter),mceTableDeleteCol:()=>lt(m.deleteColumn),mceTableDeleteRow:()=>lt(m.deleteRow),mceTableCutCol:()=>Dt().each(rt=>{Q2(rt),lt(m.deleteColumn)}),mceTableCutRow:()=>Lt().each(rt=>{X2(rt),lt(m.deleteRow)}),mceTableCopyCol:()=>Dt().each(rt=>Q2(rt)),mceTableCopyRow:()=>Lt().each(rt=>X2(rt)),mceTablePasteColBefore:()=>St(m.pasteColsBefore,ex),mceTablePasteColAfter:()=>St(m.pasteColsAfter,ex),mceTablePasteRowBefore:()=>St(m.pasteRowsBefore,J2),mceTablePasteRowAfter:()=>St(m.pasteRowsAfter,J2),mceTableDelete:v,mceTableCellToggleClass:J,mceTableToggleClass:Z,mceTableToggleCaption:me,mceTableSizingMode:(rt,Et)=>T(Et),mceTableCellType:rn(rt=>rt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:rn(rt=>rt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:rn(rt=>{switch(rt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(rt,Et)=>i.addCommand(Et,rt)),i.addCommand("mceInsertTable",(rt,Et)=>{z_(i,Et.rows,Et.columns,Et.options)}),i.addCommand("mceTableApplyCellStyle",(rt,Et)=>{const Mn=Ms=>"tablecell"+Ms.toLowerCase().replace("-","");if(!Mt(Et))return;const Nt=lo(ar(i),kf);if(Nt.length===0)return;const ds=Ps(Et,(Ms,Es)=>i.formatter.has(Mn(Es))&&zn(Ms));on(ds)||(Bo(ds,(Ms,Es)=>{const Dc=Mn(Es);qe(Nt,Da=>{Ms===""?i.formatter.remove(Dc,{value:null},Da.dom,!0):i.formatter.apply(Dc,{value:Ms},Da.dom)})}),D(Nt[0]).each(Ms=>Ff(i,Ms.dom,Ha)))})},W_=(i,m)=>{const p=hd(i),v=T=>Ry(gu(i)).bind(D=>Cc(D,p).map(I=>{const Z=Jb(ar(i),I,D);return T(I,Z)})).getOr("");Bo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,D)=>i.addQueryValueHandler(D,T))},Ov=nm.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Z_=(i,m,p,v)=>i.fold(m,p,v),ju=i=>i.fold(Ye,Ye,Ye),Dv=Ov.before,Rv=Ov.on,Mv=Ov.after,Il={before:Dv,on:Rv,after:Mv,cata:Z_,getStart:ju},zf={create:(i,m)=>({selection:i,kill:m})},j_=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},Uf=(i,m)=>{const p=i.document.createRange();return N1(p,m),p},N1=(i,m)=>i.selectNodeContents(m.dom),G_=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},q_=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},ox=(i,m,p)=>{const v=i.document.createRange();return G_(v,m),q_(v,p),v},Nv=(i,m,p,v,T)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,T),D},Pv=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),K_=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?ie.some(p).map(Pv):ie.none()},P1=nm.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xC=(i,m,p)=>m(pe.fromDom(p.startContainer),p.startOffset,pe.fromDom(p.endContainer),p.endOffset),Y_=(i,m)=>m.match({domRange:p=>({ltr:ee(p),rtl:ie.none}),relative:(p,v)=>({ltr:rd(()=>ox(i,p,v)),rtl:rd(()=>ie.some(ox(i,v,p)))}),exact:(p,v,T,D)=>({ltr:rd(()=>Nv(i,p,v,T,D)),rtl:rd(()=>ie.some(Nv(i,T,D,p,v)))})}),TC=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>P1.rtl(pe.fromDom(T.endContainer),T.endOffset,pe.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>xC(i,P1.ltr,p)):xC(i,P1.ltr,p)},EC=(i,m)=>{const p=Y_(i,m);return TC(i,p)},Bv=(i,m)=>EC(i,m).match({ltr:(v,T,D,I)=>{const Z=i.document.createRange();return Z.setStart(v.dom,T),Z.setEnd(D.dom,I),Z},rtl:(v,T,D,I)=>{const Z=i.document.createRange();return Z.setStart(D.dom,I),Z.setEnd(v.dom,T),Z}});P1.ltr,P1.rtl;const Qg={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},kC={create:(i,m,p,v)=>({start:Il.on(i,m),finish:Il.on(p,v)})},rx=(i,m)=>{const p=Bv(i,m);return Qg.create(pe.fromDom(p.startContainer),p.startOffset,pe.fromDom(p.endContainer),p.endOffset)},$v=kC.create,J_=(i,m,p,v,T,D,I)=>Xo(p,T)&&v===D?ie.none():qs(p,"td,th",m).bind(Z=>qs(T,"td,th",m).bind(J=>Wf(i,m,Z,J,I))),Wf=(i,m,p,v,T)=>Xo(p,v)?ie.none():Gh(p,v,m).bind(D=>{const I=D.boxes.getOr([]);return I.length>1?(T(i,I,D.start,D.finish),ie.some(zf.create(ie.some($v(p,0,p,Lc(p))),!0))):ie.none()}),SR=(i,m,p,v,T)=>{const D=I=>(T.clearBeforeUpdate(p),T.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return Ay(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(D)},mp=(i,m)=>({item:i,mode:m}),Iv=(i,m,p,v=fp)=>i.property().parent(m).map(T=>mp(T,v)),fp=(i,m,p,v=gp)=>p.sibling(i,m).map(T=>mp(T,v)),gp=(i,m,p,v=gp)=>{const T=i.property().children(m);return p.first(T).map(I=>mp(I,v))},Q_=[{current:Iv,next:fp,fallback:ie.none()},{current:fp,next:gp,fallback:ie.some(Iv)},{current:gp,next:gp,fallback:ie.some(fp)}],ax=(i,m,p,v,T=Q_)=>L(T,I=>I.current===p).bind(I=>I.current(i,m,v,I.next).orThunk(()=>I.fallback.bind(Z=>ax(i,m,Z,v)))),Fm={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?ie.some(p[p.length-1]):ie.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?ie.some(p[0]):ie.none()})},_C=(i,m,p,v,T,D)=>ax(i,m,v,T).bind(Z=>D(Z.item)?ie.none():p(Z.item)?ie.some(Z.item):_C(i,Z.item,p,Z.mode,T,D)),AC=(i,m,p,v)=>_C(i,m,p,fp,Fm.left(),v),tA=(i,m,p,v)=>_C(i,m,p,fp,Fm.right(),v),OC=i=>m=>i.property().children(m).length===0,cx=(i,m,p)=>ix(i,m,OC(i),p),lx=(i,m,p)=>hp(i,m,OC(i),p),ix=AC,hp=tA,Fv=Af(),eh=(i,m)=>cx(Fv,i,m),Hm=(i,m)=>lx(Fv,i,m),B1=(i,m,p)=>ix(Fv,i,m,p),pp=(i,m,p)=>hp(Fv,i,m,p),nA=(i,m,p)=>xs(i,m,p).isSome(),Td=nm.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),zi=(i,m,p)=>{const v=i.getRect(m),T=i.getRect(p);return T.right>v.left&&T.left<v.right},Hv=i=>qs(i,"tr"),th={...Td,verify:(i,m,p,v,T,D,I)=>qs(v,"td,th",I).bind(Z=>qs(m,"td,th",I).map(J=>Xo(Z,J)?Xo(v,Z)&&Lc(Z)===T?D(J):Td.none("in same cell"):Wu(Hv,[Z,J]).fold(()=>zi(i,J,Z)?Td.success():D(J),me=>D(J)))).getOr(Td.none("default")),cata:(i,m,p,v,T)=>i.fold(m,p,v,T)},bp=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),vp=i=>vr(i).bind(m=>{const p=Fo(m);return nl(p,i).map(v=>bp(m,p,i,v))}),nl=(i,m)=>Jr(i,tt(Xo,m)),Vv=is("br"),nh=(i,m,p)=>m(i,p).bind(v=>Za(v)&&er(v).trim().length===0?nh(v,m,p):ie.some(v)),zv=(i,m,p)=>p.traverse(m).orThunk(()=>nh(m,p.gather,i)).map(p.relative),ux=(i,m)=>dr(i,m).filter(Vv).orThunk(()=>dr(i,m-1).filter(Vv)),DC=(i,m,p,v)=>ux(m,p).bind(T=>v.traverse(T).fold(()=>nh(T,v.gather,i).map(v.relative),D=>vp(D).map(I=>Il.on(I.parent,I.index)))),Uv=(i,m,p,v)=>(Vv(m)?zv(i,m,v):DC(i,m,p,v)).map(D=>({start:D,finish:D})),dc=i=>th.cata(i,m=>ie.none(),()=>ie.none(),m=>ie.some(xi(m,0)),m=>ie.some(xi(m,Lc(m)))),Wv=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),Gu=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),RC=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),MC=i=>i.top,Vm=i=>i.bottom,dx=(i,m,p)=>p>=0&&p<Lc(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):ie.none(),Zf=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),Zv=(i,m)=>ie.some(i.getRect(m)),jv=(i,m,p)=>pr(m)?Zv(i,m).map(Zf):Za(m)?dx(i,m,p).map(Zf):ie.none(),NC=(i,m)=>pr(m)?Zv(i,m).map(Zf):Za(m)?i.getRangedRect(m,0,m,Lc(m)).map(Zf):ie.none(),oh=5,yp=100,Fc=nm.generate([{none:[]},{retry:["caret"]}]),mx=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,PC=(i,m,p)=>qa(m,Be).fold(wn,v=>NC(i,v).exists(T=>mx(p,T))),BC=(i,m,p,v,T)=>{const D=Wv(T,oh);return Math.abs(p.bottom-v.bottom)<1||p.top>T.bottom?Fc.retry(D):p.top===T.bottom?Fc.retry(Wv(T,1)):PC(i,m,T)?Fc.retry(RC(D,oh,0)):Fc.none()},$C={point:MC,adjuster:(i,m,p,v,T)=>{const D=Gu(T,oh);return Math.abs(p.top-v.top)<1||p.bottom<T.top?Fc.retry(D):p.bottom===T.top?Fc.retry(Gu(T,1)):PC(i,m,T)?Fc.retry(RC(D,oh,0)):Fc.none()},move:Gu,gather:eh},gx={point:Vm,adjuster:BC,move:Wv,gather:Hm},hx=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>Yo(v)==="table").isSome(),Ui=(i,m,p,v,T)=>zm(i,m,p,m.move(v,oh),T),zm=(i,m,p,v,T)=>T===0?ie.some(v):hx(i,v.left,m.point(v))?Ui(i,m,p,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(ie.none,I=>NC(i,I).bind(Z=>m.adjuster(i,I,Z,p,v).fold(ie.none,J=>zm(i,m,p,J,T-1))).orThunk(()=>ie.some(v)),ie.none)),px=(i,m,p)=>i.point(m)>p.getInnerHeight()?ie.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?ie.some(-i.point(m)):ie.none(),sh=(i,m,p)=>{const v=i.move(p,oh),T=zm(m,i,p,v,yp).getOr(v);return px(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),D=>(m.scrollBy(0,D),m.situsFromPoint(T.left,i.point(T)-D)))},gl={tryUp:tt(sh,$C),tryDown:tt(sh,gx),getJumpSize:ee(oh)},_i=20,hl=(i,m,p)=>i.getSelection().bind(v=>Uv(m,v.finish,v.foffset,p).fold(()=>ie.some(xi(v.finish,v.foffset)),T=>{const D=i.fromSitus(T),I=th.verify(i,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return dc(I)})),Wi=(i,m,p,v,T,D)=>D===0?ie.none():rh(i,m,p,v,T).bind(I=>{const Z=i.fromSitus(I),J=th.verify(i,p,v,Z.finish,Z.foffset,T.failure,m);return th.cata(J,()=>ie.none(),()=>ie.some(I),me=>Xo(p,me)&&v===0?Gv(i,p,v,Gu,T):Wi(i,m,me,0,T,D-1),me=>Xo(p,me)&&v===Lc(me)?Gv(i,p,v,Wv,T):Wi(i,m,me,Lc(me),T,D-1))}),Gv=(i,m,p,v,T)=>jv(i,m,p).bind(D=>Zi(i,T,v(D,gl.getJumpSize()))),Zi=(i,m,p)=>{const v=Eg().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):ie.none()},rh=(i,m,p,v,T)=>jv(i,p,v).bind(D=>Zi(i,T,D)),sA=(i,m,p)=>hl(i,m,p).bind(v=>Wi(i,m,v.element,v.offset,p,_i).map(i.fromSitus)),bx=(i,m)=>nA(i,p=>vr(p).exists(v=>Xo(v,m))),rA=(i,m,p,v,T)=>qs(v,"td,th",m).bind(D=>qs(D,"table",m).bind(I=>bx(T,I)?sA(i,m,p).bind(Z=>qs(Z.finish,"td,th",m).map(J=>({start:D,finish:J,range:Z}))):ie.none())),vx=(i,m,p,v,T,D)=>D(v,m).orThunk(()=>rA(i,m,p,v,T).map(I=>{const Z=I.range;return zf.create(ie.some($v(Z.start,Z.soffset,Z.finish,Z.foffset)),!0)})),yx=(i,m)=>qs(i,"tr",m).bind(p=>qs(p,"table",m).bind(v=>{const T=Gs(v,"tr");return Xo(p,T[0])?B1(v,D=>Vh(D).isSome(),m).map(D=>{const I=Lc(D);return zf.create(ie.some($v(D,I,D,I)),!0)}):ie.none()})),IC=(i,m)=>qs(i,"tr",m).bind(p=>qs(p,"table",m).bind(v=>{const T=Gs(v,"tr");return Xo(p,T[T.length-1])?pp(v,D=>yi(D).isSome(),m).map(D=>zf.create(ie.some($v(D,0,D,0)),!0)):ie.none()})),LC=(i,m,p,v,T,D,I)=>rA(i,p,v,T,D).bind(Z=>Wf(m,p,Z.start,Z.finish,I)),Oc=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},FC=i=>{const m=Oc(ie.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(ie.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:Z=>{p(),m.set(ie.some(Z))}}},jf=()=>{const i=FC(nt);return{...i,on:p=>i.get().each(p)}},Cp=(i,m)=>qs(i,"td,th",m),HC=i=>na(i).exists(u1),qv=(i,m,p,v)=>{const T=jf(),D=T.clear,I=ke=>{T.on(lt=>{v.clearBeforeUpdate(m),Cp(ke.target,p).each(Lt=>{Gh(lt,Lt,p).each(Dt=>{const St=Dt.boxes.getOr([]);if(St.length===1){const rn=St[0],rt=Cy(rn)==="false",Et=Yl(i1(ke.target),rn,Xo);rt&&Et&&v.selectRange(m,St,rn,rn)}else St.length>1&&(v.selectRange(m,St,Dt.start,Dt.finish),i.selectContents(Lt))})})})};return{clearstate:D,mousedown:ke=>{v.clear(m),Cp(ke.target,p).filter(HC).each(T.set)},mouseover:ke=>{I(ke)},mouseup:ke=>{I(ke),D()}}},$1={traverse:Zc,gather:Hm,relative:Il.before,retry:gl.tryDown,failure:th.failedDown},VC={traverse:Gl,gather:eh,relative:Il.before,retry:gl.tryUp,failure:th.failedUp},wp=i=>m=>m===i,zC=wp(38),sm=wp(40),ah=i=>i>=37&&i<=40,Cx={isBackward:wp(37),isForward:wp(39)},Um={isBackward:wp(39),isForward:wp(37)},ji=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Qe(p,v)},wx=(i,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(i,m)},rm=nm.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ch=i=>rm.exact(i.start,i.soffset,i.finish,i.foffset),UC=i=>i.match({domRange:m=>pe.fromDom(m.startContainer),relative:(m,p)=>Il.getStart(m),exact:(m,p,v,T)=>m}),Kv=rm.domRange,Sx=rm.relative,aA=rm.exact,cA=i=>{const m=UC(i);return Uo(m)},xx=Qg.create,Gf={domRange:Kv,relative:Sx,exact:aA,exactFromRange:ch,getWin:cA,range:xx},Sp=(i,m,p)=>{var v,T;return ie.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,p)).bind(D=>{if(D.offsetNode===null)return ie.none();const I=i.dom.createRange();return I.setStart(D.offsetNode,D.offset),I.collapse(),ie.some(I)})},I1=(i,m,p)=>{var v,T;return ie.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,p))},lA=document.caretPositionFromPoint?Sp:document.caretRangeFromPoint?I1:ie.none,iA=(i,m,p)=>{const v=pe.fromDom(i.document);return lA(v,m,p).map(T=>Qg.create(pe.fromDom(T.startContainer),T.startOffset,pe.fromDom(T.endContainer),T.endOffset))},xp=(i,m)=>{const p=Yo(i);return p==="input"?Il.after(i):ao(["br","img"],p)?m===0?Il.before(i):Il.after(i):Il.on(i,m)},WC=(i,m)=>{const p=i.fold(Il.before,xp,Il.after),v=m.fold(Il.before,xp,Il.after);return Gf.relative(p,v)},Yv=(i,m,p,v)=>{const T=xp(i,m),D=xp(p,v);return Gf.relative(T,D)},ZC=(i,m,p,v)=>{const D=ta(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,v),D},jC=(i,m,p,v)=>{const T=ZC(i,m,p,v),D=Xo(i,p)&&m===v;return T.collapsed&&!D},Tp=i=>ie.from(i.getSelection()),GC=(i,m)=>{Tp(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},Ep=(i,m,p,v,T)=>{const D=Nv(i,m,p,v,T);GC(i,D)},qC=(i,m,p,v,T,D)=>{m.collapse(p.dom,v),m.extend(T.dom,D)},Wo=(i,m)=>EC(i,m).match({ltr:(p,v,T,D)=>{Ep(i,p,v,T,D)},rtl:(p,v,T,D)=>{Tp(i).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,v,T.dom,D);else if(I.extend)try{qC(i,I,p,v,T,D)}catch{Ep(i,T,D,p,v)}else Ep(i,T,D,p,v)})}}),am=(i,m,p,v,T)=>{const D=Yv(m,p,v,T);Wo(i,D)},lh=(i,m,p)=>{const v=WC(m,p);Wo(i,v)},L1=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return ie.some(Qg.create(pe.fromDom(m.startContainer),m.startOffset,pe.fromDom(p.endContainer),p.endOffset))}else return ie.none()},KC=i=>{if(i.anchorNode===null||i.focusNode===null)return L1(i);{const m=pe.fromDom(i.anchorNode),p=pe.fromDom(i.focusNode);return jC(m,i.anchorOffset,p,i.focusOffset)?ie.some(Qg.create(m,i.anchorOffset,p,i.focusOffset)):L1(i)}},Wm=(i,m,p=!0)=>{const T=(p?Uf:j_)(i,m);GC(i,T)},YC=i=>Tp(i).filter(m=>m.rangeCount>0).bind(KC),Xv=i=>YC(i).map(m=>Gf.exact(m.start,m.soffset,m.finish,m.foffset)),XC=(i,m)=>{const p=Bv(i,m);return K_(p)},JC=(i,m,p)=>iA(i,m,p),ih=i=>{Tp(i).each(m=>m.removeAllRanges())},Jv=i=>({elementFromPoint:(rt,Et)=>pe.fromPoint(pe.fromDom(i.document),rt,Et),getRect:rt=>rt.dom.getBoundingClientRect(),getRangedRect:(rt,Et,Mn,Nt)=>{const ds=Gf.exact(rt,Et,Mn,Nt);return XC(i,ds)},getSelection:()=>Xv(i).map(rt=>rx(i,rt)),fromSitus:rt=>{const Et=Gf.relative(rt.start,rt.finish);return rx(i,Et)},situsFromPoint:(rt,Et)=>JC(i,rt,Et).map(Mn=>kC.create(Mn.start,Mn.soffset,Mn.finish,Mn.foffset)),clearSelection:()=>{ih(i)},collapseSelection:(rt=!1)=>{Xv(i).each(Et=>Et.fold(Mn=>Mn.collapse(rt),(Mn,Nt)=>{const ds=rt?Mn:Nt;lh(i,ds,ds)},(Mn,Nt,ds,Ms)=>{const Es=rt?Mn:ds,Dc=rt?Nt:Ms;am(i,Es,Dc,Es,Dc)}))},setSelection:rt=>{am(i,rt.start,rt.soffset,rt.finish,rt.foffset)},setRelativeSelection:(rt,Et)=>{lh(i,rt,Et)},selectNode:rt=>{Wm(i,rt,!1)},selectContents:rt=>{Wm(i,rt)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>ji(pe.fromDom(i.document)).top,scrollBy:(rt,Et)=>{wx(rt,Et,pe.fromDom(i.document))}}),uh=(i,m)=>({rows:i,cols:m}),Qv=(i,m,p,v)=>{const T=Jv(i),D=qv(T,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},Tx=i=>qa(i,pn).exists(u1),kp=(i,m)=>Tx(i)||Tx(m),e0=(i,m,p,v)=>{const T=Jv(i),D=()=>(v.clear(m),ie.none());return{keydown:(J,me,ke,lt,Lt,Dt)=>{const St=J.raw,rn=St.which,rt=St.shiftKey===!0;return f1(m,v.selectedSelector).fold(()=>(ah(rn)&&!rt&&v.clearBeforeUpdate(m),ah(rn)&&rt&&!kp(me,lt)?ie.none:sm(rn)&&rt?tt(LC,T,m,p,$1,lt,me,v.selectRange):zC(rn)&&rt?tt(LC,T,m,p,VC,lt,me,v.selectRange):sm(rn)?tt(vx,T,p,$1,lt,me,IC):zC(rn)?tt(vx,T,p,VC,lt,me,yx):ie.none),Mn=>{const Nt=ds=>()=>fo(ds,Es=>SR(Es.rows,Es.cols,m,Mn,v)).fold(()=>o2(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Es=>{const Dc=sm(rn)||Dt.isForward(rn)?Il.after:Il.before;return T.setRelativeSelection(Il.on(Es.first,0),Dc(Es.table)),v.clear(m),zf.create(ie.none(),!0)}),Es=>ie.some(zf.create(ie.none(),!0)));return ah(rn)&&rt&&!kp(me,lt)?ie.none:sm(rn)&&rt?Nt([uh(1,0)]):zC(rn)&&rt?Nt([uh(-1,0)]):Dt.isBackward(rn)&&rt?Nt([uh(0,-1),uh(-1,0)]):Dt.isForward(rn)&&rt?Nt([uh(0,1),uh(1,0)]):ah(rn)&&!rt?D:ie.none})()},keyup:(J,me,ke,lt,Lt)=>f1(m,v.selectedSelector).fold(()=>{const Dt=J.raw,St=Dt.which;return Dt.shiftKey===!0&&ah(St)&&kp(me,lt)?J_(m,p,me,ke,lt,Lt,v.selectRange):ie.none()},ie.none)}},uA=(i,m,p,v)=>{const T=Jv(i);return(D,I)=>{v.clearBeforeUpdate(m),Gh(D,I,p).each(Z=>{const J=Z.boxes.getOr([]);v.selectRange(m,J,Z.start,Z.finish),T.selectContents(I),T.collapseSelection()})}},t0=(i,m)=>{const p=Br(i,m);return p===void 0||p===""?[]:p.split(" ")},Zm=(i,m,p)=>{const T=t0(i,m).concat([p]);return Ws(i,m,T.join(" ")),!0},dA=(i,m,p)=>{const v=lo(t0(i,m),T=>T!==p);return v.length>0?Ws(i,m,v.join(" ")):re(i,m),!1},F1=i=>i.dom.classList!==void 0,bu=i=>t0(i,"class"),mc=(i,m)=>Zm(i,"class",m),mA=(i,m)=>dA(i,"class",m),Ed=(i,m)=>{F1(i)?i.dom.classList.add(m):mc(i,m)},fA=i=>{(F1(i)?i.dom.classList:bu(i)).length===0&&re(i,"class")},Ex=(i,m)=>{F1(i)?i.dom.classList.remove(m):mA(i,m),fA(i)},H1=(i,m)=>F1(i)&&i.dom.classList.contains(m),_p=(i,m)=>{qe(m,p=>{Ex(i,p)})},kx=i=>m=>{Ed(m,i)},_x=i=>m=>{_p(m,i)},Ax={byClass:i=>{const m=kx(i.selected),p=_x([i.selected,i.lastSelected,i.firstSelected]),v=D=>{const I=Gs(D,i.selectedSelector);qe(I,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,I,Z,J)=>{v(D),qe(I,m),Ed(Z,i.firstSelected),Ed(J,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=J=>{re(J,i.selected),re(J,i.firstSelected),re(J,i.lastSelected)},T=J=>{Ws(J,i.selected,"1")},D=J=>{I(J),p()},I=J=>{const me=Gs(J,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);qe(me,v)};return{clearBeforeUpdate:I,clear:D,selectRange:(J,me,ke,lt)=>{D(J),qe(me,T),Ws(ke,i.firstSelected,"1"),Ws(lt,i.lastSelected,"1"),m(me,ke,lt)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Ox=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},Wt=()=>({tag:"none"}),fc=i=>({tag:"multiple",elements:i}),V1=i=>({tag:"single",element:i}),gc=(i,m,p)=>({get:()=>Of(i(),p).fold(()=>m().fold(Wt,V1),fc)}),vu=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=av(p);return cs(v,T=>{const D=T.cells.slice(0,m[m.length-1].column+1);return nn(D,I=>I.element)})},QC=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=av(p);return cs(v,T=>{const D=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return nn(D,I=>I.element)})},dh=(i,m,p)=>{const v=wo.fromTable(i);return yd(v,m).map(D=>{const I=ep(v,p,!1),{rows:Z}=sa(I),J=vu(Z,D),me=QC(Z,D);return{upOrLeftCells:J,downOrRightCells:me}})},n0=(i,m,p,v,T,D,I)=>({target:i,x:m,y:p,stop:v,prevent:T,kill:D,raw:I}),qf=i=>{const m=pe.fromDom(vt(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=Un(v,p);return n0(m,i.clientX,i.clientY,p,v,T,i)},z1=(i,m)=>p=>{i(p)&&m(qf(p))},Dx=(i,m,p,v,T)=>{const D=z1(p,v);return i.dom.addEventListener(m,D,T),{unbind:tt(hA,i,m,D,T)}},gA=(i,m,p,v)=>Dx(i,m,p,v,!1),hA=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},pA=_e,Kf=(i,m,p)=>gA(i,m,pA,p),U1=qf,W1=i=>!H1(pe.fromDom(i.target),"ephox-snooker-resizer-bar"),o0=(i,m)=>{const p=gc(()=>pe.fromDom(i.getBody()),()=>Ry(gu(i),hd(i)),Pm.selectedSelector),v=(J,me,ke)=>{Cc(me).each(Lt=>{const Dt=nn(J,Mn=>Mn.dom),St=YS(i),rn=zu(nt,pe.fromDom(i.getDoc()),St),rt=ar(i),Et=dh(Lt,{selection:rt},rn).map(Mn=>zr(Mn,Nt=>nn(Nt,ds=>ds.dom))).getOrUndefined();P_(i,Dt,me.dom,ke.dom,Et)})},T=()=>B_(i),D=Ax.byAttr(Pm,v,T);return i.on("init",J=>{const me=i.getWin(),ke=Pg(i),lt=hd(i),Lt=()=>{const Cs=i.selection,Fl=pe.fromDom(Cs.getStart()),Hl=pe.fromDom(Cs.getEnd());Wu(Cc,[Fl,Hl]).fold(()=>D.clear(ke),nt)},Dt=Qv(me,ke,lt,D),St=e0(me,ke,lt,D),rn=uA(me,ke,lt,D),rt=Cs=>Cs.raw.shiftKey===!0;i.on("TableSelectorChange",Cs=>rn(Cs.start,Cs.finish));const Et=(Cs,Fl)=>{rt(Cs)&&(Fl.kill&&Cs.kill(),Fl.selection.each(Hl=>{const Cu=Gf.relative(Hl.start,Hl.finish),wu=Bv(me,Cu);i.selection.setRng(wu)}))},Mn=Cs=>{const Fl=U1(Cs);if(Fl.raw.shiftKey&&ah(Fl.raw.which)){const Hl=i.selection.getRng(),Cu=pe.fromDom(Hl.startContainer),wu=pe.fromDom(Hl.endContainer);St.keyup(Fl,Cu,Hl.startOffset,wu,Hl.endOffset).each(Oo=>{Et(Fl,Oo)})}},Nt=Cs=>{const Fl=U1(Cs);m.hide();const Hl=i.selection.getRng(),Cu=pe.fromDom(Hl.startContainer),wu=pe.fromDom(Hl.endContainer),Oo=bf(Cx,Um)(pe.fromDom(i.selection.getStart()));St.keydown(Fl,Cu,Hl.startOffset,wu,Hl.endOffset,Oo).each(Kr=>{Et(Fl,Kr)}),m.show()},ds=Cs=>Cs.button===0,Ms=Cs=>Cs.buttons===void 0?!0:(Cs.buttons&1)!==0,Es=Cs=>{Dt.clearstate()},Dc=Cs=>{ds(Cs)&&W1(Cs)&&Dt.mousedown(U1(Cs))},Da=Cs=>{Ms(Cs)&&W1(Cs)&&Dt.mouseover(U1(Cs))},lm=Cs=>{ds(Cs)&&W1(Cs)&&Dt.mouseup(U1(Cs))},eg=(()=>{const Cs=Oc(pe.fromDom(ke)),Fl=Oc(0);return{touchEnd:Cu=>{const wu=pe.fromDom(Cu.target);if(is("td")(wu)||is("th")(wu)){const Oo=Cs.get(),Kr=Fl.get();Xo(Oo,wu)&&Cu.timeStamp-Kr<300&&(Cu.preventDefault(),rn(wu,wu))}Cs.set(wu),Fl.set(Cu.timeStamp)}}})();i.on("dragstart",Es),i.on("mousedown",Dc),i.on("mouseover",Da),i.on("mouseup",lm),i.on("touchend",eg.touchEnd),i.on("keyup",Mn),i.on("keydown",Nt),i.on("NodeChange",Lt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Pm.firstSelected),i.serializer.addTempAttr(Pm.lastSelected)}),{getSelectedCells:()=>Ox(p.get(),ee([]),J=>nn(J,me=>me.dom),J=>[J.dom]),clearSelectedCells:J=>D.clear(pe.fromDom(J))}},Ai=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=lo(m,I=>I!==D)},trigger:(...D)=>{const I={};qe(i,(Z,J)=>{I[Z]=D[J]}),qe(m,Z=>{Z(I)})}}},cm=i=>{const m=zr(i,v=>({bind:v.bind,unbind:v.unbind})),p=zr(i,v=>v.trigger);return{registry:m,trigger:p}},Yf=(i,m)=>{let p=null;const v=()=>{Xn(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},Xf=i=>i.slice(0).sort(),bA=(i,m)=>{throw new Error("All required keys ("+Xf(i).join(", ")+") were not specified. Specified keys were: "+Xf(m).join(", ")+".")},s0=i=>{throw new Error("Unsupported keys for object: "+Xf(i).join(", "))},r0=(i,m)=>{if(!Gt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");qe(m,p=>{if(!zn(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},vA=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Xf(i).join(", ")+") were not.")},yA=i=>{const m=Xf(i);L(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},CA=(i,m)=>wA(i,m,{validate:Tt,label:"function"}),wA=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return r0("required",m),yA(m),v=>{const T=Bt(v);zo(m,Z=>ao(T,Z))||bA(m,T),i(m,T);const I=lo(m,Z=>!p.validate(v[Z],Z));return I.length>0&&vA(I,p.label),v}},Rx=(i,m)=>{const p=lo(m,v=>!ao(i,v));p.length>0&&s0(p)},a0=i=>CA(Rx,i),SA=a0(["compare","extract","mutate","sink"]),c0=a0(["element","start","stop","destroy"]),Hc=a0(["forceDrop","drop","move","delayDrop"]),yu=()=>{let i=ie.none();const m=()=>{i=ie.none()},p=(D,I)=>{const Z=i.map(J=>D.compare(J,I));return i=ie.some(I),Z},v=(D,I)=>{I.extract(D).each(J=>{p(I,J).each(ke=>{T.trigger.move(ke)})})},T=cm({move:Ai(["info"])});return{onEvent:v,reset:m,events:T.registry}},Gi=()=>{const i=cm({move:Ai(["info"])});return{onEvent:nt,reset:nt,events:i.registry}},l0=()=>{const i=Gi(),m=yu();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(Z,J)=>{p.onEvent(Z,J)},events:m.events}},i0=(i,m,p)=>{let v=!1;const T=cm({start:Ai([]),stop:Ai([])}),D=l0(),I=()=>{St.stop(),D.isOn()&&(D.off(),T.trigger.stop())},Z=Yf(I,200),J=rt=>{St.start(rt),D.on(),T.trigger.start()},me=rt=>{Z.cancel(),D.onEvent(rt,m)};D.events.move.bind(rt=>{m.mutate(i,rt.info)});const ke=()=>{v=!0},lt=()=>{v=!1},Lt=()=>v,Dt=rt=>(...Et)=>{v&&rt.apply(null,Et)},St=m.sink(Hc({forceDrop:I,drop:Dt(I),move:Dt(me),delayDrop:Dt(Z.throttle)}),p),rn=()=>{St.destroy()};return{element:St.element,go:J,on:ke,off:lt,isActive:Lt,destroy:rn,events:T.registry}},Mx=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Nx=Mx("ephox-dragster").resolve,tw=i=>{const m={layerClass:Nx("blocker"),...i},p=pe.fromTag("div");return Ws(p,"role","presentation"),un(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ed(p,Nx("blocker")),Ed(p,m.layerClass),{element:ee(p),destroy:()=>{yr(p)}}};var u0=SA({compare:(i,m)=>Qe(m.left-i.left,m.top-i.top),extract:i=>ie.some(Qe(i.x,i.y)),sink:(i,m)=>{const p=tw(m),v=Kf(p.element(),"mousedown",i.forceDrop),T=Kf(p.element(),"mouseup",i.drop),D=Kf(p.element(),"mousemove",i.move),I=Kf(p.element(),"mouseout",i.delayDrop),Z=()=>{p.destroy(),T.unbind(),D.unbind(),I.unbind(),v.unbind()},J=ke=>{hs(ke,p.element())},me=()=>{yr(p.element())};return c0({element:p.element,start:J,stop:me,destroy:Z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const nw=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:u0;return i0(i,v,m)},Ll=Mx("ephox-snooker").resolve,$x=()=>{const i=cm({drag:Ai(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},ow=()=>{const i=cm({drag:Ai(["xDelta","yDelta","target"])});let m=ie.none();const p=$x();return p.events.drag.bind(D=>{m.each(I=>{i.trigger.drag(D.xDelta,D.yDelta,I)})}),{assign:D=>{m=ie.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},Z1=(i,m,p,v,T)=>{const D=pe.fromTag("div");return un(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:T+"px",width:v+"px"}),Na(D,{"data-column":i,role:"presentation"}),D},j1=(i,m,p,v,T)=>{const D=pe.fromTag("div");return un(D,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:v+"px"}),Na(D,{"data-row":i,role:"presentation"}),D},d0=Ll("resizer-bar"),G1=Ll("resizer-rows"),Ix=Ll("resizer-cols"),Lx=7,sw=(i,m)=>cs(i.all,(p,v)=>m(p.element)?[v]:[]),rw=(i,m)=>{const p=[];return Po(i.grid.columns,v=>{wo.getColumnAt(i,v).map(D=>D.element).forall(m)&&p.push(v)}),lo(p,v=>{const T=wo.filterItems(i,D=>D.column===v);return zo(T,D=>m(D.element))})},jm=i=>{const m=Gs(i.parent(),"."+d0);qe(m,yr)},aw=(i,m,p)=>{const v=i.origin();qe(m,T=>{T.each(D=>{const I=p(v,D);Ed(I,d0),hs(i.parent(),I)})})},Fx=(i,m,p,v)=>{aw(i,m,(T,D)=>{const I=Z1(D.col,D.x-T.left,p.top-T.top,Lx,v);return Ed(I,Ix),I})},EA=(i,m,p,v)=>{aw(i,m,(T,D)=>{const I=j1(D.row,p.left-T.left,D.y-T.top,v,Lx);return Ed(I,G1),I})},kA=(i,m,p,v,T)=>{const D=jn(p),I=m.isResizable,Z=v.length>0?lc.positions(v,p):[],J=Z.length>0?sw(i,I):[],me=lo(Z,(Dt,St)=>st(J,rn=>St===rn));EA(m,me,D,Ts(p));const ke=T.length>0?yf.positions(T,p):[],lt=ke.length>0?rw(i,I):[],Lt=lo(ke,(Dt,St)=>st(lt,rn=>St===rn));Fx(m,Lt,D,V(p))},Hx=(i,m)=>{if(jm(i),i.isResizable(m)){const p=wo.fromTable(m),v=pf(p),T=id(p);kA(p,i,m,v,T)}},ai=(i,m)=>{const p=Gs(i.parent(),"."+d0);qe(p,m)},pl=i=>{ai(i,m=>{Me(m,"display","none")})},Ap=i=>{ai(i,m=>{Me(m,"display","block")})},kR=i=>H1(i,G1),_A=i=>H1(i,Ix),cw=Ll("resizer-bar-dragging"),Vo=i=>{const m=ow(),p=nw(m,{});let v=ie.none();const T=(St,rn)=>ie.from(Br(St,rn));m.events.drag.bind(St=>{T(St.target,"data-row").each(rn=>{const rt=Bc(St.target,"top");Me(St.target,"top",rt+St.yDelta+"px")}),T(St.target,"data-column").each(rn=>{const rt=Bc(St.target,"left");Me(St.target,"left",rt+St.xDelta+"px")})});const D=(St,rn)=>{const rt=Bc(St,rn),Et=Ks(St,"data-initial-"+rn,0);return rt-Et};p.events.stop.bind(()=>{m.get().each(St=>{v.each(rn=>{T(St,"data-row").each(rt=>{const Et=D(St,"top");re(St,"data-initial-top"),Dt.trigger.adjustHeight(rn,Et,parseInt(rt,10))}),T(St,"data-column").each(rt=>{const Et=D(St,"left");re(St,"data-initial-left"),Dt.trigger.adjustWidth(rn,Et,parseInt(rt,10))}),Hx(i,rn)})})});const I=(St,rn)=>{Dt.trigger.startAdjust(),m.assign(St),Ws(St,"data-initial-"+rn,Bc(St,rn)),Ed(St,cw),Me(St,"opacity","0.2"),p.go(i.parent())},Z=Kf(i.parent(),"mousedown",St=>{kR(St.target)&&I(St.target,"top"),_A(St.target)&&I(St.target,"left")}),J=St=>Xo(St,i.view()),me=St=>qs(St,"table",J).filter(u1),ke=Kf(i.view(),"mouseover",St=>{me(St.target).fold(()=>{bs(St.target)&&jm(i)},rn=>{p.isActive()&&(v=ie.some(rn),Hx(i,rn))})}),lt=()=>{Z.unbind(),ke.unbind(),p.destroy(),jm(i)},Lt=St=>{Hx(i,St)},Dt=cm({adjustHeight:Ai(["table","delta","row"]),adjustWidth:Ai(["table","delta","column"]),startAdjust:Ai([])});return{destroy:lt,refresh:Lt,on:p.on,off:p.off,hideBars:tt(pl,i),showBars:tt(Ap,i),events:Dt.registry}},Vx={create:(i,m,p)=>{const v=lc,T=yf,D=Vo(i),I=cm({beforeResize:Ai(["table","type"]),afterResize:Ai(["table","type"]),startDrag:Ai([])});return D.events.adjustHeight.bind(Z=>{const J=Z.table;I.trigger.beforeResize(J,"row");const me=v.delta(Z.delta,J);Zy(J,me,Z.row),I.trigger.afterResize(J,"row")}),D.events.startAdjust.bind(Z=>{I.trigger.startDrag()}),D.events.adjustWidth.bind(Z=>{const J=Z.table;I.trigger.beforeResize(J,"col");const me=T.delta(Z.delta,J),ke=p(J);C2(J,me,Z.column,m,ke),I.trigger.afterResize(J,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:I.registry}}},q1={only:(i,m)=>{const p=jl(i)?$o(i):i;return{parent:ee(p),view:ee(i),origin:ee(Qe(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>jn(m);return{parent:ee(m),view:ee(i),origin:v,isResizable:p}},body:(i,m,p)=>({parent:ee(m),view:ee(i),origin:ee(Qe(0,0)),isResizable:p})},AA=()=>{const i=pe.fromTag("div");return un(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),hs($(),i),i},OA=(i,m)=>i.inline?q1.body(pe.fromDom(i.getBody()),AA(),m):q1.only(pe.fromDom(i.getDoc()),m),DA=(i,m)=>{i.inline&&yr(m.parent())},m0=i=>At(i)&&i.nodeName==="TABLE",K1="bar-",Ux=i=>Br(i,"data-mce-resize")!=="false",OR=i=>{const m=wo.fromTable(i);wo.hasColumns(m)||qe(Mu(i),p=>{const v=go(p,"width");Me(p,"width",v),re(p,"width")})},Op=i=>wa(i,"corner-"),lw=i=>Tl(i,"corner-"),DR=i=>{const m=jf(),p=jf(),v=jf();let T,D,I,Z;const J=Et=>Oa(i,Et),me=()=>Gr(i)?Rf():Fg(),ke=Et=>em(Et).columns,lt=Et=>em(Et).rows,Lt=(Et,Mn,Nt,ds)=>{const Ms=lw(Mn),Es=Ya(Ms,"e"),Dc=wa(Ms,"n");if(D===""&&Jg(Et),Z===""&&pC(Et),Nt!==T&&D!==""){Me(Et,"width",D);const Da=me(),lm=J(Et),Qf=Gr(i)||Es?ke(Et)-1:0;C2(Et,Nt-T,Qf,Da,lm)}else if(QS(D)){const Da=parseFloat(D.replace("%","")),lm=Nt*Da/T;Me(Et,"width",lm+"%")}if(e2(D)&&OR(Et),ds!==I&&Z!==""){Me(Et,"height",Z);const Da=Dc?0:lt(Et)-1;Zy(Et,ds-I,Da)}},Dt=()=>{p.on(Et=>{Et.destroy()}),v.on(Et=>{DA(i,Et)})};return i.on("init",()=>{const Et=OA(i,Ux);if(v.set(Et),md(i)&&fu(i)){const Mn=me(),Nt=Vx.create(Et,Mn,J);Nt.on(),Nt.events.startDrag.bind(ds=>{m.set(i.selection.getRng())}),Nt.events.beforeResize.bind(ds=>{const Ms=ds.table.dom;Fa(i,Ms,Ef(Ms),wy(Ms),K1+ds.type)}),Nt.events.afterResize.bind(ds=>{const Ms=ds.table,Es=Ms.dom;Rl(Ms),m.on(Dc=>{i.selection.setRng(Dc),i.focus()}),Aa(i,Es,Ef(Es),wy(Es),K1+ds.type),i.undoManager.add()}),p.set(Nt)}}),i.on("ObjectResizeStart",Et=>{const Mn=Et.target;if(m0(Mn)){const Nt=pe.fromDom(Mn);qe(i.dom.select(".mce-clonedresizable"),ds=>{i.dom.addClass(ds,"mce-"+vy(i)+"-columns")}),!z2(Nt)&&Nm(i)?hC(Nt):!gC(Nt)&&Tf(i)&&Jg(Nt),U2(Nt)&&wa(Et.origin,K1)&&Jg(Nt),T=Et.width,D=mu(i)?"":Sy(i,Mn).getOr(""),I=Et.height,Z=JS(i,Mn).getOr("")}}),i.on("ObjectResized",Et=>{const Mn=Et.target;if(m0(Mn)){const Nt=pe.fromDom(Mn),ds=Et.origin;Op(ds)&&Lt(Nt,ds,Et.width,Et.height),Rl(Nt),Ff(i,Nt.dom,Ha)}}),i.on("SwitchMode",()=>{p.on(Et=>{i.mode.isReadOnly()?Et.hideBars():Et.showBars()})}),i.on("dragstart dragend",Et=>{p.on(Mn=>{Et.type==="dragstart"?(Mn.hideBars(),Mn.off()):(Mn.on(),Mn.showBars())})}),i.on("remove",()=>{Dt()}),{refresh:Et=>{p.on(Mn=>Mn.refreshBars(pe.fromDom(Et)))},hide:()=>{p.on(Et=>Et.hideBars())},show:()=>{p.on(Et=>Et.showBars())}}},Wx=i=>{Ng(i);const m=DR(i),p=o0(i,m),v=iC(i,m,p);return nx(i,v),W_(i,v),Kh(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},RA=i=>({table:Wx(i)});var In=()=>{it.add("dom",RA)};In()})();(function(){const it=De=>{let ee=De;return{get:()=>ee,set:tt=>{ee=tt}}};var Pn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xt=tinymce.util.Tools.resolve("tinymce.Env");const an=De=>De.dispatch("ResizeEditor"),bt=De=>ee=>ee.options.get(De),jt=De=>{const ee=De.options.register;ee("autoresize_overflow_padding",{processor:"number",default:1}),ee("autoresize_bottom_margin",{processor:"number",default:50})},zn=bt("min_height"),Mt=bt("max_height"),Gt=bt("autoresize_overflow_padding"),Xn=bt("autoresize_bottom_margin"),Cn=De=>De.plugins.fullscreen&&De.plugins.fullscreen.isFullscreen(),qt=(De,ee)=>{const Ye=De.getBody();Ye&&(Ye.style.overflowY=ee?"":"hidden",ee||(Ye.scrollTop=0))},En=(De,ee,Ye,Bn)=>{var tt;const W=parseInt((tt=De.getStyle(ee,Ye,Bn))!==null&&tt!==void 0?tt:"",10);return isNaN(W)?0:W},At=De=>{if((De==null?void 0:De.type.toLowerCase())==="setcontent"){const ee=De;return ee.selection===!0||ee.paste===!0}else return!1},Tt=(De,ee,Ye,Bn)=>{var tt;const W=De.dom,Ot=De.getDoc();if(!Ot)return;if(Cn(De)){qt(De,!0);return}const en=Ot.documentElement,wn=Bn?Bn():Gt(De),_e=(tt=zn(De))!==null&&tt!==void 0?tt:De.getElement().offsetHeight;let ie=_e;const ns=En(W,en,"margin-top",!0),so=En(W,en,"margin-bottom",!0);let It=en.offsetHeight+ns+so+wn;It<0&&(It=0);const A=De.getContainer().offsetHeight,ao=De.getContentAreaContainer().offsetHeight,st=A-ao;It+st>_e&&(ie=It+st);const Po=Mt(De);Po&&ie>Po?(ie=Po,qt(De,!0)):qt(De,!1);const nn=ee.get();if(nn.set&&(De.dom.setStyles(De.getDoc().documentElement,{"min-height":0}),De.dom.setStyles(De.getBody(),{"min-height":"inherit"})),ie!==nn.totalHeight&&(It-wn!==nn.contentHeight||!nn.set)){const qe=ie-nn.totalHeight;if(W.setStyle(De.getContainer(),"height",ie+"px"),ee.set({totalHeight:ie,contentHeight:It,set:!0}),an(De),Xt.browser.isSafari()&&(Xt.os.isMacOS()||Xt.os.isiOS())){const bo=De.getWin();bo.scrollTo(bo.pageXOffset,bo.pageYOffset)}De.hasFocus()&&At(Ye)&&De.selection.scrollIntoView(),(Xt.browser.isSafari()||Xt.browser.isChromium())&&qe<0&&Tt(De,ee,Ye,Bn)}},Xe=(De,ee)=>{const Ye=()=>Xn(De);De.on("init",Bn=>{const tt=Gt(De),W=De.dom;W.setStyles(De.getDoc().documentElement,{height:"auto"}),Xt.browser.isEdge()||Xt.browser.isIE()?W.setStyles(De.getBody(),{paddingLeft:tt,paddingRight:tt,"min-height":0}):W.setStyles(De.getBody(),{paddingLeft:tt,paddingRight:tt}),Tt(De,ee,Bn,Ye)}),De.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Bn=>{Tt(De,ee,Bn,Ye)})},nt=(De,ee)=>{De.addCommand("mceAutoResize",()=>{Tt(De,ee)})};var Un=()=>{Pn.add("autoresize",De=>{if(jt(De),De.options.isSet("resize")||De.options.set("resize",!1),!De.inline){const ee=it({totalHeight:0,contentHeight:0,set:!1});nt(De,ee),Xe(De,ee)}})};Un()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=(Mt,Gt)=>{Mt.focus(),Mt.undoManager.transact(()=>{Mt.setContent(Gt)}),Mt.selection.setCursorLocation(),Mt.nodeChanged()},Xt=Mt=>Mt.getContent({source_view:!0}),an=Mt=>{const Gt=Xt(Mt);Mt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Gt},onSubmit:Xn=>{Pn(Mt,Xn.getData().code),Xn.close()}})},bt=Mt=>{Mt.addCommand("mceCodeEditor",()=>{an(Mt)})},jt=Mt=>{const Gt=()=>Mt.execCommand("mceCodeEditor");Mt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Gt}),Mt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Gt})};var zn=()=>{it.add("code",Mt=>(bt(Mt),jt(Mt),{}))};zn()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=($e,Je,on)=>{var Ft;return on($e,Je.prototype)?!0:((Ft=$e.constructor)===null||Ft===void 0?void 0:Ft.name)===Je.name},Xt=$e=>{const Je=typeof $e;return $e===null?"null":Je==="object"&&Array.isArray($e)?"array":Je==="object"&&Pn($e,String,(on,Ft)=>Ft.isPrototypeOf(on))?"string":Je},an=$e=>Je=>Xt(Je)===$e,bt=$e=>Je=>typeof Je===$e,jt=an("string"),zn=bt("boolean"),Mt=$e=>$e==null,Gt=$e=>!Mt($e),Xn=bt("function"),Cn=bt("number"),qt=($e,Je)=>on=>$e(Je(on)),At=($e=>()=>$e)(!1);class Tt{constructor(Je,on){this.tag=Je,this.value=on}static some(Je){return new Tt(!0,Je)}static none(){return Tt.singletonNone}fold(Je,on){return this.tag?on(this.value):Je()}isSome(){return this.tag}isNone(){return!this.tag}map(Je){return this.tag?Tt.some(Je(this.value)):Tt.none()}bind(Je){return this.tag?Je(this.value):Tt.none()}exists(Je){return this.tag&&Je(this.value)}forall(Je){return!this.tag||Je(this.value)}filter(Je){return!this.tag||Je(this.value)?this:Tt.none()}getOr(Je){return this.tag?this.value:Je}or(Je){return this.tag?this:Je}getOrThunk(Je){return this.tag?this.value:Je()}orThunk(Je){return this.tag?this:Je()}getOrDie(Je){if(this.tag)return this.value;throw new Error(Je??"Called getOrDie on None")}static from(Je){return Gt(Je)?Tt.some(Je):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Je){this.tag&&Je(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const Xe=($e,Je)=>{const on=$e.length,Ft=new Array(on);for(let Jn=0;Jn<on;Jn++){const Ko=$e[Jn];Ft[Jn]=Je(Ko,Jn)}return Ft},nt=($e,Je)=>{for(let on=0,Ft=$e.length;on<Ft;on++){const Jn=$e[on];Je(Jn,on)}},Un=($e,Je)=>{const on=[];for(let Ft=0,Jn=$e.length;Ft<Jn;Ft++){const Ko=$e[Ft];Je(Ko,Ft)&&on.push(Ko)}return on},De=9,ee=11,Ye=1,Bn=3,tt=($e,Je)=>{const Ft=(Je||document).createElement("div");if(Ft.innerHTML=$e,!Ft.hasChildNodes()||Ft.childNodes.length>1){const Jn="HTML does not have a single root node";throw console.error(Jn,$e),new Error(Jn)}return en(Ft.childNodes[0])},W=($e,Je)=>{const Ft=(Je||document).createElement($e);return en(Ft)},Ot=($e,Je)=>{const Ft=(Je||document).createTextNode($e);return en(Ft)},en=$e=>{if($e==null)throw new Error("Node cannot be null or undefined");return{dom:$e}},_e={fromHtml:tt,fromTag:W,fromText:Ot,fromDom:en,fromPoint:($e,Je,on)=>Tt.from($e.dom.elementFromPoint(Je,on)).map(en)},ie=($e,Je)=>{const on=$e.dom;if(on.nodeType!==Ye)return!1;{const Ft=on;if(Ft.matches!==void 0)return Ft.matches(Je);if(Ft.msMatchesSelector!==void 0)return Ft.msMatchesSelector(Je);if(Ft.webkitMatchesSelector!==void 0)return Ft.webkitMatchesSelector(Je);if(Ft.mozMatchesSelector!==void 0)return Ft.mozMatchesSelector(Je);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const ns=$e=>$e.dom.nodeName.toLowerCase(),so=$e=>$e.dom.nodeType,It=$e=>Je=>so(Je)===$e,A=It(Ye),ao=It(Bn),st=It(De),Po=It(ee),nn=$e=>Je=>A(Je)&&ns(Je)===$e,qe=$e=>_e.fromDom($e.dom.ownerDocument),bo=$e=>st($e)?$e:qe($e),zs=$e=>Tt.from($e.dom.parentNode).map(_e.fromDom),lo=$e=>Xe($e.dom.childNodes,_e.fromDom),Js=($e,Je,on)=>{if(jt(on)||zn(on)||Cn(on))$e.setAttribute(Je,on+"");else throw console.error("Invalid call to Attribute.set. Key ",Je,":: Value ",on,":: Element ",$e),new Error("Attribute value was not simple")},We=($e,Je,on)=>{Js($e.dom,Je,on)},ut=($e,Je)=>{$e.dom.removeAttribute(Je)},L=$e=>Po($e)&&Gt($e.dom.host),uo=Xn(Element.prototype.attachShadow)&&Xn(Node.prototype.getRootNode)?$e=>_e.fromDom($e.dom.getRootNode()):bo,cs=$e=>{const Je=uo($e);return L(Je)?Tt.some(Je):Tt.none()},zo=$e=>_e.fromDom($e.dom.host),Nc=$e=>{const Je=ao($e)?$e.dom.parentNode:$e.dom;if(Je==null||Je.ownerDocument===null)return!1;const on=Je.ownerDocument;return cs(_e.fromDom(Je)).fold(()=>on.body.contains(Je),qt(Nc,zo))},Sn=($e,Je,on)=>{let Ft=$e.dom;const Jn=Xn(on)?on:At;for(;Ft.parentNode;){Ft=Ft.parentNode;const Ko=_e.fromDom(Ft);if(Je(Ko))return Tt.some(Ko);if(Jn(Ko))break}return Tt.none()},Ro=($e,Je,on)=>Sn($e,Ft=>ie(Ft,Je),on),gn=$e=>$e.style!==void 0&&Xn($e.style.getPropertyValue),ye=($e,Je)=>{const on=$e.dom,Jn=window.getComputedStyle(on).getPropertyValue(Je);return Jn===""&&!Nc($e)?Ct(on,Je):Jn},Ct=($e,Je)=>gn($e)?$e.style.getPropertyValue(Je):"",fo=$e=>ye($e,"direction")==="rtl"?"rtl":"ltr",Bt=($e,Je)=>Un(lo($e),Je),Is=($e,Je)=>Bt($e,on=>ie(on,Je)),Bo=$e=>zs($e).filter(A),zr=($e,Je)=>(Je?Ro($e,"ol,ul"):Tt.some($e)).getOr($e),ms=nn("li"),Us=($e,Je,on)=>{nt(Je,Ft=>{const Jn=_e.fromDom(Ft),Ko=ms(Jn),wr=zr(Jn,Ko);Bo(wr).each(fs=>{if($e.setStyle(wr.dom,"direction",null),fo(fs)===on?ut(wr,"dir"):We(wr,"dir",on),fo(wr)!==on&&$e.setStyle(wr.dom,"direction",on),Ko){const ft=Is(wr,"li[dir],li[style]");nt(ft,yo=>{ut(yo,"dir"),$e.setStyle(yo.dom,"direction",null)})}})})},tc=($e,Je)=>{$e.selection.isEditable()&&(Us($e.dom,$e.selection.getSelectedBlocks(),Je),$e.nodeChanged())},Ps=$e=>{$e.addCommand("mceDirectionLTR",()=>{tc($e,"ltr")}),$e.addCommand("mceDirectionRTL",()=>{tc($e,"rtl")})},ls=($e,Je)=>on=>{const Ft=Jn=>{const Ko=_e.fromDom(Jn.element);on.setActive(fo(Ko)===Je),on.setEnabled($e.selection.isEditable())};return $e.on("NodeChange",Ft),on.setEnabled($e.selection.isEditable()),()=>$e.off("NodeChange",Ft)},qo=$e=>{$e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>$e.execCommand("mceDirectionLTR"),onSetup:ls($e,"ltr")}),$e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>$e.execCommand("mceDirectionRTL"),onSetup:ls($e,"rtl")})};var Qr=()=>{it.add("directionality",$e=>{Ps($e),qo($e)})};Qr()})();(function(){const it=K=>{let se=K;return{get:()=>se,set:un=>{se=un}}};var Pn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xt=K=>({isFullscreen:()=>K.get()!==null}),an=(K,se,Te)=>{var Me;return Te(K,se.prototype)?!0:((Me=K.constructor)===null||Me===void 0?void 0:Me.name)===se.name},bt=K=>{const se=typeof K;return K===null?"null":se==="object"&&Array.isArray(K)?"array":se==="object"&&an(K,String,(Te,Me)=>Me.isPrototypeOf(Te))?"string":se},jt=K=>se=>bt(se)===K,zn=K=>se=>typeof se===K,Mt=K=>se=>K===se,Gt=jt("string"),Xn=jt("object"),Cn=jt("array"),qt=Mt(null),En=zn("boolean"),At=Mt(void 0),Tt=K=>K==null,Xe=K=>!Tt(K),nt=zn("function"),Un=zn("number"),De=()=>{},ee=(K,se)=>(...Te)=>K(se.apply(null,Te)),Ye=(K,se)=>Te=>K(se(Te)),Bn=K=>()=>K;function tt(K,...se){return(...Te)=>{const Me=se.concat(Te);return K.apply(null,Me)}}const W=Bn(!1),Ot=Bn(!0);class en{constructor(se,Te){this.tag=se,this.value=Te}static some(se){return new en(!0,se)}static none(){return en.singletonNone}fold(se,Te){return this.tag?Te(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?en.some(se(this.value)):en.none()}bind(se){return this.tag?se(this.value):en.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:en.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Xe(se)?en.some(se):en.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}en.singletonNone=new en(!1);const wn=Array.prototype.push,_e=(K,se)=>{const Te=K.length,Me=new Array(Te);for(let un=0;un<Te;un++){const go=K[un];Me[un]=se(go,un)}return Me},ie=(K,se)=>{for(let Te=0,Me=K.length;Te<Me;Te++){const un=K[Te];se(un,Te)}},ns=(K,se)=>{const Te=[];for(let Me=0,un=K.length;Me<un;Me++){const go=K[Me];se(go,Me)&&Te.push(go)}return Te},so=(K,se,Te)=>{for(let Me=0,un=K.length;Me<un;Me++){const go=K[Me];if(se(go,Me))return en.some(go);if(Te(go,Me))break}return en.none()},It=(K,se)=>so(K,se,W),A=K=>{const se=[];for(let Te=0,Me=K.length;Te<Me;++Te){if(!Cn(K[Te]))throw new Error("Arr.flatten item "+Te+" was not an array, input: "+K);wn.apply(se,K[Te])}return se},ao=(K,se)=>A(_e(K,se)),st=(K,se)=>se>=0&&se<K.length?en.some(K[se]):en.none(),Po=K=>st(K,0),nn=(K,se)=>{for(let Te=0;Te<K.length;Te++){const Me=se(K[Te],Te);if(Me.isSome())return Me}return en.none()},qe=(K,se,Te)=>K.isSome()&&se.isSome()?en.some(Te(K.getOrDie(),se.getOrDie())):en.none(),bo=K=>{const se=it(en.none()),Te=()=>se.get().each(K);return{clear:()=>{Te(),se.set(en.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:fa=>{Te(),se.set(en.some(fa))}}},zs=()=>bo(K=>K.unbind()),lo=()=>{const K=bo(De);return{...K,on:Te=>K.get().each(Te)}},Js=(K,se)=>{let Te=null;return{cancel:()=>{qt(Te)||(clearTimeout(Te),Te=null)},throttle:(...go)=>{qt(Te)&&(Te=setTimeout(()=>{Te=null,K.apply(null,go)},se))}}},We=Object.keys,ut=(K,se)=>{const Te=We(K);for(let Me=0,un=Te.length;Me<un;Me++){const go=Te[Me],Ls=K[go];se(Ls,go)}},L=typeof window<"u"?window:Function("return this;")(),Jr=(K,se)=>{let Te=se??L;for(let Me=0;Me<K.length&&Te!==void 0&&Te!==null;++Me)Te=Te[K[Me]];return Te},uo=(K,se)=>{const Te=K.split(".");return Jr(Te,se)},cs=(K,se)=>uo(K,se),zo=(K,se)=>{const Te=cs(K,se);if(Te==null)throw new Error(K+" not available on this browser");return Te},Nc=Object.getPrototypeOf,Sn=K=>zo("HTMLElement",K),Ro=K=>{const se=uo("ownerDocument.defaultView",K);return Xn(K)&&(Sn(se).prototype.isPrototypeOf(K)||/^HTML\w*Element$/.test(Nc(K).constructor.name))},gn=9,ye=11,Ct=1,fo=3,Bt=K=>K.dom.nodeType,Is=K=>se=>Bt(se)===K,Bo=K=>zr(K)&&Ro(K.dom),zr=Is(Ct),ms=Is(fo),Us=Is(gn),tc=Is(ye),Ps=(K,se,Te)=>{if(Gt(Te)||En(Te)||Un(Te))K.setAttribute(se,Te+"");else throw console.error("Invalid call to Attribute.set. Key ",se,":: Value ",Te,":: Element ",K),new Error("Attribute value was not simple")},ls=(K,se,Te)=>{Ps(K.dom,se,Te)},qo=(K,se)=>{const Te=K.dom.getAttribute(se);return Te===null?void 0:Te},Qr=(K,se)=>{K.dom.removeAttribute(se)},$e=K=>K.dom.classList!==void 0,Je=(K,se)=>$e(K)&&K.dom.classList.contains(se),on=(K,se,Te=0,Me)=>{const un=K.indexOf(se,Te);return un!==-1?At(Me)?!0:un+se.length<=Me:!1},Ft=K=>K.style!==void 0&&nt(K.style.getPropertyValue),Jn=(K,se)=>{const Me=(se||document).createElement("div");if(Me.innerHTML=K,!Me.hasChildNodes()||Me.childNodes.length>1){const un="HTML does not have a single root node";throw console.error(un,K),new Error(un)}return Hn(Me.childNodes[0])},Ko=(K,se)=>{const Me=(se||document).createElement(K);return Hn(Me)},wr=(K,se)=>{const Me=(se||document).createTextNode(K);return Hn(Me)},Hn=K=>{if(K==null)throw new Error("Node cannot be null or undefined");return{dom:K}},ur={fromHtml:Jn,fromTag:Ko,fromText:wr,fromDom:Hn,fromPoint:(K,se,Te)=>en.from(K.dom.elementFromPoint(se,Te)).map(Hn)},ft=(K,se)=>{const Te=K.dom;if(Te.nodeType!==Ct)return!1;{const Me=Te;if(Me.matches!==void 0)return Me.matches(se);if(Me.msMatchesSelector!==void 0)return Me.msMatchesSelector(se);if(Me.webkitMatchesSelector!==void 0)return Me.webkitMatchesSelector(se);if(Me.mozMatchesSelector!==void 0)return Me.mozMatchesSelector(se);throw new Error("Browser lacks native selectors")}},yo=K=>K.nodeType!==Ct&&K.nodeType!==gn&&K.nodeType!==ye||K.childElementCount===0,Ar=(K,se)=>{const Te=document;return yo(Te)?[]:_e(Te.querySelectorAll(K),ur.fromDom)},la=(K,se)=>K.dom===se.dom,ia=K=>ur.fromDom(K.dom.ownerDocument),ea=K=>Us(K)?K:ia(K),Yo=K=>en.from(K.dom.parentNode).map(ur.fromDom),va=(K,se)=>{const Te=nt(se)?se:W;let Me=K.dom;const un=[];for(;Me.parentNode!==null&&Me.parentNode!==void 0;){const go=Me.parentNode,Ls=ur.fromDom(go);if(un.push(Ls),Te(Ls)===!0)break;Me=go}return un},Wa=K=>{const se=Te=>ns(Te,Me=>!la(K,Me));return Yo(K).map(pn).map(se).getOr([])},os=K=>en.from(K.dom.nextSibling).map(ur.fromDom),pn=K=>_e(K.dom.childNodes,ur.fromDom),pr=K=>tc(K)&&Xe(K.dom.host),Za=nt(Element.prototype.attachShadow)&&nt(Node.prototype.getRootNode),jl=Bn(Za),Cl=Za?K=>ur.fromDom(K.dom.getRootNode()):ea,is=K=>{const se=Cl(K);return pr(se)?en.some(se):en.none()},nr=K=>ur.fromDom(K.dom.host),Ws=K=>{if(jl()&&Xe(K.target)){const se=ur.fromDom(K.target);if(zr(se)&&Na(se)&&K.composed&&K.composedPath){const Te=K.composedPath();if(Te)return Po(Te)}}return en.from(K.target)},Na=K=>Xe(K.dom.shadowRoot),cl=K=>{const se=ms(K)?K.dom.parentNode:K.dom;if(se==null||se.ownerDocument===null)return!1;const Te=se.ownerDocument;return is(ur.fromDom(se)).fold(()=>Te.body.contains(se),Ye(cl,nr))},Br=K=>{const se=K.dom.body;if(se==null)throw new Error("Body is not available yet");return ur.fromDom(se)},ue=(K,se,Te)=>{if(!Gt(Te))throw console.error("Invalid call to CSS.set. Property ",se,":: Value ",Te,":: Element ",K),new Error("CSS value must be a string: "+Te);Ft(K)&&K.style.setProperty(se,Te)},re=(K,se,Te)=>{const Me=K.dom;ue(Me,se,Te)},Oe=(K,se)=>{const Te=K.dom;ut(se,(Me,un)=>{ue(Te,un,Me)})},He=(K,se)=>{const Te=K.dom,un=window.getComputedStyle(Te).getPropertyValue(se);return un===""&&!cl(K)?ln(Te,se):un},ln=(K,se)=>Ft(K)?K.style.getPropertyValue(se):"",xn=(K,se,Te,Me,un,go,Ls)=>({target:K,x:se,y:Te,stop:Me,prevent:un,kill:go,raw:Ls}),Qn=K=>{const se=ur.fromDom(Ws(K).getOr(K.target)),Te=()=>K.stopPropagation(),Me=()=>K.preventDefault(),un=ee(Me,Te);return xn(se,K.clientX,K.clientY,Te,Me,un,K)},Bs=(K,se)=>Te=>{K(Te)&&se(Qn(Te))},pe=(K,se,Te,Me,un)=>{const go=Bs(Te,Me);return K.dom.addEventListener(se,go,un),{unbind:tt(Zs,K,se,go,un)}},Vn=(K,se,Te,Me)=>pe(K,se,Te,Me,!1),Zs=(K,se,Te,Me)=>{K.dom.removeEventListener(se,Te,Me)},br=Ot,Ur=(K,se,Te)=>Vn(K,se,br,Te),Xo=K=>{let se=!1,Te;return(...Me)=>(se||(se=!0,Te=K.apply(null,Me)),Te)},wl=(K,se,Te,Me)=>{const un=K.isiOS()&&/ipad/i.test(Te)===!0,go=K.isiOS()&&!un,Ls=K.isiOS()||K.isAndroid(),fa=Ls||Me("(pointer:coarse)"),Co=un||!go&&Ls&&Me("(min-device-width:768px)"),Zr=go||Ls&&!Co,Ks=se.isSafari()&&K.isiOS()&&/safari/i.test(Te)===!1,Dr=!Zr&&!Co&&!Ks;return{isiPad:Bn(un),isiPhone:Bn(go),isTablet:Bn(Co),isPhone:Bn(Zr),isTouch:Bn(fa),isAndroid:K.isAndroid,isiOS:K.isiOS,isWebView:Bn(Ks),isDesktop:Bn(Dr)}},nc=(K,se)=>{for(let Te=0;Te<K.length;Te++){const Me=K[Te];if(Me.test(se))return Me}},ta=(K,se)=>{const Te=nc(K,se);if(!Te)return{major:0,minor:0};const Me=un=>Number(se.replace(Te,"$"+un));return Uo(Me(1),Me(2))},Or=(K,se)=>{const Te=String(se).toLowerCase();return K.length===0?$o():ta(K,Te)},$o=()=>Uo(0,0),Uo=(K,se)=>({major:K,minor:se}),vr={nu:Uo,detect:Or,unknown:$o},na=(K,se)=>nn(se.brands,Te=>{const Me=Te.brand.toLowerCase();return It(K,un=>{var go;return Me===((go=un.brand)===null||go===void 0?void 0:go.toLowerCase())}).map(un=>({current:un.name,version:vr.nu(parseInt(Te.version,10),0)}))}),bc=(K,se)=>{const Te=String(se).toLowerCase();return It(K,Me=>Me.search(Te))},Gl=(K,se)=>bc(K,se).map(Te=>{const Me=vr.detect(Te.versionRegexes,se);return{current:Te.name,version:Me}}),Zc=(K,se)=>bc(K,se).map(Te=>{const Me=vr.detect(Te.versionRegexes,se);return{current:Te.name,version:Me}}),Fo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dr=K=>se=>on(se,K),ya=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:K=>on(K,"edge/")&&on(K,"chrome")&&on(K,"safari")&&on(K,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fo],search:K=>on(K,"chrome")&&!on(K,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:K=>on(K,"msie")||on(K,"trident")},{name:"Opera",versionRegexes:[Fo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dr("firefox")},{name:"Safari",versionRegexes:[Fo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:K=>(on(K,"safari")||on(K,"mobile/"))&&on(K,"applewebkit")}],Sl=[{name:"Windows",search:dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:K=>on(K,"iphone")||on(K,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dr("linux"),versionRegexes:[]},{name:"Solaris",search:dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ua={browsers:Bn(ya),oses:Bn(Sl)},Os="Edge",hs="Chromium",Pa="IE",ql="Opera",jo="Firefox",Wr="Safari",Ba=()=>yr({current:void 0,version:vr.unknown()}),yr=K=>{const se=K.current,Te=K.version,Me=un=>()=>se===un;return{current:se,version:Te,isEdge:Me(Os),isChromium:Me(hs),isIE:Me(Pa),isOpera:Me(ql),isFirefox:Me(jo),isSafari:Me(Wr)}},oc={unknown:Ba,nu:yr,edge:Bn(Os),chromium:Bn(hs),ie:Bn(Pa),opera:Bn(ql),firefox:Bn(jo),safari:Bn(Wr)},Pc="Windows",Ca="iOS",sc="Android",vc="Linux",Pi="macOS",ja="Solaris",ll="FreeBSD",da="ChromeOS",yc=()=>xl({current:void 0,version:vr.unknown()}),xl=K=>{const se=K.current,Te=K.version,Me=un=>()=>se===un;return{current:se,version:Te,isWindows:Me(Pc),isiOS:Me(Ca),isAndroid:Me(sc),isMacOS:Me(Pi),isLinux:Me(vc),isSolaris:Me(ja),isFreeBSD:Me(ll),isChromeOS:Me(da)}},Kl={unknown:yc,nu:xl,windows:Bn(Pc),ios:Bn(Ca),android:Bn(sc),linux:Bn(vc),macos:Bn(Pi),solaris:Bn(ja),freebsd:Bn(ll),chromeos:Bn(da)},Bi={detect:(K,se,Te)=>{const Me=ua.browsers(),un=ua.oses(),go=se.bind(Co=>na(Me,Co)).orThunk(()=>Gl(Me,K)).fold(oc.unknown,oc.nu),Ls=Zc(un,K).fold(Kl.unknown,Kl.nu),fa=wl(Ls,go,K,Te);return{browser:go,os:Ls,deviceType:fa}}},Ga=K=>window.matchMedia(K).matches;let su=Xo(()=>Bi.detect(navigator.userAgent,en.from(navigator.userAgentData),Ga));const U=()=>su(),ae=(K,se)=>({left:K,top:se,translate:(Me,un)=>ae(K+Me,se+un)}),ve=ae,Ue=K=>{const se=K!==void 0?K.dom:document,Te=se.body.scrollLeft||se.documentElement.scrollLeft,Me=se.body.scrollTop||se.documentElement.scrollTop;return ve(Te,Me)},dt=K=>{const se=K===void 0?window:K;return U().browser.isFirefox()?en.none():en.from(se.visualViewport)},sn=(K,se,Te,Me)=>({x:K,y:se,width:Te,height:Me,right:K+Te,bottom:se+Me}),vo=K=>{const se=K===void 0?window:K,Te=se.document,Me=Ue(ur.fromDom(Te));return dt(se).fold(()=>{const un=se.document.documentElement,go=un.clientWidth,Ls=un.clientHeight;return sn(Me.left,Me.top,go,Ls)},un=>sn(Math.max(un.pageLeft,Me.left),Math.max(un.pageTop,Me.top),un.width,un.height))},ko=(K,se,Te)=>dt(Te).map(Me=>{const un=go=>se(Qn(go));return Me.addEventListener(K,un),{unbind:()=>Me.removeEventListener(K,un)}}).getOrThunk(()=>({unbind:De}));var oo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),us=tinymce.util.Tools.resolve("tinymce.Env");const js=(K,se)=>{K.dispatch("FullscreenStateChanged",{state:se}),K.dispatch("ResizeEditor")},vt=K=>se=>se.options.get(K),Du=K=>{const se=K.options.register;se("fullscreen_native",{processor:"boolean",default:!1})},bs=vt("fullscreen_native"),$=K=>{const se=ur.fromDom(K.getElement());return is(se).map(nr).getOrThunk(()=>Br(ia(se)))},X=K=>K.fullscreenElement!==void 0?K.fullscreenElement:K.msFullscreenElement!==void 0?K.msFullscreenElement:K.webkitFullscreenElement!==void 0?K.webkitFullscreenElement:null,oe=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Re=K=>{const se=K.dom;se.requestFullscreen?se.requestFullscreen():se.msRequestFullscreen?se.msRequestFullscreen():se.webkitRequestFullScreen&&se.webkitRequestFullScreen()},Pt=K=>{const se=K.dom;se.exitFullscreen?se.exitFullscreen():se.msExitFullscreen?se.msExitFullscreen():se.webkitCancelFullScreen&&se.webkitCancelFullScreen()},io=K=>K.dom===X(ia(K).dom),Yt=(K,se,Te)=>ns(va(K,Te),se),Gs=(K,se)=>ns(Wa(K),se),ct=K=>Ar(K),xs=(K,se,Te)=>Yt(K,Me=>ft(Me,se),Te),qa=(K,se)=>Gs(K,Te=>ft(Te,se)),$s="data-ephox-mobile-fullscreen-style",$r="display:none!important;",il="position:absolute!important;",_o="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ka="background-color:rgb(255,255,255)!important;",qs=us.os.isAndroid(),Yl=K=>{const se=He(K,"background-color");return se!==void 0&&se!==""?"background-color:"+se+"!important":Ka},Qs=(K,se,Te)=>{const Me=Zr=>qa(Zr,"*:not(.tox-silver-sink)"),un=Zr=>Ks=>{const Dr=qo(Ks,"style"),Sr=Dr===void 0?"no-styles":Dr.trim();Sr!==Zr&&(ls(Ks,$s,Sr),Oe(Ks,K.parseStyle(Zr)))},go=xs(se,"*"),Ls=ao(go,Me),fa=Yl(Te);ie(Ls,un($r)),ie(go,un(il+_o+fa)),un((qs===!0?"":il)+_o+fa)(se)},Ru=K=>{const se=ct("["+$s+"]");ie(se,Te=>{const Me=qo(Te,$s);Me&&Me!=="no-styles"?Oe(Te,K.parseStyle(Me)):Qr(Te,"style"),Qr(Te,$s)})},xm=oo.DOM,yg=()=>vo(window),or=K=>window.scrollTo(K.x,K.y),Tl=dt().fold(()=>({bind:De,unbind:De}),K=>{const se=lo(),Te=zs(),Me=zs(),un=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},go=()=>{window.requestAnimationFrame(()=>{se.on(Zr=>Oe(Zr,{top:K.offsetTop+"px",left:K.offsetLeft+"px",height:K.height+"px",width:K.width+"px"}))})},Ls=Js(()=>{un(),go()},50);return{bind:Zr=>{se.set(Zr),Ls.throttle(),Te.set(ko("resize",Ls.throttle)),Me.set(ko("scroll",Ls.throttle))},unbind:()=>{se.on(()=>{Te.clear(),Me.clear()}),se.clear()}}}),ma=(K,se)=>{const Te=document.body,Me=document.documentElement,un=K.getContainer(),go=ur.fromDom(un),Ls=os(go).filter(Sa=>Bo(Sa)&&Je(Sa,"tox-silver-sink")),fa=$(K),Co=se.get(),Zr=ur.fromDom(K.getBody()),Ks=us.deviceType.isTouch(),Dr=un.style,Sr=K.iframeElement,Cr=Sr==null?void 0:Sr.style,Bc=Sa=>{Sa(Te,"tox-fullscreen"),Sa(Me,"tox-fullscreen"),Sa(un,"tox-fullscreen"),is(go).map($c=>nr($c).dom).each($c=>{Sa($c,"tox-fullscreen"),Sa($c,"tox-shadowhost")})},Xl=()=>{Ks&&Ru(K.dom),Bc(xm.removeClass),Tl.unbind(),en.from(se.get()).each(Sa=>Sa.fullscreenChangeHandler.unbind())};if(Co)Co.fullscreenChangeHandler.unbind(),bs(K)&&io(fa)&&Pt(ia(fa)),Cr.width=Co.iframeWidth,Cr.height=Co.iframeHeight,Dr.width=Co.containerWidth,Dr.height=Co.containerHeight,Dr.top=Co.containerTop,Dr.left=Co.containerLeft,qe(Ls,Co.sinkCssPosition,(Sa,$c)=>{re(Sa,"position",$c)}),Xl(),or(Co.scrollPos),se.set(null),js(K,!1),K.off("remove",Xl);else{const Sa=Ur(ia(fa),oe(),ui=>{bs(K)&&!io(fa)&&se.get()!==null&&ma(K,se)}),$c={scrollPos:yg(),containerWidth:Dr.width,containerHeight:Dr.height,containerTop:Dr.top,containerLeft:Dr.left,iframeWidth:Cr.width,iframeHeight:Cr.height,fullscreenChangeHandler:Sa,sinkCssPosition:Ls.map(ui=>He(ui,"position"))};Ks&&Qs(K.dom,go,Zr),Cr.width=Cr.height="100%",Dr.width=Dr.height="",Bc(xm.addClass),Ls.each(ui=>{re(ui,"position","fixed")}),Tl.bind(go),K.on("remove",Xl),se.set($c),bs(K)&&Re(fa),js(K,!0)}},wa=(K,se)=>{K.addCommand("mceFullScreen",()=>{ma(K,se)})};var Ya=tinymce.util.Tools.resolve("tinymce.util.VK");const Fd=(K,se)=>{K.on("init",()=>{K.on("keydown",Te=>{Te.keyCode===Ya.TAB&&!(Te.metaKey||Te.ctrlKey)&&se.get()&&Te.preventDefault()})})},To=(K,se)=>Te=>{Te.setActive(se.get()!==null);const Me=un=>Te.setActive(un.state);return K.on("FullscreenStateChanged",Me),()=>K.off("FullscreenStateChanged",Me)},rc=(K,se)=>{const Te=()=>K.execCommand("mceFullScreen");K.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Te,onSetup:To(K,se)}),K.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Te,onSetup:To(K,se),shortcut:"Meta+Shift+F"})};var $a=()=>{Pn.add("fullscreen",K=>{const se=it(null);return K.inline||(Du(K),wa(K,se),rc(K,se),Fd(K,se),K.addShortcut("Meta+Shift+F","","mceFullScreen")),Xt(se)})};$a()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=Object.getPrototypeOf,Xt=($,X,oe)=>{var Re;return oe($,X.prototype)?!0:((Re=$.constructor)===null||Re===void 0?void 0:Re.name)===X.name},an=$=>{const X=typeof $;return $===null?"null":X==="object"&&Array.isArray($)?"array":X==="object"&&Xt($,String,(oe,Re)=>Re.isPrototypeOf(oe))?"string":X},bt=$=>X=>an(X)===$,jt=$=>X=>typeof X===$,zn=$=>X=>$===X,Mt=($,X)=>Xn($)&&Xt($,X,(oe,Re)=>Pn(oe)===Re),Gt=bt("string"),Xn=bt("object"),Cn=$=>Mt($,Object),qt=bt("array"),En=zn(null),At=jt("boolean"),Tt=$=>$==null,Xe=$=>!Tt($),nt=jt("function"),Un=jt("number"),De=($,X)=>{if(qt($)){for(let oe=0,Re=$.length;oe<Re;++oe)if(!X($[oe]))return!1;return!0}return!1},ee=()=>{};class Ye{constructor(X,oe){this.tag=X,this.value=oe}static some(X){return new Ye(!0,X)}static none(){return Ye.singletonNone}fold(X,oe){return this.tag?oe(this.value):X()}isSome(){return this.tag}isNone(){return!this.tag}map(X){return this.tag?Ye.some(X(this.value)):Ye.none()}bind(X){return this.tag?X(this.value):Ye.none()}exists(X){return this.tag&&X(this.value)}forall(X){return!this.tag||X(this.value)}filter(X){return!this.tag||X(this.value)?this:Ye.none()}getOr(X){return this.tag?this.value:X}or(X){return this.tag?this:X}getOrThunk(X){return this.tag?this.value:X()}orThunk(X){return this.tag?this:X()}getOrDie(X){if(this.tag)return this.value;throw new Error(X??"Called getOrDie on None")}static from(X){return Xe(X)?Ye.some(X):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(X){this.tag&&X(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ye.singletonNone=new Ye(!1);const Bn=Object.keys,tt=Object.hasOwnProperty,W=($,X)=>{const oe=Bn($);for(let Re=0,Pt=oe.length;Re<Pt;Re++){const io=oe[Re],Yt=$[io];X(Yt,io)}},Ot=$=>(X,oe)=>{$[oe]=X},en=($,X,oe,Re)=>{W($,(Pt,io)=>{(X(Pt,io)?oe:Re)(Pt,io)})},wn=($,X)=>{const oe={};return en($,X,Ot(oe),ee),oe},_e=($,X)=>tt.call($,X),ie=($,X)=>_e($,X)&&$[X]!==void 0&&$[X]!==null,ns=Array.prototype.push,so=$=>{const X=[];for(let oe=0,Re=$.length;oe<Re;++oe){if(!qt($[oe]))throw new Error("Arr.flatten item "+oe+" was not an array, input: "+$);ns.apply(X,$[oe])}return X},It=($,X)=>X>=0&&X<$.length?Ye.some($[X]):Ye.none(),A=$=>It($,0),ao=($,X)=>{for(let oe=0;oe<$.length;oe++){const Re=X($[oe],oe);if(Re.isSome())return Re}return Ye.none()};typeof window<"u"||Function("return this;")();const st=($,X,oe)=>{if(Gt(oe)||At(oe)||Un(oe))$.setAttribute(X,oe+"");else throw console.error("Invalid call to Attribute.set. Key ",X,":: Value ",oe,":: Element ",$),new Error("Attribute value was not simple")},Po=($,X,oe)=>{st($.dom,X,oe)},nn=($,X)=>{$.dom.removeAttribute(X)},qe=($,X)=>{const Re=(X||document).createElement("div");if(Re.innerHTML=$,!Re.hasChildNodes()||Re.childNodes.length>1){const Pt="HTML does not have a single root node";throw console.error(Pt,$),new Error(Pt)}return lo(Re.childNodes[0])},bo=($,X)=>{const Re=(X||document).createElement($);return lo(Re)},zs=($,X)=>{const Re=(X||document).createTextNode($);return lo(Re)},lo=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},We={fromHtml:qe,fromTag:bo,fromText:zs,fromDom:lo,fromPoint:($,X,oe)=>Ye.from($.dom.elementFromPoint(X,oe)).map(lo)};var ut=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),L=tinymce.util.Tools.resolve("tinymce.util.URI");const Jr=$=>$.length>0,uo=$=>X=>X.options.get($),cs=$=>{const X=$.options.register;X("image_dimensions",{processor:"boolean",default:!0}),X("image_advtab",{processor:"boolean",default:!1}),X("image_uploadtab",{processor:"boolean",default:!0}),X("image_prepend_url",{processor:"string",default:""}),X("image_class_list",{processor:"object[]"}),X("image_description",{processor:"boolean",default:!0}),X("image_title",{processor:"boolean",default:!1}),X("image_caption",{processor:"boolean",default:!1}),X("image_list",{processor:oe=>{const Re=oe===!1||Gt(oe)||De(oe,Xn)||nt(oe);return Re?{value:oe,valid:Re}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},zo=uo("image_dimensions"),Nc=uo("image_advtab"),Sn=uo("image_uploadtab"),Ro=uo("image_prepend_url"),gn=uo("image_class_list"),ye=uo("image_description"),Ct=uo("image_title"),fo=uo("image_caption"),Bt=uo("image_list"),Is=uo("a11y_advanced_options"),Bo=uo("automatic_uploads"),zr=$=>Jr($.options.get("images_upload_url")),ms=$=>Xe($.options.get("images_upload_handler")),Us=($,X)=>Math.max(parseInt($,10),parseInt(X,10)),tc=$=>new Promise(X=>{const oe=document.createElement("img"),Re=io=>{oe.onload=oe.onerror=null,oe.parentNode&&oe.parentNode.removeChild(oe),X(io)};oe.onload=()=>{const io=Us(oe.width,oe.clientWidth),Yt=Us(oe.height,oe.clientHeight),Gs={width:io,height:Yt};Re(Promise.resolve(Gs))},oe.onerror=()=>{Re(Promise.reject(`Failed to get image dimensions for: ${$}`))};const Pt=oe.style;Pt.visibility="hidden",Pt.position="fixed",Pt.bottom=Pt.left="0px",Pt.width=Pt.height="auto",document.body.appendChild(oe),oe.src=$}),Ps=$=>($&&($=$.replace(/px$/,"")),$),ls=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),qo=$=>{if($.margin){const X=String($.margin).split(" ");switch(X.length){case 1:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[0],$["margin-bottom"]=$["margin-bottom"]||X[0],$["margin-left"]=$["margin-left"]||X[0];break;case 2:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[0],$["margin-left"]=$["margin-left"]||X[1];break;case 3:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[2],$["margin-left"]=$["margin-left"]||X[1];break;case 4:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[2],$["margin-left"]=$["margin-left"]||X[3]}delete $.margin}return $},Qr=($,X)=>{const oe=Bt($);Gt(oe)?fetch(oe).then(Re=>{Re.ok&&Re.json().then(X)}):nt(oe)?oe(X):X(oe)},$e=($,X,oe)=>{const Re=()=>{oe.onload=oe.onerror=null,$.selection&&($.selection.select(oe),$.nodeChanged())};oe.onload=()=>{!X.width&&!X.height&&zo($)&&$.dom.setAttribs(oe,{width:String(oe.clientWidth),height:String(oe.clientHeight)}),Re()},oe.onerror=Re},Je=$=>new Promise((X,oe)=>{const Re=new FileReader;Re.onload=()=>{X(Re.result)},Re.onerror=()=>{var Pt;oe((Pt=Re.error)===null||Pt===void 0?void 0:Pt.message)},Re.readAsDataURL($)}),on=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),Ft=($,X)=>{const oe=$.options.get;return L.isDomSafe(X,"img",{allow_html_data_urls:oe("allow_html_data_urls"),allow_script_urls:oe("allow_script_urls"),allow_svg_data_urls:oe("allow_svg_data_urls")})},Jn=ut.DOM,Ko=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?Ps($.style.marginLeft):"",wr=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?Ps($.style.marginTop):"",Hn=$=>$.style.borderWidth?Ps($.style.borderWidth):"",fs=($,X)=>{var oe;return $.hasAttribute(X)&&(oe=$.getAttribute(X))!==null&&oe!==void 0?oe:""},ur=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",ft=($,X,oe)=>{oe===""||oe===null?$.removeAttribute(X):$.setAttribute(X,oe)},yo=$=>{const X=Jn.create("figure",{class:"image"});Jn.insertAfter(X,$),X.appendChild($),X.appendChild(Jn.create("figcaption",{contentEditable:"true"},"Caption")),X.contentEditable="false"},Ar=$=>{const X=$.parentNode;Xe(X)&&(Jn.insertAfter($,X),Jn.remove(X))},la=$=>{ur($)?Ar($):yo($)},ia=($,X)=>{const oe=$.getAttribute("style"),Re=X(oe!==null?oe:"");Re.length>0?($.setAttribute("style",Re),$.setAttribute("data-mce-style",Re)):$.removeAttribute("style")},ea=($,X)=>(oe,Re,Pt)=>{const io=oe.style;io[Re]?(io[Re]=ls(Pt),ia(oe,X)):ft(oe,Re,Pt)},Yo=($,X)=>$.style[X]?Ps($.style[X]):fs($,X),va=($,X)=>{const oe=ls(X);$.style.marginLeft=oe,$.style.marginRight=oe},Wa=($,X)=>{const oe=ls(X);$.style.marginTop=oe,$.style.marginBottom=oe},os=($,X)=>{const oe=ls(X);$.style.borderWidth=oe},pn=($,X)=>{$.style.borderStyle=X},pr=$=>{var X;return(X=$.style.borderStyle)!==null&&X!==void 0?X:""},Za=$=>Xe($)&&$.nodeName==="FIGURE",jl=$=>$.nodeName==="IMG",Cl=$=>Jn.getAttrib($,"alt").length===0&&Jn.getAttrib($,"role")==="presentation",is=$=>Cl($)?"":fs($,"alt"),nr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ws=($,X)=>{var oe;const Re=document.createElement("img");return ft(Re,"style",X.style),(Ko(Re)||X.hspace!=="")&&va(Re,X.hspace),(wr(Re)||X.vspace!=="")&&Wa(Re,X.vspace),(Hn(Re)||X.border!=="")&&os(Re,X.border),(pr(Re)||X.borderStyle!=="")&&pn(Re,X.borderStyle),$((oe=Re.getAttribute("style"))!==null&&oe!==void 0?oe:"")},Na=($,X)=>{const oe=document.createElement("img");if(He($,{...X,caption:!1},oe),ue(oe,X.alt,X.isDecorative),X.caption){const Re=Jn.create("figure",{class:"image"});return Re.appendChild(oe),Re.appendChild(Jn.create("figcaption",{contentEditable:"true"},"Caption")),Re.contentEditable="false",Re}else return oe},cl=($,X)=>({src:fs(X,"src"),alt:is(X),title:fs(X,"title"),width:Yo(X,"width"),height:Yo(X,"height"),class:fs(X,"class"),style:$(fs(X,"style")),caption:ur(X),hspace:Ko(X),vspace:wr(X),border:Hn(X),borderStyle:pr(X),isDecorative:Cl(X)}),Br=($,X,oe,Re,Pt)=>{oe[Re]!==X[Re]&&Pt($,Re,String(oe[Re]))},ue=($,X,oe)=>{if(oe){Jn.setAttrib($,"role","presentation");const Re=We.fromDom($);Po(Re,"alt","")}else{if(En(X)){const Re=We.fromDom($);nn(Re,"alt")}else{const Re=We.fromDom($);Po(Re,"alt",X)}Jn.getAttrib($,"role")==="presentation"&&Jn.setAttrib($,"role","")}},re=($,X,oe)=>{(oe.alt!==X.alt||oe.isDecorative!==X.isDecorative)&&ue($,oe.alt,oe.isDecorative)},Oe=($,X)=>(oe,Re,Pt)=>{$(oe,Pt),ia(oe,X)},He=($,X,oe)=>{const Re=cl($,oe);Br(oe,Re,X,"caption",(Pt,io,Yt)=>la(Pt)),Br(oe,Re,X,"src",ft),Br(oe,Re,X,"title",ft),Br(oe,Re,X,"width",ea("width",$)),Br(oe,Re,X,"height",ea("height",$)),Br(oe,Re,X,"class",ft),Br(oe,Re,X,"style",Oe((Pt,io)=>ft(Pt,"style",io),$)),Br(oe,Re,X,"hspace",Oe(va,$)),Br(oe,Re,X,"vspace",Oe(Wa,$)),Br(oe,Re,X,"border",Oe(os,$)),Br(oe,Re,X,"borderStyle",Oe(pn,$)),re(oe,Re,X)},ln=($,X)=>{const oe=$.dom.styles.parse(X),Re=qo(oe),Pt=$.dom.styles.parse($.dom.styles.serialize(Re));return $.dom.styles.serialize(Pt)},xn=$=>{const X=$.selection.getNode(),oe=$.dom.getParent(X,"figure.image");return oe?$.dom.select("img",oe)[0]:X&&(X.nodeName!=="IMG"||on(X))?null:X},Qn=($,X)=>{var oe;const Re=$.dom,Pt=wn($.schema.getTextBlockElements(),(Yt,Gs)=>!$.schema.isValidChild(Gs,"figure")),io=Re.getParent(X.parentNode,Yt=>ie(Pt,Yt.nodeName),$.getBody());return io&&(oe=Re.split(io,X))!==null&&oe!==void 0?oe:X},Bs=$=>{const X=xn($);return X?cl(oe=>ln($,oe),X):nr()},pe=($,X)=>{const oe=Na(Pt=>ln($,Pt),X);$.dom.setAttrib(oe,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(oe.outerHTML);const Re=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Re,"data-mce-id",null),Za(Re)){const Pt=Qn($,Re);$.selection.select(Pt)}else $.selection.select(Re)},Vn=($,X)=>{$.dom.setAttrib(X,"src",X.getAttribute("src"))},Zs=($,X)=>{if(X){const oe=$.dom.is(X.parentNode,"figure.image")?X.parentNode:X;$.dom.remove(oe),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},br=($,X)=>{const oe=xn($);if(oe)if(He(Re=>ln($,Re),X,oe),Vn($,oe),Za(oe.parentNode)){const Re=oe.parentNode;Qn($,Re),$.selection.select(oe.parentNode)}else $.selection.select(oe),$e($,X,oe)},Ur=($,X)=>{const oe=X.src;return{...X,src:Ft($,oe)?oe:""}},Xo=($,X)=>{const oe=xn($);if(oe){const Pt={...cl(Yt=>ln($,Yt),oe),...X},io=Ur($,Pt);Pt.src?br($,io):Zs($,oe)}else X.src&&pe($,{...nr(),...X})},ta=($=>(...X)=>{if(X.length===0)throw new Error("Can't merge zero objects");const oe={};for(let Re=0;Re<X.length;Re++){const Pt=X[Re];for(const io in Pt)_e(Pt,io)&&(oe[io]=$(oe[io],Pt[io]))}return oe})(($,X)=>Cn($)&&Cn(X)?ta($,X):X);var Or=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),$o=tinymce.util.Tools.resolve("tinymce.util.Tools");const Uo=$=>Gt($.value)?$.value:"",vr=$=>Gt($.text)?$.text:Gt($.title)?$.title:"",na=($,X)=>{const oe=[];return $o.each($,Re=>{const Pt=vr(Re);if(Re.menu!==void 0){const io=na(Re.menu,X);oe.push({text:Pt,items:io})}else{const io=X(Re);oe.push({text:Pt,value:io})}}),oe},bc=($=Uo)=>X=>X?Ye.from(X).map(oe=>na(oe,$)):Ye.none(),Gl=$=>bc(Uo)($),Zc=$=>_e($,"items"),Fo=($,X)=>ao($,oe=>Zc(oe)?Fo(oe.items,X):oe.value===X?Ye.some(oe):Ye.none()),ya={sanitizer:bc,sanitize:Gl,findEntry:($,X)=>$.bind(oe=>Fo(oe,X))},ua={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Os=$=>{const X=ya.sanitizer(qs=>$.convertURL(qs.value||qs.url||"","src")),oe=new Promise(qs=>{Qr($,Yl=>{qs(X(Yl).map(Qs=>so([[{text:"None",value:""}],Qs])))})}),Re=ya.sanitize(gn($)),Pt=Nc($),io=Sn($),Yt=zr($),Gs=ms($),ct=Bs($),xs=ye($),qa=Ct($),$s=zo($),$r=fo($),il=Is($),_o=Bo($),Ka=Ye.some(Ro($)).filter(qs=>Gt(qs)&&qs.length>0);return oe.then(qs=>({image:ct,imageList:qs,classList:Re,hasAdvTab:Pt,hasUploadTab:io,hasUploadUrl:Yt,hasUploadHandler:Gs,hasDescription:xs,hasImageTitle:qa,hasDimensions:$s,hasImageCaption:$r,prependURL:Ka,hasAccessibilityOptions:il,automaticUploads:_o}))},hs=$=>{const X={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},oe=$.imageList.map(qa=>({name:"images",type:"listbox",label:"Image list",items:qa})),Re={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Pt={name:"title",type:"input",label:"Image title"},io={name:"dimensions",type:"sizeinput"},Yt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Gs=$.classList.map(qa=>({name:"classes",type:"listbox",label:"Class",items:qa})),ct={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},xs=qa=>qa?{type:"grid",columns:2}:{type:"panel"};return so([[X],oe.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Yt]:[],$.hasDescription?[Re]:[],$.hasImageTitle?[Pt]:[],$.hasDimensions?[io]:[],[{...xs($.classList.isSome()&&$.hasImageCaption),items:so([Gs.toArray(),$.hasImageCaption?[ct]:[]])}]])},ql={makeTab:$=>({title:"General",name:"general",items:hs($)}),makeItems:hs},Wr={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ba=$=>({prevImage:ya.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),yr=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),oc=($,X)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&X?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),Pc=($,X)=>/^(?:[a-zA-Z]+:)?\/\//.test(X)?Ye.none():$.prependURL.bind(oe=>X.substring(0,oe.length)!==oe?Ye.some(oe+X):Ye.none()),Ca=($,X)=>{const oe=X.getData();Pc($,oe.src.value).each(Re=>{X.setData({src:{value:Re,meta:oe.src.meta}})})},sc=($,X,oe)=>{$.hasDescription&&Gt(oe.alt)&&(X.alt=oe.alt),$.hasAccessibilityOptions&&(X.isDecorative=oe.isDecorative||X.isDecorative||!1),$.hasImageTitle&&Gt(oe.title)&&(X.title=oe.title),$.hasDimensions&&(Gt(oe.width)&&(X.dimensions.width=oe.width),Gt(oe.height)&&(X.dimensions.height=oe.height)),Gt(oe.class)&&ya.findEntry($.classList,oe.class).each(Re=>{X.classes=Re.value}),$.hasImageCaption&&At(oe.caption)&&(X.caption=oe.caption),$.hasAdvTab&&(Gt(oe.style)&&(X.style=oe.style),Gt(oe.vspace)&&(X.vspace=oe.vspace),Gt(oe.border)&&(X.border=oe.border),Gt(oe.hspace)&&(X.hspace=oe.hspace),Gt(oe.borderstyle)&&(X.borderstyle=oe.borderstyle))},vc=($,X)=>{const oe=X.getData(),Re=oe.src.meta;if(Re!==void 0){const Pt=ta({},oe);sc($,Pt,Re),X.setData(Pt)}},Pi=($,X,oe,Re)=>{const Pt=Re.getData(),io=Pt.src.value,Yt=Pt.src.meta||{};!Yt.width&&!Yt.height&&X.hasDimensions&&(Jr(io)?$.imageSize(io).then(Gs=>{oe.open&&Re.setData({dimensions:Gs})}).catch(Gs=>console.error(Gs)):Re.setData({dimensions:{width:"",height:""}}))},ja=($,X,oe)=>{const Re=oe.getData(),Pt=ya.findEntry($.imageList,Re.src.value);X.prevImage=Pt,oe.setData({images:Pt.map(io=>io.value).getOr("")})},ll=($,X,oe,Re)=>{Ca(X,Re),vc(X,Re),Pi($,X,oe,Re),ja(X,oe,Re)},da=($,X,oe,Re)=>{const Pt=Re.getData(),io=ya.findEntry(X.imageList,Pt.images);io.each(Yt=>{Pt.alt===""||oe.prevImage.map(ct=>ct.text===Pt.alt).getOr(!1)?Yt.value===""?Re.setData({src:Yt,alt:oe.prevAlt}):Re.setData({src:Yt,alt:Yt.text}):Re.setData({src:Yt})}),oe.prevImage=io,ll($,X,oe,Re)},yc=($,X,oe,Re)=>{const Pt=Re.getData();Re.block("Uploading image"),A(Pt.fileinput).fold(()=>{Re.unblock()},io=>{const Yt=URL.createObjectURL(io),Gs=()=>{Re.unblock(),URL.revokeObjectURL(Yt)},ct=xs=>{Re.setData({src:{value:xs,meta:{}}}),Re.showTab("general"),ll($,X,oe,Re),Re.focus("src")};Je(io).then(xs=>{const qa=$.createBlobCache(io,Yt,xs);X.automaticUploads?$.uploadImage(qa).then($s=>{ct($s.url),Gs()}).catch($s=>{Gs(),$.alertErr($s)}):($.addToBlobCache(qa),ct(qa.blobUri()),Re.unblock())})})},xl=($,X,oe)=>(Re,Pt)=>{Pt.name==="src"?ll($,X,oe,Re):Pt.name==="images"?da($,X,oe,Re):Pt.name==="alt"?oe.prevAlt=Re.getData().alt:Pt.name==="fileinput"?yc($,X,oe,Re):Pt.name==="isDecorative"&&Re.setEnabled("alt",!Re.getData().isDecorative)},Kl=$=>()=>{$.open=!1},Ou=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:so([[ql.makeTab($)],$.hasAdvTab?[ua.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Wr.makeTab($)]:[]])}:{type:"panel",items:ql.makeItems($)},Bi=($,X,oe)=>Re=>{const Pt=ta(yr(X.image),Re.getData()),io={...Pt,style:Ws(oe.normalizeCss,oc(Pt,!1))};$.execCommand("mceUpdateImage",!1,oc(io,X.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Re.close()},Ga=$=>X=>Ft($,X)?tc($.documentBaseURI.toAbsolute(X)).then(oe=>({width:String(oe.width),height:String(oe.height)})):Promise.resolve({width:"",height:""}),su=$=>(X,oe,Re)=>{var Pt;return $.editorUpload.blobCache.create({blob:X,blobUri:oe,name:(Pt=X.name)===null||Pt===void 0?void 0:Pt.replace(/\.[^\.]+$/,""),filename:X.name,base64:Re.split(",")[1]})},U=$=>X=>{$.editorUpload.blobCache.add(X)},ae=$=>X=>{$.windowManager.alert(X)},ve=$=>X=>ln($,X),Ue=$=>X=>$.dom.parseStyle(X),dt=$=>(X,oe)=>$.dom.serializeStyle(X,oe),sn=$=>X=>Or($).upload([X],!1).then(oe=>{var Re;return oe.length===0?Promise.reject("Failed to upload image"):oe[0].status===!1?Promise.reject((Re=oe[0].error)===null||Re===void 0?void 0:Re.message):oe[0]}),vo=$=>{const X={imageSize:Ga($),addToBlobCache:U($),createBlobCache:su($),alertErr:ae($),normalizeCss:ve($),parseStyle:Ue($),serializeStyle:dt($),uploadImage:sn($)};return{open:()=>{Os($).then(Re=>{const Pt=Ba(Re);return{title:"Insert/Edit Image",size:"normal",body:Ou(Re),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:yr(Re.image),onSubmit:Bi($,Re,X),onChange:xl(X,Re,Pt),onClose:Kl(Pt)}}).then($.windowManager.open)}}},ko=$=>{$.addCommand("mceImage",vo($).open),$.addCommand("mceUpdateImage",(X,oe)=>{$.undoManager.transact(()=>Xo($,oe))})},oo=$=>{const X=$.attr("class");return Xe(X)&&/\bimage\b/.test(X)},us=$=>X=>{let oe=X.length;const Re=Pt=>{Pt.attr("contenteditable",$?"true":null)};for(;oe--;){const Pt=X[oe];oo(Pt)&&(Pt.attr("contenteditable",$?"false":null),$o.each(Pt.getAll("figcaption"),Re))}},js=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",us(!0)),$.serializer.addNodeFilter("figure",us(!1))})},vt=$=>X=>{const oe=()=>{X.setEnabled($.selection.isEditable())};return $.on("NodeChange",oe),oe(),()=>{$.off("NodeChange",oe)}},Du=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:vo($).open,onSetup:X=>{X.setActive(Xe(xn($)));const oe=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",X.setActive).unbind,Re=vt($)(X);return()=>{oe(),Re()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:vo($).open,onSetup:vt($)}),$.ui.registry.addContextMenu("image",{update:X=>$.selection.isEditable()&&(Za(X)||jl(X)&&!on(X))?["image"]:[]})};var bs=()=>{it.add("image",$=>{cs($),js($),Du($),ko($)})};bs()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=tt=>W=>W.options.get(tt),Xt=tt=>{const W=tt.options.register;W("insertdatetime_dateformat",{processor:"string",default:tt.translate("%Y-%m-%d")}),W("insertdatetime_timeformat",{processor:"string",default:tt.translate("%H:%M:%S")}),W("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),W("insertdatetime_element",{processor:"boolean",default:!1})},an=Pn("insertdatetime_dateformat"),bt=Pn("insertdatetime_timeformat"),jt=Pn("insertdatetime_formats"),zn=Pn("insertdatetime_element"),Mt=tt=>{const W=jt(tt);return W.length>0?W[0]:bt(tt)},Gt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Xn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Cn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),qt="January February March April May June July August September October November December".split(" "),En=(tt,W)=>{if(tt=""+tt,tt.length<W)for(let Ot=0;Ot<W-tt.length;Ot++)tt="0"+tt;return tt},At=(tt,W,Ot=new Date)=>(W=W.replace("%D","%m/%d/%Y"),W=W.replace("%r","%I:%M:%S %p"),W=W.replace("%Y",""+Ot.getFullYear()),W=W.replace("%y",""+Ot.getYear()),W=W.replace("%m",En(Ot.getMonth()+1,2)),W=W.replace("%d",En(Ot.getDate(),2)),W=W.replace("%H",""+En(Ot.getHours(),2)),W=W.replace("%M",""+En(Ot.getMinutes(),2)),W=W.replace("%S",""+En(Ot.getSeconds(),2)),W=W.replace("%I",""+((Ot.getHours()+11)%12+1)),W=W.replace("%p",Ot.getHours()<12?"AM":"PM"),W=W.replace("%B",""+tt.translate(qt[Ot.getMonth()])),W=W.replace("%b",""+tt.translate(Cn[Ot.getMonth()])),W=W.replace("%A",""+tt.translate(Xn[Ot.getDay()])),W=W.replace("%a",""+tt.translate(Gt[Ot.getDay()])),W=W.replace("%%","%"),W),Tt=(tt,W,Ot,en)=>{const wn=tt.dom.create("time",{datetime:Ot},en);tt.dom.replace(wn,W),tt.selection.select(wn,!0),tt.selection.collapse(!1)},Xe=(tt,W)=>{if(zn(tt)){const Ot=At(tt,W);let en;/%[HMSIp]/.test(W)?en=At(tt,"%Y-%m-%dT%H:%M"):en=At(tt,"%Y-%m-%d");const wn=tt.dom.getParent(tt.selection.getStart(),"time");wn?Tt(tt,wn,en,Ot):tt.insertContent('<time datetime="'+en+'">'+Ot+"</time>")}else tt.insertContent(At(tt,W))},nt=tt=>{tt.addCommand("mceInsertDate",(W,Ot)=>{Xe(tt,Ot??an(tt))}),tt.addCommand("mceInsertTime",(W,Ot)=>{Xe(tt,Ot??bt(tt))})},Un=tt=>{let W=tt;return{get:()=>W,set:wn=>{W=wn}}};var De=tinymce.util.Tools.resolve("tinymce.util.Tools");const ee=tt=>W=>{const Ot=()=>{W.setEnabled(tt.selection.isEditable())};return tt.on("NodeChange",Ot),Ot(),()=>{tt.off("NodeChange",Ot)}},Ye=tt=>{const W=jt(tt),Ot=Un(Mt(tt)),en=_e=>tt.execCommand("mceInsertDate",!1,_e);tt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:_e=>_e===Ot.get(),fetch:_e=>{_e(De.map(W,ie=>({type:"choiceitem",text:At(tt,ie),value:ie})))},onAction:_e=>{en(Ot.get())},onItemAction:(_e,ie)=>{Ot.set(ie),en(ie)},onSetup:ee(tt)});const wn=_e=>()=>{Ot.set(_e),en(_e)};tt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>De.map(W,_e=>({type:"menuitem",text:At(tt,_e),onAction:wn(_e)})),onSetup:ee(tt)})};var Bn=()=>{it.add("insertdatetime",tt=>{Xt(tt),nt(tt),Ye(tt)})};Bn()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=(U,ae,ve)=>{var Ue;return ve(U,ae.prototype)?!0:((Ue=U.constructor)===null||Ue===void 0?void 0:Ue.name)===ae.name},Xt=U=>{const ae=typeof U;return U===null?"null":ae==="object"&&Array.isArray(U)?"array":ae==="object"&&Pn(U,String,(ve,Ue)=>Ue.isPrototypeOf(ve))?"string":ae},an=U=>ae=>Xt(ae)===U,bt=U=>ae=>typeof ae===U,jt=U=>ae=>U===ae,zn=an("string"),Mt=an("object"),Gt=an("array"),Xn=jt(null),Cn=bt("boolean"),qt=U=>U==null,En=U=>!qt(U),At=bt("function"),Tt=(U,ae)=>{if(Gt(U)){for(let ve=0,Ue=U.length;ve<Ue;++ve)if(!ae(U[ve]))return!1;return!0}return!1},Xe=()=>{},nt=U=>()=>U,Un=(U,ae)=>U===ae;class De{constructor(ae,ve){this.tag=ae,this.value=ve}static some(ae){return new De(!0,ae)}static none(){return De.singletonNone}fold(ae,ve){return this.tag?ve(this.value):ae()}isSome(){return this.tag}isNone(){return!this.tag}map(ae){return this.tag?De.some(ae(this.value)):De.none()}bind(ae){return this.tag?ae(this.value):De.none()}exists(ae){return this.tag&&ae(this.value)}forall(ae){return!this.tag||ae(this.value)}filter(ae){return!this.tag||ae(this.value)?this:De.none()}getOr(ae){return this.tag?this.value:ae}or(ae){return this.tag?this:ae}getOrThunk(ae){return this.tag?this.value:ae()}orThunk(ae){return this.tag?this:ae()}getOrDie(ae){if(this.tag)return this.value;throw new Error(ae??"Called getOrDie on None")}static from(ae){return En(ae)?De.some(ae):De.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ae){this.tag&&ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}De.singletonNone=new De(!1);const ee=Array.prototype.indexOf,Ye=Array.prototype.push,Bn=(U,ae)=>ee.call(U,ae),tt=(U,ae)=>Bn(U,ae)>-1,W=(U,ae)=>{const ve=U.length,Ue=new Array(ve);for(let dt=0;dt<ve;dt++){const sn=U[dt];Ue[dt]=ae(sn,dt)}return Ue},Ot=(U,ae)=>{for(let ve=0,Ue=U.length;ve<Ue;ve++){const dt=U[ve];ae(dt,ve)}},en=(U,ae,ve)=>(Ot(U,(Ue,dt)=>{ve=ae(ve,Ue,dt)}),ve),wn=U=>{const ae=[];for(let ve=0,Ue=U.length;ve<Ue;++ve){if(!Gt(U[ve]))throw new Error("Arr.flatten item "+ve+" was not an array, input: "+U);Ye.apply(ae,U[ve])}return ae},_e=(U,ae)=>wn(W(U,ae)),ie=(U,ae)=>{for(let ve=0;ve<U.length;ve++){const Ue=ae(U[ve],ve);if(Ue.isSome())return Ue}return De.none()},ns=(U,ae,ve=Un)=>U.exists(Ue=>ve(Ue,ae)),so=U=>{const ae=[],ve=Ue=>{ae.push(Ue)};for(let Ue=0;Ue<U.length;Ue++)U[Ue].each(ve);return ae},It=(U,ae)=>U?De.some(ae):De.none(),A=U=>ae=>ae.options.get(U),ao=U=>{const ae=U.options.register;ae("link_assume_external_targets",{processor:ve=>{const Ue=zn(ve)||Cn(ve);return Ue?ve===!0?{value:1,valid:Ue}:ve==="http"||ve==="https"?{value:ve,valid:Ue}:{value:0,valid:Ue}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ae("link_context_toolbar",{processor:"boolean",default:!1}),ae("link_list",{processor:ve=>zn(ve)||At(ve)||Tt(ve,Mt)}),ae("link_default_target",{processor:"string"}),ae("link_default_protocol",{processor:"string",default:"https"}),ae("link_target_list",{processor:ve=>Cn(ve)||Tt(ve,Mt),default:!0}),ae("link_rel_list",{processor:"object[]",default:[]}),ae("link_class_list",{processor:"object[]",default:[]}),ae("link_title",{processor:"boolean",default:!0}),ae("allow_unsafe_link_target",{processor:"boolean",default:!1}),ae("link_quicklink",{processor:"boolean",default:!1})},st=A("link_assume_external_targets"),Po=A("link_context_toolbar"),nn=A("link_list"),qe=A("link_default_target"),bo=A("link_default_protocol"),zs=A("link_target_list"),lo=A("link_rel_list"),Js=A("link_class_list"),We=A("link_title"),ut=A("allow_unsafe_link_target"),L=A("link_quicklink"),Jr=Object.keys,uo=Object.hasOwnProperty,cs=(U,ae)=>{const ve=Jr(U);for(let Ue=0,dt=ve.length;Ue<dt;Ue++){const sn=ve[Ue],vo=U[sn];ae(vo,sn)}},zo=U=>(ae,ve)=>{U[ve]=ae},Nc=(U,ae,ve,Ue)=>{cs(U,(dt,sn)=>{(ae(dt,sn)?ve:Ue)(dt,sn)})},Sn=(U,ae)=>{const ve={};return Nc(U,ae,zo(ve),Xe),ve},Ro=(U,ae)=>uo.call(U,ae),gn=(U,ae)=>Ro(U,ae)&&U[ae]!==void 0&&U[ae]!==null;var ye=tinymce.util.Tools.resolve("tinymce.util.URI"),Ct=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),fo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bt=U=>En(U)&&U.nodeName.toLowerCase()==="a",Is=U=>Bt(U)&&!!ms(U),Bo=(U,ae)=>{if(U.collapsed)return[];{const ve=U.cloneContents(),Ue=ve.firstChild,dt=new Ct(Ue,ve),sn=[];let vo=Ue;do ae(vo)&&sn.push(vo);while(vo=dt.next());return sn}},zr=U=>/^\w+:/i.test(U),ms=U=>{var ae,ve;return(ve=(ae=U.getAttribute("data-mce-href"))!==null&&ae!==void 0?ae:U.getAttribute("href"))!==null&&ve!==void 0?ve:""},Us=(U,ae)=>{const ve=["noopener"],Ue=U?U.split(/\s+/):[],dt=oo=>fo.trim(oo.sort().join(" ")),sn=oo=>(oo=vo(oo),oo.length>0?oo.concat(ve):ve),vo=oo=>oo.filter(us=>fo.inArray(ve,us)===-1),ko=ae?sn(Ue):vo(Ue);return ko.length>0?dt(ko):""},tc=U=>U.replace(/\uFEFF/g,""),Ps=(U,ae)=>(ae=ae||Qr(U.selection.getRng())[0]||U.selection.getNode(),Jn(ae)?De.from(U.dom.select("a[href]",ae)[0]):De.from(U.dom.getParent(ae,"a[href]"))),ls=(U,ae)=>Ps(U,ae).isSome(),qo=(U,ae)=>{const ve=ae.fold(()=>U.getContent({format:"text"}),Ue=>Ue.innerText||Ue.textContent||"");return tc(ve)},Qr=U=>Bo(U,Is),$e=U=>fo.grep(U,Is),Je=U=>$e(U).length>0,on=U=>Qr(U).length>0,Ft=U=>{const ae=U.schema.getTextInlineElements(),ve=sn=>sn.nodeType===1&&!Bt(sn)&&!Ro(ae,sn.nodeName.toLowerCase());if(Ps(U).exists(sn=>sn.hasAttribute("data-mce-block")))return!1;const dt=U.selection.getRng();return dt.collapsed?!0:Bo(dt,ve).length===0},Jn=U=>En(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),Ko=U=>en(["title","rel","class","target"],(ve,Ue)=>(U[Ue].each(dt=>{ve[Ue]=dt.length>0?dt:null}),ve),{href:U.href}),wr=(U,ae)=>(ae==="http"||ae==="https")&&!zr(U)?ae+"://"+U:U,Hn=(U,ae)=>{const ve={...ae};if(lo(U).length===0&&!ut(U)){const Ue=Us(ve.rel,ve.target==="_blank");ve.rel=Ue||null}return De.from(ve.target).isNone()&&zs(U)===!1&&(ve.target=qe(U)),ve.href=wr(ve.href,st(U)),ve},fs=(U,ae,ve,Ue)=>{ve.each(dt=>{Ro(ae,"innerText")?ae.innerText=dt:ae.textContent=dt}),U.dom.setAttribs(ae,Ue),U.selection.select(ae)},ur=(U,ae,ve,Ue)=>{const dt=U.dom;Jn(ae)?Wa(dt,ae,Ue):ve.fold(()=>{U.execCommand("mceInsertLink",!1,Ue)},sn=>{U.insertContent(dt.createHTML("a",Ue,dt.encode(sn)))})},ft=(U,ae,ve)=>{const Ue=U.selection.getNode(),dt=Ps(U,Ue),sn=Hn(U,Ko(ve));U.undoManager.transact(()=>{ve.href===ae.href&&ae.attach(),dt.fold(()=>{ur(U,Ue,ve.text,sn)},vo=>{U.focus(),fs(U,vo,ve.text,sn)})})},yo=U=>{const ae=U.dom,ve=U.selection,Ue=ve.getBookmark(),dt=ve.getRng().cloneRange(),sn=ae.getParent(dt.startContainer,"a[href]",U.getBody()),vo=ae.getParent(dt.endContainer,"a[href]",U.getBody());sn&&dt.setStartBefore(sn),vo&&dt.setEndAfter(vo),ve.setRng(dt),U.execCommand("unlink"),ve.moveToBookmark(Ue)},Ar=U=>{U.undoManager.transact(()=>{const ae=U.selection.getNode();Jn(ae)?va(U,ae):yo(U),U.focus()})},la=U=>{const{class:ae,href:ve,rel:Ue,target:dt,text:sn,title:vo}=U;return Sn({class:ae.getOrNull(),href:ve,rel:Ue.getOrNull(),target:dt.getOrNull(),text:sn.getOrNull(),title:vo.getOrNull()},(ko,oo)=>Xn(ko)===!1)},ia=(U,ae)=>{const ve=U.options.get,Ue={allow_html_data_urls:ve("allow_html_data_urls"),allow_script_urls:ve("allow_script_urls"),allow_svg_data_urls:ve("allow_svg_data_urls")},dt=ae.href;return{...ae,href:ye.isDomSafe(dt,"a",Ue)?dt:""}},ea=(U,ae,ve)=>{const Ue=ia(U,ve);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,la(Ue)):ft(U,ae,Ue)},Yo=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):Ar(U)},va=(U,ae)=>{var ve;const Ue=U.dom.select("img",ae)[0];if(Ue){const dt=U.dom.getParents(Ue,"a[href]",ae)[0];dt&&((ve=dt.parentNode)===null||ve===void 0||ve.insertBefore(Ue,dt),U.dom.remove(dt))}},Wa=(U,ae,ve)=>{var Ue;const dt=U.select("img",ae)[0];if(dt){const sn=U.create("a",ve);(Ue=dt.parentNode)===null||Ue===void 0||Ue.insertBefore(sn,dt),sn.appendChild(dt)}},os=U=>zn(U.value)?U.value:"",pn=U=>zn(U.text)?U.text:zn(U.title)?U.title:"",pr=(U,ae)=>{const ve=[];return fo.each(U,Ue=>{const dt=pn(Ue);if(Ue.menu!==void 0){const sn=pr(Ue.menu,ae);ve.push({text:dt,items:sn})}else{const sn=ae(Ue);ve.push({text:dt,value:sn})}}),ve},Za=(U=os)=>ae=>De.from(ae).map(ve=>pr(ve,U)),is={sanitize:U=>Za(os)(U),sanitizeWith:Za,createUi:(U,ae)=>ve=>({name:U,type:"listbox",label:ae,items:ve}),getValue:os},nr=U=>gn(U,"items"),Ws=(U,ae)=>ie(ae,ve=>nr(ve)?Ws(U,ve.items):It(ve.value===U,ve)),Na=(U,ae,ve,Ue)=>{const dt=Ue[ae],sn=U.length>0;return dt!==void 0?Ws(dt,ve).map(vo=>({url:{value:vo.value,meta:{text:sn?U:vo.text,attach:Xe}},text:sn?U:vo.text})):De.none()},cl=(U,ae)=>ae==="link"?U.link:ae==="anchor"?U.anchor:De.none(),ue={init:(U,ae)=>{const ve={text:U.text,title:U.title},Ue=oo=>{var us;return It(ve.title.length<=0,De.from((us=oo.meta)===null||us===void 0?void 0:us.title).getOr(""))},dt=oo=>{var us;return It(ve.text.length<=0,De.from((us=oo.meta)===null||us===void 0?void 0:us.text).getOr(oo.value))},sn=oo=>{const us=dt(oo.url),js=Ue(oo.url);return us.isSome()||js.isSome()?De.some({...us.map(vt=>({text:vt})).getOr({}),...js.map(vt=>({title:vt})).getOr({})}):De.none()},vo=(oo,us)=>{const js=cl(ae,us).getOr([]);return Na(ve.text,us,js,oo)};return{onChange:(oo,us)=>{const js=us.name;return js==="url"?sn(oo()):tt(["anchor","link"],js)?vo(oo(),js):((js==="text"||js==="title")&&(ve[js]=oo()[js]),De.none())}}},getDelta:Na};var re=tinymce.util.Tools.resolve("tinymce.util.Delay");const Oe=(U,ae,ve)=>{const Ue=U.selection.getRng();re.setEditorTimeout(U,()=>{U.windowManager.confirm(ae,dt=>{U.selection.setRng(Ue),ve(dt)})})},He=U=>{const ae=U.href;return ae.indexOf("@")>0&&ae.indexOf("/")===-1&&ae.indexOf("mailto:")===-1?De.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ue=>({...Ue,href:"mailto:"+ae})}):De.none()},ln=(U,ae)=>ve=>{const Ue=ve.href;return U===1&&!zr(Ue)||U===0&&/^\s*www(\.|\d\.)/i.test(Ue)?De.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ae}:// prefix?`,preprocess:sn=>({...sn,href:ae+"://"+Ue})}):De.none()},Qn={preprocess:(U,ae)=>ie([He,ln(st(U),bo(U))],ve=>ve(ae)).fold(()=>Promise.resolve(ae),ve=>new Promise(Ue=>{Oe(U,ve.message,dt=>{Ue(dt?ve.preprocess(ae):ae)})}))},pe={getAnchors:U=>{const ae=U.dom.select("a:not([href])"),ve=_e(ae,Ue=>{const dt=Ue.name||Ue.id;return dt?[{text:dt,value:"#"+dt}]:[]});return ve.length>0?De.some([{text:"None",value:""}].concat(ve)):De.none()}},Zs={getClasses:U=>{const ae=Js(U);return ae.length>0?is.sanitize(ae):De.none()}},br=U=>{try{return De.some(JSON.parse(U))}catch{return De.none()}},Xo={getLinks:U=>{const ae=Ue=>U.convertURL(Ue.value||Ue.url||"","href"),ve=nn(U);return new Promise(Ue=>{zn(ve)?fetch(ve).then(dt=>dt.ok?dt.text().then(br):Promise.reject()).then(Ue,()=>Ue(De.none())):At(ve)?ve(dt=>Ue(De.some(dt))):Ue(De.from(ve))}).then(Ue=>Ue.bind(is.sanitizeWith(ae)).map(dt=>dt.length>0?[{text:"None",value:""}].concat(dt):dt))}},nc={getRels:(U,ae)=>{const ve=lo(U);if(ve.length>0){const Ue=ns(ae,"_blank"),dt=ut(U)===!1,sn=ko=>Us(is.getValue(ko),Ue);return(dt?is.sanitizeWith(sn):is.sanitize)(ve)}return De.none()}},ta=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],$o={getTargets:U=>{const ae=zs(U);return Gt(ae)?is.sanitize(ae).orThunk(()=>De.some(ta)):ae===!1?De.none():De.some(ta)}},Uo=(U,ae,ve)=>{const Ue=U.getAttrib(ae,ve);return Ue!==null&&Ue.length>0?De.some(Ue):De.none()},vr=(U,ae)=>{const ve=U.dom,dt=Ft(U)?De.some(qo(U.selection,ae)):De.none(),sn=ae.bind(js=>De.from(ve.getAttrib(js,"href"))),vo=ae.bind(js=>De.from(ve.getAttrib(js,"target"))),ko=ae.bind(js=>Uo(ve,js,"rel")),oo=ae.bind(js=>Uo(ve,js,"class")),us=ae.bind(js=>Uo(ve,js,"title"));return{url:sn,text:dt,title:us,target:vo,rel:ko,linkClass:oo}},bc={collect:(U,ae)=>Xo.getLinks(U).then(ve=>{const Ue=vr(U,ae);return{anchor:Ue,catalogs:{targets:$o.getTargets(U),rels:nc.getRels(U,Ue.target),classes:Zs.getClasses(U),anchor:pe.getAnchors(U),link:ve},optNode:ae,flags:{titleEnabled:We(U)}}})},Gl=(U,ae)=>ve=>{const Ue=ve.getData();if(!Ue.url.value){Yo(U),ve.close();return}const dt=ko=>De.from(Ue[ko]).filter(oo=>!ns(ae.anchor[ko],oo)),sn={href:Ue.url.value,text:dt("text"),target:dt("target"),rel:dt("rel"),class:dt("linkClass"),title:dt("title")},vo={href:Ue.url.value,attach:Ue.url.meta!==void 0&&Ue.url.meta.attach?Ue.url.meta.attach:Xe};Qn.preprocess(U,sn).then(ko=>{ea(U,vo,ko)}),ve.close()},Zc=U=>{const ae=Ps(U);return bc.collect(U,ae)},Fo=(U,ae)=>{const ve=U.anchor,Ue=ve.url.getOr("");return{url:{value:Ue,meta:{original:{value:Ue}}},text:ve.text.getOr(""),title:ve.title.getOr(""),anchor:Ue,link:Ue,rel:ve.rel.getOr(""),target:ve.target.or(ae).getOr(""),linkClass:ve.linkClass.getOr("")}},dr=(U,ae,ve)=>{const Ue=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],dt=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),sn=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],vo=De.from(qe(ve)),ko=Fo(U,vo),oo=U.catalogs,us=ue.init(ko,oo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:wn([Ue,dt,sn,so([oo.anchor.map(is.createUi("anchor","Anchors")),oo.rels.map(is.createUi("rel","Rel")),oo.targets.map(is.createUi("target","Open link in...")),oo.link.map(is.createUi("link","Link list")),oo.classes.map(is.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ko,onChange:(vt,{name:Du})=>{us.onChange(vt.getData,{name:Du}).each(bs=>{vt.setData(bs)})},onSubmit:ae}},ya=U=>{Zc(U).then(ve=>{const Ue=Gl(U,ve);return dr(ve,Ue,U)}).then(ve=>{U.windowManager.open(ve)})},Sl=U=>{U.addCommand("mceLink",(ae,ve)=>{(ve==null?void 0:ve.dialog)===!0||!L(U)?ya(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ua=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})},Os=U=>{let ae=U;return{get:()=>ae,set:dt=>{ae=dt}}},hs=U=>{const ae=Os(De.none()),ve=()=>ae.get().each(U);return{clear:()=>{ve(),ae.set(De.none())},isSet:()=>ae.get().isSome(),get:()=>ae.get(),set:ko=>{ve(),ae.set(De.some(ko))}}},Pa=()=>{const U=hs(Xe);return{...U,on:ve=>U.get().each(ve)}};var ql=tinymce.util.Tools.resolve("tinymce.util.VK");const jo=(U,ae)=>{document.body.appendChild(U),U.dispatchEvent(ae),document.body.removeChild(U)},Wr=U=>{const ae=document.createElement("a");ae.target="_blank",ae.href=U,ae.rel="noreferrer noopener";const ve=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ve),jo(ae,ve)},Ba=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,yr=(U,ae)=>{if(ae){const ve=ms(ae);if(/^#/.test(ve)){const Ue=U.dom.select(ve);Ue.length&&U.selection.scrollIntoView(Ue[0],!0)}else Wr(ae.href)}},oc=U=>{const ae=U.selection.getRng(),ve=ae.startContainer;return Is(ve)&&ae.startContainer===ae.endContainer&&U.dom.select("img",ve).length===1},Pc=(U,ae)=>{const ve=$e(U.dom.getParents(ae));return It(ve.length===1,ve[0])},Ca=U=>{const ae=Qr(U.selection.getRng());return It(ae.length>0,ae[0]).or(Pc(U,U.selection.getNode()))},sc=U=>U.selection.isCollapsed()||oc(U)?Pc(U,U.selection.getStart()):Ca(U),vc=U=>{const ae=Pa(),ve=()=>ae.get().or(sc(U)),Ue=()=>ve().each(dt=>yr(U,dt));return U.on("contextmenu",dt=>{Pc(U,dt.target).each(ae.set)}),U.on("SelectionChange",()=>{ae.isSet()||sc(U).each(ae.set)}),U.on("click",dt=>{ae.clear();const sn=$e(U.dom.getParents(dt.target));sn.length===1&&ql.metaKeyPressed(dt)&&(dt.preventDefault(),yr(U,sn[0]))}),U.on("keydown",dt=>{ae.clear(),!dt.isDefaultPrevented()&&dt.keyCode===13&&Ba(dt)&&ve().each(sn=>{dt.preventDefault(),yr(U,sn)})}),{gotoSelectedLink:Ue}},Pi=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},ja=(U,ae)=>(U.on("NodeChange",ae),()=>U.off("NodeChange",ae)),ll=U=>ae=>{const ve=()=>{ae.setActive(!U.mode.isReadOnly()&&ls(U,U.selection.getNode())),ae.setEnabled(U.selection.isEditable())};return ve(),ja(U,ve)},da=U=>ae=>{const ve=()=>{ae.setEnabled(U.selection.isEditable())};return ve(),ja(U,ve)},yc=U=>ae=>{const ve=sn=>Je(sn)||on(U.selection.getRng()),Ue=U.dom.getParents(U.selection.getStart()),dt=sn=>{ae.setEnabled(ve(sn)&&U.selection.isEditable())};return dt(Ue),ja(U,sn=>dt(sn.parents))},xl=(U,ae)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Pi(U),onSetup:ll(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ae.gotoSelectedLink,onSetup:yc(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Yo(U),onSetup:yc(U)})},Kl=(U,ae)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ae.gotoSelectedLink,onSetup:yc(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Pi(U),onSetup:da(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Yo(U),onSetup:yc(U)})},Ou=U=>{const ae="link unlink openlink",ve="link";U.ui.registry.addContextMenu("link",{update:Ue=>U.dom.isEditable(Ue)?Je(U.dom.getParents(Ue,"a"))?ae:ve:""})},Bi=(U,ae)=>{const ve=sn=>{sn.selection.collapse(!1)},Ue=sn=>{const vo=U.selection.getNode();return sn.setEnabled(ls(U,vo)),Xe},dt=sn=>{const vo=Ps(U),ko=Ft(U);if(vo.isNone()&&ko){const oo=qo(U.selection,vo);return It(oo.length===0,sn)}else return De.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ll(U)},label:"Link",predicate:sn=>Po(U)&&ls(U,sn),initValue:()=>Ps(U).fold(nt(""),ms),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:sn=>{const vo=U.selection.getNode();return sn.setActive(ls(U,vo)),ll(U)(sn)},onAction:sn=>{const vo=sn.getValue(),ko=dt(vo);ea(U,{href:vo,attach:Xe},{href:vo,text:ko,title:De.none(),rel:De.none(),target:De.from(qe(U)),class:De.none()}),ve(U),sn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ue,onAction:sn=>{Yo(U),sn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ue,onAction:sn=>{ae.gotoSelectedLink(),sn.hide()}}]})},Ga=U=>{const ae=vc(U);xl(U,ae),Kl(U,ae),Ou(U),Bi(U,ae)};var su=()=>{it.add("link",U=>{ao(U),Sl(U),Ga(U),ua(U)})};su()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=(x,R,V)=>{var ce;return V(x,R.prototype)?!0:((ce=x.constructor)===null||ce===void 0?void 0:ce.name)===R.name},Xt=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&Pn(x,String,(V,ce)=>ce.isPrototypeOf(V))?"string":R},an=x=>R=>Xt(R)===x,bt=x=>R=>typeof R===x,jt=an("string"),zn=an("object"),Mt=an("array"),Gt=bt("boolean"),Xn=x=>x==null,Cn=x=>!Xn(x),qt=bt("function"),En=bt("number"),At=()=>{},Tt=(x,R)=>V=>x(R(V)),Xe=x=>()=>x,nt=(x,R)=>x===R;function Un(x,...R){return(...V)=>{const ce=R.concat(V);return x.apply(null,ce)}}const De=x=>R=>!x(R),ee=Xe(!1);class Ye{constructor(R,V){this.tag=R,this.value=V}static some(R){return new Ye(!0,R)}static none(){return Ye.singletonNone}fold(R,V){return this.tag?V(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?Ye.some(R(this.value)):Ye.none()}bind(R){return this.tag?R(this.value):Ye.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:Ye.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Cn(R)?Ye.some(R):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ye.singletonNone=new Ye(!1);const Bn=Array.prototype.slice,tt=Array.prototype.indexOf,W=Array.prototype.push,Ot=(x,R)=>tt.call(x,R),en=(x,R)=>Ot(x,R)>-1,wn=(x,R)=>{for(let V=0,ce=x.length;V<ce;V++){const ge=x[V];if(R(ge,V))return!0}return!1},_e=(x,R)=>{const V=x.length,ce=new Array(V);for(let ge=0;ge<V;ge++){const Qe=x[ge];ce[ge]=R(Qe,ge)}return ce},ie=(x,R)=>{for(let V=0,ce=x.length;V<ce;V++){const ge=x[V];R(ge,V)}},ns=(x,R)=>{const V=[];for(let ce=0,ge=x.length;ce<ge;ce++){const Qe=x[ce];R(Qe,ce)&&V.push(Qe)}return V},so=(x,R)=>{if(x.length===0)return[];{let V=R(x[0]);const ce=[];let ge=[];for(let Qe=0,An=x.length;Qe<An;Qe++){const Kn=x[Qe],jn=R(Kn);jn!==V&&(ce.push(ge),ge=[]),V=jn,ge.push(Kn)}return ge.length!==0&&ce.push(ge),ce}},It=(x,R,V)=>(ie(x,(ce,ge)=>{V=R(V,ce,ge)}),V),A=(x,R,V)=>{for(let ce=0,ge=x.length;ce<ge;ce++){const Qe=x[ce];if(R(Qe,ce))return Ye.some(Qe);if(V(Qe,ce))break}return Ye.none()},ao=(x,R)=>A(x,R,ee),st=x=>{const R=[];for(let V=0,ce=x.length;V<ce;++V){if(!Mt(x[V]))throw new Error("Arr.flatten item "+V+" was not an array, input: "+x);W.apply(R,x[V])}return R},Po=(x,R)=>st(_e(x,R)),nn=x=>{const R=Bn.call(x,0);return R.reverse(),R},qe=(x,R)=>R>=0&&R<x.length?Ye.some(x[R]):Ye.none(),bo=x=>qe(x,0),zs=x=>qe(x,x.length-1),lo=(x,R)=>{const V=[],ce=qt(R)?ge=>wn(V,Qe=>R(Qe,ge)):ge=>en(V,ge);for(let ge=0,Qe=x.length;ge<Qe;ge++){const An=x[ge];ce(An)||V.push(An)}return V},Js=(x,R,V=nt)=>x.exists(ce=>V(ce,R)),We=(x,R,V=nt)=>ut(x,R,V).getOr(x.isNone()&&R.isNone()),ut=(x,R,V)=>x.isSome()&&R.isSome()?Ye.some(V(x.getOrDie(),R.getOrDie())):Ye.none(),L=8,Jr=9,uo=11,cs=1,zo=3,Nc=(x,R)=>{const ce=(R||document).createElement("div");if(ce.innerHTML=x,!ce.hasChildNodes()||ce.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,x),new Error(ge)}return gn(ce.childNodes[0])},Sn=(x,R)=>{const ce=(R||document).createElement(x);return gn(ce)},Ro=(x,R)=>{const ce=(R||document).createTextNode(x);return gn(ce)},gn=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},Ct={fromHtml:Nc,fromTag:Sn,fromText:Ro,fromDom:gn,fromPoint:(x,R,V)=>Ye.from(x.dom.elementFromPoint(R,V)).map(gn)},fo=(x,R)=>{const V=x.dom;if(V.nodeType!==cs)return!1;{const ce=V;if(ce.matches!==void 0)return ce.matches(R);if(ce.msMatchesSelector!==void 0)return ce.msMatchesSelector(R);if(ce.webkitMatchesSelector!==void 0)return ce.webkitMatchesSelector(R);if(ce.mozMatchesSelector!==void 0)return ce.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Bt=(x,R)=>x.dom===R.dom,Is=(x,R)=>{const V=x.dom,ce=R.dom;return V===ce?!1:V.contains(ce)},Bo=fo,zr=typeof window<"u"?window:Function("return this;")(),ms=(x,R)=>{let V=R??zr;for(let ce=0;ce<x.length&&V!==void 0&&V!==null;++ce)V=V[x[ce]];return V},Us=(x,R)=>{const V=x.split(".");return ms(V,R)},tc=(x,R)=>Us(x,R),Ps=(x,R)=>{const V=tc(x,R);if(V==null)throw new Error(x+" not available on this browser");return V},ls=Object.getPrototypeOf,qo=x=>Ps("HTMLElement",x),Qr=x=>{const R=Us("ownerDocument.defaultView",x);return zn(x)&&(qo(R).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(ls(x).constructor.name))},$e=x=>x.dom.nodeName.toLowerCase(),Je=x=>x.dom.nodeType,on=x=>R=>Je(R)===x,Ft=x=>Je(x)===L||$e(x)==="#comment",Jn=x=>Ko(x)&&Qr(x.dom),Ko=on(cs),wr=on(zo),Hn=on(Jr),fs=on(uo),ur=x=>R=>Ko(R)&&$e(R)===x,ft=x=>Ct.fromDom(x.dom.ownerDocument),yo=x=>Hn(x)?x:ft(x),Ar=x=>Ye.from(x.dom.parentNode).map(Ct.fromDom),la=x=>Ye.from(x.dom.parentElement).map(Ct.fromDom),ia=x=>Ye.from(x.dom.nextSibling).map(Ct.fromDom),ea=x=>_e(x.dom.childNodes,Ct.fromDom),Yo=(x,R)=>{const V=x.dom.childNodes;return Ye.from(V[R]).map(Ct.fromDom)},va=x=>Yo(x,0),Wa=x=>Yo(x,x.dom.childNodes.length-1),os=x=>fs(x)&&Cn(x.dom.host),pr=qt(Element.prototype.attachShadow)&&qt(Node.prototype.getRootNode)?x=>Ct.fromDom(x.dom.getRootNode()):yo,Za=x=>{const R=pr(x);return os(R)?Ye.some(R):Ye.none()},jl=x=>Ct.fromDom(x.dom.host),Cl=x=>{const R=wr(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const V=R.ownerDocument;return Za(Ct.fromDom(R)).fold(()=>V.body.contains(R),Tt(Cl,jl))};var is=(x,R,V,ce,ge)=>x(V,ce)?Ye.some(V):qt(ge)&&ge(V)?Ye.none():R(V,ce,ge);const nr=(x,R,V)=>{let ce=x.dom;const ge=qt(V)?V:ee;for(;ce.parentNode;){ce=ce.parentNode;const Qe=Ct.fromDom(ce);if(R(Qe))return Ye.some(Qe);if(ge(Qe))break}return Ye.none()},Ws=(x,R,V)=>is((ge,Qe)=>Qe(ge),nr,x,R,V),Na=(x,R,V)=>nr(x,ce=>fo(ce,R),V),cl=(x,R,V)=>is((ge,Qe)=>fo(ge,Qe),Na,x,R,V),Br=x=>cl(x,"[contenteditable]"),ue=(x,R=!1)=>Cl(x)?x.dom.isContentEditable:Br(x).fold(Xe(R),V=>re(V)==="true"),re=x=>x.dom.contentEditable,Oe=(x,R)=>{Ar(x).each(ce=>{ce.dom.insertBefore(R.dom,x.dom)})},He=(x,R)=>{ia(x).fold(()=>{Ar(x).each(ge=>{xn(ge,R)})},ce=>{Oe(ce,R)})},ln=(x,R)=>{va(x).fold(()=>{xn(x,R)},ce=>{x.dom.insertBefore(R.dom,ce.dom)})},xn=(x,R)=>{x.dom.appendChild(R.dom)},Qn=(x,R)=>{ie(R,V=>{Oe(x,V)})},Bs=(x,R)=>{ie(R,V=>{xn(x,V)})},pe=x=>{x.dom.textContent="",ie(ea(x),R=>{Vn(R)})},Vn=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)};var Zs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),br=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ur=tinymce.util.Tools.resolve("tinymce.util.VK");const Xo=x=>_e(x,Ct.fromDom),wl=Object.keys,nc=(x,R)=>{const V=wl(x);for(let ce=0,ge=V.length;ce<ge;ce++){const Qe=V[ce],An=x[Qe];R(An,Qe)}},ta=x=>(R,V)=>{x[V]=R},Or=(x,R,V,ce)=>{nc(x,(ge,Qe)=>{(R(ge,Qe)?V:ce)(ge,Qe)})},$o=(x,R)=>{const V={};return Or(x,R,ta(V),At),V},Uo=(x,R,V)=>{if(jt(V)||Gt(V)||En(V))x.setAttribute(R,V+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",V,":: Element ",x),new Error("Attribute value was not simple")},vr=(x,R)=>{const V=x.dom;nc(R,(ce,ge)=>{Uo(V,ge,ce)})},na=x=>It(x.dom.attributes,(R,V)=>(R[V.name]=V.value,R),{}),bc=(x,R)=>Ct.fromDom(x.dom.cloneNode(R)),Gl=x=>bc(x,!0),Zc=(x,R)=>{const V=Ct.fromTag(R),ce=na(x);return vr(V,ce),V},Fo=(x,R)=>{const V=Zc(x,R);He(x,V);const ce=ea(x);return Bs(V,ce),Vn(x),V};var dr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ya=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sl=x=>R=>Cn(R)&&R.nodeName.toLowerCase()===x,ua=x=>R=>Cn(R)&&x.test(R.nodeName),Os=x=>Cn(x)&&x.nodeType===3,hs=x=>Cn(x)&&x.nodeType===1,Pa=ua(/^(OL|UL|DL)$/),ql=ua(/^(OL|UL)$/),jo=Sl("ol"),Wr=ua(/^(LI|DT|DD)$/),Ba=ua(/^(DT|DD)$/),yr=ua(/^(TH|TD)$/),oc=Sl("br"),Pc=x=>{var R;return((R=x.parentNode)===null||R===void 0?void 0:R.firstChild)===x},Ca=(x,R)=>Cn(R)&&R.nodeName in x.schema.getTextBlockElements(),sc=(x,R)=>Cn(x)&&x.nodeName in R,vc=(x,R)=>Cn(R)&&R.nodeName in x.schema.getVoidElements(),Pi=(x,R)=>oc(R)?x.isBlock(R.nextSibling)&&!oc(R.previousSibling):!1,ja=(x,R,V)=>{const ce=x.isEmpty(R);return V&&x.select("span[data-mce-type=bookmark]",R).length>0?!1:ce},ll=(x,R)=>x.isChildOf(R,x.getRoot()),da=x=>R=>R.options.get(x),yc=x=>{const R=x.options.register;R("lists_indent_on_tab",{processor:"boolean",default:!0})},xl=da("lists_indent_on_tab"),Kl=da("forced_root_block"),Ou=da("forced_root_block_attrs"),Bi=(x,R,V={})=>{const ce=x.dom,ge=x.schema.getBlockElements(),Qe=ce.createFragment(),An=Kl(x),Kn=Ou(x);let jn,_n,sr=!1;for(_n=ce.create(An,{...Kn,...V.style?{style:V.style}:{}}),sc(R.firstChild,ge)||Qe.appendChild(_n);jn=R.firstChild;){const Mr=jn.nodeName;!sr&&(Mr!=="SPAN"||jn.getAttribute("data-mce-type")!=="bookmark")&&(sr=!0),sc(jn,ge)?(Qe.appendChild(jn),_n=null):(_n||(_n=ce.create(An,Kn),Qe.appendChild(_n)),_n.appendChild(jn))}return!sr&&_n&&_n.appendChild(ce.create("br",{"data-mce-bogus":"1"})),Qe},Ga=dr.DOM,su=(x,R,V)=>{const ce=_n=>{const sr=_n.parentNode;sr&&ya.each(ge,Mr=>{sr.insertBefore(Mr,V.parentNode)}),Ga.remove(_n)},ge=Ga.select('span[data-mce-type="bookmark"]',R),Qe=Bi(x,V),An=Ga.createRng();An.setStartAfter(V),An.setEndAfter(R);const Kn=An.extractContents();for(let _n=Kn.firstChild;_n;_n=_n.firstChild)if(_n.nodeName==="LI"&&x.dom.isEmpty(_n)){Ga.remove(_n);break}x.dom.isEmpty(Kn)||Ga.insertAfter(Kn,R),Ga.insertAfter(Qe,R);const jn=V.parentElement;jn&&ja(x.dom,jn)&&ce(jn),Ga.remove(V),ja(x.dom,R)&&Ga.remove(R)},U=ur("dd"),ae=ur("dt"),ve=(x,R)=>{U(R)?Fo(R,"dt"):ae(R)&&la(R).each(V=>su(x,V.dom,R.dom))},Ue=x=>{ae(x)&&Fo(x,"dd")},dt=(x,R,V)=>{R==="Indent"?ie(V,Ue):ie(V,ce=>ve(x,ce))},sn=(x,R)=>{if(Os(x))return{container:x,offset:R};const V=Zs.getNode(x,R);return Os(V)?{container:V,offset:R>=x.childNodes.length?V.data.length:0}:V.previousSibling&&Os(V.previousSibling)?{container:V.previousSibling,offset:V.previousSibling.data.length}:V.nextSibling&&Os(V.nextSibling)?{container:V.nextSibling,offset:0}:{container:x,offset:R}},vo=x=>{const R=x.cloneRange(),V=sn(x.startContainer,x.startOffset);R.setStart(V.container,V.offset);const ce=sn(x.endContainer,x.endOffset);return R.setEnd(ce.container,ce.offset),R},ko=["OL","UL","DL"],oo=ko.join(","),us=(x,R)=>{const V=R||x.selection.getStart(!0);return x.dom.getParent(V,oo,Pt(x,V))},js=(x,R)=>Cn(x)&&R.length===1&&R[0]===x,vt=x=>ns(x.querySelectorAll(oo),Pa),Du=x=>{const R=us(x),V=x.selection.getSelectedBlocks();return js(R,V)?vt(R):ns(V,ce=>Pa(ce)&&R!==ce)},bs=(x,R)=>{const V=ya.map(R,ce=>{const ge=x.dom.getParent(ce,"li,dd,dt",Pt(x,ce));return ge||ce});return lo(V)},$=x=>{const R=x.selection.getSelectedBlocks();return ns(bs(x,R),Wr)},X=x=>ns($(x),Ba),oe=(x,R)=>{const V=x.dom.getParents(R,"TD,TH");return V.length>0?V[0]:x.getBody()},Re=(x,R)=>!Pa(R)&&!Wr(R)&&wn(ko,V=>x.isValidChild(R.nodeName,V)),Pt=(x,R)=>{const V=x.dom.getParents(R,x.dom.isBlock),ce=Qe=>Qe.nodeName.toLowerCase()!==Kl(x);return ao(V,Qe=>ce(Qe)&&Re(x.schema,Qe)).getOr(x.getBody())},io=x=>Ar(x).exists(R=>Wr(R.dom)&&va(R).exists(V=>!Pa(V.dom))&&Wa(R).exists(V=>!Pa(V.dom))),Yt=(x,R)=>{const V=x.dom.getParents(R,"ol,ul",Pt(x,R));return zs(V)},Gs=x=>{const R=Yt(x,x.selection.getStart()),V=ns(x.selection.getSelectedBlocks(),ql);return R.toArray().concat(V)},ct=x=>{const R=x.selection.getStart();return x.dom.getParents(R,"ol,ul",Pt(x,R))},xs=x=>{const R=Gs(x),V=ct(x);return ao(V,ce=>io(Ct.fromDom(ce))).fold(()=>qa(x,R),ce=>[ce])},qa=(x,R)=>{const V=_e(R,ce=>Yt(x,ce).getOr(ce));return lo(V)},$s=x=>/\btox\-/.test(x.className),$r=(x,R)=>A(x,Pa,yr).exists(V=>V.nodeName===R&&!$s(V)),il=(x,R)=>R!==null&&!x.dom.isEditable(R),_o=x=>{const R=us(x);return il(x,R)},Ka=(x,R)=>{const V=x.dom.getParent(R,"ol,ul,dl");return il(x,V)},qs=(x,R)=>{const V=x.selection.getNode();return R({parents:x.dom.getParents(V),element:V}),x.on("NodeChange",R),()=>x.off("NodeChange",R)},Yl=(x,R)=>{const ce=document.createDocumentFragment();return ie(x,ge=>{ce.appendChild(ge.dom)}),Ct.fromDom(ce)},Qs=(x,R,V)=>x.dispatch("ListMutation",{action:R,element:V}),xm=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),yg=x=>x.length>0,or=x=>!yg(x),Tl=x=>x.style!==void 0&&qt(x.style.getPropertyValue),ma=(x,R,V)=>{if(!jt(V))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",V,":: Element ",x),new Error("CSS value must be a string: "+V);Tl(x)&&x.style.setProperty(R,V)},wa=(x,R,V)=>{const ce=x.dom;ma(ce,R,V)},Ya=x=>Bo(x,"OL,UL"),Fd=x=>Bo(x,"LI"),To=x=>va(x).exists(Ya),rc=x=>Wa(x).exists(Ya),$a=x=>"listAttributes"in x,K=x=>"isComment"in x,se=x=>"isFragment"in x,Te=x=>x.depth>0,Me=x=>x.isSelected,un=x=>{const R=ea(x),V=rc(x)?R.slice(0,-1):R;return _e(V,Gl)},go=(x,R,V)=>Ar(x).filter(Ko).map(ce=>({depth:R,dirty:!1,isSelected:V,content:un(x),itemAttributes:na(x),listAttributes:na(ce),listType:$e(ce),isInPreviousLi:!1})),Ls=(x,R)=>{xn(x.item,R.list)},fa=x=>{for(let R=1;R<x.length;R++)Ls(x[R-1],x[R])},Co=(x,R)=>{ut(zs(x),bo(R),Ls)},Zr=(x,R)=>{const V={list:Ct.fromTag(R,x),item:Ct.fromTag("li",x)};return xn(V.list,V.item),V},Ks=(x,R,V)=>{const ce=[];for(let ge=0;ge<V;ge++)ce.push(Zr(x,$a(R)?R.listType:R.parentListType));return ce},Dr=(x,R)=>{for(let V=0;V<x.length-1;V++)wa(x[V].item,"list-style-type","none");zs(x).each(V=>{$a(R)&&(vr(V.list,R.listAttributes),vr(V.item,R.itemAttributes)),Bs(V.item,R.content)})},Sr=(x,R)=>{$e(x.list)!==R.listType&&(x.list=Fo(x.list,R.listType)),vr(x.list,R.listAttributes)},Cr=(x,R,V)=>{const ce=Ct.fromTag("li",x);return vr(ce,R),Bs(ce,V),ce},Bc=(x,R)=>{xn(x.list,R),x.item=R},Xl=(x,R,V)=>{const ce=R.slice(0,V.depth);return zs(ce).each(ge=>{if($a(V)){const Qe=Cr(x,V.itemAttributes,V.content);Bc(ge,Qe),Sr(ge,V)}else if(se(V))Bs(ge.item,V.content);else{const Qe=Ct.fromHtml(`<!--${V.content}-->`);xn(ge.list,Qe)}}),ce},Sa=(x,R,V)=>{const ce=Ks(x,V,V.depth-R.length);return fa(ce),Dr(ce,V),Co(R,ce),R.concat(ce)},$c=(x,R)=>{let V=Ye.none();const ce=It(R,(ge,Qe,An)=>K(Qe)?An===0?(V=Ye.some(Qe),ge):Xl(x,ge,Qe):Qe.depth>ge.length?Sa(x,ge,Qe):Xl(x,ge,Qe),[]);return V.each(ge=>{const Qe=Ct.fromHtml(`<!--${ge.content}-->`);bo(ce).each(An=>{ln(An.list,Qe)})}),bo(ce).map(ge=>ge.list)},ui=(x,R)=>{switch(x){case"Indent":R.depth++;break;case"Outdent":R.depth--;break;case"Flatten":R.depth=0}R.dirty=!0},di=(x,R)=>{$a(x)&&$a(R)&&(x.listType=R.listType,x.listAttributes={...R.listAttributes})},af=x=>{x.listAttributes=$o(x.listAttributes,(R,V)=>V!=="start")},Mu=(x,R)=>{const V=x[R].depth,ce=Qe=>Qe.depth===V&&!Qe.dirty,ge=Qe=>Qe.depth<V;return A(nn(x.slice(0,R)),ce,ge).orThunk(()=>A(x.slice(R+1),ce,ge))},Jl=x=>(ie(x,(R,V)=>{Mu(x,V).fold(()=>{R.dirty&&$a(R)&&af(R)},ce=>di(R,ce))}),x),Cc=x=>{let R=x;return{get:()=>R,set:ge=>{R=ge}}},Nu=(x,R,V,ce)=>{var ge;if(Ft(ce))return[{depth:x+1,content:(ge=ce.dom.nodeValue)!==null&&ge!==void 0?ge:"",dirty:!1,isSelected:!1,isComment:!0}];R.each(Kn=>{Bt(Kn.start,ce)&&V.set(!0)});const Qe=go(ce,x,V.get());R.each(Kn=>{Bt(Kn.end,ce)&&V.set(!1)});const An=Wa(ce).filter(Ya).map(Kn=>$i(x,R,V,Kn)).getOr([]);return Qe.toArray().concat(An)},Hd=(x,R,V,ce)=>va(ce).filter(Ya).fold(()=>Nu(x,R,V,ce),ge=>{const Qe=It(ea(ce),(An,Kn,jn)=>{if(jn===0)return An;if(Fd(Kn))return An.concat(Nu(x,R,V,Kn));{const _n={isFragment:!0,depth:x,content:[Kn],isSelected:!1,dirty:!1,parentListType:$e(ge)};return An.concat(_n)}},[]);return $i(x,R,V,ge).concat(Qe)}),$i=(x,R,V,ce)=>Po(ea(ce),ge=>{const Qe=Ya(ge)?$i:Hd,An=x+1;return Qe(An,R,V,ge)}),Cg=(x,R)=>{const V=Cc(!1),ce=0;return _e(x,ge=>({sourceList:ge,entries:$i(ce,R,V,ge)}))},Vd=(x,R)=>{const V=Jl(R);return _e(V,ce=>{const ge=K(ce)?Yl([Ct.fromHtml(`<!--${ce.content}-->`)]):Yl(ce.content),Qe=$a(ce)?ce.itemAttributes:{};return Ct.fromDom(Bi(x,ge.dom,Qe))})},wg=(x,R)=>{const V=Jl(R);return $c(x.contentDocument,V).toArray()},rd=(x,R)=>Po(so(R,Te),V=>bo(V).exists(Te)?wg(x,V):Vd(x,V)),Sg=(x,R)=>{ie(ns(x,Me),V=>ui(R,V))},ad=x=>{const R=_e($(x),Ct.fromDom);return ut(ao(R,De(To)),ao(nn(R),De(To)),(V,ce)=>({start:V,end:ce}))},Qp=(x,R,V)=>{const ce=Cg(R,ad(x));ie(ce,ge=>{Sg(ge.entries,V);const Qe=rd(x,ge.entries);ie(Qe,An=>{Qs(x,V==="Indent"?"IndentList":"OutdentList",An.dom)}),Qn(ge.sourceList,Qe),Vn(ge.sourceList)})},de=(x,R)=>{const V=Xo(xs(x)),ce=Xo(X(x));let ge=!1;if(V.length||ce.length){const Qe=x.selection.getBookmark();Qp(x,V,R),dt(x,R,ce),x.selection.moveToBookmark(Qe),x.selection.setRng(vo(x.selection.getRng())),x.nodeChanged(),ge=!0}return ge},Tm=(x,R)=>!_o(x)&&de(x,R),jc=x=>Tm(x,"Indent"),ru=x=>Tm(x,"Outdent"),xg=x=>Tm(x,"Flatten"),Dh="\uFEFF",Jo=x=>x===Dh,wc=(x,R,V)=>nr(x,R,V).isSome(),ul=(x,R)=>wc(x,Un(Bt,R));var xa=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const cd=dr.DOM,mi=x=>{const R={},V=ce=>{let ge=x[ce?"startContainer":"endContainer"],Qe=x[ce?"startOffset":"endOffset"];if(hs(ge)){const An=cd.create("span",{"data-mce-type":"bookmark"});ge.hasChildNodes()?(Qe=Math.min(Qe,ge.childNodes.length-1),ce?ge.insertBefore(An,ge.childNodes[Qe]):cd.insertAfter(An,ge.childNodes[Qe])):ge.appendChild(An),ge=An,Qe=0}R[ce?"startContainer":"endContainer"]=ge,R[ce?"startOffset":"endOffset"]=Qe};return V(!0),x.collapsed||V(),R},ac=x=>{const R=ce=>{const ge=Kn=>{var jn;let _n=(jn=Kn.parentNode)===null||jn===void 0?void 0:jn.firstChild,sr=0;for(;_n;){if(_n===Kn)return sr;(!hs(_n)||_n.getAttribute("data-mce-type")!=="bookmark")&&sr++,_n=_n.nextSibling}return-1};let Qe=x[ce?"startContainer":"endContainer"],An=x[ce?"startOffset":"endOffset"];if(Qe){if(hs(Qe)&&Qe.parentNode){const Kn=Qe;An=ge(Qe),Qe=Qe.parentNode,cd.remove(Kn),!Qe.hasChildNodes()&&cd.isBlock(Qe)&&Qe.appendChild(cd.create("br"))}x[ce?"startContainer":"endContainer"]=Qe,x[ce?"startOffset":"endOffset"]=An}};R(!0),R();const V=cd.createRng();return V.setStart(x.startContainer,x.startOffset),x.endContainer&&V.setEnd(x.endContainer,x.endOffset),vo(V)},fi=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Tg=(x,R,V)=>{const ce=V["list-style-type"]?V["list-style-type"]:null;x.setStyle(R,"list-style-type",ce)},Rh=(x,R)=>{ya.each(R,(V,ce)=>{x.setAttribute(ce,V)})},El=(x,R,V)=>{Rh(R,V["list-attributes"]),ya.each(x.select("li",R),ce=>{Rh(ce,V["list-item-attributes"])})},gi=(x,R,V)=>{Tg(x,R,V),El(x,R,V)},cf=(x,R,V)=>{ya.each(V,ce=>x.setStyle(R,ce,""))},Sc=(x,R)=>Cn(R)&&!sc(R,x.schema.getBlockElements()),Ta=(x,R,V,ce)=>{let ge=R[V?"startContainer":"endContainer"];const Qe=R[V?"startOffset":"endOffset"];hs(ge)&&(ge=ge.childNodes[Math.min(Qe,ge.childNodes.length-1)]||ge),!V&&oc(ge.nextSibling)&&(ge=ge.nextSibling);const An=jn=>{for(;!x.dom.isBlock(jn)&&jn.parentNode&&ce!==jn;)jn=jn.parentNode;return jn},Kn=(jn,_n)=>{var sr;const Mr=new br(jn,An(jn)),Yc=_n?"next":"prev";let Ir;for(;Ir=Mr[Yc]();)if(!(vc(x,Ir)||Jo(Ir.textContent)||((sr=Ir.textContent)===null||sr===void 0?void 0:sr.length)===0))return Ye.some(Ir);return Ye.none()};if(V&&Os(ge))if(Jo(ge.textContent))ge=Kn(ge,!1).getOr(ge);else for(ge.parentNode!==null&&Sc(x,ge.parentNode)&&(ge=ge.parentNode);ge.previousSibling!==null&&(Sc(x,ge.previousSibling)||Os(ge.previousSibling));)ge=ge.previousSibling;if(!V&&Os(ge))if(Jo(ge.textContent))ge=Kn(ge,!0).getOr(ge);else for(ge.parentNode!==null&&Sc(x,ge.parentNode)&&(ge=ge.parentNode);ge.nextSibling!==null&&(Sc(x,ge.nextSibling)||Os(ge.nextSibling));)ge=ge.nextSibling;for(;ge.parentNode!==ce;){const jn=ge.parentNode;if(Ca(x,ge)||/^(TD|TH)$/.test(jn.nodeName))return ge;ge=jn}return ge},Pu=(x,R,V)=>{const ce=[],ge=x.dom,Qe=Ta(x,R,!0,V),An=Ta(x,R,!1,V);let Kn;const jn=[];for(let _n=Qe;_n&&(jn.push(_n),_n!==An);_n=_n.nextSibling);return ya.each(jn,_n=>{var sr;if(Ca(x,_n)){ce.push(_n),Kn=null;return}if(ge.isBlock(_n)||oc(_n)){oc(_n)&&ge.remove(_n),Kn=null;return}const Mr=_n.nextSibling;if(xa.isBookmarkNode(_n)&&(Pa(Mr)||Ca(x,Mr)||!Mr&&_n.parentNode===V)){Kn=null;return}Kn||(Kn=ge.create("p"),(sr=_n.parentNode)===null||sr===void 0||sr.insertBefore(Kn,_n),ce.push(Kn)),Kn.appendChild(_n)}),ce},zd=(x,R,V)=>{const ce=x.getStyle(R,"list-style-type");let ge=V?V["list-style-type"]:"";return ge=ge===null?"":ge,ce===ge},Ql=(x,R)=>{const V=x.selection.getStart(!0),ce=Ta(x,R,!0,x.getBody());return ul(Ct.fromDom(ce),Ct.fromDom(R.commonAncestorContainer))?R.commonAncestorContainer:V},Xa=(x,R,V)=>{const ce=x.selection.getRng();let ge="LI";const Qe=Pt(x,Ql(x,ce)),An=x.dom;if(An.getContentEditable(x.selection.getNode())==="false")return;R=R.toUpperCase(),R==="DL"&&(ge="DT");const Kn=mi(ce),jn=ns(Pu(x,ce,Qe),x.dom.isEditable);ya.each(jn,_n=>{let sr;const Mr=_n.previousSibling,Yc=_n.parentNode;Wr(Yc)||(Mr&&Pa(Mr)&&Mr.nodeName===R&&zd(An,Mr,V)?(sr=Mr,_n=An.rename(_n,ge),Mr.appendChild(_n)):(sr=An.create(R),Yc.insertBefore(sr,_n),sr.appendChild(_n),_n=An.rename(_n,ge)),cf(An,_n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),gi(An,sr,V),kl(x.dom,sr))}),x.selection.setRng(ac(Kn))},lf=(x,R)=>Pa(x)&&x.nodeName===(R==null?void 0:R.nodeName),uf=(x,R,V)=>{const ce=x.getStyle(R,"list-style-type",!0),ge=x.getStyle(V,"list-style-type",!0);return ce===ge},df=(x,R)=>x.className===R.className,Em=(x,R,V)=>lf(R,V)&&uf(x,R,V)&&df(R,V),kl=(x,R)=>{let V,ce=R.nextSibling;if(Em(x,R,ce)){const ge=ce;for(;V=ge.firstChild;)R.appendChild(V);x.remove(ge)}if(ce=R.previousSibling,Em(x,R,ce)){const ge=ce;for(;V=ge.lastChild;)R.insertBefore(V,R.firstChild);x.remove(ge)}},mf=(x,R,V,ce)=>{if(R.nodeName!==V){const ge=x.dom.rename(R,V);gi(x.dom,ge,ce),Qs(x,fi(V),ge)}else gi(x.dom,R,ce),Qs(x,fi(V),R)},Mh=(x,R,V,ce)=>{if(R.classList.forEach((ge,Qe,An)=>{ge.startsWith("tox-")&&(An.remove(ge),An.length===0&&R.removeAttribute("class"))}),R.nodeName!==V){const ge=x.dom.rename(R,V);gi(x.dom,ge,ce),Qs(x,fi(V),ge)}else gi(x.dom,R,ce),Qs(x,fi(V),R)},e1=(x,R,V,ce,ge)=>{const Qe=Pa(R);if(Qe&&R.nodeName===ce&&!Nh(ge)&&!$s(R))xg(x);else{Xa(x,ce,ge);const An=mi(x.selection.getRng()),Kn=Qe?[R,...V]:V,jn=Qe&&$s(R)?Mh:mf;ya.each(Kn,_n=>{jn(x,_n,ce,ge)}),x.selection.setRng(ac(An))}},Nh=x=>"list-style-type"in x,ff=(x,R,V,ce)=>{if(R!==x.getBody())if(R)if(R.nodeName===V&&!Nh(ce)&&!$s(R))xg(x);else{const ge=mi(x.selection.getRng());$s(R)&&R.classList.forEach((An,Kn,jn)=>{An.startsWith("tox-")&&(jn.remove(An),jn.length===0&&R.removeAttribute("class"))}),gi(x.dom,R,ce);const Qe=x.dom.rename(R,V);kl(x.dom,Qe),x.selection.setRng(ac(ge)),Xa(x,V,ce),Qs(x,fi(V),Qe)}else Xa(x,V,ce),Qs(x,fi(V),R)},km=(x,R,V)=>{const ce=us(x);if(Ka(x,ce))return;const ge=Du(x),Qe=zn(V)?V:{};ge.length>0?e1(x,ce,ge,R,Qe):ff(x,ce,R,Qe)},au=dr.DOM,Eg=(x,R)=>{const V=R.parentElement;if(V&&V.nodeName==="LI"&&V.firstChild===R){const ce=V.previousSibling;ce&&ce.nodeName==="LI"?(ce.appendChild(R),ja(x,V)&&au.remove(V)):au.setStyle(V,"listStyleType","none")}if(Pa(V)){const ce=V.previousSibling;ce&&ce.nodeName==="LI"&&ce.appendChild(R)}},Ys=(x,R)=>{const V=ya.grep(x.select("ol,ul",R));ya.each(V,ce=>{Eg(x,ce)})},xr=(x,R,V,ce)=>{let ge=R.startContainer;const Qe=R.startOffset;if(Os(ge)&&(V?Qe<ge.data.length:Qe>0))return ge;const An=x.schema.getNonEmptyElements();hs(ge)&&(ge=Zs.getNode(ge,Qe));const Kn=new br(ge,ce);V&&Pi(x.dom,ge)&&Kn.next();const jn=V?Kn.next.bind(Kn):Kn.prev2.bind(Kn);for(;ge=jn();)if(ge.nodeName==="LI"&&!ge.hasChildNodes()||An[ge.nodeName]||Os(ge)&&ge.data.length>0)return ge;return null},Gc=(x,R)=>{const V=R.childNodes;return V.length===1&&!Pa(V[0])&&x.isBlock(V[0])},kg=x=>Ye.from(x).map(Ct.fromDom).filter(Jn).exists(R=>ue(R)&&!en(["details"],$e(R))),_g=(x,R)=>{Gc(x,R)&&kg(R.firstChild)&&x.remove(R.firstChild,!0)},oa=(x,R,V)=>{let ce;const ge=Gc(x,V)?V.firstChild:V;if(_g(x,R),!ja(x,R,!0))for(;ce=R.firstChild;)ge.appendChild(ce)},dn=(x,R,V)=>{let ce;const ge=R.parentNode;if(!ll(x,R)||!ll(x,V))return;Pa(V.lastChild)&&(ce=V.lastChild),ge===V.lastChild&&oc(ge.previousSibling)&&x.remove(ge.previousSibling);const Qe=V.lastChild;Qe&&oc(Qe)&&R.hasChildNodes()&&x.remove(Qe),ja(x,V,!0)&&pe(Ct.fromDom(V)),oa(x,R,V),ce&&V.appendChild(ce);const Kn=Is(Ct.fromDom(V),Ct.fromDom(R))?x.getParents(R,Pa,V):[];x.remove(R),ie(Kn,jn=>{ja(x,jn)&&jn!==x.getRoot()&&x.remove(jn)})},Ii=(x,R,V)=>{pe(Ct.fromDom(V)),dn(x.dom,R,V),x.selection.setCursorLocation(V,0)},Ph=(x,R,V,ce)=>{const ge=x.dom;if(ge.isEmpty(ce))Ii(x,V,ce);else{const Qe=mi(R);dn(ge,V,ce),x.selection.setRng(ac(Qe))}},ga=(x,R,V,ce)=>{const ge=mi(R);dn(x.dom,V,ce);const Qe=ac(ge);x.selection.setRng(Qe)},Ts=(x,R)=>{const V=x.dom,ce=x.selection,ge=ce.getStart(),Qe=oe(x,ge),An=V.getParent(ce.getStart(),"LI",Qe);if(An){const Kn=An.parentElement;if(Kn===x.getBody()&&ja(V,Kn))return!0;const jn=vo(ce.getRng()),_n=V.getParent(xr(x,jn,R,Qe),"LI",Qe),sr=_n&&(R?V.isChildOf(An,_n):V.isChildOf(_n,An));if(_n&&_n!==An&&!sr)return x.undoManager.transact(()=>{R?Ph(x,jn,_n,An):Pc(An)?ru(x):ga(x,jn,An,_n)}),!0;if(sr&&!R&&_n!==An)return x.undoManager.transact(()=>{if(jn.commonAncestorContainer.parentElement){const Mr=mi(jn),Yc=jn.commonAncestorContainer.parentElement;oa(V,jn.commonAncestorContainer.parentElement,_n),Yc.remove();const Ir=ac(Mr);x.selection.setRng(Ir)}}),!0;if(!_n&&!R&&jn.startOffset===0&&jn.endOffset===0)return x.undoManager.transact(()=>{xg(x)}),!0}return!1},ld=(x,R,V)=>{const ce=x.getParent(R.parentNode,x.isBlock,V);x.remove(R),ce&&x.isEmpty(ce)&&x.remove(ce)},Ag=(x,R)=>{const V=x.dom,ce=x.selection.getStart(),ge=oe(x,ce),Qe=V.getParent(ce,V.isBlock,ge);if(Qe&&V.isEmpty(Qe,void 0,{checkRootAsContent:!0})){const An=vo(x.selection.getRng()),Kn=V.getParent(xr(x,An,R,ge),"LI",ge);if(Kn){const jn=Yc=>en(["td","th","caption"],$e(Yc)),_n=Yc=>Yc.dom===ge,sr=Ws(Ct.fromDom(Kn),jn,_n),Mr=Ws(Ct.fromDom(An.startContainer),jn,_n);return We(sr,Mr,Bt)?(x.undoManager.transact(()=>{const Yc=Kn.parentNode;ld(V,Qe,ge),kl(V,Yc),x.selection.select(Kn,!0),x.selection.collapse(R)}),!0):!1}}return!1},gf=(x,R)=>Ts(x,R)||Ag(x,R),hf=x=>{const R=x.selection.getStart(),V=oe(x,R);return x.dom.getParent(R,"LI,DT,DD",V)||$(x).length>0},eo=x=>hf(x)?(x.undoManager.transact(()=>{x.execCommand("Delete"),Ys(x.dom,x.getBody())}),!0):!1,Rr=(x,R)=>{const V=x.selection;return!Ka(x,V.getNode())&&(V.isCollapsed()?gf(x,R):eo(x))},Ud=x=>{x.on("ExecCommand",R=>{const V=R.command.toLowerCase();(V==="delete"||V==="forwarddelete")&&hf(x)&&Ys(x.dom,x.getBody())}),x.on("keydown",R=>{R.keyCode===Ur.BACKSPACE?Rr(x,!1)&&R.preventDefault():R.keyCode===Ur.DELETE&&Rr(x,!0)&&R.preventDefault()})},qc=x=>({backspaceDelete:R=>{Rr(x,R)}}),Ic=(x,R)=>{const V=us(x);V===null||Ka(x,V)||x.undoManager.transact(()=>{zn(R.styles)&&x.dom.setStyles(V,R.styles),zn(R.attrs)&&nc(R.attrs,(ce,ge)=>x.dom.setAttrib(V,ge,ce))})},Kc=x=>{const R=nn(xm(x).split("")),V=_e(R,(ce,ge)=>{const Qe=ce.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ge)*Qe});return It(V,(ce,ge)=>ce+ge,0)},sa=x=>{if(x--,x<0)return"";{const R=x%26,V=Math.floor(x/26),ce=sa(V),ge=String.fromCharCode(65+R);return ce+ge}},xc=x=>/^[A-Z]+$/.test(x),_l=x=>/^[a-z]+$/.test(x),_m=x=>/^[0-9]+$/.test(x),mr=x=>_m(x)?2:xc(x)?0:_l(x)?1:or(x)?3:4,Og=x=>{switch(mr(x)){case 2:return Ye.some({listStyleType:Ye.none(),start:x});case 0:return Ye.some({listStyleType:Ye.some("upper-alpha"),start:Kc(x).toString()});case 1:return Ye.some({listStyleType:Ye.some("lower-alpha"),start:Kc(x).toString()});case 3:return Ye.some({listStyleType:Ye.none(),start:""});case 4:return Ye.none()}},Hr=x=>{const R=parseInt(x.start,10);return Js(x.listStyleType,"upper-alpha")?sa(R):Js(x.listStyleType,"lower-alpha")?sa(R).toLowerCase():x.start},Bu=x=>{const R=us(x);!jo(R)||Ka(x,R)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Hr({start:x.dom.getAttrib(R,"start","1"),listStyleType:Ye.from(x.dom.getStyle(R,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:V=>{const ce=V.getData();Og(ce.start).each(ge=>{x.execCommand("mceListUpdate",!1,{attrs:{start:ge.start==="1"?"":ge.start},styles:{"list-style-type":ge.listStyleType.getOr("")}})}),V.close()}})},hi=(x,R)=>()=>{const V=us(x);return Cn(V)&&V.nodeName===R},Ds=x=>{x.addCommand("mceListProps",()=>{Bu(x)})},pi=x=>{x.on("BeforeExecCommand",R=>{const V=R.command.toLowerCase();V==="indent"?jc(x):V==="outdent"&&ru(x)}),x.addCommand("InsertUnorderedList",(R,V)=>{km(x,"UL",V)}),x.addCommand("InsertOrderedList",(R,V)=>{km(x,"OL",V)}),x.addCommand("InsertDefinitionList",(R,V)=>{km(x,"DL",V)}),x.addCommand("RemoveList",()=>{xg(x)}),Ds(x),x.addCommand("mceListUpdate",(R,V)=>{zn(V)&&Ic(x,V)}),x.addQueryStateHandler("InsertUnorderedList",hi(x,"UL")),x.addQueryStateHandler("InsertOrderedList",hi(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",hi(x,"DL"))};var Wd=tinymce.util.Tools.resolve("tinymce.html.Node");const cu=x=>x.type===3,Xs=x=>x.length===0,$u=x=>{const R=(ge,Qe)=>{const An=Wd.create("li");ie(ge,Kn=>An.append(Kn)),Qe?x.insert(An,Qe,!0):x.append(An)},V=(ge,Qe)=>cu(Qe)?[...ge,Qe]:!Xs(ge)&&!cu(Qe)?(R(ge,Qe),[]):ge,ce=It(x.children(),V,[]);Xs(ce)||R(ce)},Al=x=>{x.on("PreInit",()=>{const{parser:R}=x;R.addNodeFilter("ul,ol",V=>ie(V,$u))})},wo=x=>{x.on("keydown",R=>{R.keyCode!==Ur.TAB||Ur.metaKeyPressed(R)||x.undoManager.transact(()=>{(R.shiftKey?ru(x):jc(x))&&R.preventDefault()})})},id=x=>{xl(x)&&wo(x),Ud(x)},Am=(x,R)=>V=>{const ce=ge=>{V.setActive($r(ge.parents,R)),V.setEnabled(!Ka(x,ge.element)&&x.selection.isEditable())};return V.setEnabled(x.selection.isEditable()),qs(x,ce)},pf=x=>{const R=V=>()=>x.execCommand(V);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:R("InsertOrderedList"),onSetup:Am(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:R("InsertUnorderedList"),onSetup:Am(x,"UL")}))},Bh=(x,R)=>V=>qs(x,ge=>V.setEnabled($r(ge.parents,R)&&!Ka(x,ge.element))),bf=x=>{const R={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:Bh(x,"OL")};x.ui.registry.addMenuItem("listprops",R),x.ui.registry.addContextMenu("lists",{update:V=>{const ce=us(x,V);return jo(ce)?["listprops"]:[]}})};var $h=()=>{it.add("lists",x=>(yc(x),Al(x),x.hasPlugin("rtc",!0)?Ds(x):(id(x),pi(x)),pf(x),bf(x),qc(x)))};$h()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=(ue,re,Oe)=>{var He;return Oe(ue,re.prototype)?!0:((He=ue.constructor)===null||He===void 0?void 0:He.name)===re.name},Xt=ue=>{const re=typeof ue;return ue===null?"null":re==="object"&&Array.isArray(ue)?"array":re==="object"&&Pn(ue,String,(Oe,He)=>He.isPrototypeOf(Oe))?"string":re},an=ue=>re=>Xt(re)===ue,bt=an("string"),jt=an("object"),zn=an("array"),Mt=ue=>ue==null,Gt=ue=>!Mt(ue);class Xn{constructor(re,Oe){this.tag=re,this.value=Oe}static some(re){return new Xn(!0,re)}static none(){return Xn.singletonNone}fold(re,Oe){return this.tag?Oe(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?Xn.some(re(this.value)):Xn.none()}bind(re){return this.tag?re(this.value):Xn.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:Xn.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return Gt(re)?Xn.some(re):Xn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xn.singletonNone=new Xn(!1);const Cn=Array.prototype.push,qt=(ue,re)=>{for(let Oe=0,He=ue.length;Oe<He;Oe++){const ln=ue[Oe];re(ln,Oe)}},En=ue=>{const re=[];for(let Oe=0,He=ue.length;Oe<He;++Oe){if(!zn(ue[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+ue);Cn.apply(re,ue[Oe])}return re},At=ue=>{let re=ue;return{get:()=>re,set:ln=>{re=ln}}},Tt=Object.keys,Xe=Object.hasOwnProperty,nt=(ue,re)=>{const Oe=Tt(ue);for(let He=0,ln=Oe.length;He<ln;He++){const xn=Oe[He],Qn=ue[xn];re(Qn,xn)}},Un=(ue,re)=>De(ue,re)?Xn.from(ue[re]):Xn.none(),De=(ue,re)=>Xe.call(ue,re),ee=ue=>re=>re.options.get(ue),Ye=ue=>{const re=ue.options.register;re("audio_template_callback",{processor:"function"}),re("video_template_callback",{processor:"function"}),re("iframe_template_callback",{processor:"function"}),re("media_live_embeds",{processor:"boolean",default:!0}),re("media_filter_html",{processor:"boolean",default:!0}),re("media_url_resolver",{processor:"function"}),re("media_alt_source",{processor:"boolean",default:!0}),re("media_poster",{processor:"boolean",default:!0}),re("media_dimensions",{processor:"boolean",default:!0})},Bn=ee("audio_template_callback"),tt=ee("video_template_callback"),W=ee("iframe_template_callback"),Ot=ee("media_live_embeds"),en=ee("media_filter_html"),wn=ee("media_url_resolver"),_e=ee("media_alt_source"),ie=ee("media_poster"),ns=ee("media_dimensions");var so=tinymce.util.Tools.resolve("tinymce.util.Tools"),It=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const ao=It.DOM,st=ue=>ue.replace(/px$/,""),Po=ue=>{const re=ue.attr("style"),Oe=re?ao.parseStyle(re):{};return{type:"ephox-embed-iri",source:ue.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Un(Oe,"max-width").map(st).getOr(""),height:Un(Oe,"max-height").map(st).getOr("")}},nn=(ue,re)=>{let Oe={};const ln=A({validate:!1,forced_root_block:!1},re).parse(ue);for(let xn=ln;xn;xn=xn.walk())if(xn.type===1){const Qn=xn.name;if(xn.attr("data-ephox-embed-iri")){Oe=Po(xn);break}else!Oe.source&&Qn==="param"&&(Oe.source=xn.attr("movie")),(Qn==="iframe"||Qn==="object"||Qn==="embed"||Qn==="video"||Qn==="audio")&&(Oe.type||(Oe.type=Qn),Oe=so.extend(xn.attributes.map,Oe)),Qn==="source"&&(Oe.source?Oe.altsource||(Oe.altsource=xn.attr("src")):Oe.source=xn.attr("src")),Qn==="img"&&!Oe.poster&&(Oe.poster=xn.attr("src"))}return Oe.source=Oe.source||Oe.src||"",Oe.altsource=Oe.altsource||"",Oe.poster=Oe.poster||"",Oe},qe=ue=>{var re;const Oe={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},He=(re=ue.toLowerCase().split(".").pop())!==null&&re!==void 0?re:"";return Un(Oe,He).getOr("")};var bo=tinymce.util.Tools.resolve("tinymce.html.Node"),zs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const lo=(ue,re={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...re},ue),Js=It.DOM,We=ue=>/^[0-9.]+$/.test(ue)?ue+"px":ue,ut=(ue,re)=>{const Oe=re.attr("style"),He=Oe?Js.parseStyle(Oe):{};Gt(ue.width)&&(He["max-width"]=We(ue.width)),Gt(ue.height)&&(He["max-height"]=We(ue.height)),re.attr("style",Js.serializeStyle(He))},L=["source","altsource"],Jr=(ue,re,Oe,He)=>{let ln=0,xn=0;const Qn=lo(He);Qn.addNodeFilter("source",pe=>ln=pe.length);const Bs=Qn.parse(ue);for(let pe=Bs;pe;pe=pe.walk())if(pe.type===1){const Vn=pe.name;if(pe.attr("data-ephox-embed-iri")){ut(re,pe);break}else{switch(Vn){case"video":case"object":case"embed":case"img":case"iframe":re.height!==void 0&&re.width!==void 0&&(pe.attr("width",re.width),pe.attr("height",re.height));break}if(Oe)switch(Vn){case"video":pe.attr("poster",re.poster),pe.attr("src",null);for(let br=ln;br<2;br++)if(re[L[br]]){const Ur=new bo("source",1);Ur.attr("src",re[L[br]]),Ur.attr("type",re[L[br]+"mime"]||null),pe.append(Ur)}break;case"iframe":pe.attr("src",re.source);break;case"object":const Zs=pe.getAll("img").length>0;if(re.poster&&!Zs){pe.attr("src",re.poster);const br=new bo("img",1);br.attr("src",re.poster),br.attr("width",re.width),br.attr("height",re.height),pe.append(br)}break;case"source":if(xn<2&&(pe.attr("src",re[L[xn]]),pe.attr("type",re[L[xn]+"mime"]||null),!re[L[xn]])){pe.remove();continue}xn++;break;case"img":re.poster||pe.remove();break}}}return zs({},He).serialize(Bs)},uo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],cs=ue=>{const re=ue.match(/^(https?:\/\/|www\.)(.+)$/i);return re&&re.length>1?re[1]==="www."?"https://":re[1]:"https://"},zo=(ue,re)=>{const Oe=cs(re),He=ue.regex.exec(re);let ln=Oe+ue.url;if(Gt(He))for(let xn=0;xn<He.length;xn++)ln=ln.replace("$"+xn,()=>He[xn]?He[xn]:"");return ln.replace(/\?$/,"")},Nc=ue=>{const re=uo.filter(Oe=>Oe.regex.test(ue));return re.length>0?so.extend({},re[0],{url:zo(re[0],ue)}):null},Sn=(ue,re)=>{if(re)return re(ue);{const Oe=ue.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'"'+Oe+"></iframe>"}},Ro=ue=>{let re='<object data="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'" type="application/x-shockwave-flash">';return ue.poster&&(re+='<img src="'+ue.poster+'" width="'+ue.width+'" height="'+ue.height+'" />'),re+="</object>",re},gn=(ue,re)=>re?re(ue):'<audio controls="controls" src="'+ue.source+'">'+(ue.altsource?`
<source src="`+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</audio>",ye=(ue,re)=>re?re(ue):'<video width="'+ue.width+'" height="'+ue.height+'"'+(ue.poster?' poster="'+ue.poster+'"':"")+` controls="controls">
<source src="`+ue.source+'"'+(ue.sourcemime?' type="'+ue.sourcemime+'"':"")+` />
`+(ue.altsource?'<source src="'+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</video>",Ct=(ue,re)=>{var Oe;const He=so.extend({},re);if(!He.source&&(so.extend(He,nn((Oe=He.embed)!==null&&Oe!==void 0?Oe:"",ue.schema)),!He.source))return"";He.altsource||(He.altsource=""),He.poster||(He.poster=""),He.source=ue.convertURL(He.source,"source"),He.altsource=ue.convertURL(He.altsource,"source"),He.sourcemime=qe(He.source),He.altsourcemime=qe(He.altsource),He.poster=ue.convertURL(He.poster,"poster");const ln=Nc(He.source);if(ln&&(He.source=ln.url,He.type=ln.type,He.allowfullscreen=ln.allowFullscreen,He.width=He.width||String(ln.w),He.height=He.height||String(ln.h)),He.embed)return Jr(He.embed,He,!0,ue.schema);{const xn=Bn(ue),Qn=tt(ue),Bs=W(ue);return He.width=He.width||"300",He.height=He.height||"150",so.each(He,(pe,Vn)=>{He[Vn]=ue.dom.encode(""+pe)}),He.type==="iframe"?Sn(He,Bs):He.sourcemime==="application/x-shockwave-flash"?Ro(He):He.sourcemime.indexOf("audio")!==-1?gn(He,xn):ye(He,Qn)}},fo=ue=>ue.hasAttribute("data-mce-object")||ue.hasAttribute("data-ephox-embed-iri"),Bt=ue=>{ue.on("mousedown",re=>{const Oe=ue.dom.getParent(re.target,".mce-preview-object");Oe&&ue.dom.getAttrib(Oe,"data-mce-selected")==="2"&&re.stopImmediatePropagation()}),ue.on("click keyup touchend",()=>{const re=ue.selection.getNode();re&&ue.dom.hasClass(re,"mce-preview-object")&&ue.dom.getAttrib(re,"data-mce-selected")&&re.setAttribute("data-mce-selected","2")}),ue.on("ObjectResized",re=>{const Oe=re.target;if(Oe.getAttribute("data-mce-object")){let He=Oe.getAttribute("data-mce-html");He&&(He=unescape(He),Oe.setAttribute("data-mce-html",escape(Jr(He,{width:String(re.width),height:String(re.height)},!1,ue.schema))))}})},Is={},Bo=(ue,re,Oe)=>new Promise((He,ln)=>{const xn=Qn=>(Qn.html&&(Is[ue.source]=Qn),He({url:ue.source,html:Qn.html?Qn.html:re(ue)}));Is[ue.source]?xn(Is[ue.source]):Oe({url:ue.source}).then(xn).catch(ln)}),zr=(ue,re)=>Promise.resolve({html:re(ue),url:ue.source}),ms=ue=>re=>Ct(ue,re),Us=(ue,re)=>{const Oe=wn(ue);return Oe?Bo(re,ms(ue),Oe):zr(re,ms(ue))},tc=ue=>De(Is,ue),Ps=(ue,re)=>Un(re,ue).bind(Oe=>Un(Oe,"meta")),ls=(ue,re,Oe)=>He=>{const ln=()=>Un(ue,He),xn=()=>Un(re,He),Qn=Vn=>Un(Vn,"value").bind(Zs=>Zs.length>0?Xn.some(Zs):Xn.none()),Bs=()=>ln().bind(Vn=>jt(Vn)?Qn(Vn).orThunk(xn):xn().orThunk(()=>Xn.from(Vn))),pe=()=>xn().orThunk(()=>ln().bind(Vn=>jt(Vn)?Qn(Vn):Xn.from(Vn)));return{[He]:(He===Oe?Bs():pe()).getOr("")}},qo=(ue,re)=>{const Oe={};return Un(ue,"dimensions").each(He=>{qt(["width","height"],ln=>{Un(re,ln).orThunk(()=>Un(He,ln)).each(xn=>Oe[ln]=xn)})}),Oe},Qr=(ue,re)=>{const Oe=re&&re!=="dimensions"?Ps(re,ue).getOr({}):{},He=ls(ue,Oe,re);return{...He("source"),...He("altsource"),...He("poster"),...He("embed"),...qo(ue,Oe)}},$e=ue=>{const re={...ue,source:{value:Un(ue,"source").getOr("")},altsource:{value:Un(ue,"altsource").getOr("")},poster:{value:Un(ue,"poster").getOr("")}};return qt(["width","height"],Oe=>{Un(ue,Oe).each(He=>{const ln=re.dimensions||{};ln[Oe]=He,re.dimensions=ln})}),re},Je=ue=>re=>{const Oe=re&&re.msg?"Media embed handler error: "+re.msg:"Media embed handler threw unknown error.";ue.notificationManager.open({type:"error",text:Oe})},on=ue=>{const re=ue.selection.getNode(),Oe=fo(re)?ue.serializer.serialize(re,{selection:!0}):"",He=nn(Oe,ue.schema),xn=(()=>{if(wr(He.source,He.type)){const Qn=ue.dom.getRect(re);return{width:Qn.w.toString().replace(/px$/,""),height:Qn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Oe,...He,...xn}},Ft=(ue,re)=>Oe=>{if(bt(Oe.url)&&Oe.url.trim().length>0){const He=Oe.html,xn={...nn(He,re.schema),source:Oe.url,embed:He};ue.setData($e(xn))}},Jn=(ue,re)=>{const Oe=ue.dom.select("*[data-mce-object]");for(let He=0;He<re.length;He++)for(let ln=Oe.length-1;ln>=0;ln--)re[He]===Oe[ln]&&Oe.splice(ln,1);ue.selection.select(Oe[0])},Ko=(ue,re)=>{const Oe=ue.dom.select("*[data-mce-object]");ue.insertContent(re),Jn(ue,Oe),ue.nodeChanged()},wr=(ue,re)=>Gt(re)&&re==="ephox-embed-iri"&&Gt(Nc(ue)),Hn=(ue,re)=>((He,ln)=>He.width!==ln.width||He.height!==ln.height)(ue,re)&&wr(re.source,ue.type),fs=(ue,re,Oe)=>{var He;re.embed=Hn(ue,re)&&ns(Oe)?Ct(Oe,{...re,embed:""}):Jr((He=re.embed)!==null&&He!==void 0?He:"",re,!1,Oe.schema),re.embed&&(ue.source===re.source||tc(re.source))?Ko(Oe,re.embed):Us(Oe,re).then(ln=>{Ko(Oe,ln.html)}).catch(Je(Oe))},ur=ue=>{const re=on(ue),Oe=At(re),He=$e(re),ln=(Or,$o)=>{const Uo=Qr($o.getData(),"source");Or.source!==Uo.source&&(Ft(ta,ue)({url:Uo.source,html:""}),Us(ue,Uo).then(Ft(ta,ue)).catch(Je(ue)))},xn=Or=>{var $o;const Uo=Qr(Or.getData()),vr=nn(($o=Uo.embed)!==null&&$o!==void 0?$o:"",ue.schema);Or.setData($e(vr))},Qn=(Or,$o,Uo)=>{const vr=Qr(Or.getData(),$o),na=Hn(Uo,vr)&&ns(ue)?{...vr,embed:""}:vr,bc=Ct(ue,na);Or.setData($e({...na,embed:bc}))},Bs=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],pe=ns(ue)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Vn={title:"General",name:"general",items:En([Bs,pe])},br={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},Ur=[];_e(ue)&&Ur.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ie(ue)&&Ur.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Xo={title:"Advanced",name:"advanced",items:Ur},wl=[Vn,br];Ur.length>0&&wl.push(Xo);const nc={type:"tabpanel",tabs:wl},ta=ue.windowManager.open({title:"Insert/Edit Media",size:"normal",body:nc,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Or=>{const $o=Qr(Or.getData());fs(Oe.get(),$o,ue),Or.close()},onChange:(Or,$o)=>{switch($o.name){case"source":ln(Oe.get(),Or);break;case"embed":xn(Or);break;case"dimensions":case"altsource":case"poster":Qn(Or,$o.name,Oe.get());break}Oe.set(Qr(Or.getData()))},initialData:He})},ft=ue=>({showDialog:()=>{ur(ue)}}),yo=ue=>{const re=()=>{ur(ue)};ue.addCommand("mceMedia",re)},Ar=(ue,re,Oe)=>ue.length>=re.length&&ue.substr(Oe,Oe+re.length)===re,la=(ue,re)=>Ar(ue,re,0);var ia=tinymce.util.Tools.resolve("tinymce.Env");const ea=ue=>{const re=ue.name;return re==="iframe"||re==="video"||re==="audio"},Yo=(ue,re,Oe,He=null)=>{const ln=ue.attr(Oe);return Gt(ln)?ln:De(re,Oe)?null:He},va=(ue,re,Oe)=>{const He=re.name==="img"||ue.name==="video",ln=He?"300":null,xn=ue.name==="audio"?"30":"150",Qn=He?xn:null;re.attr({width:Yo(ue,Oe,"width",ln),height:Yo(ue,Oe,"height",Qn)})},Wa=(ue,re,Oe,He)=>{const ln=lo(ue.schema).parse(He,{context:re});for(;ln.firstChild;)Oe.append(ln.firstChild)},os=(ue,re)=>{const Oe=re.name,He=new bo("img",1);return pr(ue,re,He),va(re,He,{}),He.attr({style:re.attr("style"),src:ia.transparentSrc,"data-mce-object":Oe,class:"mce-object mce-object-"+Oe}),He},pn=(ue,re)=>{var Oe;const He=re.name,ln=new bo("span",1);ln.attr({contentEditable:"false",style:re.attr("style"),"data-mce-object":He,class:"mce-preview-object mce-object-"+He}),pr(ue,re,ln);const xn=ue.dom.parseStyle((Oe=re.attr("style"))!==null&&Oe!==void 0?Oe:""),Qn=new bo(He,1);if(va(re,Qn,xn),Qn.attr({src:re.attr("src"),style:re.attr("style"),class:re.attr("class")}),He==="iframe")Qn.attr({allowfullscreen:re.attr("allowfullscreen"),frameborder:"0",sandbox:re.attr("sandbox"),referrerpolicy:re.attr("referrerpolicy")});else{qt(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Zs=>{Qn.attr(Zs,re.attr(Zs))});const Vn=ln.attr("data-mce-html");Gt(Vn)&&Wa(ue,He,Qn,unescape(Vn))}const Bs=new bo("span",1);return Bs.attr("class","mce-shim"),ln.append(Qn),ln.append(Bs),ln},pr=(ue,re,Oe)=>{var He;const ln=(He=re.attributes)!==null&&He!==void 0?He:[];let xn=ln.length;for(;xn--;){const Vn=ln[xn].name;let Zs=ln[xn].value;Vn!=="width"&&Vn!=="height"&&Vn!=="style"&&!la(Vn,"data-mce-")&&((Vn==="data"||Vn==="src")&&(Zs=ue.convertURL(Zs,Vn)),Oe.attr("data-mce-p-"+Vn,Zs))}const Qn=zs({inner:!0},ue.schema),Bs=new bo("div",1);qt(re.children(),Vn=>Bs.append(Vn));const pe=Qn.serialize(Bs);pe&&(Oe.attr("data-mce-html",escape(pe)),Oe.empty())},Za=ue=>{const re=ue.attr("class");return bt(re)&&/\btiny-pageembed\b/.test(re)},jl=ue=>{let re=ue;for(;re=re.parent;)if(re.attr("data-ephox-embed-iri")||Za(re))return!0;return!1},Cl=ue=>re=>{let Oe=re.length,He;for(;Oe--;)He=re[Oe],He.parent&&(He.parent.attr("data-mce-object")||(ea(He)&&Ot(ue)?jl(He)||He.replace(pn(ue,He)):jl(He)||He.replace(os(ue,He))))},is=(ue,re,Oe)=>{const He=ue.options.get,ln=He("xss_sanitization"),xn=en(ue);return lo(ue.schema,{sanitize:ln,validate:xn}).parse(Oe,{context:re})},nr=ue=>{ue.on("PreInit",()=>{const{schema:re,serializer:Oe,parser:He}=ue,ln=re.getBoolAttrs();qt("webkitallowfullscreen mozallowfullscreen".split(" "),xn=>{ln[xn]={}}),nt({embed:["wmode"]},(xn,Qn)=>{const Bs=re.getElementRule(Qn);Bs&&qt(xn,pe=>{Bs.attributes[pe]={},Bs.attributesOrder.push(pe)})}),He.addNodeFilter("iframe,video,audio,object,embed",Cl(ue)),Oe.addAttributeFilter("data-mce-object",(xn,Qn)=>{var Bs;let pe=xn.length;for(;pe--;){const Vn=xn[pe];if(!Vn.parent)continue;const Zs=Vn.attr(Qn),br=new bo(Zs,1);if(Zs!=="audio"){const nc=Vn.attr("class");nc&&nc.indexOf("mce-preview-object")!==-1&&Vn.firstChild?br.attr({width:Vn.firstChild.attr("width"),height:Vn.firstChild.attr("height")}):br.attr({width:Vn.attr("width"),height:Vn.attr("height")})}br.attr({style:Vn.attr("style")});const Ur=(Bs=Vn.attributes)!==null&&Bs!==void 0?Bs:[];let Xo=Ur.length;for(;Xo--;){const nc=Ur[Xo].name;nc.indexOf("data-mce-p-")===0&&br.attr(nc.substr(11),Ur[Xo].value)}const wl=Vn.attr("data-mce-html");if(wl){const nc=is(ue,Zs,unescape(wl));qt(nc.children(),ta=>br.append(ta))}Vn.replace(br)}})}),ue.on("SetContent",()=>{const re=ue.dom;qt(re.select("span.mce-preview-object"),Oe=>{re.select("span.mce-shim",Oe).length===0&&re.add(Oe,"span",{class:"mce-shim"})})})},Ws=ue=>{ue.on("ResolveName",re=>{let Oe;re.target.nodeType===1&&(Oe=re.target.getAttribute("data-mce-object"))&&(re.name=Oe)})},Na=ue=>re=>{const Oe=()=>{re.setEnabled(ue.selection.isEditable())};return ue.on("NodeChange",Oe),Oe(),()=>{ue.off("NodeChange",Oe)}},cl=ue=>{const re=()=>ue.execCommand("mceMedia");ue.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:re,onSetup:Oe=>{const He=ue.selection;Oe.setActive(fo(He.getNode()));const ln=He.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Oe.setActive).unbind,xn=Na(ue)(Oe);return()=>{ln(),xn()}}}),ue.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:re,onSetup:Na(ue)})};var Br=()=>{it.add("media",ue=>(Ye(ue),yo(ue),cl(ue),Ws(ue),nr(ue),Bt(ue),ft(ue)))};Br()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager"),Pn=tinymce.util.Tools.resolve("tinymce.Env");const Xt=Tt=>Xe=>Xe.options.get(Tt),an=Tt=>{const Xe=Tt.options.register;Xe("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Xe("pagebreak_split_block",{processor:"boolean",default:!1})},bt=Xt("pagebreak_separator"),jt=Xt("pagebreak_split_block"),zn="mce-pagebreak",Mt=Tt=>{const Xe=`<img src="${Pn.transparentSrc}" class="${zn}" data-mce-resize="false" data-mce-placeholder />`;return Tt?`<p>${Xe}</p>`:Xe},Gt=Tt=>{const Xe=bt(Tt),nt=()=>jt(Tt),Un=new RegExp(Xe.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,De=>"\\"+De),"gi");Tt.on("BeforeSetContent",De=>{De.content=De.content.replace(Un,Mt(nt()))}),Tt.on("PreInit",()=>{Tt.serializer.addNodeFilter("img",De=>{let ee=De.length,Ye,Bn;for(;ee--;)if(Ye=De[ee],Bn=Ye.attr("class"),Bn&&Bn.indexOf(zn)!==-1){const tt=Ye.parent;if(tt&&Tt.schema.getBlockElements()[tt.name]&&nt()){tt.type=3,tt.value=Xe,tt.raw=!0,Ye.remove();continue}Ye.type=3,Ye.value=Xe,Ye.raw=!0}})})},Xn=Tt=>{Tt.addCommand("mcePageBreak",()=>{Tt.insertContent(Mt(jt(Tt)))})},Cn=Tt=>{Tt.on("ResolveName",Xe=>{Xe.target.nodeName==="IMG"&&Tt.dom.hasClass(Xe.target,zn)&&(Xe.name="pagebreak")})},qt=Tt=>Xe=>{const nt=()=>{Xe.setEnabled(Tt.selection.isEditable())};return Tt.on("NodeChange",nt),nt(),()=>{Tt.off("NodeChange",nt)}},En=Tt=>{const Xe=()=>Tt.execCommand("mcePageBreak");Tt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Xe,onSetup:qt(Tt)}),Tt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Xe,onSetup:qt(Tt)})};var At=()=>{it.add("pagebreak",Tt=>{an(Tt),Xn(Tt),En(Tt),Gt(Tt),Cn(Tt)})};At()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager"),Pn=tinymce.util.Tools.resolve("tinymce.Env"),Xt=tinymce.util.Tools.resolve("tinymce.util.Tools");const an=At=>Tt=>Tt.options.get(At),bt=an("content_style"),jt=an("content_css_cors"),zn=an("body_class"),Mt=an("body_id"),Gt=At=>{var Tt;let Xe="";const nt=At.dom.encode,Un=(Tt=bt(At))!==null&&Tt!==void 0?Tt:"";Xe+='<base href="'+nt(At.documentBaseURI.getURI())+'">';const De=jt(At)?' crossorigin="anonymous"':"";Xt.each(At.contentCSS,wn=>{Xe+='<link type="text/css" rel="stylesheet" href="'+nt(At.documentBaseURI.toAbsolute(wn))+'"'+De+">"}),Un&&(Xe+='<style type="text/css">'+Un+"</style>");const ee=Mt(At),Ye=zn(At),tt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Pn.os.isMacOS()||Pn.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",W=At.getBody().dir,Ot=W?' dir="'+nt(W)+'"':"";return"<!DOCTYPE html><html><head>"+Xe+'</head><body id="'+nt(ee)+'" class="mce-content-body '+nt(Ye)+'"'+Ot+">"+At.getContent()+tt+"</body></html>"},Xn=At=>{const Tt=Gt(At);At.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Tt}}).focus("close")},Cn=At=>{At.addCommand("mcePreview",()=>{Xn(At)})},qt=At=>{const Tt=()=>At.execCommand("mcePreview");At.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Tt}),At.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Tt})};var En=()=>{it.add("preview",At=>{Cn(At),qt(At)})};En()})();(function(){var it=tinymce.util.Tools.resolve("tinymce.PluginManager");const Pn=(S,k,F)=>{var Y;return F(S,k.prototype)?!0:((Y=S.constructor)===null||Y===void 0?void 0:Y.name)===k.name},Xt=S=>{const k=typeof S;return S===null?"null":k==="object"&&Array.isArray(S)?"array":k==="object"&&Pn(S,String,(F,Y)=>Y.isPrototypeOf(F))?"string":k},an=S=>k=>Xt(k)===S,bt=S=>k=>typeof k===S,jt=S=>k=>S===k,zn=an("string"),Mt=an("array"),Gt=bt("boolean"),Xn=jt(void 0),Cn=S=>S==null,qt=S=>!Cn(S),En=bt("function"),At=bt("number"),Tt=()=>{},Xe=(S,k)=>F=>S(k(F)),nt=S=>()=>S,Un=S=>S,De=(S,k)=>S===k;function ee(S,...k){return(...F)=>{const Y=k.concat(F);return S.apply(null,Y)}}const Ye=S=>{S()},Bn=nt(!1),tt=nt(!0);class W{constructor(k,F){this.tag=k,this.value=F}static some(k){return new W(!0,k)}static none(){return W.singletonNone}fold(k,F){return this.tag?F(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?W.some(k(this.value)):W.none()}bind(k){return this.tag?k(this.value):W.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:W.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return qt(k)?W.some(k):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const Ot=Object.keys,en=Object.hasOwnProperty,wn=(S,k)=>{const F=Ot(S);for(let Y=0,fe=F.length;Y<fe;Y++){const ze=F[Y],yt=S[ze];k(yt,ze)}},_e=S=>(k,F)=>{S[F]=k},ie=(S,k,F,Y)=>{wn(S,(fe,ze)=>{(k(fe,ze)?F:Y)(fe,ze)})},ns=(S,k)=>{const F={};return ie(S,k,_e(F),Tt),F},so=(S,k)=>{const F=[];return wn(S,(Y,fe)=>{F.push(k(Y,fe))}),F},It=S=>so(S,Un),A=S=>Ot(S).length,ao=(S,k)=>st(S,k)?W.from(S[k]):W.none(),st=(S,k)=>en.call(S,k),Po=(S,k)=>st(S,k)&&S[k]!==void 0&&S[k]!==null,nn=S=>{for(const k in S)if(en.call(S,k))return!1;return!0},qe=Array.prototype.indexOf,bo=Array.prototype.push,zs=(S,k)=>qe.call(S,k),lo=(S,k)=>zs(S,k)>-1,Js=(S,k)=>{for(let F=0,Y=S.length;F<Y;F++){const fe=S[F];if(k(fe,F))return!0}return!1},We=(S,k)=>{const F=[];for(let Y=0;Y<S;Y++)F.push(k(Y));return F},ut=(S,k)=>{const F=S.length,Y=new Array(F);for(let fe=0;fe<F;fe++){const ze=S[fe];Y[fe]=k(ze,fe)}return Y},L=(S,k)=>{for(let F=0,Y=S.length;F<Y;F++){const fe=S[F];k(fe,F)}},Jr=(S,k)=>{for(let F=S.length-1;F>=0;F--){const Y=S[F];k(Y,F)}},uo=(S,k)=>{const F=[],Y=[];for(let fe=0,ze=S.length;fe<ze;fe++){const yt=S[fe];(k(yt,fe)?F:Y).push(yt)}return{pass:F,fail:Y}},cs=(S,k)=>{const F=[];for(let Y=0,fe=S.length;Y<fe;Y++){const ze=S[Y];k(ze,Y)&&F.push(ze)}return F},zo=(S,k,F)=>(Jr(S,(Y,fe)=>{F=k(F,Y,fe)}),F),Nc=(S,k,F)=>(L(S,(Y,fe)=>{F=k(F,Y,fe)}),F),Sn=(S,k,F)=>{for(let Y=0,fe=S.length;Y<fe;Y++){const ze=S[Y];if(k(ze,Y))return W.some(ze);if(F(ze,Y))break}return W.none()},Ro=(S,k)=>Sn(S,k,Bn),gn=S=>{const k=[];for(let F=0,Y=S.length;F<Y;++F){if(!Mt(S[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+S);bo.apply(k,S[F])}return k},ye=(S,k)=>gn(ut(S,k)),Ct=(S,k)=>{for(let F=0,Y=S.length;F<Y;++F){const fe=S[F];if(k(fe,F)!==!0)return!1}return!0},fo=(S,k)=>{const F={};for(let Y=0,fe=S.length;Y<fe;Y++){const ze=S[Y];F[String(ze)]=k(ze,Y)}return F},Bt=(S,k)=>k>=0&&k<S.length?W.some(S[k]):W.none(),Is=S=>Bt(S,0),Bo=S=>Bt(S,S.length-1),zr=(S,k)=>{for(let F=0;F<S.length;F++){const Y=k(S[F],F);if(Y.isSome())return Y}return W.none()},ms=8,Us=9,tc=11,Ps=1,ls=3,qo=(S,k)=>{const Y=(k||document).createElement("div");if(Y.innerHTML=S,!Y.hasChildNodes()||Y.childNodes.length>1){const fe="HTML does not have a single root node";throw console.error(fe,S),new Error(fe)}return Je(Y.childNodes[0])},Qr=(S,k)=>{const Y=(k||document).createElement(S);return Je(Y)},$e=(S,k)=>{const Y=(k||document).createTextNode(S);return Je(Y)},Je=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},Ft={fromHtml:qo,fromTag:Qr,fromText:$e,fromDom:Je,fromPoint:(S,k,F)=>W.from(S.dom.elementFromPoint(k,F)).map(Je)},Jn=(S,k)=>{const F=S.dom;if(F.nodeType!==Ps)return!1;{const Y=F;if(Y.matches!==void 0)return Y.matches(k);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(k);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(k);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},Ko=S=>S.nodeType!==Ps&&S.nodeType!==Us&&S.nodeType!==tc||S.childElementCount===0,wr=(S,k)=>{const F=k===void 0?document:k.dom;return Ko(F)?[]:ut(F.querySelectorAll(S),Ft.fromDom)},Hn=(S,k)=>{const F=k===void 0?document:k.dom;return Ko(F)?W.none():W.from(F.querySelector(S)).map(Ft.fromDom)},fs=(S,k)=>S.dom===k.dom,ur=Jn;typeof window<"u"||Function("return this;")();const ft=S=>S.dom.nodeName.toLowerCase(),yo=S=>S.dom.nodeType,Ar=S=>k=>yo(k)===S,la=S=>yo(S)===ms||ft(S)==="#comment",ia=Ar(Ps),ea=Ar(ls),Yo=Ar(Us),va=Ar(tc),Wa=S=>k=>ia(k)&&ft(k)===S,os=S=>Ft.fromDom(S.dom.ownerDocument),pn=S=>Yo(S)?S:os(S),pr=S=>W.from(S.dom.parentNode).map(Ft.fromDom),Za=(S,k)=>{const F=En(k)?k:Bn;let Y=S.dom;const fe=[];for(;Y.parentNode!==null&&Y.parentNode!==void 0;){const ze=Y.parentNode,yt=Ft.fromDom(ze);if(fe.push(yt),F(yt)===!0)break;Y=ze}return fe},jl=S=>W.from(S.dom.previousSibling).map(Ft.fromDom),Cl=S=>W.from(S.dom.nextSibling).map(Ft.fromDom),is=S=>ut(S.dom.childNodes,Ft.fromDom),nr=(S,k)=>{const F=S.dom.childNodes;return W.from(F[k]).map(Ft.fromDom)},Ws=S=>nr(S,0),Na=S=>va(S)&&qt(S.dom.host),Br=En(Element.prototype.attachShadow)&&En(Node.prototype.getRootNode)?S=>Ft.fromDom(S.dom.getRootNode()):pn,ue=S=>{const k=Br(S);return Na(k)?W.some(k):W.none()},re=S=>Ft.fromDom(S.dom.host),Oe=S=>{const k=ea(S)?S.dom.parentNode:S.dom;if(k==null||k.ownerDocument===null)return!1;const F=k.ownerDocument;return ue(Ft.fromDom(k)).fold(()=>F.body.contains(k),Xe(Oe,re))};var He=(S,k,F,Y,fe)=>S(F,Y)?W.some(F):En(fe)&&fe(F)?W.none():k(F,Y,fe);const ln=(S,k,F)=>{let Y=S.dom;const fe=En(F)?F:Bn;for(;Y.parentNode;){Y=Y.parentNode;const ze=Ft.fromDom(Y);if(k(ze))return W.some(ze);if(fe(ze))break}return W.none()},xn=(S,k,F)=>He((fe,ze)=>ze(fe),ln,S,k,F),Qn=(S,k)=>{const F=fe=>k(Ft.fromDom(fe));return Ro(S.dom.childNodes,F).map(Ft.fromDom)},Bs=(S,k,F)=>ln(S,Y=>Jn(Y,k),F),pe=(S,k)=>Qn(S,F=>Jn(F,k)),Vn=(S,k)=>Hn(k,S),Zs=(S,k,F)=>He((fe,ze)=>Jn(fe,ze),Bs,S,k,F),br=S=>Zs(S,"[contenteditable]"),Ur=(S,k=!1)=>Oe(S)?S.dom.isContentEditable:br(S).fold(nt(k),F=>Xo(F)==="true"),Xo=S=>S.dom.contentEditable,wl=S=>S.nodeName.toLowerCase(),nc=S=>Ft.fromDom(S.getBody()),ta=S=>k=>fs(k,nc(S)),Or=S=>S?S.replace(/px$/,""):"",$o=S=>/^\d+(\.\d+)?$/.test(S)?S+"px":S,Uo=S=>Ft.fromDom(S.selection.getStart()),vr=S=>Ft.fromDom(S.selection.getEnd()),na=S=>xn(S,Wa("table")).forall(Ur),bc=(S,k)=>cs(is(S),k),Gl=(S,k)=>{let F=[];return L(is(S),Y=>{k(Y)&&(F=F.concat([Y])),F=F.concat(Gl(Y,k))}),F},Zc=(S,k)=>bc(S,F=>Jn(F,k)),Fo=(S,k)=>wr(k,S),dr=(S,k,F)=>{if(zn(F)||Gt(F)||At(F))S.setAttribute(k,F+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",F,":: Element ",S),new Error("Attribute value was not simple")},ya=(S,k,F)=>{dr(S.dom,k,F)},Sl=(S,k)=>{const F=S.dom;wn(k,(Y,fe)=>{dr(F,fe,Y)})},ua=(S,k)=>{const F=S.dom.getAttribute(k);return F===null?void 0:F},Os=(S,k)=>W.from(ua(S,k)),hs=(S,k)=>{S.dom.removeAttribute(k)},Pa=S=>Nc(S.dom.attributes,(k,F)=>(k[F.name]=F.value,k),{}),ql=(S,k,F=De)=>S.exists(Y=>F(Y,k)),jo=S=>{const k=[],F=Y=>{k.push(Y)};for(let Y=0;Y<S.length;Y++)S[Y].each(F);return k},Wr=(S,k,F)=>S.isSome()&&k.isSome()?W.some(F(S.getOrDie(),k.getOrDie())):W.none(),Ba=S=>S.bind(Un),yr=(S,k)=>S?W.some(k):W.none(),oc=(S,k)=>S.substring(k),Pc=(S,k,F)=>k===""||S.length>=k.length&&S.substr(F,F+k.length)===k,Ca=(S,k)=>sc(S,k)?oc(S,k.length):S,sc=(S,k)=>Pc(S,k,0),Pi=(S=>k=>k.replace(S,""))(/^\s+|\s+$/g),ja=S=>S.length>0,ll=S=>!ja(S),da=(S,k=10)=>{const F=parseInt(S,k);return isNaN(F)?W.none():W.some(F)},yc=S=>{const k=parseFloat(S);return isNaN(k)?W.none():W.some(k)},xl=S=>S.style!==void 0&&En(S.style.getPropertyValue),Kl=(S,k,F)=>{if(!zn(F))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",F,":: Element ",S),new Error("CSS value must be a string: "+F);xl(S)&&S.style.setProperty(k,F)},Ou=(S,k)=>{xl(S)&&S.style.removeProperty(k)},Bi=(S,k,F)=>{const Y=S.dom;Kl(Y,k,F)},Ga=(S,k)=>{const F=S.dom,fe=window.getComputedStyle(F).getPropertyValue(k);return fe===""&&!Oe(S)?su(F,k):fe},su=(S,k)=>xl(S)?S.style.getPropertyValue(k):"",U=(S,k)=>{const F=S.dom,Y=su(F,k);return W.from(Y).filter(fe=>fe.length>0)},ae=(S,k)=>{const F=S.dom;Ou(F,k),ql(Os(S,"style").map(Pi),"")&&hs(S,"style")},ve=(S,k,F=0)=>Os(S,k).map(Y=>parseInt(Y,10)).getOr(F),Ue=(S,k)=>dt(S,k,tt),dt=(S,k,F)=>ye(is(S),Y=>Jn(Y,k)?F(Y)?[Y]:[]:dt(Y,k,F)),sn=["tfoot","thead","tbody","colgroup"],vo=S=>lo(sn,S),ko=(S,k)=>({rows:S,columns:k}),oo=(S,k,F)=>({element:S,rowspan:k,colspan:F}),us=(S,k,F,Y,fe,ze)=>({element:S,rowspan:k,colspan:F,row:Y,column:fe,isLocked:ze}),js=(S,k,F)=>({element:S,cells:k,section:F}),vt=(S,k,F,Y)=>({startRow:S,startCol:k,finishRow:F,finishCol:Y}),Du=(S,k,F)=>({element:S,colspan:k,column:F}),bs=(S,k)=>({element:S,columns:k}),$=(S,k,F=Bn)=>{if(F(k))return W.none();if(lo(S,ft(k)))return W.some(k);const Y=fe=>Jn(fe,"table")||F(fe);return Bs(k,S.join(","),Y)},X=(S,k)=>$(["td","th"],S,k),oe=S=>Ue(S,"th,td"),Re=S=>Jn(S,"colgroup")?Zc(S,"col"):ye(Yt(S),k=>Zc(k,"col")),Pt=(S,k)=>Zs(S,"table",k),io=S=>Ue(S,"tr"),Yt=S=>Pt(S).fold(nt([]),k=>Zc(k,"colgroup")),Gs=(S,k)=>ut(S,F=>{if(ft(F)==="colgroup"){const Y=ut(Re(F),fe=>{const ze=ve(fe,"span",1);return oo(fe,1,ze)});return js(F,Y,"colgroup")}else{const Y=ut(oe(F),fe=>{const ze=ve(fe,"rowspan",1),yt=ve(fe,"colspan",1);return oo(fe,ze,yt)});return js(F,Y,k(F))}}),ct=S=>pr(S).map(k=>{const F=ft(k);return vo(F)?F:"tbody"}).getOr("tbody"),xs=S=>{const k=io(S),Y=[...Yt(S),...k];return Gs(Y,ct)},qa="data-snooker-locked-cols",$s=S=>Os(S,qa).bind(k=>W.from(k.match(/\d+/g))).map(k=>fo(k,tt)),$r=(S,k)=>S+","+k,il=(S,k,F)=>W.from(S.access[$r(k,F)]),_o=(S,k,F)=>{const Y=Ka(S,fe=>F(k,fe.element));return Y.length>0?W.some(Y[0]):W.none()},Ka=(S,k)=>{const F=ye(S.all,Y=>Y.cells);return cs(F,k)},qs=S=>{const k={};let F=0;return L(S.cells,Y=>{const fe=Y.colspan;We(fe,ze=>{const yt=F+ze;k[yt]=Du(Y.element,fe,yt)}),F+=fe}),k},Yl=S=>{const k={},F=[],fe=Is(S).map(Ol=>Ol.element).bind(Pt).bind($s).getOr({});let ze=0,yt=0,Jt=0;const{pass:Wn,fail:ho}=uo(S,Ol=>Ol.section==="colgroup");L(ho,Ol=>{const Hu=[];L(Ol.cells,Lc=>{let Vu=0;for(;k[$r(Jt,Vu)]!==void 0;)Vu++;const Gd=Po(fe,Vu.toString()),du=us(Lc.element,Lc.rowspan,Lc.colspan,Jt,Vu,Gd);for(let xf=0;xf<Lc.colspan;xf++)for(let yi=0;yi<Lc.rowspan;yi++){const Vh=Jt+yi,Mg=Vu+xf,zh=$r(Vh,Mg);k[zh]=du,yt=Math.max(yt,Mg+1)}Hu.push(du)}),ze++,F.push(js(Ol.element,Hu,Ol.section)),Jt++});const{columns:vs,colgroups:rs}=Bo(Wn).map(Ol=>{const Hu=qs(Ol);return{colgroups:[bs(Ol.element,It(Hu))],columns:Hu}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ko(ze,yt),access:k,all:F,columns:vs,colgroups:rs}},Tl={fromTable:S=>{const k=xs(S);return Yl(k)},generate:Yl,getAt:il,findItem:_o,filterItems:Ka,justCells:S=>ye(S.all,k=>k.cells),justColumns:S=>It(S.columns),hasColumns:S=>Ot(S.columns).length>0,getColumnAt:(S,k)=>W.from(S.columns[k])};var ma=tinymce.util.Tools.resolve("tinymce.util.Tools");const wa=(S,k,F)=>{const Y=S.select("td,th",k);let fe;for(let ze=0;ze<Y.length;ze++){const yt=S.getStyle(Y[ze],F);if(Xn(fe)&&(fe=yt),fe!==yt)return""}return fe},Ya=(S,k,F)=>{ma.each("left center right".split(" "),Y=>{Y!==F&&S.formatter.remove("align"+Y,{},k)}),F&&S.formatter.apply("align"+F,{},k)},Fd=(S,k,F)=>{ma.each("top middle bottom".split(" "),Y=>{Y!==F&&S.formatter.remove("valign"+Y,{},k)}),F&&S.formatter.apply("valign"+F,{},k)},To=(S,k,F)=>{S.dispatch("TableModified",{...F,table:k})},rc=(S,k)=>yc(S).getOr(k),$a=(S,k,F)=>rc(Ga(S,k),F),K=(S,k,F,Y)=>{const fe=$a(S,`padding-${F}`,0),ze=$a(S,`padding-${Y}`,0),yt=$a(S,`border-${F}-width`,0),Jt=$a(S,`border-${Y}-width`,0);return k-fe-ze-yt-Jt},se=(S,k)=>{const F=S.dom,Y=F.getBoundingClientRect().width||F.offsetWidth;return k==="border-box"?Y:K(S,Y,"left","right")},Me=S=>se(S,"content-box");var un=tinymce.util.Tools.resolve("tinymce.Env");const go="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ls=We(5,S=>{const k=`${S+1}px`;return{title:k,value:k}}),fa=ut(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],S=>({title:S,value:S.toLowerCase()})),Co="100%",Zr=S=>{var k;const F=S.dom,Y=(k=F.getParent(S.selection.getStart(),F.isBlock))!==null&&k!==void 0?k:S.getBody();return Me(Ft.fromDom(Y))+"px"},Ks=(S,k)=>rd(S)||!Jl(S)?k:wg(S)?{...k,width:Zr(S)}:{...k,width:Co},Dr=(S,k)=>rd(S)||Jl(S)?k:wg(S)?{...k,width:Zr(S)}:{...k,width:Co},Sr=S=>k=>k.options.get(S),Cr=S=>{const k=S.options.register;k("table_border_widths",{processor:"object[]",default:Ls}),k("table_border_styles",{processor:"object[]",default:fa}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!un.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:go}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Bc=Sr("table_sizing_mode"),Xl=Sr("table_border_widths"),Sa=Sr("table_border_styles"),$c=Sr("table_cell_advtab"),ui=Sr("table_row_advtab"),di=Sr("table_advtab"),af=Sr("table_appearance_options"),Mu=Sr("table_grid"),Jl=Sr("table_style_by_css"),Cc=Sr("table_cell_class_list"),Nu=Sr("table_row_class_list"),Hd=Sr("table_class_list"),$i=Sr("table_toolbar"),Cg=Sr("table_background_color_map"),Vd=Sr("table_border_color_map"),wg=S=>Bc(S)==="fixed",rd=S=>Bc(S)==="responsive",Sg=S=>{const k=S.options,F=k.get("table_default_styles");return k.isSet("table_default_styles")?F:Ks(S,F)},ad=S=>{const k=S.options,F=k.get("table_default_attributes");return k.isSet("table_default_attributes")?F:Dr(S,F)},Qp=(S,k)=>k.column>=S.startCol&&k.column+k.colspan-1<=S.finishCol&&k.row>=S.startRow&&k.row+k.rowspan-1<=S.finishRow,de=(S,k)=>{let F=!0;const Y=ee(Qp,k);for(let fe=k.startRow;fe<=k.finishRow;fe++)for(let ze=k.startCol;ze<=k.finishCol;ze++)F=F&&Tl.getAt(S,fe,ze).exists(Y);return F?W.some(k):W.none()},Tm=(S,k)=>vt(Math.min(S.row,k.row),Math.min(S.column,k.column),Math.max(S.row+S.rowspan-1,k.row+k.rowspan-1),Math.max(S.column+S.colspan-1,k.column+k.colspan-1)),jc=(S,k,F)=>{const Y=Tl.findItem(S,k,fs),fe=Tl.findItem(S,F,fs);return Y.bind(ze=>fe.map(yt=>Tm(ze,yt)))},ru=(S,k,F)=>jc(S,k,F).bind(Y=>de(S,Y)),xg=(S,k,F)=>{const Y=Dh(S);return ru(Y,k,F)},Dh=Tl.fromTable,Jo=(S,k)=>{pr(S).each(Y=>{Y.dom.insertBefore(k.dom,S.dom)})},wc=(S,k)=>{Cl(S).fold(()=>{pr(S).each(fe=>{xa(fe,k)})},Y=>{Jo(Y,k)})},ul=(S,k)=>{Ws(S).fold(()=>{xa(S,k)},Y=>{S.dom.insertBefore(k.dom,Y.dom)})},xa=(S,k)=>{S.dom.appendChild(k.dom)},cd=(S,k)=>{Jo(S,k),xa(k,S)},mi=(S,k)=>{L(k,(F,Y)=>{const fe=Y===0?S:k[Y-1];wc(fe,F)})},ac=(S,k)=>{L(k,F=>{xa(S,F)})},fi=S=>{const k=S.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},Tg=S=>{const k=is(S);k.length>0&&mi(S,k),fi(S)},El=((S,k)=>{const F=ze=>{if(!S(ze))throw new Error("Can only get "+k+" value of a "+k+" node");return Y(ze).getOr("")},Y=ze=>S(ze)?W.from(ze.dom.nodeValue):W.none();return{get:F,getOption:Y,set:(ze,yt)=>{if(!S(ze))throw new Error("Can only set raw "+k+" value of a "+k+" node");ze.dom.nodeValue=yt}}})(ea,"text"),gi=S=>El.get(S),cf=(S,k)=>El.set(S,k);var Sc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ta=()=>{const S=ho=>Ft.fromDom(ho.dom.cloneNode(!1)),k=ho=>pn(ho).dom,F=ho=>ia(ho)?ft(ho)==="body"?!0:lo(Sc,ft(ho)):!1,Y=ho=>ia(ho)?lo(["br","img","hr","input"],ft(ho)):!1,fe=ho=>ia(ho)&&ua(ho,"contenteditable")==="false",ze=(ho,vs)=>ho.dom.compareDocumentPosition(vs.dom),yt=(ho,vs)=>{const rs=Pa(ho);Sl(vs,rs)},Jt=ho=>{const vs=ft(ho);return lo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],vs)},Wn=ho=>ia(ho)?Os(ho,"lang"):W.none();return{up:nt({selector:Bs,closest:Zs,predicate:ln,all:Za}),down:nt({selector:Fo,predicate:Gl}),styles:nt({get:Ga,getRaw:U,set:Bi,remove:ae}),attrs:nt({get:ua,set:ya,remove:hs,copyTo:yt}),insert:nt({before:Jo,after:wc,afterAll:mi,append:xa,appendAll:ac,prepend:ul,wrap:cd}),remove:nt({unwrap:Tg,remove:fi}),create:nt({nu:Ft.fromTag,clone:S,text:Ft.fromText}),query:nt({comparePosition:ze,prevSibling:jl,nextSibling:Cl}),property:nt({children:is,name:ft,parent:pr,document:k,isText:ea,isComment:la,isElement:ia,isSpecial:Jt,getLanguage:Wn,getText:gi,setText:cf,isBoundary:F,isEmptyTag:Y,isNonEditable:fe}),eq:fs,is:ur}};const Pu=(S,k,F,Y)=>{const fe=F[0],ze=F.slice(1);return Y(S,k,fe,ze)},zd=(S,k,F)=>F.length>0?Pu(S,k,F,Ql):W.none(),Ql=(S,k,F,Y)=>{const fe=k(S,F);return zo(Y,(ze,yt)=>{const Jt=k(S,yt);return Xa(S,ze,Jt)},fe)},Xa=(S,k,F)=>k.bind(Y=>F.filter(ee(S.eq,Y))),lf=zd,uf=Ta(),df=(S,k)=>lf(uf,(F,Y)=>S(Y),k),Em=S=>Bs(S,"table"),kl=(S,k)=>{const F=Fo(S,k);return F.length>0?W.some(F):W.none()},mf=(S,k,F)=>Vn(S,k).bind(Y=>Vn(S,F).bind(fe=>df(Em,[Y,fe]).map(ze=>({first:Y,last:fe,table:ze})))),Mh=(S,k)=>kl(S,k),e1=(S,k,F)=>mf(S,k,F).bind(Y=>{const fe=Wn=>fs(S,Wn),ze="thead,tfoot,tbody,table",yt=Bs(Y.first,ze,fe),Jt=Bs(Y.last,ze,fe);return yt.bind(Wn=>Jt.bind(ho=>fs(Wn,ho)?xg(Y.table,Y.first,Y.last):W.none()))}),Nh=S=>ut(S,Ft.fromDom),ff="data-mce-selected",km="td["+ff+"],th["+ff+"]",au="data-mce-first-selected",Eg="td["+au+"],th["+au+"]",Ys="data-mce-last-selected",xr="td["+Ys+"],th["+Ys+"]",Gc={selected:ff,selectedSelector:km,firstSelected:au,firstSelectedSelector:Eg,lastSelected:Ys,lastSelectedSelector:xr},kg=S=>Pt(S).bind(k=>Mh(k,Gc.firstSelectedSelector)).fold(nt(S),k=>k[0]),_g=S=>(k,F)=>{const Y=ft(k),fe=Y==="col"||Y==="colgroup"?kg(k):k;return Zs(fe,S,F)},oa=_g("th,td,caption"),dn=_g("th,td"),Ii=S=>Nh(S.model.table.getSelectedCells()),Ph=(S,k)=>{const F=dn(S),Y=F.bind(fe=>Pt(fe)).map(fe=>io(fe));return Wr(F,Y,(fe,ze)=>cs(ze,yt=>Js(Nh(yt.dom.cells),Jt=>ua(Jt,k)==="1"||fs(Jt,fe)))).getOr([])},ga=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ts=S=>({value:hf(S)}),ld=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ag=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,gf=S=>ld.test(S)||Ag.test(S),hf=S=>Ca(S,"#").toUpperCase(),eo=S=>gf(S)?W.some({value:hf(S)}):W.none(),Rr=S=>{const k=S.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},Ud=S=>{const k=Rr(S.red)+Rr(S.green)+Rr(S.blue);return Ts(k)},qc=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ic=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Kc=(S,k,F,Y)=>({red:S,green:k,blue:F,alpha:Y}),sa=(S,k,F,Y)=>{const fe=parseInt(S,10),ze=parseInt(k,10),yt=parseInt(F,10),Jt=parseFloat(Y);return Kc(fe,ze,yt,Jt)},xc=S=>{const k=qc.exec(S);if(k!==null)return W.some(sa(k[1],k[2],k[3],"1"));const F=Ic.exec(S);return F!==null?W.some(sa(F[1],F[2],F[3],F[4])):W.none()},_l=S=>eo(S).orThunk(()=>xc(S).map(Ud)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const F=k.getContext("2d");F.clearRect(0,0,k.width,k.height),F.fillStyle="#FFFFFF",F.fillStyle=S,F.fillRect(0,0,1,1);const Y=F.getImageData(0,0,1,1).data,fe=Y[0],ze=Y[1],yt=Y[2],Jt=Y[3];return Ud(Kc(fe,ze,yt,Jt))}),_m=S=>xc(S).map(Ud).map(k=>"#"+k.value).getOr(S),mr=S=>{let k=S;return{get:()=>k,set:fe=>{k=fe}}},Og=S=>{const k=mr(W.none()),F=()=>k.get().each(S);return{clear:()=>{F(),k.set(W.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Jt=>{F(),k.set(W.some(Jt))}}},Hr=()=>Og(S=>S.unbind()),Bu=(S,k,F)=>Y=>{const fe=Hr(),ze=ll(F),yt=()=>{const Jt=Ii(S),Wn=ho=>S.formatter.match(k,{value:F},ho.dom,ze);ze?(Y.setActive(!Js(Jt,Wn)),fe.set(S.formatter.formatChanged(k,ho=>Y.setActive(!ho),!0))):(Y.setActive(Ct(Jt,Wn)),fe.set(S.formatter.formatChanged(k,Y.setActive,!1,{value:F})))};return S.initialized?yt():S.on("init",yt),fe.clear},hi=S=>Po(S,"menu"),Ds=S=>ut(S,k=>{const F=k.text||k.title||"";return hi(k)?{text:F,items:Ds(k.menu)}:{text:F,value:k.value}}),pi=S=>S.length?W.some(Ds([{text:"Select...",value:"mce-no-match"},...S])):W.none(),Wd=(S,k,F,Y)=>ut(k,fe=>{const ze=fe.text||fe.title;return hi(fe)?{type:"nestedmenuitem",text:ze,getSubmenuItems:()=>Wd(S,fe.menu,F,Y)}:{text:ze,type:"togglemenuitem",onAction:()=>Y(fe.value),onSetup:Bu(S,F,fe.value)}}),cu=(S,k)=>F=>{S.execCommand("mceTableApplyCellStyle",!1,{[k]:F})},Xs=S=>ye(S,k=>hi(k)?[{...k,menu:Xs(k.menu)}]:ja(k.value)?[k]:[]),$u=(S,k,F,Y)=>fe=>fe(Wd(S,k,F,Y)),Al=(S,k,F)=>{const Y=ut(k,fe=>({text:fe.title,value:"#"+_l(fe.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Y.length>0?Y:void 0,allowCustomColors:!1},onAction:fe=>{const ze=fe.value==="remove"?"":fe.value;S.execCommand("mceTableApplyCellStyle",!1,{[F]:ze})}}]},wo=S=>()=>{const F=S.queryCommandValue("mceTableRowType")==="header"?"body":"header";S.execCommand("mceTableRowType",!1,{type:F})},id=S=>()=>{const F=S.queryCommandValue("mceTableColType")==="th"?"td":"th";S.execCommand("mceTableColType",!1,{type:F})},Am=S=>pi(Cc(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),pf=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ga}],Bh=S=>pf.concat(Am(S).toArray()),bf=(S,k)=>{const Y=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ds(Sa(S)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Y):Y}},x={normal:(S,k)=>{const F=S.dom;return{setAttrib:(yt,Jt)=>{F.setAttrib(k,yt,Jt)},setStyle:(yt,Jt)=>{F.setStyle(k,yt,Jt)},setFormat:(yt,Jt)=>{Jt===""?S.formatter.remove(yt,{value:null},k,!0):S.formatter.apply(yt,{value:Jt},k)}}}},R=Wa("th"),V=(S,k)=>S&&k?"sectionCells":S?"section":"cells",ce=S=>{const k=S.section==="thead",F=ql(ge(S.cells),"th");return S.section==="tfoot"?{type:"footer"}:k||F?{type:"header",subType:V(k,F)}:{type:"body"}},ge=S=>{const k=cs(S,F=>R(F.element));return k.length===0?W.some("td"):k.length===S.length?W.some("th"):W.none()},Qe=S=>{const k=ut(S,fe=>ce(fe).type),F=lo(k,"header"),Y=lo(k,"footer");if(!F&&!Y)return W.some("body");{const fe=lo(k,"body");return F&&!fe&&!Y?W.some("header"):!F&&!fe&&Y?W.some("footer"):W.none()}},An=S=>{let k=!1,F;return(...Y)=>(k||(k=!0,F=S.apply(null,Y)),F)},Kn=(S,k)=>zr(S.all,F=>Ro(F.cells,Y=>fs(k,Y.element))),jn=(S,k,F)=>{const Y=ut(k.selection,ze=>X(ze).bind(yt=>Kn(S,yt)).filter(F)),fe=jo(Y);return yr(fe.length>0,fe)},_n=(S,k)=>k.mergable,sr=(S,k)=>k.unmergable,Mr=(S,k)=>jn(S,k,tt),Yc=(S,k)=>Kn(S,k).exists(F=>!F.isLocked),Ir=(S,k)=>Ct(k,F=>Yc(S,F)),Ih=(S,k)=>_n(S,k).filter(F=>Ir(S,F.cells)),Ub=(S,k)=>sr(S,k).filter(F=>Ir(S,F));({...{generate:S=>{if(!Mt(S))throw new Error("cases must be an array");if(S.length===0)throw new Error("there must be at least one case");const k=[],F={};return L(S,(Y,fe)=>{const ze=Ot(Y);if(ze.length!==1)throw new Error("one and only one name per case");const yt=ze[0],Jt=Y[yt];if(F[yt]!==void 0)throw new Error("duplicate key detected:"+yt);if(yt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Mt(Jt))throw new Error("case arguments must be an array");k.push(yt),F[yt]=(...Wn)=>{const ho=Wn.length;if(ho!==Jt.length)throw new Error("Wrong number of arguments to case "+yt+". Expected "+Jt.length+" ("+Jt+"), got "+ho);return{fold:(...rs)=>{if(rs.length!==S.length)throw new Error("Wrong number of arguments to fold. Expected "+S.length+", got "+rs.length);return rs[fe].apply(null,Wn)},match:rs=>{const er=Ot(rs);if(k.length!==er.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+er.join(","));if(!Ct(k,Hu=>lo(er,Hu)))throw new Error("Not all branches were specified when using match. Specified: "+er.join(", ")+`
Required: `+k.join(", "));return rs[yt].apply(null,Wn)},log:rs=>{console.log(rs,{constructors:k,constructor:yt,params:Wn})}}}}),F}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const n1=(S,k)=>{const F=Tl.fromTable(S);return Mr(F,k).bind(fe=>{const ze=fe[fe.length-1],yt=fe[0].row,Jt=ze.row+ze.rowspan,Wn=F.all.slice(yt,Jt);return Qe(Wn)}).getOr("")},lc=S=>sc(S,"rgb")?_m(S):S,Rn=S=>{const k=Ft.fromDom(S);return{borderwidth:U(k,"border-width").getOr(""),borderstyle:U(k,"border-style").getOr(""),bordercolor:U(k,"border-color").map(lc).getOr(""),backgroundcolor:U(k,"background-color").map(lc).getOr("")}},bi=S=>{const k=S[0],F=S.slice(1);return L(F,Y=>{L(Ot(k),fe=>{wn(Y,(ze,yt)=>{const Jt=k[fe];Jt!==""&&fe===yt&&Jt!==ze&&(k[fe]=fe==="class"?"mce-no-match":"")})})}),k},vf=(S,k,F,Y)=>Ro(S,fe=>!Xn(F.formatter.matchNode(Y,k+fe))).getOr(""),yf=ee(vf,["left","center","right"],"align"),Wb=ee(vf,["top","middle","bottom"],"valign"),o1=(S,k)=>{const F=Sg(S),Y=ad(S),fe=()=>({borderstyle:ao(F,"border-style").getOr(""),bordercolor:lc(ao(F,"border-color").getOr("")),backgroundcolor:lc(ao(F,"background-color").getOr(""))}),ze={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},yt=()=>{const vs=F["border-width"];return Jl(S)&&vs?{border:vs}:ao(Y,"border").fold(()=>({}),rs=>({border:rs}))},Jt=k?fe():{},Wn=()=>{const vs=ao(F,"border-spacing").or(ao(Y,"cellspacing")).fold(()=>({}),er=>({cellspacing:er})),rs=ao(F,"border-padding").or(ao(Y,"cellpadding")).fold(()=>({}),er=>({cellpadding:er}));return{...vs,...rs}};return{...ze,...F,...Y,...Jt,...yt(),...Wn()}},Li=S=>Pt(Ft.fromDom(S)).map(k=>{const F={selection:Nh(S.cells)};return n1(k,F)}).getOr(""),Iu=(S,k,F)=>{const Y=(Jt,Wn)=>{const ho=U(Ft.fromDom(Wn),"border-width");return Jl(S)&&ho.isSome()?ho.getOr(""):Jt.getAttrib(Wn,"border")||wa(S.dom,Wn,"border-width")||wa(S.dom,Wn,"border")||""},fe=S.dom,ze=Jl(S)?fe.getStyle(k,"border-spacing")||fe.getAttrib(k,"cellspacing"):fe.getAttrib(k,"cellspacing")||fe.getStyle(k,"border-spacing"),yt=Jl(S)?wa(fe,k,"padding")||fe.getAttrib(k,"cellpadding"):fe.getAttrib(k,"cellpadding")||wa(fe,k,"padding");return{width:fe.getStyle(k,"width")||fe.getAttrib(k,"width"),height:fe.getStyle(k,"height")||fe.getAttrib(k,"height"),cellspacing:ze??"",cellpadding:yt??"",border:Y(fe,k),caption:!!fe.select("caption",k)[0],class:fe.getAttrib(k,"class",""),align:yf(S,k),...F?Rn(k):{}}},Zd=(S,k,F)=>{const Y=S.dom;return{height:Y.getStyle(k,"height")||Y.getAttrib(k,"height"),class:Y.getAttrib(k,"class",""),type:Li(k),align:yf(S,k),...F?Rn(k):{}}},Ht=(S,k,F,Y)=>{const fe=S.dom,ze=Y.getOr(k);return{width:((Jt,Wn)=>fe.getStyle(Jt,Wn)||fe.getAttrib(Jt,Wn))(ze,"width"),scope:fe.getAttrib(k,"scope"),celltype:wl(k),class:fe.getAttrib(k,"class",""),halign:yf(S,k),valign:Wb(S,k),...F?Rn(k):{}}},ei=(S,k)=>{const F=Tl.fromTable(S),Y=Tl.justCells(F),fe=cs(Y,ze=>Js(k,yt=>fs(ze.element,yt)));return ut(fe,ze=>({element:ze.element.dom,column:Tl.getColumnAt(F,ze.column).map(yt=>yt.element.dom)}))},s1=(S,k,F,Y)=>{Y("scope")&&S.setAttrib("scope",F.scope),Y("class")&&F.class!=="mce-no-match"&&S.setAttrib("class",F.class),Y("width")&&k.setStyle("width",$o(F.width))},Om=(S,k,F)=>{F("backgroundcolor")&&S.setFormat("tablecellbackgroundcolor",k.backgroundcolor),F("bordercolor")&&S.setFormat("tablecellbordercolor",k.bordercolor),F("borderstyle")&&S.setFormat("tablecellborderstyle",k.borderstyle),F("borderwidth")&&S.setFormat("tablecellborderwidth",$o(k.borderwidth))},Fi=(S,k,F,Y)=>{const fe=k.length===1;L(k,ze=>{const yt=ze.element,Jt=fe?tt:Y,Wn=x.normal(S,yt),ho=ze.column.map(vs=>x.normal(S,vs)).getOr(Wn);s1(Wn,ho,F,Jt),$c(S)&&Om(Wn,F,Jt),Y("halign")&&Ya(S,yt,F.halign),Y("valign")&&Fd(S,yt,F.valign)})},Dg=(S,k)=>{S.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},jd=(S,k,F,Y)=>{const fe=ns(Y,(ze,yt)=>F[yt]!==ze);A(fe)>0&&k.length>=1&&Pt(k[0]).each(ze=>{const yt=ei(ze,k),Jt=A(ns(fe,(ho,vs)=>vs!=="scope"&&vs!=="celltype"))>0,Wn=st(fe,"celltype");(Jt||st(fe,"scope"))&&Fi(S,yt,Y,ee(st,fe)),Wn&&Dg(S,Y),To(S,ze.dom,{structure:Wn,style:Jt})})},Dm=(S,k,F,Y)=>{const fe=Y.getData();Y.close(),S.undoManager.transact(()=>{jd(S,k,F,fe),S.focus()})},Rg=(S,k)=>{const F=Pt(k[0]).map(Y=>ut(ei(Y,k),fe=>Ht(S,fe.element,$c(S),fe.column)));return bi(F.getOrDie())},lu=S=>{const k=Ii(S);if(k.length===0)return;const F=Rg(S,k),Y={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bh(S)},bf(S,"cell")]},fe={type:"panel",items:[{type:"grid",columns:2,items:Bh(S)}]};S.windowManager.open({title:"Cell Properties",size:"normal",body:$c(S)?Y:fe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:ee(Dm,S,k,F)})},Zb=S=>pi(Nu(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Tr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],at=S=>Tr.concat(Zb(S).toArray()),Xc=(S,k,F)=>{F("class")&&k.class!=="mce-no-match"&&S.setAttrib("class",k.class),F("height")&&S.setStyle("height",$o(k.height))},iu=(S,k,F)=>{F("backgroundcolor")&&S.setStyle("background-color",k.backgroundcolor),F("bordercolor")&&S.setStyle("border-color",k.bordercolor),F("borderstyle")&&S.setStyle("border-style",k.borderstyle)},Ia=(S,k,F,Y)=>{const ze=k.length===1?tt:Y;L(k,yt=>{const Jt=Zc(Ft.fromDom(yt),"td,th"),Wn=x.normal(S,yt);Xc(Wn,F,ze),ui(S)&&iu(Wn,F,ze),Y("height")&&L(Jt,ho=>{S.dom.setStyle(ho.dom,"height",null)}),Y("align")&&Ya(S,yt,F.align)})},Cf=(S,k)=>{S.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},ka=(S,k,F,Y)=>{const fe=ns(Y,(ze,yt)=>F[yt]!==ze);if(A(fe)>0){const ze=st(fe,"type"),yt=ze?A(fe)>1:!0;yt&&Ia(S,k,Y,ee(st,fe)),ze&&Cf(S,Y),Pt(Ft.fromDom(k[0])).each(Jt=>To(S,Jt.dom,{structure:ze,style:yt}))}},ss=(S,k,F,Y)=>{const fe=Y.getData();Y.close(),S.undoManager.transact(()=>{ka(S,k,F,fe),S.focus()})},Fh=S=>{const k=Ph(Uo(S),Gc.selected);if(k.length===0)return;const F=ut(k,yt=>Zd(S,yt.dom,ui(S))),Y=bi(F),fe={type:"tabpanel",tabs:[{title:"General",name:"general",items:at(S)},bf(S,"row")]},ze={type:"panel",items:[{type:"grid",columns:2,items:at(S)}]};S.windowManager.open({title:"Row Properties",size:"normal",body:ui(S)?fe:ze,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Y,onSubmit:ee(ss,S,ut(k,yt=>yt.dom),Y)})},Ze=(S,k,F)=>{const Y=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],fe=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ze=af(S)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],yt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Jt=k.length>0?[{name:"class",type:"listbox",label:"Class",items:k}]:[];return Y.concat(fe).concat(ze).concat(yt).concat(Jt)},Qo=(S,k,F,Y)=>{if(k.tagName==="TD"||k.tagName==="TH")zn(F)&&qt(Y)?S.setStyle(k,F,Y):S.setStyles(k,F);else if(k.children)for(let fe=0;fe<k.children.length;fe++)Qo(S,k.children[fe],F,Y)},Hh=(S,k,F,Y)=>{const fe=S.dom,ze={},yt={},Jt=Jl(S),Wn=di(S),ho=parseFloat(F.border)===0;if(!Xn(F.class)&&F.class!=="mce-no-match"&&(ze.class=F.class),yt.height=$o(F.height),Jt?yt.width=$o(F.width):fe.getAttrib(k,"width")&&(ze.width=Or(F.width)),Jt?(ho?(ze.border=0,yt["border-width"]=""):(yt["border-width"]=$o(F.border),ze.border=1),yt["border-spacing"]=$o(F.cellspacing)):(ze.border=ho?0:F.border,ze.cellpadding=F.cellpadding,ze.cellspacing=F.cellspacing),Jt&&k.children){const vs={};if(ho?vs["border-width"]="":Y.border&&(vs["border-width"]=$o(F.border)),Y.cellpadding&&(vs.padding=$o(F.cellpadding)),Wn&&Y.bordercolor&&(vs["border-color"]=F.bordercolor),!nn(vs))for(let rs=0;rs<k.children.length;rs++)Qo(fe,k.children[rs],vs)}if(Wn){const vs=F;yt["background-color"]=vs.backgroundcolor,yt["border-color"]=vs.bordercolor,yt["border-style"]=vs.borderstyle}fe.setStyles(k,{...Sg(S),...yt}),fe.setAttribs(k,{...ad(S),...ze})},ha=(S,k,F,Y)=>{const fe=S.dom,ze=Y.getData(),yt=ns(ze,(Jt,Wn)=>F[Wn]!==Jt);Y.close(),S.undoManager.transact(()=>{if(!k){const Jt=da(ze.cols).getOr(1),Wn=da(ze.rows).getOr(1);S.execCommand("mceInsertTable",!1,{rows:Wn,columns:Jt}),k=dn(Uo(S),ta(S)).bind(ho=>Pt(ho,ta(S))).map(ho=>ho.dom).getOrDie()}if(A(yt)>0){const Jt={border:st(yt,"border"),bordercolor:st(yt,"bordercolor"),cellpadding:st(yt,"cellpadding")};Hh(S,k,ze,Jt);const Wn=fe.select("caption",k)[0];(Wn&&!ze.caption||!Wn&&ze.caption)&&S.execCommand("mceTableToggleCaption"),Ya(S,k,ze.align)}if(S.focus(),S.addVisual(),A(yt)>0){const Jt=st(yt,"caption"),Wn=Jt?A(yt)>1:!0;To(S,k,{structure:Jt,style:Wn})}})},Tc=(S,k)=>{const F=S.dom;let Y,fe=o1(S,di(S));k?(fe.cols="1",fe.rows="1",di(S)&&(fe.borderstyle="",fe.bordercolor="",fe.backgroundcolor="")):(Y=F.getParent(S.selection.getStart(),"table",S.getBody()),Y?fe=Iu(S,Y,di(S)):di(S)&&(fe.borderstyle="",fe.bordercolor="",fe.backgroundcolor=""));const ze=pi(Hd(S));ze.isSome()&&fe.class&&(fe.class=fe.class.replace(/\s*mce\-item\-table\s*/g,""));const yt={type:"grid",columns:2,items:Ze(S,ze.getOr([]),k)},Jt=()=>({type:"panel",items:[yt]}),Wn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[yt]},bf(S,"table")]}),ho=di(S)?Wn():Jt();S.windowManager.open({title:"Table Properties",size:"normal",body:ho,onSubmit:ee(ha,S,Y,fe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fe})},py=S=>{const k=F=>{na(Uo(S))&&F()};wn({mceTableProps:ee(Tc,S,!1),mceTableRowProps:ee(Fh,S),mceTableCellProps:ee(lu,S),mceInsertTableDialog:ee(Tc,S,!0)},(F,Y)=>S.addCommand(Y,()=>k(F)))},ti=(S,k)=>pe(S,k).isSome(),by=Un,ud=S=>{const k=(Y,fe)=>Os(Y,fe).exists(ze=>parseInt(ze,10)>1),F=Y=>k(Y,"rowspan")||k(Y,"colspan");return S.length>0&&Ct(S,F)?W.some(S):W.none()},jb=(S,k,F)=>k.length<=1?W.none():e1(S,F.firstSelectedSelector,F.lastSelectedSelector).map(Y=>({bounds:Y,cells:k})),ni=S=>({element:S,mergable:W.none(),unmergable:W.none(),selection:[S]}),es=(S,k,F)=>({element:F,mergable:jb(k,S,Gc),unmergable:ud(S),selection:by(S)}),Lu=S=>{const k=mr(W.none()),F=mr([]);let Y=W.none();const fe=Wa("caption"),ze=Ao=>Y.forall(fr=>!fr[Ao]),yt=()=>oa(Uo(S),ta(S)),Jt=()=>oa(vr(S),ta(S)),Wn=()=>yt().bind(Ao=>Ba(Wr(Pt(Ao),Jt().bind(Pt),(fr,_a)=>fs(fr,_a)?fe(Ao)?W.some(ni(Ao)):W.some(es(Ii(S),fr,Ao)):W.none()))),ho=Ao=>Pt(Ao.element).map(_a=>{const oi=Tl.fromTable(_a),Dl=Mr(oi,Ao).getOr([]),Wh=Nc(Dl,(zu,Mm)=>(Mm.isLocked&&(zu.onAny=!0,Mm.column===0?zu.onFirst=!0:Mm.column+Mm.colspan>=oi.grid.columns&&(zu.onLast=!0)),zu),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ih(oi,Ao).isSome(),unmergeable:Ub(oi,Ao).isSome(),locked:Wh}}),vs=()=>{k.set(An(Wn)()),Y=k.get().bind(ho),L(F.get(),Ye)},rs=Ao=>(Ao(),F.set(F.get().concat([Ao])),()=>{F.set(cs(F.get(),fr=>fr!==Ao))}),er=(Ao,fr)=>rs(()=>k.get().fold(()=>{Ao.setEnabled(!1)},_a=>{Ao.setEnabled(!fr(_a)&&S.selection.isEditable())})),Ol=(Ao,fr,_a)=>rs(()=>k.get().fold(()=>{Ao.setEnabled(!1),Ao.setActive(!1)},oi=>{Ao.setEnabled(!fr(oi)&&S.selection.isEditable()),Ao.setActive(_a(oi))})),Hu=Ao=>Y.exists(fr=>fr.locked[Ao]),Lc=Ao=>er(Ao,fr=>!1),Vu=Ao=>er(Ao,fr=>fe(fr.element)),Gd=Ao=>fr=>er(fr,_a=>fe(_a.element)||Hu(Ao)),du=Ao=>fr=>er(fr,_a=>fe(_a.element)||Ao().isNone()),xf=(Ao,fr)=>_a=>er(_a,oi=>fe(oi.element)||Ao().isNone()||Hu(fr)),yi=Ao=>er(Ao,fr=>ze("mergeable")),Vh=Ao=>er(Ao,fr=>ze("unmergeable")),Mg=Ao=>Ol(Ao,Bn,fr=>Pt(fr.element,ta(S)).exists(oi=>ti(oi,"caption"))),zh=(Ao,fr)=>_a=>Ol(_a,oi=>fe(oi.element),()=>S.queryCommandValue(Ao)===fr),Uh=zh("mceTableRowType","header"),La=zh("mceTableColType","th");return S.on("NodeChange ExecCommand TableSelectorChange",vs),{onSetupTable:Lc,onSetupCellOrRow:Vu,onSetupColumn:Gd,onSetupPasteable:du,onSetupPasteableColumn:xf,onSetupMergeable:yi,onSetupUnmergeable:Vh,resetTargets:vs,onSetupTableWithCaption:Mg,onSetupTableRowHeaders:Uh,onSetupTableColumnHeaders:La,targets:k.get}};var Rm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const pa="x-tinymce/dom-table-",r1=pa+"rows",Fu=pa+"columns",uu=S=>{var k;const F=(k=Rm.read())!==null&&k!==void 0?k:[];return zr(F,Y=>W.from(Y.getType(S)))},Fs=()=>uu(r1),wf=()=>uu(Fu),Se=S=>k=>{const F=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",F),F(),()=>{S.off("NodeChange",F)}},vi=(S,k)=>{S.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Se(S),fetch:Jt=>Jt("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=Jt=>()=>S.execCommand(Jt),Y=(Jt,Wn)=>{S.queryCommandSupported(Wn.command)&&S.ui.registry.addButton(Jt,{...Wn,onAction:En(Wn.onAction)?Wn.onAction:F(Wn.command)})},fe=(Jt,Wn)=>{S.queryCommandSupported(Wn.command)&&S.ui.registry.addToggleButton(Jt,{...Wn,onAction:En(Wn.onAction)?Wn.onAction:F(Wn.command)})};Y("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),Y("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),Y("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),Y("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),Y("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),Y("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),Y("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),Y("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),Y("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),Y("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),Y("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),Y("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),Y("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),Y("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),Y("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(Fs)}),Y("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(Fs)}),Y("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),Y("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),Y("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(wf,"onFirst")}),Y("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(wf,"onLast")}),Y("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Se(S)});const ze=Xs(Hd(S));ze.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:$u(S,ze,"tableclass",Jt=>S.execCommand("mceTableToggleClass",!1,Jt)),onSetup:k.onSetupTable});const yt=Xs(Cc(S));yt.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:$u(S,yt,"tablecellclass",Jt=>S.execCommand("mceTableCellToggleClass",!1,Jt)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:$u(S,ga,"tablecellverticalalign",cu(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:$u(S,Xl(S),"tablecellborderwidth",cu(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:$u(S,Sa(S),"tablecellborderstyle",cu(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Jt=>Jt(Al(S,Cg(S),"background-color")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Jt=>Jt(Al(S,Vd(S),"border-color")),onSetup:k.onSetupCellOrRow})),fe("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),fe("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(S),onSetup:k.onSetupTableRowHeaders}),fe("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:id(S),onSetup:k.onSetupTableColumnHeaders})},Sf=S=>{const k=Y=>S.dom.is(Y,"table")&&S.getBody().contains(Y)&&S.dom.isEditable(Y.parentNode),F=$i(S);F.length>0&&S.ui.registry.addContextToolbar("table",{predicate:k,items:F,scope:"node",position:"node"})},ic=S=>k=>{const F=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",F),F(),()=>{S.off("NodeChange",F)}},Hi=(S,k)=>{const F=rs=>()=>S.execCommand(rs),Y=(rs,er)=>S.queryCommandSupported(er.command)?(S.ui.registry.addMenuItem(rs,{...er,onAction:En(er.onAction)?er.onAction:F(er.command)}),!0):!1,fe=(rs,er)=>{S.queryCommandSupported(er.command)&&S.ui.registry.addToggleMenuItem(rs,{...er,onAction:En(er.onAction)?er.onAction:F(er.command)})},ze=rs=>{S.execCommand("mceInsertTable",!1,{rows:rs.numRows,columns:rs.numColumns})},yt=[Y("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),Y("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),Y("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),Y("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),Y("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),Y("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),Y("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(Fs)}),Y("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(Fs)})],Jt=[Y("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),Y("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),Y("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),Y("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),Y("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),Y("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(wf,"onFirst")}),Y("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(wf,"onLast")})],Wn=[Y("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),Y("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),Y("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Mu(S)?S.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ze}],onSetup:ic(S)}):S.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:ic(S)}),S.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:ic(S)}),Y("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),Y("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),lo(yt,!0)&&S.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:nt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),lo(Jt,!0)&&S.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:nt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),lo(Wn,!0)&&S.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:nt("tablecellprops tablemergecells tablesplitcells")}),S.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(nt(""),rs=>ft(rs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const ho=Xs(Hd(S));ho.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Wd(S,ho,"tableclass",rs=>S.execCommand("mceTableToggleClass",!1,rs)),onSetup:k.onSetupTable});const vs=Xs(Cc(S));vs.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Wd(S,vs,"tablecellclass",rs=>S.execCommand("mceTableCellToggleClass",!1,rs)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Wd(S,ga,"tablecellverticalalign",cu(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Wd(S,Xl(S),"tablecellborderwidth",cu(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Wd(S,Sa(S),"tablecellborderstyle",cu(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Al(S,Cg(S),"background-color"),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Al(S,Vd(S),"border-color"),onSetup:k.onSetupCellOrRow})),fe("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),fe("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(S),onSetup:k.onSetupTableRowHeaders}),fe("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:id(S),onSetup:k.onSetupTableRowHeaders})},jr=S=>{const k=Lu(S);Cr(S),py(S),Hi(S,k),vi(S,k),Sf(S)};var Vr=()=>{it.add("table",jr)};Vr()})();(function(){const it=Object.getPrototypeOf,Pn=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},Xt=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Pn(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},an=t=>s=>Xt(s)===t,bt=t=>s=>typeof s===t,jt=t=>s=>t===s,zn=(t,s)=>Gt(t)&&Pn(t,s,(a,l)=>it(a)===l),Mt=an("string"),Gt=an("object"),Xn=t=>zn(t,Object),Cn=an("array"),qt=jt(null),En=bt("boolean"),At=jt(void 0),Tt=t=>t==null,Xe=t=>!Tt(t),nt=bt("function"),Un=bt("number"),De=(t,s)=>{if(Cn(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},Ye=t=>()=>t(),Bn=(t,s)=>(...a)=>t(s.apply(null,a)),tt=(t,s)=>a=>t(s(a)),W=t=>()=>t,Ot=t=>t,en=(t,s)=>t===s;function wn(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const _e=t=>s=>!t(s),ie=t=>()=>{throw new Error(t)},ns=t=>t(),so=W(!1),It=W(!0);class A{constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Xe(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const ao=Array.prototype.slice,st=Array.prototype.indexOf,Po=Array.prototype.push,nn=(t,s)=>st.call(t,s),qe=(t,s)=>{const a=nn(t,s);return a===-1?A.none():A.some(a)},bo=(t,s)=>nn(t,s)>-1,zs=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},lo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},Js=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=ao.call(t,l,l+s);a.push(d)}return a},We=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},ut=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},L=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Jr=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:l).push(h)}return{pass:a,fail:l}},uo=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},cs=(t,s,a)=>(L(t,(l,d)=>{a=s(a,l,d)}),a),zo=(t,s,a)=>(ut(t,(l,d)=>{a=s(a,l,d)}),a),Nc=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(a(g,l))break}return A.none()},Sn=(t,s)=>Nc(t,s,so),Ro=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return A.some(a)}return A.none()},gn=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!Cn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Po.apply(s,t[a])}return s},ye=(t,s)=>gn(We(t,s)),Ct=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},fo=t=>{const s=ao.call(t,0);return s.reverse(),s},Bt=(t,s)=>uo(t,a=>!bo(s,a)),Is=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},Bo=t=>[t],zr=(t,s)=>{const a=ao.call(t,0);return a.sort(s),a},ms=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Us=t=>ms(t,0),tc=t=>ms(t,t.length-1),Ps=nt(Array.from)?Array.from:t=>ao.call(t),ls=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return A.none()},qo=Object.keys,Qr=Object.hasOwnProperty,$e=(t,s)=>{const a=qo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=t[g];s(h,g)}},Je=(t,s)=>on(t,(a,l)=>({k:l,v:s(a,l)})),on=(t,s)=>{const a={};return $e(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},Ft=t=>(s,a)=>{t[a]=s},Jn=(t,s,a,l)=>{$e(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},Ko=(t,s)=>{const a={},l={};return Jn(t,s,Ft(a),Ft(l)),{t:a,f:l}},wr=(t,s)=>{const a={};return Jn(t,s,Ft(a),ee),a},Hn=(t,s)=>{const a=[];return $e(t,(l,d)=>{a.push(s(l,d))}),a},fs=(t,s)=>{const a=qo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},ur=t=>Hn(t,Ot),ft=(t,s)=>yo(t,s)?A.from(t[s]):A.none(),yo=(t,s)=>Qr.call(t,s),Ar=(t,s)=>yo(t,s)&&t[s]!==void 0&&t[s]!==null,la=(t,s,a=en)=>t.exists(l=>a(l,s)),ia=(t,s,a=en)=>va(t,s,a).getOr(t.isNone()&&s.isNone()),ea=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},Yo=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},va=(t,s,a)=>t.isSome()&&s.isSome()?A.some(a(t.getOrDie(),s.getOrDie())):A.none(),Wa=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),os=(t,s)=>t!=null?A.some(s(t)):A.none(),pn=(t,s)=>t?A.some(s):A.none(),pr=(t,s)=>t+s,Za=(t,s)=>t.substring(s),jl=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Cl=(t,s)=>Ws(t,s)?Za(t,s.length):t,is=(t,s)=>Na(t,s)?t:pr(t,s),nr=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?At(l)?!0:d+s.length<=l:!1},Ws=(t,s)=>jl(t,s,0),Na=(t,s)=>jl(t,s,t.length-s.length),Br=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ue=t=>t.length>0,re=t=>!ue(t),Oe=t=>t.style!==void 0&&nt(t.style.getPropertyValue),He=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Qn(l.childNodes[0])},ln=(t,s)=>{const l=(s||document).createElement(t);return Qn(l)},xn=(t,s)=>{const l=(s||document).createTextNode(t);return Qn(l)},Qn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},pe={fromHtml:He,fromTag:ln,fromText:xn,fromDom:Qn,fromPoint:(t,s,a)=>A.from(t.dom.elementFromPoint(s,a)).map(Qn)},Vn=typeof window<"u"?window:Function("return this;")(),Zs=(t,s)=>{let a=s??Vn;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},br=(t,s)=>{const a=t.split(".");return Zs(a,s)},Ur=(t,s)=>br(t,s),Xo=(t,s)=>{const a=Ur(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},wl=Object.getPrototypeOf,nc=t=>Xo("HTMLElement",t),ta=t=>{const s=br("ownerDocument.defaultView",t);return Gt(t)&&(nc(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(wl(t).constructor.name))},Or=9,$o=11,Uo=1,vr=3,na=t=>t.dom.nodeName.toLowerCase(),bc=t=>t.dom.nodeType,Gl=t=>s=>bc(s)===t,Zc=t=>Fo(t)&&ta(t.dom),Fo=Gl(Uo),dr=Gl(vr),ya=Gl(Or),Sl=Gl($o),ua=t=>s=>Fo(s)&&na(s)===t,Os=(t,s)=>{const a=t.dom;if(a.nodeType!==Uo)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},hs=t=>t.nodeType!==Uo&&t.nodeType!==Or&&t.nodeType!==$o||t.childElementCount===0,Pa=(t,s)=>{const a=s===void 0?document:s.dom;return hs(a)?[]:We(a.querySelectorAll(t),pe.fromDom)},ql=(t,s)=>{const a=s===void 0?document:s.dom;return hs(a)?A.none():A.from(a.querySelector(t)).map(pe.fromDom)},jo=(t,s)=>t.dom===s.dom,Wr=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},Ba=t=>pe.fromDom(t.dom.ownerDocument),yr=t=>ya(t)?t:Ba(t),oc=t=>pe.fromDom(yr(t).dom.documentElement),Pc=t=>pe.fromDom(yr(t).dom.defaultView),Ca=t=>A.from(t.dom.parentNode).map(pe.fromDom),sc=t=>Ca(t),vc=t=>A.from(t.dom.parentElement).map(pe.fromDom),Pi=(t,s)=>{const a=nt(s)?s:so;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=pe.fromDom(g);if(d.push(h),a(h)===!0)break;l=g}return d},ja=t=>A.from(t.dom.offsetParent).map(pe.fromDom),ll=t=>A.from(t.dom.nextSibling).map(pe.fromDom),da=t=>We(t.dom.childNodes,pe.fromDom),yc=(t,s)=>{const a=t.dom.childNodes;return A.from(a[s]).map(pe.fromDom)},xl=t=>yc(t,0),Kl=(t,s)=>({element:t,offset:s}),Ou=(t,s)=>{const a=da(t);return a.length>0&&s<a.length?Kl(a[s],0):Kl(t,s)},Bi=t=>Sl(t)&&Xe(t.dom.host),Ga=nt(Element.prototype.attachShadow)&&nt(Node.prototype.getRootNode),su=W(Ga),U=Ga?t=>pe.fromDom(t.dom.getRootNode()):yr,ae=t=>Bi(t)?t:pe.fromDom(yr(t).dom.body),ve=t=>Ue(t).isSome(),Ue=t=>{const s=U(t);return Bi(s)?A.some(s):A.none()},dt=t=>pe.fromDom(t.dom.host),sn=t=>{if(su()&&Xe(t.target)){const s=pe.fromDom(t.target);if(Fo(s)&&vo(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Us(a)}}return A.from(t.target)},vo=t=>Xe(t.dom.shadowRoot),ko=t=>{const s=dr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Ue(pe.fromDom(s)).fold(()=>a.body.contains(s),tt(ko,dt))},oo=()=>us(pe.fromDom(document)),us=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return pe.fromDom(s)},js=(t,s,a)=>{if(Mt(a)||En(a)||Un(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},vt=(t,s,a)=>{js(t.dom,s,a)},Du=(t,s)=>{const a=t.dom;$e(s,(l,d)=>{js(a,d,l)})},bs=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},$=(t,s)=>A.from(bs(t,s)),X=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},oe=(t,s)=>{t.dom.removeAttribute(s)},Re=t=>zo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Pt=(t,s,a)=>{if(!Mt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Oe(t)&&t.style.setProperty(s,a)},io=(t,s)=>{Oe(t)&&t.style.removeProperty(s)},Yt=(t,s,a)=>{const l=t.dom;Pt(l,s,a)},Gs=(t,s)=>{const a=t.dom;$e(s,(l,d)=>{Pt(a,d,l)})},ct=(t,s)=>{const a=t.dom;$e(s,(l,d)=>{l.fold(()=>{io(a,d)},g=>{Pt(a,d,g)})})},xs=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ko(t)?qa(a,s):d},qa=(t,s)=>Oe(t)?t.style.getPropertyValue(s):"",$s=(t,s)=>{const a=t.dom,l=qa(a,s);return A.from(l).filter(d=>d.length>0)},$r=t=>{const s={},a=t.dom;if(Oe(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},il=(t,s,a)=>{const l=pe.fromTag(t);return Yt(l,s,a),$s(l,s).isSome()},_o=(t,s)=>{const a=t.dom;io(a,s),la($(t,"style").map(Br),"")&&oe(t,"style")},Ka=t=>t.dom.offsetWidth,qs=(t,s)=>{const a=(y,w)=>{if(!Un(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const _=y.dom;Oe(_)&&(_.style[t]=w+"px")},l=y=>{const w=s(y);if(w<=0||w===null){const _=xs(y,t);return parseFloat(_)||0}return w},d=l,g=(y,w)=>zo(w,(_,O)=>{const B=xs(y,O),H=B===void 0?0:parseInt(B,10);return isNaN(H)?_:_+H},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(y,w,_)=>{const O=g(y,_);return w>O?w-O:0}}},Yl=qs("height",t=>{const s=t.dom;return ko(t)?s.getBoundingClientRect().height:s.offsetHeight}),Qs=t=>Yl.get(t),Ru=t=>Yl.getOuter(t),xm=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Yl.max(t,s,a);Yt(t,"max-height",l+"px")},yg=(t,s)=>({left:t,top:s,translate:(l,d)=>yg(t+l,s+d)}),or=yg,Tl=t=>{const s=t.getBoundingClientRect();return or(s.left,s.top)},ma=(t,s)=>t!==void 0?t:s!==void 0?s:0,wa=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return or(a.offsetLeft,a.offsetTop);const g=ma(l==null?void 0:l.pageYOffset,d.scrollTop),h=ma(l==null?void 0:l.pageXOffset,d.scrollLeft),y=ma(d.clientTop,a.clientTop),w=ma(d.clientLeft,a.clientLeft);return Ya(t).translate(h-w,g-y)},Ya=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?or(l.offsetLeft,l.offsetTop):ko(t)?Tl(s):or(0,0)},Fd=qs("width",t=>t.dom.offsetWidth),To=(t,s)=>Fd.set(t,s),rc=t=>Fd.get(t),$a=t=>Fd.getOuter(t),K=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Fd.max(t,s,a);Yt(t,"max-width",l+"px")},se=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},Te=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),y=h||l("(pointer:coarse)"),w=d||!g&&h&&l("(min-device-width:768px)"),_=g||h&&!w,O=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!_&&!w&&!O;return{isiPad:W(d),isiPhone:W(g),isTablet:W(w),isPhone:W(_),isTouch:W(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:W(O),isDesktop:W(B)}},Me=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},un=(t,s)=>{const a=Me(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return fa(l(1),l(2))},go=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Ls():un(t,a)},Ls=()=>fa(0,0),fa=(t,s)=>({major:t,minor:s}),Co={nu:fa,detect:go,unknown:Ls},Zr=(t,s)=>ls(s.brands,a=>{const l=a.brand.toLowerCase();return Sn(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Co.nu(parseInt(a.version,10),0)}))}),Ks=(t,s)=>{const a=String(s).toLowerCase();return Sn(t,l=>l.search(a))},Dr=(t,s)=>Ks(t,s).map(a=>{const l=Co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Sr=(t,s)=>Ks(t,s).map(a=>{const l=Co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Cr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Bc=t=>s=>nr(s,t),Xl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>nr(t,"edge/")&&nr(t,"chrome")&&nr(t,"safari")&&nr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cr],search:t=>nr(t,"chrome")&&!nr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>nr(t,"msie")||nr(t,"trident")},{name:"Opera",versionRegexes:[Cr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Bc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Bc("firefox")},{name:"Safari",versionRegexes:[Cr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(nr(t,"safari")||nr(t,"mobile/"))&&nr(t,"applewebkit")}],Sa=[{name:"Windows",search:Bc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>nr(t,"iphone")||nr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Bc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Bc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Bc("linux"),versionRegexes:[]},{name:"Solaris",search:Bc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Bc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Bc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$c={browsers:W(Xl),oses:W(Sa)},ui="Edge",di="Chromium",af="IE",Mu="Opera",Jl="Firefox",Cc="Safari",Nu=()=>Hd({current:void 0,version:Co.unknown()}),Hd=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(ui),isChromium:l(di),isIE:l(af),isOpera:l(Mu),isFirefox:l(Jl),isSafari:l(Cc)}},$i={unknown:Nu,nu:Hd,edge:W(ui),chromium:W(di),ie:W(af),opera:W(Mu),firefox:W(Jl),safari:W(Cc)},Cg="Windows",Vd="iOS",wg="Android",rd="Linux",Sg="macOS",ad="Solaris",Qp="FreeBSD",de="ChromeOS",Tm=()=>jc({current:void 0,version:Co.unknown()}),jc=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(Cg),isiOS:l(Vd),isAndroid:l(wg),isMacOS:l(Sg),isLinux:l(rd),isSolaris:l(ad),isFreeBSD:l(Qp),isChromeOS:l(de)}},ru={unknown:Tm,nu:jc,windows:W(Cg),ios:W(Vd),android:W(wg),linux:W(rd),macos:W(Sg),solaris:W(ad),freebsd:W(Qp),chromeos:W(de)},Dh={detect:(t,s,a)=>{const l=$c.browsers(),d=$c.oses(),g=s.bind(w=>Zr(l,w)).orThunk(()=>Dr(l,t)).fold($i.unknown,$i.nu),h=Sr(d,t).fold(ru.unknown,ru.nu),y=Te(h,g,t,a);return{browser:g,os:h,deviceType:y}}},Jo=t=>window.matchMedia(t).matches;let wc=se(()=>Dh.detect(navigator.userAgent,A.from(navigator.userAgentData),Jo));const ul=()=>wc(),xa=(t,s,a,l,d,g,h)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:h}),cd=t=>{const s=pe.fromDom(sn(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Bn(l,a);return xa(s,t.clientX,t.clientY,a,l,d,t)},mi=(t,s)=>a=>{t(a)&&s(cd(a))},ac=(t,s,a,l,d)=>{const g=mi(a,l);return t.dom.addEventListener(s,g,d),{unbind:wn(Rh,t,s,g,d)}},fi=(t,s,a,l)=>ac(t,s,a,l,!1),Tg=(t,s,a,l)=>ac(t,s,a,l,!0),Rh=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},El=(t,s)=>{Ca(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},gi=(t,s)=>{ll(t).fold(()=>{Ca(t).each(d=>{Sc(d,s)})},l=>{El(l,s)})},cf=(t,s)=>{xl(t).fold(()=>{Sc(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Sc=(t,s)=>{t.dom.appendChild(s.dom)},Ta=(t,s,a)=>{yc(t,a).fold(()=>{Sc(t,s)},l=>{El(l,s)})},Pu=(t,s)=>{ut(s,a=>{Sc(t,a)})},zd=t=>{t.dom.textContent="",ut(da(t),s=>{Ql(s)})},Ql=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Xa=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return or(a,l)},lf=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},uf=t=>{const s=t===void 0?window:t;return ul().browser.isFirefox()?A.none():A.from(s.visualViewport)},df=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Em=t=>{const s=t===void 0?window:t,a=s.document,l=Xa(pe.fromDom(a));return uf(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return df(l.left,l.top,g,h)},d=>df(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},kl=()=>pe.fromDom(document),mf=(t,s)=>t.view(s).fold(W([]),l=>{const d=t.owner(l),g=mf(t,d);return[l].concat(g)}),Mh=(t,s)=>{const a=s.owner(t),l=mf(s,a);return A.some(l)};var ff=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(pe.fromDom)},owner:t=>Ba(t)});const km=t=>{const s=kl(),a=Xa(s);return Mh(t,ff).fold(wn(wa,t),d=>{const g=Ya(t),h=cs(d,(y,w)=>{const _=Ya(w);return{left:y.left+_.left,top:y.top+_.top}},{left:0,top:0});return or(h.left+g.left+a.left,h.top+g.top+a.top)})},au=(t,s,a)=>({point:t,width:s,height:a}),Eg=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),Ys=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),xr=t=>{const s=wa(t),a=$a(t),l=Ru(t);return Ys(s.left,s.top,a,l)},Gc=t=>{const s=km(t),a=$a(t),l=Ru(t);return Ys(s.left,s.top,a,l)},kg=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,y=g-l;return Ys(a,l,h,y)},_g=(t,s)=>zo(s,(a,l)=>kg(a,l),t),oa=()=>Em(window),dn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Ii=t=>{const s=dn(A.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{a(),s.set(A.some(y))}}},Ph=()=>Ii(t=>t.destroy()),ga=()=>Ii(t=>t.unbind()),Ts=()=>{const t=Ii(ee);return{...t,on:a=>t.get().each(a)}};var ld=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Ag=t=>{const s=g=>g(t),a=W(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:It,isError:so,map:g=>eo.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},gf=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:so,isError:It,map:s,mapError:l=>eo.error(l(t)),bind:s,exists:so,forall:It,getOr:Ot,or:Ot,getOrThunk:ns,orThunk:ns,getOrDie:ie(String(t)),each:ee,toOptional:A.none};return a},eo={value:Ag,error:gf,fromOption:(t,s)=>t.fold(()=>gf(s),Ag)};var Rr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Rr||(Rr={}));const Ud=(t,s,a)=>t.stype===Rr.Error?s(t.serror):a(t.svalue),qc=t=>{const s=[],a=[];return ut(t,l=>{Ud(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Ic=(t,s)=>t.stype===Rr.Error?{stype:Rr.Error,serror:s(t.serror)}:t,Kc=(t,s)=>t.stype===Rr.Value?{stype:Rr.Value,svalue:s(t.svalue)}:t,sa=(t,s)=>t.stype===Rr.Value?s(t.svalue):t,xc=(t,s)=>t.stype===Rr.Error?s(t.serror):t,_l=t=>({stype:Rr.Value,svalue:t}),_m=t=>({stype:Rr.Error,serror:t}),Hr={fromResult:t=>t.fold(_m,_l),toResult:t=>Ud(t,eo.error,eo.value),svalue:_l,partition:qc,serror:_m,bind:sa,bindError:xc,map:Kc,mapError:Ic,fold:Ud},Bu=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),hi=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Ds=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},pi=(t,s)=>s,Wd=(t,s)=>Xn(t)&&Xn(s)?Xs(t,s):s,cu=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)yo(d,g)&&(a[g]=t(a[g],d[g]))}return a},Xs=cu(Wd),$u=cu(pi),Al=()=>({tag:"required",process:{}}),wo=t=>({tag:"defaultedThunk",process:t}),id=t=>wo(W(t)),Am=()=>({tag:"option",process:{}}),pf=t=>({tag:"mergeWithThunk",process:t}),Bh=t=>pf(W(t)),bf=(t,s)=>t.length>0?Hr.svalue(Xs(s,$u.apply(void 0,t))):Hr.svalue(s),$h=t=>Bn(Hr.serror,gn)(t),V={consolidateObj:(t,s)=>{const a=Hr.partition(t);return a.errors.length>0?$h(a.errors):bf(a.values,s)},consolidateArr:t=>{const s=Hr.partition(t);return s.errors.length>0?$h(s.errors):Hr.svalue(s.values)}},ce=t=>Gt(t)&&qo(t).length>100?" removed due to size":JSON.stringify(t,null,2),ge=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):t;return We(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Qe=(t,s)=>Hr.serror([{path:t,getErrorInfo:s}]),An=(t,s,a)=>Qe(t,()=>'Could not find valid *required* value for "'+s+'" in '+ce(a)),Kn=(t,s)=>Qe(t,()=>'Choice schema did not contain choice key: "'+s+'"'),jn=(t,s,a)=>Qe(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+ce(s)),_n=(t,s)=>Qe(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),sr=(t,s)=>Qe(t,W(s)),Mr=t=>{const s=(l,d)=>Hr.bindError(t(d),g=>sr(l,g)),a=W("val");return{extract:s,toString:a}},Yc=Mr(Hr.svalue),Ir=(t,s,a,l)=>ft(s,a).fold(()=>An(t,a,s),l),Ih=(t,s,a,l)=>{const d=ft(t,s).getOrThunk(()=>a(t));return l(d)},Ub=(t,s,a)=>a(ft(t,s)),t1=(t,s,a,l)=>{const d=ft(t,s).map(g=>g===!0?a(t):g);return l(d)},cc=(t,s,a,l,d)=>{const g=y=>d.extract(s.concat([l]),y),h=y=>y.fold(()=>Hr.svalue(A.none()),w=>{const _=d.extract(s.concat([l]),w);return Hr.map(_,A.some)});switch(t.tag){case"required":return Ir(s,a,l,g);case"defaultedThunk":return Ih(a,l,t.process,g);case"option":return Ub(a,l,h);case"defaultedOptionThunk":return t1(a,l,t.process,h);case"mergeWithThunk":return Ih(a,l,W({}),y=>{const w=Xs(t.process(a),y);return g(w)})}},Lh=(t,s,a)=>{const l={},d=[];for(const g of a)Ds(g,(h,y,w,_)=>{const O=cc(w,t,s,h,_);Hr.fold(O,B=>{d.push(...B)},B=>{l[y]=B})},(h,y)=>{l[h]=y(s)});return d.length>0?Hr.serror(d):Hr.svalue(l)},Ea=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),n1=t=>qo(wr(t,Xe)),lc=t=>{const s=Rn(t),a=cs(t,(d,g)=>Ds(g,h=>Xs(d,{[h]:!0}),W(d)),{});return{extract:(d,g)=>{const h=En(g)?[]:n1(g),y=uo(h,w=>!Ar(a,w));return y.length===0?s.extract(d,g):_n(d,y)},toString:s.toString}},Rn=t=>({extract:(l,d)=>Lh(l,d,t),toString:()=>`obj{
`+We(t,d=>Ds(d,(g,h,y,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),bi=t=>({extract:(l,d)=>{const g=We(d,(h,y)=>t.extract(l.concat(["["+y+"]"]),h));return V.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),vf=(t,s)=>{const a=s!==void 0?s:Ot;return{extract:(g,h)=>{const y=[];for(const w of t){const _=w.extract(g,h);if(_.stype===Rr.Value)return{stype:Rr.Value,svalue:a(_.svalue)};y.push(_)}return V.consolidateArr(y)},toString:()=>"oneOf("+We(t,g=>g.toString()).join(", ")+")"}},yf=(t,s)=>{const a=(g,h)=>bi(Mr(t)).extract(g,h);return{extract:(g,h)=>{const y=qo(h),w=a(g,y);return Hr.bind(w,_=>{const O=We(_,B=>Bu(B,B,Al(),s));return Rn(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Wb=(t,s)=>{const a=se(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},o1=Bn(bi,Rn),Li=W(Yc),Iu=(t,s)=>Mr(a=>{const l=typeof a;return t(a)?Hr.svalue(a):Hr.serror(`Expected type: ${s} but got: ${l}`)}),Zd=Iu(Un,"number"),Ht=Iu(Mt,"string"),ei=Iu(En,"boolean"),s1=Iu(nt,"function"),Om=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Om(t[s]));default:return!1}},Fi=Mr(t=>Om(t)?Hr.svalue(t):Hr.serror("Expected value to be acceptable for sending via postMessage")),Dg=(t,s,a,l)=>ft(a,l).fold(()=>jn(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),jd=(t,s)=>({extract:(d,g)=>ft(g,t).fold(()=>Kn(d,t),y=>Dg(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+qo(s)}),Dm=()=>bi(Yc),Rg=t=>Mr(s=>t(s).fold(Hr.serror,Hr.svalue)),lu=(t,s)=>yf(a=>Hr.fromResult(t(a)),s),Zb=(t,s,a)=>{const l=s.extract([t],a);return Hr.mapError(l,d=>({input:a,errors:d}))},Tr=(t,s,a)=>Hr.toResult(Zb(t,s,a)),at=t=>t.fold(s=>{throw new Error(iu(s))},Ot),Xc=(t,s,a)=>at(Tr(t,s,a)),iu=t=>`Errors: 
`+ge(t.errors).join(`
`)+`

Input object: `+ce(t.input),Ia=(t,s)=>jd(t,Je(s,Rn)),Cf=(t,s)=>Wb(t,s),ka=Bu,ss=hi,Fh=t=>Rg(s=>bo(t,s)?eo.value(s):eo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ze=t=>ka(t,t,Al(),Li()),Qo=(t,s)=>ka(t,t,Al(),s),Hh=t=>Qo(t,Zd),ha=t=>Qo(t,Ht),Tc=(t,s)=>ka(t,t,Al(),Fh(s)),py=t=>Qo(t,ei),ti=t=>Qo(t,s1),by=(t,s)=>ka(t,t,Am(),Mr(a=>Hr.serror("The field: "+t+" is forbidden. "+s))),ud=(t,s)=>ka(t,t,Al(),Rn(s)),jb=(t,s)=>ka(t,t,Al(),o1(s)),ni=(t,s)=>ka(t,t,Al(),bi(s)),es=t=>ka(t,t,Am(),Li()),Lu=(t,s)=>ka(t,t,Am(),s),Rm=t=>Lu(t,Zd),pa=t=>Lu(t,Ht),r1=(t,s)=>Lu(t,Fh(s)),Fu=t=>Lu(t,s1),uu=(t,s)=>Lu(t,bi(s)),Fs=(t,s)=>Lu(t,Rn(s)),wf=(t,s)=>Lu(t,lc(s)),Se=(t,s)=>ka(t,t,id(s),Li()),vi=(t,s,a)=>ka(t,t,id(s),a),Sf=(t,s)=>vi(t,s,Zd),ic=(t,s)=>vi(t,s,Ht),Hi=(t,s,a)=>vi(t,s,Fh(a)),jr=(t,s)=>vi(t,s,ei),Vr=(t,s)=>vi(t,s,s1),S=(t,s)=>vi(t,s,Fi),k=(t,s,a)=>vi(t,s,bi(a)),F=(t,s,a)=>vi(t,s,Rn(a)),fe={generate:t=>{if(!Cn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ut(t,(l,d)=>{const g=qo(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],y=l[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Cn(y))throw new Error("case arguments must be an array");s.push(h),a[h]=(...w)=>{const _=w.length;if(_!==y.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+y.length+" ("+y+"), got "+_);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,w)},match:B=>{const H=qo(B);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!Ct(s,G=>bo(H,G)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return B[h].apply(null,w)},log:B=>{console.log(B,{constructors:s,constructor:h,params:w})}}}}),a}};fe.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ze=t=>{const s=[],a=[];return ut(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},yt=(t,s)=>{const a={};return $e(t,(l,d)=>{bo(s,d)||(a[d]=l)}),a},Jt=(t,s)=>({[t]:s}),Wn=t=>{const s={};return ut(t,a=>{s[a.key]=a.value}),s},ho=(t,s)=>yt(t,s),vs=(t,s)=>Jt(t,s),rs=t=>Wn(t),er=(t,s)=>t.length===0?eo.value(s):eo.value(Xs(s,$u.apply(void 0,t))),Ol=t=>eo.error(gn(t)),Hu=(t,s)=>{const a=ze(t);return a.errors.length>0?Ol(a.errors):er(a.values,s)},Lc=t=>nt(t)?t:so,Vu=(t,s,a)=>{let l=t.dom;const d=Lc(a);for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Gd=(t,s,a)=>{const l=s(t),d=Lc(a);return l.orThunk(()=>d(t)?A.none():Vu(t,s,d))},du=(t,s)=>jo(t.element,s.event.target),xf={can:It,abort:so,run:ee},yi=t=>{if(!Ar(t,"can")&&!Ar(t,"abort")&&!Ar(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...xf,...t}},Vh=(t,s)=>(...a)=>zo(t,(l,d)=>l&&s(d).apply(void 0,a),!0),Mg=(t,s)=>(...a)=>zo(t,(l,d)=>l||s(d).apply(void 0,a),!1),zh=t=>nt(t)?{can:It,abort:so,run:t}:t,Uh=t=>{const s=Vh(t,d=>d.can),a=Mg(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{ut(t,g=>{g.run.apply(void 0,d)})}}},La=W,Ao=La("touchstart"),fr=La("touchmove"),_a=La("touchend"),oi=La("touchcancel"),Dl=La("mousedown"),Wh=La("mousemove"),zu=La("mouseout"),Mm=La("mouseup"),qd=La("mouseover"),dd=La("focusin"),Kd=La("focusout"),Uu=La("keydown"),a1=La("keyup"),Yd=La("input"),Zh=La("change"),Ng=La("click"),YS=La("transitioncancel"),md=La("transitionend"),XS=La("transitionstart"),vy=La("selectstart"),Gr=t=>W("alloy."+t),Gb={tap:Gr("tap")},fd=Gr("focus"),Tf=Gr("blur.post"),Nm=Gr("paste.post"),mu=Gr("receive"),fu=Gr("execute"),c1=Gr("focus.item"),gd=Gb.tap,Jc=Gr("longpress"),l1=Gr("sandbox.close"),yy=Gr("typeahead.cancel"),i1=Gr("system.init"),u1=Gr("system.touchmove"),Cy=Gr("system.touchend"),Pg=Gr("system.scroll"),hd=Gr("system.resize"),Rl=Gr("system.attached"),gu=Gr("system.detached"),Ef=Gr("system.dismissRequested"),wy=Gr("system.repositionRequested"),Bg=Gr("focusmanager.shifted"),Sy=Gr("slotcontainer.visibility"),JS=Gr("system.external.element.scroll"),QS=Gr("change.tab"),e2=Gr("dismiss.tab"),kf=Gr("highlight"),$g=Gr("dehighlight"),mo=(t,s)=>{qb(t,t.element,s,{})},Tn=(t,s,a)=>{qb(t,t.element,s,a)},_f=t=>{mo(t,fu())},d1=(t,s,a)=>{qb(t,s,a,{})},qb=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},xy=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},Xd=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},rr=t=>rs(t),t2=(t,s)=>({key:t,value:yi({abort:s})}),Ty=(t,s)=>({key:t,value:yi({can:s})}),Kb=t=>({key:t,value:yi({run:(s,a)=>{a.event.prevent()}})}),Ge=(t,s)=>({key:t,value:yi({run:s})}),Ig=(t,s,a)=>({key:t,value:yi({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),e_=t=>s=>Ge(t,s),Af=t=>s=>({key:t,value:yi({run:(a,l)=>{du(a,l)&&s(a,l)}})}),t_=(t,s)=>Ge(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{Xd(d,d.element,t,l)})}),Lg=(t,s,a)=>{const l=s.partUids[a];return t_(t,l)},Ey=(t,s)=>Ge(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Gd(d.target,y=>a.getSystem().getByDom(y).toOptional(),so).getOr(a));s(a,g,l)}),pd=t=>Ge(t,(s,a)=>{a.cut()}),ky=t=>Ge(t,(s,a)=>{a.stop()}),jh=(t,s)=>Af(t)(s),gr=Af(Rl()),Jd=Af(gu()),n2=Af(i1()),Wu=e_(fu()),_y=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:m1(h.slice(0,1).concat(h.slice(3)))}),t},m1=t=>We(t,s=>Na(s,"/*")?s.substring(0,s.length-2):s),Gh=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:m1(g)}),t},f1=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:m1(g.slice(1))}),t},Ci=t=>({classes:At(t.classes)?[]:t.classes,attributes:At(t.attributes)?{}:t.attributes,styles:At(t.styles)?{}:t.styles}),o2=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),g1=(t,s,a)=>Wu(l=>{a(l,t,s)}),Ay=(t,s,a)=>n2((l,d)=>{a(l,t,s)}),Of=(t,s,a,l,d,g)=>{const h=lc(t),y=Fs(s,[wf("config",t)]);return r2(h,y,s,a,l,d,g)},Oy=(t,s,a,l,d,g)=>{const h=t,y=Fs(s,[Lu("config",t)]);return r2(h,y,s,a,l,d,g)},s2=(t,s,a)=>_y((d,...g)=>{const h=[d].concat(g);return d.config({name:W(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},y=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,y.config,y.state].concat(w))})},a,s),Dy=t=>({key:t,value:void 0}),r2=(t,s,a,l,d,g,h)=>{const y=B=>Ar(B,a)?B[a]():A.none(),w=Je(d,(B,H)=>s2(a,B,H)),O={...Je(g,(B,H)=>Gh(B,H)),...w,revoke:wn(Dy,a),config:B=>{const H=Xc(a+"-config",t,B);return{key:a,value:{config:H,me:O,configAsRaw:se(()=>Xc(a+"-config",t,B)),initialConfig:B,state:h}}},schema:W(s),exhibit:(B,H)=>va(y(B),ft(l,"exhibit"),(z,G)=>G(H,z.config,z.state)).getOrThunk(()=>Ci({})),name:W(a),handlers:B=>y(B).map(H=>ft(l,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return O},dl={init:()=>wi({readState:W("No State required")})},wi=t=>t,gt=t=>rs(t),Yb=lc([Ze("fields"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",dl),Se("extra",{})]),Ec=t=>{const s=Xc("Creating behaviour: "+t.name,Yb,t);return Of(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Xb=lc([Ze("branchKey"),Ze("branches"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",dl),Se("extra",{})]),a2=t=>{const s=Xc("Creating behaviour: "+t.name,Xb,t);return Oy(Ia(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},hr=W(void 0),Pm=(t,s)=>{const a=bs(t,s);return a===void 0||a===""?[]:a.split(" ")},Jb=(t,s,a)=>{const d=Pm(t,s).concat([a]);return vt(t,s,d.join(" ")),!0},n_=(t,s,a)=>{const l=uo(Pm(t,s),d=>d!==a);return l.length>0?vt(t,s,l.join(" ")):oe(t,s),!1},Bm=t=>t.dom.classList!==void 0,Qb=t=>Pm(t,"class"),bd=(t,s)=>Jb(t,"class",s),c2=(t,s)=>n_(t,"class",s),Ry=(t,s)=>bo(Qb(t),s)?c2(t,s):bd(t,s),ar=(t,s)=>{Bm(t)?t.dom.classList.add(s):bd(t,s)},qh=t=>{(Bm(t)?t.dom.classList:Qb(t)).length===0&&oe(t,"class")},Lr=(t,s)=>{Bm(t)?t.dom.classList.remove(s):c2(t,s),qh(t)},l2=(t,s)=>{const a=Bm(t)?t.dom.classList.toggle(s):Ry(t,s);return qh(t),a},Si=(t,s)=>Bm(t)&&t.dom.classList.contains(s),Kh=(t,s)=>{ut(s,a=>{ar(t,a)})},xi=(t,s)=>{ut(s,a=>{Lr(t,a)})},o_=(t,s)=>{ut(s,a=>{l2(t,a)})},s_=(t,s)=>Ct(s,a=>Si(t,a)),r_=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},a_=t=>Bm(t)?r_(t):Qb(t),uc=(t,s,a,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},Ml=t=>({...t,position:A.some(t.position)}),h1=(t,s)=>{ct(t,Ml(s))},Df=t=>(la($s(t,"position"),"fixed")?A.none():ja(t)).orThunk(()=>{const l=pe.fromTag("span");return Ca(t).bind(d=>{Sc(d,l);const g=ja(l);return Ql(l),g})}),My=t=>Df(t).map(wa).getOrThunk(()=>or(0,0)),Yh=(t,s)=>{const a=t.element;ar(a,s.transitionClass),Lr(a,s.fadeOutClass),ar(a,s.fadeInClass),s.onShow(t)},Qd=(t,s)=>{const a=t.element;ar(a,s.transitionClass),Lr(a,s.fadeInClass),ar(a,s.fadeOutClass),s.onHide(t)},Xh=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Fg=(t,s)=>t.y>=s.y,Rf=(t,s)=>t.bottom<=s.bottom,em=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Hg=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Vg=t=>t.box.x-t.win.x,c_=(t,s,a)=>{const l=s.win,d=s.box,g=Vg(s);return ls(t,h=>{switch(h){case"bottom":return Rf(d,a.bounds)?A.none():A.some(Hg(l,g,a));case"top":return Fg(d,a.bounds)?A.none():A.some(em(l,g,a));default:return A.none()}}).getOr({location:"no-dock"})},Ny=(t,s,a)=>Ct(t,l=>{switch(l){case"bottom":return Rf(s,a.bounds);case"top":return Fg(s,a.bounds)}}),ev=(t,s)=>{const a=s.optScrollEnv.fold(W(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return or(t.bounds.x,a)},i2=(t,s)=>{const a=s.optScrollEnv.fold(W(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return or(t.x,a)},Py=(t,s,a)=>a.getInitialPos().map(l=>{const d=ev(l,s);return{box:Ys(d.left,d.top,rc(t),Qs(t)),location:l.location}}),tv=(t,s,a,l,d)=>{const g=i2(s,a),h=Ys(g.left,g.top,s.width,s.height);l.setInitialPos({style:$r(t),position:xs(t,"position")||"static",bounds:h,location:d.location})},By=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>tv(t,s,a,l,d),()=>ee)},nv=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=Df(t).getOr(oo()),h=xr(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:uc("absolute",ft(l.style,"left").map(w=>s.x-h.x),ft(l.style,"top").map(w=>s.y-h.y+y),ft(l.style,"right").map(w=>h.right-s.right),ft(l.style,"bottom").map(w=>h.bottom-s.bottom))});default:return A.none()}}),Jh=(t,s,a)=>Py(t,s,a).filter(({box:l})=>Ny(a.getModes(),l,s)).bind(({box:l})=>nv(t,l,a)),ov=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:uc("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:uc("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},vR=(t,s,a)=>{const l=xr(t),d=oa(),g=c_(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(tv(t,l,s,a,g),ov(g)):A.none()},l_=(t,s,a)=>Jh(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>Py(t,s,a)).bind(({box:l,location:d})=>{const g=oa(),h=Vg({win:g,box:l}),y=d==="top"?em(g,h,s):Hg(g,h,s);return ov(y)})),vd=(t,s,a)=>{const l=t.element;return la($s(l,"position"),"fixed")?l_(l,s,a):vR(l,s,a)},Qh=(t,s,a)=>{const l=t.element;return Py(l,s,a).bind(({box:d})=>nv(l,d,a))},u2=(t,s,a,l)=>{const d=xr(t),g=oa(),h=Vg({win:g,box:d}),y=l(g,h,s);return y.location==="bottom"||y.location==="top"?(By(t,d,s,a,y),ov(y)):A.none()},d2=(t,s,a)=>{a.setDocked(!1),ut(["left","right","top","bottom","position"],l=>_o(t.element,l)),s.onUndocked(t)},sv=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),h1(t.element,l),(d?s.onDocked:s.onUndocked)(t)},Mf=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const y=Xh(h,l.bounds);y!==a.isVisible()&&(a.setVisible(y),d&&!y?(Kh(t.element,[g.fadeOutClass]),g.onHide(t)):(y?Yh:Qd)(t,g))})})},i_=(t,s,a,l,d)=>{Mf(t,s,a,l,!0),sv(t,s,a,d.positionCss)},$y=(t,s,a,l,d)=>{switch(d.morph){case"static":return d2(t,s,a);case"absolute":return sv(t,s,a,d.positionCss);case"fixed":return i_(t,s,a,l,d)}},p1=(t,s,a)=>{const l=s.lazyViewport(t);Mf(t,s,a,l),vd(t,l,a).each(d=>{$y(t,s,a,l,d)})},u_=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);Qh(t,d,a).each(g=>{switch(g.morph){case"static":{d2(t,s,a);break}case"absolute":{sv(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{xi(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),rv(t,s,a)},rv=(t,s,a)=>{t.getSystem().isConnected()&&p1(t,s,a)},ep=(t,s,a)=>{a.isDocked()&&u_(t,s,a)},m2=t=>(s,a,l)=>{const d=a.lazyViewport(s);u2(s.element,d,l,t).each(h=>{i_(s,a,l,d,h)})},av=m2(em),Iy=m2(Hg);var Ly=Object.freeze({__proto__:null,refresh:rv,reset:ep,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:av,forceDockToBottom:Iy}),g2=Object.freeze({__proto__:null,events:(t,s)=>rr([jh(md(),(a,l)=>{t.contextual.each(d=>{Si(a.element,d.transitionClass)&&(xi(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),Ge(Pg(),(a,l)=>{rv(a,t,s)}),Ge(JS(),(a,l)=>{rv(a,t,s)}),Ge(hd(),(a,l)=>{ep(a,t,s)})])});const yd=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,da(pe.fromDom(l))},si=t=>t.dom.innerHTML,np=(t,s)=>{const l=Ba(t).dom,d=pe.fromDom(l.createDocumentFragment()),g=yd(s,l);Pu(d,g),zd(t),Sc(t,d)},op=t=>{const s=pe.fromTag("div"),a=pe.fromDom(t.dom.cloneNode(!0));return Sc(s,a),si(s)},v1=(t,s)=>pe.fromDom(t.dom.cloneNode(s)),d_=t=>v1(t,!1),m_=t=>v1(t,!0),zg=t=>{if(Bi(t))return"#shadow-root";{const s=d_(t);return op(s)}},Ti=t=>zg(t),h2="unknown";var ra;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ra||(ra={}));const Ug=dn({}),Ei=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();bo(["mousemove","mouseover","mouseout",i1()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:We(a,g=>bo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ti(g.target)+")":g.outcome)})}}},yR=(t,s,a)=>{switch(ft(Ug.get(),t).orThunk(()=>{const d=qo(Ug.get());return ls(d,g=>t.indexOf(g)>-1?A.some(Ug.get()[g]):A.none())}).getOr(ra.NORMAL)){case ra.NORMAL:return a(ki());case ra.LOGGING:{const d=Ei(t,s),g=a(d);return d.write(),g}case ra.STOP:return!0}},cv=["alloy/data/Fields","alloy/debugging/Debugging"],sp=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Sn(s,a=>a.indexOf("alloy")>0&&!zs(cv,l=>a.indexOf(l)>-1)).getOr(h2)}else return h2},Wg={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},Cd=(t,s,a)=>yR(t,s,a),ki=W(Wg),Fy=W([Ze("menu"),Ze("selectedMenu")]),Hy=W([Ze("item"),Ze("selectedItem")]);W(Rn(Hy().concat(Fy())));const Vy=W(Rn(Hy())),Zg=ud("initSize",[Ze("numColumns"),Ze("numRows")]),f_=()=>Qo("markers",Vy()),jg=()=>ud("markers",[Ze("backgroundMenu")].concat(Fy()).concat(Hy())),tm=t=>ud("markers",We(t,Ze)),y1=(t,s,a)=>(sp(),ka(s,s,a,Rg(l=>eo.value((...d)=>l.apply(void 0,d))))),Ho=t=>y1("onHandler",t,id(ee)),Nl=t=>y1("onKeyboardHandler",t,id(A.none)),hu=t=>y1("onHandler",t,Al()),$m=t=>y1("onKeyboardHandler",t,Al()),cr=(t,s)=>ss(t,W(s)),p2=t=>ss(t,Ot),lv=W(Zg);var C1=[Fs("contextual",[ha("fadeInClass"),ha("fadeOutClass"),ha("transitionClass"),ti("lazyContext"),Ho("onShow"),Ho("onShown"),Ho("onHide"),Ho("onHidden")]),Vr("lazyViewport",()=>({bounds:oa(),optScrollEnv:A.none()})),k("modes",["top","bottom"],Ht),Ho("onDocked"),Ho("onUndocked")],g_=Object.freeze({__proto__:null,init:t=>{const s=dn(!1),a=dn(!0),l=Ts(),d=dn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return wi({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Nr=Ec({fields:C1,name:"docking",active:g2,apis:Ly,state:g_}),zy=(t,s,a)=>jo(s,t.element)&&!jo(s,a),h_=rr([Ty(fd(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return zy(t,l,d)?(console.warn(fd()+` did not get interpreted by the desired target. 
Originator: `+Ti(l)+`
Target: `+Ti(d)+`
Check the `+fd()+" event handlers"),!1):!0})]);var p_=Object.freeze({__proto__:null,events:h_});let rp=0;const Ut=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return rp++,t+"_"+l+rp+String(a)},b_=W("alloy-id-"),b2=W("data-alloy-id"),uv=b_(),Uy=b2(),v_=(t,s)=>{const a=Ut(uv+t);return w1(s,a),a},w1=(t,s)=>{Object.defineProperty(t.dom,Uy,{value:s,writable:!0})},S1=t=>{const s=Fo(t)?t.dom[Uy]:null;return A.from(s)},Gg=t=>Ut(t),CR=Ot,nm=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Ti(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:W("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:so}},y_=nm(),Im=Ut("alloy-premade"),v2=t=>(Object.defineProperty(t.element.dom,Im,{value:t.uid,writable:!0}),vs(Im,t)),wd=t=>yo(t.dom,Im),y2=t=>ft(t,Im),ap=t=>f1((s,...a)=>t(s.getApis(),s,...a),t),C_=(t,s)=>{const a=We(s,d=>Fs(d.name(),[Ze("config"),Se("state",dl)])),l=Tr("component.behaviours",Rn(a),t.behaviours).fold(d=>{throw new Error(iu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Ot);return{list:s,data:Je(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return W(g)})}},w_=t=>t.list,S_=t=>t.data,Wy=(t,s)=>{const a={};return $e(t,(l,d)=>{$e(l,(g,h)=>{const y=ft(a,h).getOr([]);a[h]=y.concat([s(d,g)])})}),a},dv=(t,s,a,l)=>{const d={...s};ut(a,O=>{d[O.name()]=O.exhibit(t,l)});const g=Wy(d,(O,B)=>({name:O,modification:B})),h=O=>cs(O,(B,H)=>({...H.modification,...B}),{}),y=cs(g.classes,(O,B)=>B.modification.concat(O),[]),w=h(g.attributes),_=h(g.styles);return Ci({classes:y,attributes:w,styles:_})},C2=(t,s,a,l)=>{try{const d=zr(a,(g,h)=>{const y=g[s],w=h[s],_=l.indexOf(y),O=l.indexOf(w);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(l,null,2));return _<O?-1:O<_?1:0});return eo.value(d)}catch(d){return eo.error([d])}},Zy=(t,s)=>({handler:t,purpose:s}),x_=(t,s)=>({cHandler:t,purpose:s}),x1=(t,s)=>x_(wn.apply(void 0,[t.handler].concat(s)),t.purpose),Nf=t=>t.cHandler,cp=(t,s)=>({name:t,handler:s}),mv=(t,s)=>{const a={};return ut(t,l=>{a[l.name()]=l.handlers(s)}),a},jy=(t,s,a)=>{const l={...a,...mv(s,t)};return Wy(l,cp)},fv=(t,s,a,l)=>{const d=jy(t,a,l);return w2(d,s)},Gy=t=>{const s=zh(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},qy=(t,s)=>eo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(We(s,a=>a.name),null,2)]),Ky=(t,s,a)=>{const l=s[a];return l?C2("Event: "+a,"name",t,l).map(d=>{const g=We(d,h=>h.handler);return Uh(g)}):qy(a,t)},w2=(t,s)=>{const a=Hn(t,(l,d)=>(l.length===1?eo.value(l[0].handler):Ky(l,s,d)).map(h=>{const y=Gy(h),w=l.length>1?uo(s[d],_=>zs(l,O=>O.name===_)).join(" > "):l[0].name;return vs(d,Zy(y,w))}));return Hu(a,{})},kc="alloy.base.behaviour",T_=Rn([ka("dom","dom",Al(),Rn([Ze("tag"),Se("styles",{}),Se("classes",[]),Se("attributes",{}),es("value"),es("innerHtml")])),Ze("components"),Ze("uid"),Se("events",{}),Se("apis",{}),ka("eventOrder","eventOrder",Bh({[fu()]:["disabling",kc,"toggling","typeaheadevents"],[fd()]:[kc,"focusing","keying"],[i1()]:[kc,"disabling","toggling","representing"],[Yd()]:[kc,"representing","streaming","invalidating"],[gu()]:[kc,"representing","item-events","toolbar-button-events","tooltipping"],[Dl()]:["focusing",kc,"item-type-events"],[Ao()]:["focusing",kc,"item-type-events"],[qd()]:["item-type-events","tooltipping"],[mu()]:["receiving","reflecting","tooltipping"]}),Li()),es("domModification")]),S2=t=>Tr("custom.definition",T_,t),Pf=t=>({...t.dom,uid:t.uid,domChildren:We(t.components,s=>s.element)}),qg=t=>t.domModification.fold(()=>Ci({}),Ci),Yy=t=>t.events,Be=t=>t.dom.value,om=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},E_=(t,s,a)=>yc(t,s).map(d=>{if(a.exists(h=>!jo(h,d))){const h=a.map(na).getOr("span"),y=pe.fromTag(h);return El(d,y),y}else return d}),x2=(t,s,a)=>{a.fold(()=>Sc(t,s),l=>{jo(l,s)||(El(l,s),Ql(l))})},T1=(t,s,a)=>{const l=We(s,a),d=da(t);return ut(d.slice(l.length),Ql),l},pu=(t,s,a,l)=>{const d=yc(t,s),g=l(a,d),h=E_(t,s,d);return x2(t,g.element,h),g},E1=(t,s,a)=>T1(t,s,(l,d)=>pu(t,d,l,a)),T2=(t,s)=>T1(t,s,(a,l)=>{const d=yc(t,l);return x2(t,a,d),a}),Xy=(t,s)=>{const a=qo(t),l=qo(s),d=Bt(l,a),g=Ko(t,(h,y)=>!yo(s,y)||h!==s[y]).t;return{toRemove:d,toSet:g}},ml=(t,s)=>{const{class:a,style:l,...d}=Re(s),{toSet:g,toRemove:h}=Xy(t.attributes,d),y=()=>{ut(h,Ce=>oe(s,Ce)),Du(s,g)},w=$r(s),{toSet:_,toRemove:O}=Xy(t.styles,w),B=()=>{ut(O,Ce=>_o(s,Ce)),Gs(s,_)},H=a_(s),z=Bt(H,t.classes),G=Bt(t.classes,H),ne=()=>{Kh(s,G),xi(s,z)},Ee=Ce=>{np(s,Ce)},le=()=>{const Ce=t.domChildren;T2(s,Ce)},xe=()=>{const Ce=s,Ke=t.value.getOrUndefined();Ke!==Be(Ce)&&om(Ce,Ke??"")};return y(),ne(),B(),t.innerHtml.fold(le,Ee),xe(),s},gv=t=>{const s=pe.fromTag(t.tag);Du(s,t.attributes),Kh(s,t.classes),Gs(s,t.styles),t.innerHtml.each(l=>np(s,l));const a=t.domChildren;return Pu(s,a),t.value.each(l=>{om(s,l)}),s},E2=(t,s)=>{try{const a=ml(t,s);return A.some(a)}catch{return A.none()}},k_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,k2=(t,s)=>{const a=d=>na(d)===t.tag&&!k_(t)&&!wd(d),l=s.filter(a).bind(d=>E2(t,d)).getOrThunk(()=>gv(t));return w1(l,t.uid),l},__=t=>{const s=ft(t,"behaviours").getOr({});return ye(qo(s),a=>{const l=s[a];return Xe(l)?[l.me]:[]})},_2=(t,s)=>C_(t,s),A_=t=>{const s=__(t);return _2(t,s)},O_=(t,s,a)=>{const l=Pf(t),d=qg(t),g={"alloy.base.modification":d},h=s.length>0?dv(a,g,s,l):d;return o2(l,h)},A2=(t,s,a)=>{const l={"alloy.base.behaviour":Yy(t)};return fv(a,t.eventOrder,s,l).getOrDie()},lp=(t,s)=>{const a=()=>Ce,l=dn(y_),d=at(S2(t)),g=A_(t),h=w_(g),y=S_(g),w=O_(d,h,y),_=k2(w,s),O=A2(d,h,y),B=dn(d.components),H=Ke=>{l.set(Ke)},z=()=>{l.set(nm(a))},G=()=>{const Ke=da(_),Pe=ye(Ke,ht=>l.get().getByDom(ht).fold(()=>[],Bo));B.set(Pe)},ne=Ke=>{const Pe=y;return(nt(Pe[Ke.name()])?Pe[Ke.name()]:()=>{throw new Error("Could not find "+Ke.name()+" in "+JSON.stringify(t,null,2))})()},Ee=Ke=>nt(y[Ke.name()]),le=()=>d.apis,xe=Ke=>y[Ke]().map(Pe=>Pe.state.readState()).getOr("not enabled"),Ce={uid:t.uid,getSystem:l.get,config:ne,hasConfigured:Ee,spec:t,readState:xe,getApis:le,connect:H,disconnect:z,element:_,syncComponents:G,components:B.get,events:O};return Ce},D_=(t,s)=>{const a=ft(t,"components").getOr([]);return s.fold(()=>We(a,el),l=>We(a,(d,g)=>pv(d,yc(l,g))))},O2=(t,s)=>{const{events:a,...l}=CR(t),d=D_(l,s),g={...l,events:{...p_,...a},components:d};return eo.value(lp(g,s))},qr=t=>{const s=pe.fromText(t);return hv({element:s})},hv=t=>{const s=Xc("external.component",lc([Ze("element"),es("uid")]),t),a=dn(nm()),l=y=>{a.set(y)},d=()=>{a.set(nm(()=>h))},g=s.uid.getOrThunk(()=>Gg("external"));w1(s.element,g);const h={uid:g,getSystem:a.get,config:A.none,hasConfigured:so,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:W("No state"),syncComponents:ee,components:W([]),events:{}};return v2(h)},D2=Gg,R2=t=>yo(t,"uid"),pv=(t,s)=>y2(t).getOrThunk(()=>{const a=R2(t)?t:{uid:D2(""),...t};return O2(a,s).getOrDie()}),el=t=>pv(t,A.none()),fl=v2;var M2=(t,s,a,l,d)=>t(a,l)?A.some(a):nt(d)&&d(a)?A.none():s(a,l,d);const N2=(t,s,a)=>{let l=t.dom;const d=nt(a)?a:so;for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},Jy=(t,s,a)=>M2((d,g)=>g(d),N2,t,s,a),P2=(t,s)=>{const a=t.dom;return a.parentNode?B2(pe.fromDom(a.parentNode),l=>!jo(t,l)&&s(l)):A.none()},B2=(t,s)=>{const a=d=>s(pe.fromDom(d));return Sn(t.dom.childNodes,a).map(pe.fromDom)},Qy=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=pe.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=a(l.childNodes[d]);if(h.isSome())return h}return A.none()};return a(t.dom)},eC=(t,s,a)=>Jy(t,s,a).isSome(),bv=t=>ql(t),Lm=(t,s,a)=>N2(t,l=>Os(l,s),a),Pl=(t,s)=>P2(t,a=>Os(a,s)),tC=(t,s)=>B2(t,a=>Os(a,s)),ys=(t,s)=>ql(s,t),Sd=(t,s,a)=>M2((d,g)=>Os(d,g),Lm,t,s,a),k1="aria-controls",$2=t=>Jy(t,a=>{if(!Fo(a))return!1;const l=bs(a,"id");return l!==void 0&&l.indexOf(k1)>-1}).bind(a=>{const l=bs(a,"id"),d=U(a);return ys(d,`[${k1}="${l}"]`)}),vv=()=>{const t=Ut(k1);return{id:t,link:l=>{vt(l,k1,t)},unlink:l=>{oe(l,k1)}}},yv=(t,s)=>$2(s).exists(a=>Bf(t,a)),Bf=(t,s)=>eC(s,a=>jo(a,t.element),so)||yv(t,s),_c=(t,s,a,l,d,g,h,y=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:y}),$f=fe.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),nC=(t,s,a,l,d,g,h,y,w)=>t.fold(s,a,l,d,g,h,y,w),I2=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),R_=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),ip=$f.southeast,oC=$f.southwest,sC=$f.northeast,rC=$f.northwest,aC=$f.south,Kt=$f.north,_1=$f.east,cC=$f.west,up=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},Zu=(t,s,a)=>Math.min(Math.max(t,s),a),M_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ac=(t,s)=>Is(["left","right","top","bottom"],a=>ft(s,a).map(l=>M_(t,l))),N_=(t,s,a)=>{const l=(w,_)=>s[w].map(O=>{const B=w==="top"||w==="bottom",H=B?a.top:a.left,G=(w==="left"||w==="top"?Math.max:Math.min)(O,_)+H;return B?Zu(G,t.y,t.bottom):Zu(G,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),y=l("bottom",t.bottom);return Ys(d,g,h-d,y-g)},If="layout",lC=t=>t.x,L2=(t,s)=>t.x+t.width/2-s.width/2,tl=(t,s)=>t.x+t.width-s.width,Lf=(t,s)=>t.y-s.height,Cv=t=>t.y+t.height,Ff=(t,s)=>t.y+t.height/2-s.height/2,P_=t=>t.x+t.width,B_=(t,s)=>t.x-s.width,Fa=(t,s,a)=>_c(lC(t),Cv(t),a.southeast(),ip(),"southeast",Ac(t,{left:1,top:3}),If),Aa=(t,s,a)=>_c(tl(t,s),Cv(t),a.southwest(),oC(),"southwest",Ac(t,{right:0,top:3}),If),Ha=(t,s,a)=>_c(lC(t),Lf(t,s),a.northeast(),sC(),"northeast",Ac(t,{left:1,bottom:2}),If),Rs=(t,s,a)=>_c(tl(t,s),Lf(t,s),a.northwest(),rC(),"northwest",Ac(t,{right:0,bottom:2}),If),Ja=(t,s,a)=>_c(L2(t,s),Lf(t,s),a.north(),Kt(),"north",Ac(t,{bottom:2}),If),Oa=(t,s,a)=>_c(L2(t,s),Cv(t),a.south(),aC(),"south",Ac(t,{top:3}),If),iC=(t,s,a)=>_c(P_(t),Ff(t,s),a.east(),_1(),"east",Ac(t,{left:0}),If),wv=(t,s,a)=>_c(B_(t,s),Ff(t,s),a.west(),cC(),"west",Ac(t,{right:1}),If),uC=()=>[Fa,Aa,Ha,Rs,Oa,Ja,iC,wv],F2=()=>[Aa,Fa,Rs,Ha,Oa,Ja,iC,wv],H2=()=>[Ha,Rs,Fa,Aa,Ja,Oa],Sv=()=>[Rs,Ha,Aa,Fa,Ja,Oa],xv=()=>[Fa,Aa,Ha,Rs,Oa,Ja],Kg=()=>[Aa,Fa,Rs,Ha,Oa,Ja],dC=(t,s)=>s.universal?t:uo(t,a=>bo(s.channels,a));var Yg=Object.freeze({__proto__:null,events:t=>rr([Ge(mu(),(s,a)=>{const l=t.channels,d=qo(l),g=a,h=dC(d,g);ut(h,y=>{const w=l[y],_=w.schema,O=Xc("channel["+y+`] data
Receiver: `+Ti(s.element),_,g.data);w.onReceive(s,O)})})])}),$_=[Qo("channels",lu(eo.value,lc([hu("onReceive"),Se("schema",Li())])))];const ri=Ec({fields:$_,name:"receiving",active:Yg});var I_=Object.freeze({__proto__:null,exhibit:(t,s)=>Ci({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Vi=(t,s=!1)=>t.dom.focus({preventScroll:s}),A1=t=>t.dom.blur(),O1=t=>{const s=U(t).dom;return t.dom===s.activeElement},xd=(t=kl())=>A.from(t.dom.activeElement).map(pe.fromDom),Bl=t=>xd(U(t)).filter(s=>t.dom.contains(s.dom)),Hf=(t,s)=>{const a=U(s),l=xd(a).bind(g=>{const h=y=>jo(g,y);return h(s)?A.some(s):Qy(s,h)}),d=t(s);return l.each(g=>{xd(a).filter(h=>jo(h,g)).fold(()=>{Vi(g)},ee)}),d},mC=fe.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Tv=(t,s,a,l,d,g)=>{const h=s.rect,y=h.x-a,w=h.y-l,_=h.width,O=h.height,B=d-(y+_),H=g-(w+O),z=A.some(y),G=A.some(w),ne=A.some(B),Ee=A.some(H),le=A.none();return nC(s.direction,()=>uc(t,z,G,le,le),()=>uc(t,le,G,ne,le),()=>uc(t,z,le,le,Ee),()=>uc(t,le,le,ne,Ee),()=>uc(t,z,G,le,le),()=>uc(t,z,le,le,Ee),()=>uc(t,z,G,le,le),()=>uc(t,le,G,ne,le))},V2=(t,s)=>t.fold(()=>{const a=s.rect;return uc("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,l,d,g)=>Tv("absolute",s,a,l,d,g),(a,l,d,g)=>Tv("fixed",s,a,l,d,g)),Xg=(t,s)=>{const a=wn(km,s),l=t.fold(a,a,()=>{const h=Xa();return km(s).translate(-h.left,-h.top)}),d=$a(s),g=Ru(s);return Ys(l.left,l.top,d,g)},fC=(t,s)=>s.fold(()=>t.fold(oa,oa,Ys),a=>t.fold(W(a),W(a),()=>{const l=gC(t,a.x,a.y);return Ys(l.left,l.top,a.width,a.height)})),gC=(t,s,a)=>{const l=or(s,a),d=()=>{const g=Xa();return l.translate(-g.left,-g.top)};return t.fold(W(l),W(l),d)},z2=(t,s,a,l)=>t.fold(s,a,l);mC.none;const U2=mC.relative,D1=mC.fixed,Jg=(t,s)=>({anchorBox:t,origin:s}),hC=(t,s)=>Jg(t,s),pC="data-alloy-placement",W2=(t,s)=>{vt(t,pC,s)},Z2=t=>$(t,pC),L_=t=>oe(t,pC),Ev=fe.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),j2=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y,right:w,bottom:_,width:O,height:B}=t,H=h>=a&&h<=d,z=y>=l&&y<=g,G=H&&z,ne=w<=d&&w>=a,Ee=_<=g&&_>=l,le=ne&&Ee,xe=Math.min(O,h>=a?d-h:w-a),Ce=Math.min(B,y>=l?g-y:_-l);return{originInBounds:G,sizeInBounds:le,visibleW:xe,visibleH:Ce}},F_=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y,width:w,height:_}=t,O=Math.max(a,d-w),B=Math.max(l,g-_),H=Zu(h,a,O),z=Zu(y,l,B),G=Math.min(H+w,d)-H,ne=Math.min(z+_,g)-z;return Ys(H,z,G,ne)},G2=(t,s,a)=>{const l=W(s.bottom-a.y),d=W(a.bottom-s.y),g=I2(t,d,d,l),h=W(s.right-a.x),y=W(a.right-s.x);return{maxWidth:R_(t,y,y,h),maxHeight:g}},R1=(t,s,a,l)=>{const d=t.bubble,g=d.offset,h=N_(l,t.restriction,g),y=t.x+g.left,w=t.y+g.top,_=Ys(y,w,s,a),{originInBounds:O,sizeInBounds:B,visibleW:H,visibleH:z}=j2(_,h),G=O&&B,ne=G?_:F_(_,h),Ee=ne.width>0&&ne.height>0,{maxWidth:le,maxHeight:xe}=G2(t.direction,ne,l),Ce={rect:ne,maxHeight:xe,maxWidth:le,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return G||t.alwaysFit?Ev.fit(Ce):Ev.nofit(Ce,H,z,Ee)},H_=(t,s,a,l,d,g)=>{const h=l.width,y=l.height,w=(O,B,H,z,G)=>{const ne=O(a,l,d,t,g),Ee=R1(ne,h,y,g);return Ee.fold(W(Ee),(le,xe,Ce,Ke)=>(G===Ke?Ce>z||xe>H:!G&&Ke)?Ee:Ev.nofit(B,H,z,G))};return zo(s,(O,B)=>{const H=wn(w,B);return O.fold(W(O),H)},Ev.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:ip(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Ot,Ot)},q2=It,$l=(t,s,a)=>fi(t,s,q2,a),bC=(t,s,a)=>Tg(t,s,q2,a),vC=cd,yC=["top","bottom","right","left"],kv="data-alloy-transition-timer",V_=(t,s)=>s_(t,s.classes),z_=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),_v=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return fs(s,(l,d)=>{const g=t[d].map(a),h=l.map(a);return!ia(g,h)}).isSome()},K2=t=>{const s=g=>{const y=xs(t,g).split(/\s*,\s*/);return uo(y,ue)},a=g=>{if(Mt(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return Na(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return zo(d,(g,h,y)=>{const w=a(l[y])+a(h);return Math.max(g,w)},0)},CC=(t,s)=>{const a=ga(),l=ga();let d;const g=_=>{var O;const B=(O=_.raw.pseudoElement)!==null&&O!==void 0?O:"";return jo(_.target,t)&&re(B)&&bo(yC,_.raw.propertyName)},h=_=>{if(Tt(_)||g(_)){a.clear(),l.clear();const O=_==null?void 0:_.raw.type;(Tt(O)||O===md())&&(clearTimeout(d),oe(t,kv),xi(t,s.classes))}},y=$l(t,XS(),_=>{g(_)&&(y.unbind(),a.set($l(t,md(),h)),l.set($l(t,YS(),h)))}),w=K2(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),vt(t,kv,d)})},wC=(t,s)=>{Kh(t,s.classes),$(t,kv).each(a=>{clearTimeout(parseInt(a,10)),oe(t,kv)}),CC(t,s)},M1=(t,s,a,l,d,g)=>{const h=z_(l,d,g);if(h||V_(t,l)){Yt(t,"position",a.position);const y=Xg(s,t),w=V2(s,{...d,rect:y}),_=Is(yC,O=>w[O]);_v(a,_)&&(ct(t,_),h&&wC(t,l),Ka(t))}else xi(t,l.classes)},SC=t=>({width:$a(t),height:Ru(t)}),Y2=(t,s,a,l)=>{_o(s,"max-height"),_o(s,"max-width");const d=SC(s);return H_(s,l.preference,t,d,a,l.bounds)},X2=(t,s)=>{const a=s.classes;xi(t,a.off),Kh(t,a.on)},J2=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},U_=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},Q2=(t,s,a)=>{const l=V2(a.origin,s);a.transition.each(d=>{M1(t,a.origin,l,d,s,a.lastPlacement)}),h1(t,l)},ex=(t,s)=>{W2(t,s.placement)},tx=(t,s)=>{xm(t,Math.floor(s))},Av=W((t,s)=>{tx(t,s),Gs(t,{"overflow-x":"hidden","overflow-y":"auto"})}),dp=W((t,s)=>{tx(t,s)}),nx=(t,s,a)=>t[s]===void 0?a:t[s],W_=(t,s,a,l,d,g,h,y)=>{const w=nx(h,"maxHeightFunction",Av()),_=nx(h,"maxWidthFunction",ee),O=t.anchorBox,B=t.origin,H={bounds:fC(B,g),origin:B,preference:l,maxHeightFunction:w,maxWidthFunction:_,lastPlacement:d,transition:y};return Ov(O,s,a,H)},Ov=(t,s,a,l)=>{const d=Y2(t,s,a,l);return Q2(s,d,l),ex(s,d),X2(s,d),J2(s,d,l),U_(s,d,l),{layout:d.layout,placement:d.placement}},Z_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ju=(t,s,a,l=1)=>{const d=t*l,g=s*l,h=w=>ft(a,w).getOr([]),y=(w,_,O)=>{const B=Bt(Z_,O);return{offset:or(w,_),classesOn:ye(O,h),classesOff:ye(B,h)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},Dv=()=>ju(0,0,{}),Rv=Ot,Mv=(t,s)=>a=>Il(a)==="rtl"?s:t,Il=t=>xs(t,"direction")==="rtl"?"rtl":"ltr";var Vf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Vf||(Vf={}));const zf="data-alloy-vertical-dir",j_=t=>eC(t,s=>Fo(s)&&bs(s,"data-alloy-vertical-dir")===Vf.BottomToTop),Uf=()=>Fs("layouts",[Ze("onLtr"),Ze("onRtl"),es("onBottomLtr"),es("onBottomRtl")]),N1=(t,s,a,l,d,g,h)=>{const y=h.map(j_).getOr(!1),w=s.layouts.map(z=>z.onLtr(t)),_=s.layouts.map(z=>z.onRtl(t)),O=y?s.layouts.bind(z=>z.onBottomLtr.map(G=>G(t))).or(w).getOr(d):w.getOr(a),B=y?s.layouts.bind(z=>z.onBottomRtl.map(G=>G(t))).or(_).getOr(g):_.getOr(l);return Mv(O,B)(t)},G_=(t,s,a)=>{const l=s.hotspot,d=Xg(a,l.element),g=N1(t.element,s,xv(),Kg(),H2(),Sv(),A.some(s.hotspot.element));return A.some(Rv({anchorBox:d,bubble:s.bubble.getOr(Dv()),overrides:s.overrides,layouts:g}))};var q_=[Ze("hotspot"),es("bubble"),Se("overrides",{}),Uf(),cr("placement",G_)];const ox=(t,s,a)=>{const l=gC(a,s.x,s.y),d=Ys(l.left,l.top,s.width,s.height),g=N1(t.element,s,uC(),F2(),uC(),F2(),A.none());return A.some(Rv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Nv=[Ze("x"),Ze("y"),Se("height",0),Se("width",0),Se("bubble",Dv()),Se("overrides",{}),Uf(),cr("placement",ox)];const Pv=fe.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),K_=t=>t.fold(Ot,(s,a,l)=>s.translate(-a,-l)),P1=t=>t.fold(Ot,Ot),xC=t=>zo(t,(s,a)=>s.translate(a.left,a.top),or(0,0)),Y_=t=>{const s=We(t,K_);return xC(s)},TC=t=>{const s=We(t,P1);return xC(s)},EC=Pv.screen,Bv=Pv.absolute,X_=(t,s,a)=>{const l=Pc(a.root).dom,d=g=>{const h=Ba(g),y=Ba(t.element);return jo(h,y)};return A.from(l.frameElement).map(pe.fromDom).filter(d).map(wa)},Qg=(t,s,a)=>{const l=Ba(t.element),d=Xa(l),g=X_(t,s,a).getOr(d);return Bv(g,d.left,d.top)},sx=(t,s,a,l)=>{const d=EC(or(t,s));return A.some(au(d,a,l))},kC=(t,s,a,l,d)=>t.map(g=>{const h=[s,g.point],y=z2(l,()=>TC(h),()=>TC(h),()=>Y_(h)),w=Eg(y.left,y.top,g.width,g.height),_=a.showAbove?H2():xv(),O=a.showAbove?Sv():Kg(),B=N1(d,a,_,O,_,O,A.none());return Rv({anchorBox:w,bubble:a.bubble.getOr(Dv()),overrides:a.overrides,layouts:B})}),rx=(t,s,a)=>{const l=Qg(t,a,s);return s.node.filter(ko).bind(d=>{const g=d.dom.getBoundingClientRect(),h=sx(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return kC(h,l,s,a,y)})};var $v=[Ze("node"),Ze("root"),es("bubble"),Uf(),Se("overrides",{}),Se("showAbove",!1),cr("placement",rx)];const J_="\uFEFF",Wf=" ",mp={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},Iv=fe.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fp=(t,s,a,l)=>t.fold(s,a,l),gp=t=>t.fold(Ot,Ot,Ot),Q_=Iv.before,ax=Iv.on,eA=Iv.after,Lv={before:Q_,on:ax,after:eA,cata:fp,getStart:gp},Fm=fe.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_C=t=>Fm.exact(t.start,t.soffset,t.finish,t.foffset),AC=t=>t.match({domRange:s=>pe.fromDom(s.startContainer),relative:(s,a)=>Lv.getStart(s),exact:(s,a,l,d)=>s}),tA=Fm.domRange,OC=Fm.relative,cx=Fm.exact,lx=t=>{const s=AC(t);return Pc(s)},ix=mp.create,hp={domRange:tA,relative:OC,exact:cx,exactFromRange:_C,getWin:lx,range:ix},Fv=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},eh=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Hm=(t,s,a)=>{const l=t.document.createRange();return Fv(l,s),eh(l,a),l},B1=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},pp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),nA=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(pp):A.none()},Td=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(pp):A.none()},zi=fe.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Hv=(t,s,a)=>s(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset),oA=(t,s)=>s.match({domRange:a=>({ltr:W(a),rtl:A.none}),relative:(a,l)=>({ltr:se(()=>Hm(t,a,l)),rtl:se(()=>A.some(Hm(t,l,a)))}),exact:(a,l,d,g)=>({ltr:se(()=>B1(t,a,l,d,g)),rtl:se(()=>A.some(B1(t,d,g,a,l)))})}),xR=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>zi.rtl(pe.fromDom(d.endContainer),d.endOffset,pe.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Hv(t,zi.ltr,a)):Hv(t,zi.ltr,a)},th=(t,s)=>{const a=oA(t,s);return xR(t,a)},bp=(t,s)=>th(t,s).match({ltr:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(l.dom,d),y.setEnd(g.dom,h),y},rtl:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(g.dom,h),y.setEnd(l.dom,d),y}});zi.ltr,zi.rtl;const vp=(t,s,a)=>uo(Pi(t,a),s),nl=(t,s)=>Pa(s,t),Vv=(t,s,a,l)=>{const g=Ba(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},nh=(t,s,a,l)=>{const d=Vv(t,s,a,l),g=jo(t,a)&&s===l;return d.collapsed&&!g},zv=t=>A.from(t.getSelection()),ux=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return A.some(mp.create(pe.fromDom(s.startContainer),s.startOffset,pe.fromDom(a.endContainer),a.endOffset))}else return A.none()},DC=t=>{if(t.anchorNode===null||t.focusNode===null)return ux(t);{const s=pe.fromDom(t.anchorNode),a=pe.fromDom(t.focusNode);return nh(s,t.anchorOffset,a,t.focusOffset)?A.some(mp.create(s,t.anchorOffset,a,t.focusOffset)):ux(t)}},Uv=t=>zv(t).filter(s=>s.rangeCount>0).bind(DC),dc=(t,s)=>{const a=bp(t,s);return nA(a)},Wv=(t,s)=>{const a=bp(t,s);return Td(a)},RC=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(dr,"text"),MC=t=>RC.get(t),Vm=(t,s)=>({element:t,offset:s}),dx=(t,s)=>{const a=da(t);if(a.length===0)return Vm(t,s);if(s<a.length)return Vm(a[s],0);{const l=a[a.length-1],d=dr(l)?MC(l).length:da(l).length;return Vm(l,d)}},Zf=(t,s)=>dr(t)?Vm(t,s):dx(t,s),Zv=t=>t.foffset!==void 0,jv=(t,s)=>s.getSelection.getOrThunk(()=>()=>Uv(t))().map(l=>{if(Zv(l)){const d=Zf(l.start,l.soffset),g=Zf(l.finish,l.foffset);return hp.range(d.element,d.offset,g.element,g.offset)}else return l}),NC=(t,s,a)=>{const l=Pc(s.root).dom,d=Qg(t,a,s),g=jv(l,s).bind(w=>{if(Zv(w))return Wv(l,hp.exactFromRange(w)).orThunk(()=>{const O=pe.fromText(J_);El(w.start,O);const B=dc(l,hp.exact(O,0,O,1));return Ql(O),B}).bind(O=>sx(O.left,O.top,O.width,O.height));{const _=Je(w,B=>B.dom.getBoundingClientRect()),O={left:Math.min(_.firstCell.left,_.lastCell.left),right:Math.max(_.firstCell.right,_.lastCell.right),top:Math.min(_.firstCell.top,_.lastCell.top),bottom:Math.max(_.firstCell.bottom,_.lastCell.bottom)};return sx(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),y=jv(l,s).bind(w=>Zv(w)?Fo(w.start)?A.some(w.start):vc(w.start):A.some(w.firstCell)).getOr(t.element);return kC(g,d,s,a,y)};var oh=[es("getSelection"),Ze("root"),es("bubble"),Uf(),Se("overrides",{}),Se("showAbove",!1),cr("placement",NC)];const yp="link-layout",Fc=t=>t.x+t.width,mx=(t,s)=>t.x-s.width,PC=(t,s)=>t.y-s.height+t.height,BC=t=>t.y,fx=(t,s,a)=>_c(Fc(t),BC(t),a.southeast(),ip(),"southeast",Ac(t,{left:0,top:2}),yp),$C=(t,s,a)=>_c(mx(t,s),BC(t),a.southwest(),oC(),"southwest",Ac(t,{right:1,top:2}),yp),gx=(t,s,a)=>_c(Fc(t),PC(t,s),a.northeast(),sC(),"northeast",Ac(t,{left:0,bottom:3}),yp),hx=(t,s,a)=>_c(mx(t,s),PC(t,s),a.northwest(),rC(),"northwest",Ac(t,{right:1,bottom:3}),yp),Ui=()=>[fx,$C,gx,hx],zm=()=>[$C,fx,hx,gx],px=(t,s,a)=>{const l=Xg(a,s.item.element),d=N1(t.element,s,Ui(),zm(),Ui(),zm(),A.none());return A.some(Rv({anchorBox:l,bubble:Dv(),overrides:s.overrides,layouts:d}))};var sh=[Ze("item"),Uf(),Se("overrides",{}),cr("placement",px)],gl=Ia("type",{selection:oh,node:$v,hotspot:q_,submenu:sh,makeshift:Nv});const _i=[ni("classes",Ht),Hi("mode","all",["all","layout","placement"])],hl=[Se("useFixed",so),es("getBounds")],Wi=[Qo("anchor",gl),Fs("transition",_i)],Gv=()=>{const t=document.documentElement;return D1(0,0,t.clientWidth,t.clientHeight)},Zi=t=>{const s=wa(t.element),a=t.element.dom.getBoundingClientRect();return U2(s.left,s.top,a.width,a.height)},rh=(t,s,a,l,d,g)=>{const h=hC(s.anchorBox,t);return W_(h,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},sA=(t,s,a,l,d)=>{const g=A.none();bx(t,s,a,l,d,g)},bx=(t,s,a,l,d,g)=>{const h=Xc("placement.info",Rn(Wi),d),y=h.anchor,w=l.element,_=a.get(l.uid);Hf(()=>{Yt(w,"position","fixed");const O=$s(w,"visibility");Yt(w,"visibility","hidden");const B=s.useFixed()?Gv():Zi(t);y.placement(t,y,B).each(H=>{const z=g.orThunk(()=>s.getBounds.map(ns)),G=rh(B,H,z,l,_,h.transition);a.set(l.uid,G)}),O.fold(()=>{_o(w,"visibility")},H=>{Yt(w,"visibility",H)}),$s(w,"left").isNone()&&$s(w,"top").isNone()&&$s(w,"right").isNone()&&$s(w,"bottom").isNone()&&la($s(w,"position"),"fixed")&&_o(w,"position")},w)};var yx=Object.freeze({__proto__:null,position:sA,positionWithinBounds:bx,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;ut(["position","left","right","top","bottom"],g=>_o(d,g)),L_(d),a.clear(l.uid)}}),LC=Object.freeze({__proto__:null,init:()=>{let t={};return wi({readState:()=>t,clear:d=>{Xe(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>ft(t,d)})}});const Oc=Ec({fields:hl,name:"positioning",active:I_,apis:yx,state:LC}),FC=t=>t.getSystem().isConnected(),jf=t=>{mo(t,gu());const s=t.components();ut(s,jf)},Cp=t=>{const s=t.components();ut(s,Cp),mo(t,Rl())},HC=(t,s)=>{t.getSystem().addToWorld(s),ko(t.element)&&Cp(s)},qv=t=>{jf(t),t.getSystem().removeFromWorld(t)},$1=(t,s)=>{Sc(t.element,s.element)},VC=t=>{ut(t.components(),s=>Ql(s.element)),zd(t.element),t.syncComponents()},wp=(t,s,a)=>{const l=t.components();VC(t);const d=a(s),g=Bt(l,d);ut(g,h=>{jf(h),t.getSystem().removeFromWorld(h)}),ut(d,h=>{FC(h)?$1(t,h):(t.getSystem().addToWorld(h),$1(t,h),ko(t.element)&&Cp(h))}),t.syncComponents()},zC=(t,s,a)=>{const l=t.components(),d=ye(s,y=>y2(y).toArray());ut(l,y=>{bo(d,y)||qv(y)});const g=a(s),h=Bt(l,g);ut(h,y=>{FC(y)&&qv(y)}),ut(g,y=>{FC(y)||HC(t,y)}),t.syncComponents()},sm=(t,s)=>{ah(t,s,Sc)},ah=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ko(t.element)&&Cp(s),t.syncComponents()},Cx=t=>{jf(t),Ql(t.element),t.getSystem().removeFromWorld(t)},Um=t=>{const s=Ca(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Cx(t),s.each(a=>{a.syncComponents()})},ji=t=>{const s=t.components();ut(s,Cx),zd(t.element),t.syncComponents()},wx=(t,s)=>{ch(t,s,Sc)},rm=(t,s)=>{ch(t,s,gi)},ch=(t,s,a)=>{a(t,s.element);const l=da(s.element);ut(l,d=>{s.getByDom(d).each(Cp)})},UC=t=>{const s=da(t.element);ut(s,a=>{t.getByDom(a).each(jf)}),Ql(t.element)},Kv=(t,s,a,l)=>{a.get().each(h=>{ji(t)});const d=s.getAttachPoint(t);sm(d,t);const g=t.getSystem().build(l);return sm(t,g),a.set(g),g},Sx=(t,s,a,l)=>{const d=Kv(t,s,a,l);return s.onOpen(t,d),d},aA=(t,s,a,l)=>a.get().map(()=>Kv(t,s,a,l)),cA=(t,s,a,l,d)=>{xp(t,s),Sx(t,s,a,l),d(),Yv(t,s)},xx=(t,s,a)=>{a.get().each(l=>{ji(t),Um(t),s.onClose(t,l),a.clear()})},Gf=(t,s,a)=>a.isOpen(),Sp=(t,s,a,l)=>Gf(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),I1=(t,s,a)=>a.get(),lA=(t,s,a,l)=>{$s(t.element,s).fold(()=>{oe(t.element,a)},d=>{vt(t.element,a,d)}),Yt(t.element,s,l)},iA=(t,s,a)=>{$(t.element,a).fold(()=>_o(t.element,s),l=>Yt(t.element,s,l))},xp=(t,s,a)=>{const l=s.getAttachPoint(t);Yt(t.element,"position",Oc.getMode(l)),lA(t,"visibility",s.cloakVisibilityAttr,"hidden")},WC=t=>zs(["top","left","right","bottom"],s=>$s(t,s).isSome()),Yv=(t,s,a)=>{WC(t.element)||_o(t.element,"position"),iA(t,"visibility",s.cloakVisibilityAttr)};var ZC=Object.freeze({__proto__:null,cloak:xp,decloak:Yv,open:Sx,openWhileCloaked:cA,close:xx,isOpen:Gf,isPartOf:Sp,getState:I1,setContent:aA}),Tp=Object.freeze({__proto__:null,events:(t,s)=>rr([Ge(l1(),(a,l)=>{xx(a,t,s)})])}),GC=[Ho("onOpen"),Ho("onClose"),Ze("isPartOf"),Ze("getAttachPoint"),Se("cloakVisibilityAttr","data-precloak-visibility")],qC=Object.freeze({__proto__:null,init:()=>{const t=Ts(),s=W("not-implemented");return wi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Wo=Ec({fields:GC,name:"sandboxing",active:Tp,apis:ZC,state:qC}),am=W("dismiss.popups"),lh=W("reposition.popups"),L1=W("mouse.released"),KC=lc([Se("isExtraPart",so),Fs("fireEventInstead",[Se("event",Ef())])]),Wm=t=>{const s=Xc("Dismissal",KC,t);return{[am()]:{schema:lc([Ze("target")]),onReceive:(a,l)=>{Wo.isOpen(a)&&(Wo.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Wo.close(a),g=>mo(a,g.event)))}}}},YC=lc([Fs("fireEventInstead",[Se("event",wy())]),ti("doReposition")]),Xv=t=>{const s=Xc("Reposition",YC,t);return{[lh()]:{onReceive:a=>{Wo.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>mo(a,l.event))}}}},XC=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},JC=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Qv=Object.freeze({__proto__:null,onLoad:XC,onUnload:JC,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),kp=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[gr((l,d)=>{XC(l,t,s)}),Jd((l,d)=>{JC(l,t,s)})]:[Ay(t,s,XC)];return rr(a)}});const e0=()=>{const t=dn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return wi({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},uA=()=>wi({readState:ee}),t0=()=>{const t=dn({}),s=dn({});return wi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>ft(t.get(),h).orThunk(()=>ft(s.get(),h)),update:h=>{const y=t.get(),w=s.get(),_={},O={};ut(h,B=>{_[B.value]=B,ft(B,"meta").each(H=>{ft(H,"text").each(z=>{O[z]=B})})}),t.set({...y,..._}),s.set({...w,...O})},clear:()=>{t.set({}),s.set({})}})};var dA=Object.freeze({__proto__:null,memory:e0,dataset:t0,manual:uA,init:t=>t.store.manager.state(t)});const F1=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},bu=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},mc=(t,s,a)=>{s.store.initialValue.each(d=>{F1(t,s,a,d)})},mA=(t,s,a)=>{a.clear()};var Ed=[es("initialValue"),Ze("getFallbackEntry"),Ze("getDataKey"),Ze("setValue"),cr("manager",{setValue:F1,getValue:bu,onLoad:mc,onUnload:mA,state:t0})];const fA=(t,s,a)=>s.store.getValue(t),Ex=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},H1=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var _p=[Ze("getValue"),Se("setValue",ee),es("initialValue"),cr("manager",{setValue:Ex,getValue:fA,onLoad:H1,onUnload:ee,state:dl.init})];const kx=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},_x=(t,s,a)=>a.get(),TR=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},ER=(t,s,a)=>{a.clear()};var Ax=[es("initialValue"),cr("manager",{setValue:kx,getValue:_x,onLoad:TR,onUnload:ER,state:e0})],Ox=[vi("store",{mode:"memory"},Ia("mode",{memory:Ax,manual:_p,dataset:Ed})),Ho("onSetValue"),Se("resetOnDom",!1)];const Wt=Ec({fields:Ox,name:"representing",active:kp,apis:Qv,extra:{setValueFrom:(t,s)=>{const a=Wt.getValue(s);Wt.setValue(t,a)}},state:dA}),fc=(t,s)=>F(t,{},We(s,a=>by(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([ss("dump",Ot)])),V1=t=>t.dump,gc=(t,s)=>({...gt(s),...t.dump}),vu={field:fc,augment:gc,get:V1},QC="placeholder",dh=fe.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),n0=t=>yo(t,"uiType"),qf=(t,s,a,l)=>t.exists(d=>d!==a.owner)?dh.single(!0,W(a)):ft(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+qo(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),z1=(t,s,a,l)=>n0(a)&&a.uiType===QC?qf(t,s,a,l):dh.single(!1,W(a)),Dx=(t,s,a,l)=>z1(t,s,a,l).fold((g,h)=>{const y=n0(a)?h(s,a.config,a.validated):h(s),w=ft(y,"components").getOr([]),_=ye(w,O=>Dx(t,s,O,l));return[{...y,components:_}]},(g,h)=>{if(n0(a)){const y=h(s,a.config,a.validated);return a.validated.preprocess.getOr(Ot)(y)}else return h(s)}),gA=(t,s,a,l)=>ye(a,d=>Dx(t,s,d,l)),hA=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,y)=>h,(h,y)=>h);return{name:W(t),required:g,used:l,replace:d}},pA=(t,s,a,l)=>{const d=Je(l,(h,y)=>hA(y,h)),g=gA(t,s,a,d);return $e(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Kf=dh.single,U1=dh.multiple,W1=W(QC),o0=fe.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ai=Se("factory",{sketch:Ot}),cm=Se("schema",[]),Yf=Ze("name"),Xf=ka("pname","pname",wo(t=>"<alloy."+Ut(t.name)+">"),Li()),bA=ss("schema",()=>[es("preprocess")]),s0=Se("defaults",W({})),r0=Se("overrides",W({})),vA=Rn([Ai,cm,Yf,Xf,s0,r0]),yA=Rn([Ai,cm,Yf,s0,r0]),CA=Rn([Ai,cm,Yf,Xf,s0,r0]),wA=Rn([Ai,bA,Yf,Ze("unit"),Xf,s0,r0]),Rx=t=>t.fold(A.some,A.none,A.some,A.some),a0=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},SA=t=>t.fold(Ot,Ot,Ot,Ot),c0=(t,s)=>a=>{const l=Xc("Converting part type",s,a);return t(l)},Hc=c0(o0.required,vA),yu=c0(o0.external,yA),Gi=c0(o0.optional,CA),l0=c0(o0.group,wA),i0=W("entirety");var Mx=Object.freeze({__proto__:null,required:Hc,external:yu,optional:Gi,group:l0,asNamedPart:Rx,name:a0,asCommon:SA,original:i0});const ew=(t,s,a,l)=>Xs(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),Nx=(t,s,a)=>{const l={},d={};return ut(a,g=>{g.fold(h=>{l[h.pname]=Kf(!0,(y,w,_)=>h.factory.sketch(ew(y,h,w,_)))},h=>{const y=s.parts[h.name];d[h.name]=W(h.factory.sketch(ew(s,h,y[i0()]),y))},h=>{l[h.pname]=Kf(!1,(y,w,_)=>h.factory.sketch(ew(y,h,w,_)))},h=>{l[h.pname]=U1(!0,(y,w,_)=>{const O=y[h.name];return We(O,B=>h.factory.sketch(Xs(h.defaults(y,B,_),B,h.overrides(y,B))))})})}),{internals:W(l),externals:W(d)}},tw=(t,s)=>{const a={};return ut(s,l=>{Rx(l).each(d=>{const g=Px(t,d.pname);a[d.name]=h=>{const y=Xc("Part: "+d.name+" in "+t,Rn(d.schema),h);return{...g,config:h,validated:y}}})}),a},Px=(t,s)=>({uiType:W1(),owner:t,name:s}),Bx=(t,s,a)=>({uiType:W1(),owner:t,name:s,config:a,validated:{}}),xA=t=>ye(t,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>ud(a.name,a.schema.concat([p2(i0())]))).toArray()),TA=t=>We(t,a0),u0=(t,s,a)=>Nx(t,s,a),nw=(t,s,a)=>pA(A.some(t),s,s.components,a),mt=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Ll=(t,s,a)=>mt(t,s,a).getOrDie("Could not find part: "+a),$x=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return ut(a,h=>{l[h]=W(g.getByUid(d[h]))}),l},ow=(t,s)=>{const a=t.getSystem();return Je(s.partUids,(l,d)=>W(a.getByUid(l)))},Z1=t=>qo(t.partUids),j1=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return ut(a,h=>{l[h]=W(g.getByUid(d[h]).getOrDie())}),l},d0=(t,s)=>{const a=TA(s);return rs(We(a,l=>({key:l,value:t+"-"+l})))},G1=t=>ka("partUids","partUids",pf(s=>d0(s.uid,t)),Li());var Ix=Object.freeze({__proto__:null,generate:tw,generateOne:Bx,schemas:xA,names:TA,substitutes:u0,components:nw,defaultUids:d0,defaultUidsSchema:G1,getAllParts:ow,getAllPartNames:Z1,getPart:mt,getPartOrDie:Ll,getParts:$x,getPartsOrDie:j1});const Lx=(t,s)=>(t.length>0?[ud("parts",t)]:[]).concat([Ze("uid"),Se("dom",{}),Se("components",[]),p2("originalSpec"),Se("debug.sketcher",{})]).concat(s),sw=(t,s,a,l,d)=>{const g=Lx(l,d);return Xc(t+" [SpecSchema]",lc(g.concat(s)),a)},rw=(t,s,a,l)=>{const d=Fx(l),g=sw(t,s,d,[],[]);return a(g,d)},jm=(t,s,a,l,d)=>{const g=Fx(d),h=xA(a),y=G1(a),w=sw(t,s,g,h,[y]),_=u0(t,w,a),O=nw(t,w,_.internals());return l(w,O,g,_.externals())},aw=t=>yo(t,"uid"),Fx=t=>aw(t)?t:{...t,uid:Gg("uid")},EA=t=>t.uid!==void 0,kA=lc([Ze("name"),Ze("factory"),Ze("configFields"),Se("apis",{}),Se("extraApis",{})]),Hx=lc([Ze("name"),Ze("factory"),Ze("configFields"),Ze("partFields"),Se("apis",{}),Se("extraApis",{})]),ai=t=>{const s=Xc("Sketcher for "+t.name,kA,t),a=g=>rw(s.name,s.configFields,s.factory,g),l=Je(s.apis,ap),d=Je(s.extraApis,(g,h)=>Gh(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},pl=t=>{const s=Xc("Sketcher for "+t.name,Hx,t),a=h=>jm(s.name,s.configFields,s.partFields,s.factory,h),l=tw(s.name,s.partFields),d=Je(s.apis,ap),g=Je(s.extraApis,(h,y)=>Gh(h,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},Ap=t=>ua("input")(t)&&bs(t,"type")!=="radio"||ua("textarea")(t);var _A=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const cw=[Ze("find")],Vo=Ec({fields:cw,name:"composing",apis:_A}),_R=["input","button","textarea","select"],Vx=(t,s,a)=>{(s.disabled()?m0:K1)(t,s)},zx=(t,s)=>s.useNative===!0&&bo(_R,na(t.element)),AR=t=>X(t.element,"disabled"),Jf=t=>{vt(t.element,"disabled","disabled")},q1=t=>{oe(t.element,"disabled")},AA=t=>bs(t.element,"aria-disabled")==="true",OA=t=>{vt(t.element,"aria-disabled","true")},DA=t=>{vt(t.element,"aria-disabled","false")},m0=(t,s,a)=>{s.disableClass.each(d=>{ar(t.element,d)}),(zx(t,s)?Jf:OA)(t),s.onDisabled(t)},K1=(t,s,a)=>{s.disableClass.each(d=>{Lr(t.element,d)}),(zx(t,s)?q1:DA)(t),s.onEnabled(t)},Ux=(t,s)=>zx(t,s)?AR(t):AA(t);var Op=Object.freeze({__proto__:null,enable:K1,disable:m0,isDisabled:Ux,onLoad:Vx,set:(t,s,a,l)=>{(l?m0:K1)(t,s)}}),Wx=Object.freeze({__proto__:null,exhibit:(t,s)=>Ci({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>rr([t2(fu(),(a,l)=>Ux(a,t)),Ay(t,s,Vx)])}),RA=[Vr("disabled",so),Se("useNative",!0),es("disableClass"),Ho("onDisabled"),Ho("onEnabled")];const In=Ec({fields:RA,name:"disabling",active:Wx,apis:Op}),i=(t,s,a,l)=>{const d=nl(t.element,"."+s.highlightClass);ut(d,g=>{zs(l,y=>jo(y.element,g))||(Lr(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),mo(y,$g())}))})},m=(t,s,a)=>i(t,s,a,[]),p=(t,s,a,l)=>{J(t,s,a,l)&&(Lr(l.element,s.highlightClass),s.onDehighlight(t,l),mo(l,$g()))},v=(t,s,a,l)=>{i(t,s,a,[l]),J(t,s,a,l)||(ar(l.element,s.highlightClass),s.onHighlight(t,l),mo(l,kf()))},T=(t,s,a)=>{lt(t,s).each(l=>{v(t,s,a,l)})},D=(t,s,a)=>{Lt(t,s).each(l=>{v(t,s,a,l)})},I=(t,s,a,l)=>{ke(t,s,a,l).fold(d=>{throw d},d=>{v(t,s,a,d)})},Z=(t,s,a,l)=>{const d=rt(t,s);Sn(d,l).each(h=>{v(t,s,a,h)})},J=(t,s,a,l)=>Si(l.element,s.highlightClass),me=(t,s,a)=>ys(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),ke=(t,s,a,l)=>{const d=nl(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>eo.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},lt=(t,s,a)=>ys(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Lt=(t,s,a)=>{const l=nl(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Dt=(t,s,a,l)=>{const d=nl(t.element,"."+s.itemClass);return Ro(d,h=>Si(h,s.highlightClass)).bind(h=>{const y=up(h,l,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},St=(t,s,a)=>Dt(t,s,a,-1),rn=(t,s,a)=>Dt(t,s,a,1),rt=(t,s,a)=>{const l=nl(t.element,"."+s.itemClass);return ea(We(l,d=>t.getSystem().getByDom(d).toOptional()))};var Et=Object.freeze({__proto__:null,dehighlightAll:m,dehighlight:p,highlight:v,highlightFirst:T,highlightLast:D,highlightAt:I,highlightBy:Z,isHighlighted:J,getHighlighted:me,getFirst:lt,getLast:Lt,getPrevious:St,getNext:rn,getCandidates:rt}),Mn=[Ze("highlightClass"),Ze("itemClass"),Ho("onHighlight"),Ho("onDehighlight")];const Nt=Ec({fields:Mn,name:"highlighting",apis:Et}),ds=[8],Ms=[9],Es=[13],Dc=[27],Da=[32],lm=[37],Qf=[38],eg=[39],Cs=[40],Fl=(t,s,a)=>{const l=fo(t.slice(0,s)),d=fo(t.slice(s+1));return Sn(l.concat(d),a)},Hl=(t,s,a)=>{const l=fo(t.slice(0,s));return Sn(l,a)},Cu=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return Sn(d.concat(l),a)},wu=(t,s,a)=>{const l=t.slice(s+1);return Sn(l,a)},Oo=t=>s=>{const a=s.raw;return bo(t,a.which)},Kr=t=>s=>Ct(t,a=>a(s)),im=t=>t.raw.shiftKey===!0,Y1=t=>t.raw.ctrlKey===!0,Oi=_e(im),to=(t,s)=>({matches:t,classification:s}),iw=(t,s)=>Sn(t,l=>l.matches(s)).map(l=>l.classification),uw=(t,s,a)=>{s.exists(d=>a.exists(g=>jo(g,d)))||Tn(t,Bg(),{prevFocus:s,newFocus:a})},f0=()=>{const t=a=>Bl(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);uw(a,d,g)}}},Zx=()=>{const t=a=>Nt.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(ee,h=>{Nt.highlight(a,h)});const g=t(a);uw(a,d,g)}}};var mh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(mh||(mh={}));const Gm=(t,s,a,l,d)=>{const g=()=>t.concat([Se("focusManager",f0()),vi("focusInside","onFocus",Rg(_=>bo(["onFocus","onEnterOrSpace","onApi"],_)?eo.value(_):eo.error("Invalid value for focusInside"))),cr("handler",w),cr("state",s),cr("sendFocusIn",d)]),h=(_,O,B,H,z)=>{const G=B(_,O,H,z);return iw(G,O.event).bind(ne=>ne(_,O,H,z))},w={schema:g,processKey:h,toEvents:(_,O)=>{const B=_.focusInside!==mh.OnFocusMode?A.none():d(_).map(G=>Ge(fd(),(ne,Ee)=>{G(ne,_,O),Ee.stop()})),H=(G,ne)=>{const Ee=Oo(Da.concat(Es))(ne.event);_.focusInside===mh.OnEnterOrSpaceMode&&Ee&&du(G,ne)&&d(_).each(le=>{le(G,_,O),ne.stop()})},z=[Ge(Uu(),(G,ne)=>{h(G,ne,a,_,O).fold(()=>{H(G,ne)},Ee=>{ne.stop()})}),Ge(a1(),(G,ne)=>{h(G,ne,l,_,O).each(Ee=>{ne.stop()})})];return rr(B.toArray().concat(z))}};return w},jx=t=>{const s=[es("onEscape"),es("onEnter"),Se("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Se("firstTabstop",0),Se("useTabstopAt",It),es("visibilitySelector")].concat([t]),a=(le,xe)=>{const Ce=le.visibilitySelector.bind(Ke=>Sd(xe,Ke)).getOr(xe);return Qs(Ce)>0},l=(le,xe)=>{const Ce=nl(le.element,xe.selector),Ke=uo(Ce,Pe=>a(xe,Pe));return A.from(Ke[xe.firstTabstop])},d=(le,xe)=>xe.focusManager.get(le).bind(Ce=>Sd(Ce,xe.selector)),g=(le,xe)=>a(le,xe)&&le.useTabstopAt(xe),h=(le,xe,Ce)=>{l(le,xe).each(Ke=>{xe.focusManager.set(le,Ke)})},y=(le,xe,Ce,Ke,Pe)=>Pe(xe,Ce,ht=>g(Ke,ht)).fold(()=>Ke.cyclic?A.some(!0):A.none(),ht=>(Ke.focusManager.set(le,ht),A.some(!0))),w=(le,xe,Ce,Ke)=>{const Pe=nl(le.element,Ce.selector);return d(le,Ce).bind(ht=>Ro(Pe,wn(jo,ht)).bind(je=>y(le,Pe,je,Ce,Ke)))},_=(le,xe,Ce)=>{const Ke=Ce.cyclic?Fl:Hl;return w(le,xe,Ce,Ke)},O=(le,xe,Ce)=>{const Ke=Ce.cyclic?Cu:wu;return w(le,xe,Ce,Ke)},B=le=>sc(le).bind(xl).exists(xe=>jo(xe,le)),H=(le,xe,Ce)=>d(le,Ce).filter(Ke=>!Ce.useTabstopAt(Ke)).bind(Ke=>(B(Ke)?_:O)(le,xe,Ce)),z=(le,xe,Ce)=>Ce.onEnter.bind(Ke=>Ke(le,xe)),G=(le,xe,Ce)=>Ce.onEscape.bind(Ke=>Ke(le,xe)),ne=W([to(Kr([im,Oo(Ms)]),_),to(Oo(Ms),O),to(Kr([Oi,Oo(Es)]),z)]),Ee=W([to(Oo(Dc),G),to(Oo(Ms),H)]);return Gm(s,dl.init,ne,Ee,()=>A.some(h))};var X1=jx(ss("cyclic",so)),xF=jx(ss("cyclic",It));const dw=(t,s,a)=>(d1(t,a,fu()),A.some(!0)),g0=(t,s,a)=>Ap(a)&&Oo(Da)(s.event)?A.none():dw(t,s,a),J1=(t,s)=>A.some(!0),MA=[Se("execute",g0),Se("useSpace",!1),Se("useEnter",!0),Se("useControlEnter",!1),Se("useDown",!1)],RR=(t,s,a)=>a.execute(t,s,t.element),MR=(t,s,a,l)=>{const d=a.useSpace&&!Ap(t.element)?Da:[],g=a.useEnter?Es:[],h=a.useDown?Cs:[],y=d.concat(g).concat(h);return[to(Oo(y),RR)].concat(a.useControlEnter?[to(Kr([Y1,Oo(Es)]),RR)]:[])},TF=(t,s,a,l)=>a.useSpace&&!Ap(t.element)?[to(Oo(Da),J1)]:[];var NR=Gm(MA,dl.init,MR,TF,()=>A.none());const NA=()=>{const t=Ts();return wi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var EF=Object.freeze({__proto__:null,flatgrid:NA,init:t=>t.state(t)});const PR=t=>(s,a,l,d)=>{const g=t(s.element);return mw(g,s,a,l,d)},PA=(t,s)=>{const a=Mv(t,s);return PR(a)},BA=(t,s)=>{const a=Mv(s,t);return PR(a)},$A=t=>(s,a,l,d)=>mw(t,s,a,l,d),mw=(t,s,a,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),Gx=$A,BR=$A,IA=$A,$R=t=>t.offsetWidth<=0&&t.offsetHeight<=0,IR=t=>!$R(t.dom),kF=(t,s)=>Ro(t,s).map(a=>({index:a,candidates:t})),qu=(t,s,a)=>{const l=h=>jo(h,s),d=nl(t,a),g=uo(d,IR);return kF(g,l)},LR=(t,s)=>Ro(t,a=>jo(s,a)),FR=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(h=>{const y=h.row*a+h.column;return y>=0&&y<t.length?A.some(t[y]):A.none()})},HR=(t,s,a,l,d)=>FR(t,s,l,(g,h)=>{const w=g===a-1?t.length-g*l:l,_=up(h,d,0,w-1);return A.some({row:g,column:_})}),VR=(t,s,a,l,d)=>FR(t,s,l,(g,h)=>{const y=up(g,d,0,a-1),_=y===a-1?t.length-y*l:l,O=Zu(h,0,_-1);return A.some({row:y,column:O})}),_F=(t,s,a,l)=>HR(t,s,a,l,1),h0=(t,s,a,l)=>HR(t,s,a,l,-1),LA=(t,s,a,l)=>VR(t,s,a,l,-1),AF=(t,s,a,l)=>VR(t,s,a,l,1),FA=[Ze("selector"),Se("execute",g0),Nl("onEscape"),Se("captureTab",!1),lv()],qx=(t,s,a)=>{ys(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},HA=(t,s)=>s.focusManager.get(t).bind(a=>Sd(a,s.selector)),OF=(t,s,a,l)=>HA(t,a).bind(d=>a.execute(t,s,d)),Kx=t=>(s,a,l,d)=>qu(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),zR=(t,s,a)=>a.captureTab?A.some(!0):A.none(),DF=(t,s,a)=>a.onEscape(t,s),UR=Kx(h0),WR=Kx(_F),ZR=Kx(LA),VA=Kx(AF),RF=W([to(Oo(lm),PA(UR,WR)),to(Oo(eg),BA(UR,WR)),to(Oo(Qf),Gx(ZR)),to(Oo(Cs),BR(VA)),to(Kr([im,Oo(Ms)]),zR),to(Kr([Oi,Oo(Ms)]),zR),to(Oo(Da.concat(Es)),OF)]),MF=W([to(Oo(Dc),DF),to(Oo(Da),J1)]);var NF=Gm(FA,NA,RF,MF,()=>A.some(qx));const jR=(t,s,a,l,d)=>{const g=y=>na(y)==="button"&&bs(y,"disabled")==="disabled",h=(y,w,_)=>d(y,w,l,0,_.length-1,_[w],O=>g(_[O])?h(y,O,_):A.from(_[O]));return qu(t,a,s).bind(y=>{const w=y.index,_=y.candidates;return h(w,w,_)})},Q1=(t,s,a,l)=>jR(t,s,a,l,(d,g,h,y,w,_,O)=>{const B=Zu(g+h,y,w);return B===d?A.from(_):O(B)}),fw=(t,s,a,l)=>jR(t,s,a,l,(d,g,h,y,w,_,O)=>{const B=up(g,h,y,w);return B===d?A.none():O(B)}),PF=[Ze("selector"),Se("getInitial",A.none),Se("execute",g0),Nl("onEscape"),Se("executeOnMove",!1),Se("allowVertical",!0),Se("allowHorizontal",!0),Se("cycles",!0)],zA=(t,s)=>s.focusManager.get(t).bind(a=>Sd(a,s.selector)),UA=(t,s,a)=>zA(t,a).bind(l=>a.execute(t,s,l)),GR=(t,s,a)=>{s.getInitial(t).orThunk(()=>ys(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},WA=(t,s,a)=>(a.cycles?fw:Q1)(t,a.selector,s,-1),ZA=(t,s,a)=>(a.cycles?fw:Q1)(t,a.selector,s,1),jA=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?UA(s,a,l):A.some(!0)),qR=(t,s,a)=>a.onEscape(t,s),BF=(t,s,a,l)=>{const d=[...a.allowHorizontal?lm:[]].concat(a.allowVertical?Qf:[]),g=[...a.allowHorizontal?eg:[]].concat(a.allowVertical?Cs:[]);return[to(Oo(d),jA(PA(WA,ZA))),to(Oo(g),jA(BA(WA,ZA))),to(Oo(Es),UA),to(Oo(Da),UA)]},$F=W([to(Oo(Da),J1),to(Oo(Dc),qR)]);var IF=Gm(PF,dl.init,BF,$F,()=>A.some(GR));const p0=(t,s,a)=>A.from(t[s]).bind(l=>A.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),KR=(t,s,a,l)=>{const g=t[s].length,h=up(a,l,0,g-1);return p0(t,s,h)},gw=(t,s,a,l)=>{const d=up(a,l,0,t.length-1),g=t[d].length,h=Zu(s,0,g-1);return p0(t,d,h)},YR=(t,s,a,l)=>{const g=t[s].length,h=Zu(a+l,0,g-1);return p0(t,s,h)},GA=(t,s,a,l)=>{const d=Zu(a+l,0,t.length-1),g=t[d].length,h=Zu(s,0,g-1);return p0(t,d,h)},Di=(t,s,a)=>KR(t,s,a,1),LF=(t,s,a)=>KR(t,s,a,-1),XR=(t,s,a)=>gw(t,a,s,-1),JR=(t,s,a)=>gw(t,a,s,1),FF=(t,s,a)=>YR(t,s,a,-1),QR=(t,s,a)=>YR(t,s,a,1),eM=(t,s,a)=>GA(t,a,s,-1),HF=(t,s,a)=>GA(t,a,s,1),VF=[ud("selectors",[Ze("row"),Ze("cell")]),Se("cycles",!0),Se("previousSelector",A.none),Se("execute",g0)],zF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ys(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},UF=(t,s,a)=>Bl(t.element).bind(l=>a.execute(t,s,l)),tM=(t,s)=>We(t,a=>nl(a,s.selectors.cell)),Yx=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return Sd(l,d.selectors.row).bind(h=>{const y=nl(h,d.selectors.cell);return LR(y,l).bind(w=>{const _=nl(a,d.selectors.row);return LR(_,h).bind(O=>{const B=tM(_,d);return g(B,O,w).map(H=>H.cell)})})})},nM=Yx(LF,FF),qA=Yx(Di,QR),oM=Yx(XR,eM),sM=Yx(JR,HF),WF=W([to(Oo(lm),PA(nM,qA)),to(Oo(eg),BA(nM,qA)),to(Oo(Qf),Gx(oM)),to(Oo(Cs),BR(sM)),to(Oo(Da.concat(Es)),UF)]),ZF=W([to(Oo(Da),J1)]);var jF=Gm(VF,dl.init,WF,ZF,()=>A.some(zF));const GF=[Ze("selector"),Se("execute",g0),Se("moveOnTab",!1)],KA=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),rM=(t,s,a)=>{ys(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},fh=(t,s,a)=>fw(t,a.selector,s,-1),YA=(t,s,a)=>fw(t,a.selector,s,1),aM=(t,s,a,l)=>a.moveOnTab?IA(fh)(t,s,a,l):A.none(),cM=(t,s,a,l)=>a.moveOnTab?IA(YA)(t,s,a,l):A.none(),qF=W([to(Oo(Qf),IA(fh)),to(Oo(Cs),IA(YA)),to(Kr([im,Oo(Ms)]),aM),to(Kr([Oi,Oo(Ms)]),cM),to(Oo(Es),KA),to(Oo(Da),KA)]),b0=W([to(Oo(Da),J1)]);var KF=Gm(GF,dl.init,qF,b0,()=>A.some(rM));const YF=[Nl("onSpace"),Nl("onEnter"),Nl("onShiftEnter"),Nl("onLeft"),Nl("onRight"),Nl("onTab"),Nl("onShiftTab"),Nl("onUp"),Nl("onDown"),Nl("onEscape"),Se("stopSpaceKeyup",!1),es("focusIn")],lM=(t,s,a)=>[to(Oo(Da),a.onSpace),to(Kr([Oi,Oo(Es)]),a.onEnter),to(Kr([im,Oo(Es)]),a.onShiftEnter),to(Kr([im,Oo(Ms)]),a.onShiftTab),to(Kr([Oi,Oo(Ms)]),a.onTab),to(Oo(Qf),a.onUp),to(Oo(Cs),a.onDown),to(Oo(lm),a.onLeft),to(Oo(eg),a.onRight),to(Oo(Da),a.onSpace)],XF=(t,s,a)=>[...a.stopSpaceKeyup?[to(Oo(Da),J1)]:[],to(Oo(Dc),a.onEscape)];var JF=Gm(YF,dl.init,lM,XF,t=>t.focusIn);const QF=X1.schema(),iM=xF.schema(),XA=IF.schema(),JA=NF.schema(),e6=jF.schema(),Dp=NR.schema(),uM=KF.schema(),dM=JF.schema();var t6=Object.freeze({__proto__:null,acyclic:QF,cyclic:iM,flow:XA,flatgrid:JA,matrix:e6,execution:Dp,menu:uM,special:dM});const n6=t=>Ar(t,"setGridSize"),mn=a2({branchKey:"mode",branches:t6,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{n6(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:EF}),v0=(t,s)=>{Hf(()=>{wp(t,s,()=>We(s,t.getSystem().build))},t.element)},QA=(t,s)=>{Hf(()=>{zC(t,s,()=>E1(t.element,s,t.getSystem().buildOrPatch))},t.element)},eO=(t,s,a,l)=>{qv(s);const d=pu(t.element,a,l,t.getSystem().buildOrPatch);HC(t,d),t.syncComponents()},tg=(t,s,a)=>{const l=t.getSystem().build(a);ah(t,l,s)},Rp=(t,s,a,l)=>{Um(s),tg(t,(d,g)=>Ta(d,g,a),l)},o6=(t,s,a,l)=>(s.reuseDom?QA:v0)(t,l),s6=(t,s,a,l)=>{tg(t,Sc,l)},mM=(t,s,a,l)=>{tg(t,cf,l)},gh=(t,s,a,l)=>{const d=y0(t);Sn(d,h=>jo(l.element,h.element)).each(Um)},y0=(t,s)=>t.components(),fM=(t,s,a,l,d)=>{const g=y0(t);return A.from(g[l]).map(h=>(d.fold(()=>Um(h),y=>{(s.reuseDom?eO:Rp)(t,h,l,y)}),h))};var gM=Object.freeze({__proto__:null,append:s6,prepend:mM,remove:gh,replaceAt:fM,replaceBy:(t,s,a,l,d)=>{const g=y0(t);return Ro(g,l).bind(h=>fM(t,s,a,h,d))},set:o6,contents:y0});const Zn=Ec({fields:[jr("reuseDom",!0)],name:"replacing",apis:gM}),tO=(t,s)=>{const a=rr(s);return Ec({fields:[Ze("enabled")],name:t,active:{events:W(a)}})},ro=(t,s)=>{const a=tO(t,s);return{key:t,value:{config:{},me:a,configAsRaw:W({}),initialConfig:{},state:dl}}},hM=(t,s)=>{s.ignore||(Vi(t.element),s.onFocus(t))};var Xx=Object.freeze({__proto__:null,focus:hM,blur:(t,s)=>{s.ignore||A1(t.element)},isFocused:t=>O1(t.element)}),bM=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ci(a)},events:t=>rr([Ge(fd(),(s,a)=>{hM(s,t),a.stop()})].concat(t.stopMousedown?[Ge(Dl(),(s,a)=>{a.event.prevent()})]:[]))}),a6=[Ho("onFocus"),Se("stopMousedown",!1),Se("ignore",!1)];const Fn=Ec({fields:a6,name:"focusing",active:bM,apis:Xx}),vM=t=>({init:()=>{const a=dn(t);return{get:()=>a.get(),set:y=>a.set(y),clear:()=>a.set(t),readState:()=>a.get()}}}),yM=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},CM=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?ar(t.element,l):Lr(t.element,l)})},hw=(t,s,a,l)=>{const d=a.get();a.set(l),CM(t,s,a),yM(t,s,a),d!==l&&s.onToggled(t,l)},Jx=(t,s,a)=>{hw(t,s,a,!a.get())},c6=(t,s,a)=>{hw(t,s,a,!0)},l6=(t,s,a)=>{hw(t,s,a,!1)},i6=(t,s,a)=>a.get(),wM=(t,s,a)=>{hw(t,s,a,s.selected)};var SM=Object.freeze({__proto__:null,onLoad:wM,toggle:Jx,isOn:i6,on:c6,off:l6,set:hw}),xM=Object.freeze({__proto__:null,exhibit:()=>Ci({}),events:(t,s)=>{const a=g1(t,s,Jx),l=Ay(t,s,wM);return rr(gn([t.toggleOnExecute?[a]:[],[l]]))}});const pw=(t,s,a)=>{vt(t.element,"aria-pressed",a),s.syncWithExpanded&&Qx(t,s,a)},u6=(t,s,a)=>{vt(t.element,"aria-selected",a)},bw=(t,s,a)=>{vt(t.element,"aria-checked",a)},Qx=(t,s,a)=>{vt(t.element,"aria-expanded",a)};var TM=[Se("selected",!1),es("toggleClass"),Se("toggleOnExecute",!0),Ho("onToggled"),vi("aria",{mode:"none"},Ia("mode",{pressed:[Se("syncWithExpanded",!1),cr("update",pw)],checked:[cr("update",bw)],expanded:[cr("update",Qx)],selected:[cr("update",u6)],none:[cr("update",ee)]}))];const po=Ec({fields:TM,name:"toggling",active:xM,apis:SM,state:vM(!1)}),EM=()=>{const t=(s,a)=>{a.stop(),_f(s)};return[Ge(Ng(),t),Ge(gd(),t),pd(Ao()),pd(Dl())]},eT=t=>{const s=a=>Wu((l,d)=>{a(l),d.stop()});return rr(gn([t.map(s).toArray(),EM()]))},oO="alloy.item-hover",kM="alloy.item-focus",sO="alloy.item-toggled",_M=t=>{(Bl(t.element).isNone()||Fn.isFocused(t))&&(Fn.isFocused(t)||Fn.focus(t),Tn(t,oO,{item:t}))},AM=t=>{Tn(t,kM,{item:t})},OM=(t,s)=>{Tn(t,sO,{item:t,state:s})},vw=W(oO),rO=W(kM),aO=W(sO),d6=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Ot),m6=(t,s)=>({aria:{mode:s?"selected":"checked"},...wr(t,(a,l)=>l!=="exclusive"),onToggled:(a,l)=>{nt(t.onToggled)&&t.onToggled(a,l),OM(a,l)}}),f6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:d6(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:vu.augment(t.itemBehaviours,[t.toggling.fold(po.revoke,s=>po.config(m6(s,t.role.exists(a=>a==="option")))),Fn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{AM(s)}}),mn.config({mode:"execution"}),Wt.config({store:{mode:"memory",initialValue:t.data}}),ro("item-type-events",[...EM(),Ge(qd(),_M),Ge(c1(),Fn.focus)])]),components:t.components,eventOrder:t.eventOrder}),g6=[Ze("data"),Ze("components"),Ze("dom"),Se("hasSubmenu",!1),es("toggling"),es("role"),vu.field("itemBehaviours",[po,Fn,mn,Wt]),Se("ignoreFocus",!1),Se("domModification",{}),cr("builder",f6),Se("eventOrder",{})],DM=t=>({dom:t.dom,components:t.components,events:rr([ky(c1())])}),RM=[Ze("dom"),Ze("components"),cr("builder",DM)],cO=W("item-widget"),lO=W([Hc({name:"widget",overrides:t=>({behaviours:gt([Wt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),h6=t=>{const s=u0(cO(),t,lO()),a=nw(cO(),t,s.internals()),l=g=>mt(g,t,"widget").map(h=>(mn.focusIn(h),h)),d=(g,h)=>Ap(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:a,domModification:t.domModification,events:rr([Wu((g,h)=>{l(g).each(y=>{h.stop()})}),Ge(qd(),_M),Ge(c1(),(g,h)=>{t.autofocus?l(g):Fn.focus(g)})]),behaviours:vu.augment(t.widgetBehaviours,[Wt.config({store:{mode:"memory",initialValue:t.data}}),Fn.config({ignore:t.ignoreFocus,onFocus:g=>{AM(g)}}),mn.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:hr(),onLeft:d,onRight:d,onEscape:(g,h)=>!Fn.isFocused(g)&&!t.autofocus?(Fn.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},p6=[Ze("uid"),Ze("data"),Ze("components"),Ze("dom"),Se("autofocus",!1),Se("ignoreFocus",!1),vu.field("widgetBehaviours",[Wt,Fn,mn]),Se("domModification",{}),G1(lO()),cr("builder",h6)],b6=Ia("type",{widget:p6,item:g6,separator:RM}),v6=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),MM=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),y6=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),C6=W([l0({factory:{sketch:t=>{const s=Xc("menu.spec item",b6,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>yo(s,"uid")?s:{...s,uid:Gg("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),w6=W([pa("role"),Ze("value"),Ze("items"),Ze("dom"),Ze("components"),Se("eventOrder",{}),fc("menuBehaviours",[Nt,Wt,Vo,mn]),vi("movement",{mode:"menu",moveOnTab:!0},Ia("mode",{grid:[lv(),cr("config",v6)],matrix:[cr("config",MM),Ze("rowSelector"),Se("previousSelector",A.none)],menu:[Se("moveOnTab",!0),cr("config",y6)]})),f_(),Se("fakeFocus",!1),Se("focusManager",f0()),Ho("onHighlight"),Ho("onDehighlight"),Se("showMenuRole",!0)]),NM=W("alloy.menu-focus"),S6=(t,s)=>{const a=nl(t.element,'[role="menuitemradio"][aria-checked="true"]');ut(a,l=>{jo(l,s.element)||t.getSystem().getByDom(l).each(d=>{po.off(d)})})},eb=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gc(t.menuBehaviours,[Nt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Wt.config({store:{mode:"memory",initialValue:t.value}}),Vo.config({find:A.some}),mn.config(t.movement.config(t,t.movement))]),events:rr([Ge(rO(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(y=>{Nt.highlight(d,y),g.stop(),Tn(d,NM(),{menu:d,item:y})})}),Ge(vw(),(d,g)=>{const h=g.event.item;Nt.highlight(d,h)}),Ge(aO(),(d,g)=>{const{item:h,state:y}=g.event;y&&bs(h.element,"role")==="menuitemradio"&&S6(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),tb=pl({name:"Menu",configFields:w6(),partFields:C6(),factory:eb}),x6=t=>on(t,(s,a)=>({k:s,v:a})),Mp=(t,s,a,l)=>ft(a,l).bind(d=>ft(t,d).bind(g=>{const h=Mp(t,s,a,g);return A.some([g].concat(h))})).getOr([]),PM=(t,s)=>{const a={};$e(t,(h,y)=>{ut(h,w=>{a[w]=y})});const l=s,d=x6(s),g=Je(d,(h,y)=>[y].concat(Mp(a,l,d,y)));return Je(a,h=>ft(g,h).getOr([h]))},T6=()=>{const t=dn({}),s=dn({}),a=dn({}),l=Ts(),d=dn({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},h=()=>l.get().isNone(),y=(Pe,ht)=>{s.set({...s.get(),[Pe]:{type:"prepared",menu:ht}})},w=(Pe,ht,Rt,je)=>{l.set(Pe),t.set(Rt),s.set(ht),d.set(je);const cn=PM(je,Rt);a.set(cn)},_=Pe=>fs(t.get(),(ht,Rt)=>ht===Pe),O=(Pe,ht,Rt)=>ne(Pe).bind(je=>_(Pe).bind(cn=>ht(cn).map(Zt=>({triggeredMenu:je,triggeringItem:Zt,triggeringPath:Rt})))),B=(Pe,ht)=>{const Rt=uo(le(Pe).toArray(),je=>ne(je).isSome());return ft(a.get(),Pe).bind(je=>{const cn=fo(Rt.concat(je)),Zt=ye(cn,(Dn,yn)=>O(Dn,ht,cn.slice(0,yn+1)).fold(()=>la(l.get(),Dn)?[]:[A.none()],as=>[A.some(as)]));return Yo(Zt)})},H=Pe=>ft(t.get(),Pe).map(ht=>{const Rt=ft(a.get(),Pe).getOr([]);return[ht].concat(Rt)}),z=Pe=>ft(a.get(),Pe).bind(ht=>ht.length>1?A.some(ht.slice(1)):A.none()),G=Pe=>ft(a.get(),Pe),ne=Pe=>Ee(Pe).bind(hh),Ee=Pe=>ft(s.get(),Pe),le=Pe=>ft(t.get(),Pe);return{setMenuBuilt:y,setContents:w,expand:H,refresh:G,collapse:z,lookupMenu:Ee,lookupItem:le,otherMenus:Pe=>{const ht=d.get();return Bt(qo(ht),Pe)},getPrimary:()=>l.get().bind(ne),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:B}},hh=t=>t.type==="prepared"?A.some(t.menu):A.none(),BM={init:T6,extractPreparedMenu:hh},$M=Ut("tiered-menu-item-highlight"),Ku=Ut("tiered-menu-item-dehighlight");var ci;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ci||(ci={}));const IM=(t,s)=>{const a=Ts(),l=(xt,tn,no)=>Je(no,($n,kn)=>{const Yn=()=>tb.sketch({...$n,value:kn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Vs,gs)=>{Tn(Vs,$M,{menuComp:Vs,itemComp:gs})},onDehighlight:(Vs,gs)=>{Tn(Vs,Ku,{menuComp:Vs,itemComp:gs})},focusManager:t.fakeFocus?Zx():f0()});return kn===tn?{type:"prepared",menu:xt.getSystem().build(Yn())}:{type:"notbuilt",nbMenu:Yn}}),d=BM.init(),g=xt=>{const tn=l(xt,t.data.primary,t.data.menus),no=w();return d.setContents(t.data.primary,tn,t.data.expansions,no),d.getPrimary()},h=xt=>Wt.getValue(xt).value,y=(xt,tn,no)=>ls(tn,$n=>{if(!$n.getSystem().isConnected())return A.none();const kn=Nt.getCandidates($n);return Sn(kn,Yn=>h(Yn)===no)}),w=xt=>Je(t.data.menus,(tn,no)=>ye(tn.items,$n=>$n.type==="separator"?[]:[$n.data.value])),_=Nt.highlight,O=(xt,tn)=>{_(xt,tn),Nt.getHighlighted(tn).orThunk(()=>Nt.getFirst(tn)).each(no=>{t.fakeFocus?Nt.highlight(tn,no):d1(xt,no.element,c1())})},B=(xt,tn)=>ea(We(tn,no=>xt.lookupMenu(no).bind($n=>$n.type==="prepared"?A.some($n.menu):A.none()))),H=(xt,tn,no)=>{const $n=B(tn,tn.otherMenus(no));ut($n,kn=>{xi(kn.element,[t.markers.backgroundMenu]),t.stayInDom||Zn.remove(xt,kn)})},z=xt=>a.get().getOrThunk(()=>{const tn={},no=nl(xt.element,`.${t.markers.item}`),$n=uo(no,kn=>bs(kn,"aria-haspopup")==="true");return ut($n,kn=>{xt.getSystem().getByDom(kn).each(Yn=>{const Vs=h(Yn);tn[Vs]=Yn})}),a.set(tn),tn}),G=(xt,tn)=>{const no=z(xt);$e(no,($n,kn)=>{const Yn=bo(tn,kn);vt($n.element,"aria-expanded",Yn)})},ne=(xt,tn,no)=>A.from(no[0]).bind($n=>tn.lookupMenu($n).bind(kn=>{if(kn.type==="notbuilt")return A.none();{const Yn=kn.menu,Vs=B(tn,no.slice(1));return ut(Vs,gs=>{ar(gs.element,t.markers.backgroundMenu)}),ko(Yn.element)||Zn.append(xt,fl(Yn)),xi(Yn.element,[t.markers.backgroundMenu]),O(xt,Yn),H(xt,tn,no),A.some(Yn)}}));let Ee;(function(xt){xt[xt.HighlightSubmenu=0]="HighlightSubmenu",xt[xt.HighlightParent=1]="HighlightParent"})(Ee||(Ee={}));const le=(xt,tn,no)=>{if(no.type==="notbuilt"){const $n=xt.getSystem().build(no.nbMenu());return d.setMenuBuilt(tn,$n),$n}else return no.menu},xe=(xt,tn,no=Ee.HighlightSubmenu)=>{if(tn.hasConfigured(In)&&In.isDisabled(tn))return A.some(tn);{const $n=h(tn);return d.expand($n).bind(kn=>(G(xt,kn),A.from(kn[0]).bind(Yn=>d.lookupMenu(Yn).bind(Vs=>{const gs=le(xt,Yn,Vs);return ko(gs.element)||Zn.append(xt,fl(gs)),t.onOpenSubmenu(xt,tn,gs,fo(kn)),no===Ee.HighlightSubmenu?(Nt.highlightFirst(gs),ne(xt,d,kn)):(Nt.dehighlightAll(gs),A.some(tn))}))))}},Ce=(xt,tn)=>{const no=h(tn);return d.collapse(no).bind($n=>(G(xt,$n),ne(xt,d,$n).map(kn=>(t.onCollapseMenu(xt,tn,kn),kn))))},Ke=(xt,tn)=>{const no=h(tn);return d.refresh(no).bind($n=>(G(xt,$n),ne(xt,d,$n)))},Pe=(xt,tn)=>Ap(tn.element)?A.none():xe(xt,tn,Ee.HighlightSubmenu),ht=(xt,tn)=>Ap(tn.element)?A.none():Ce(xt,tn),Rt=(xt,tn)=>Ce(xt,tn).orThunk(()=>t.onEscape(xt,tn).map(()=>xt)),je=xt=>(tn,no)=>Sd(no.getSource(),`.${t.markers.item}`).bind($n=>tn.getSystem().getByDom($n).toOptional().bind(kn=>xt(tn,kn).map(It))),cn=rr([Ge(NM(),(xt,tn)=>{const no=tn.event.item;d.lookupItem(h(no)).each(()=>{const $n=tn.event.menu;Nt.highlight(xt,$n);const kn=h(tn.event.item);d.refresh(kn).each(Yn=>H(xt,d,Yn))})}),Wu((xt,tn)=>{const no=tn.event.target;xt.getSystem().getByDom(no).each($n=>{h($n).indexOf("collapse-item")===0&&Ce(xt,$n),xe(xt,$n,Ee.HighlightSubmenu).fold(()=>{t.onExecute(xt,$n)},ee)})}),gr((xt,tn)=>{g(xt).each(no=>{Zn.append(xt,fl(no)),t.onOpenMenu(xt,no),t.highlightOnOpen===ci.HighlightMenuAndItem?O(xt,no):t.highlightOnOpen===ci.HighlightJustMenu&&_(xt,no)})}),Ge($M,(xt,tn)=>{t.onHighlightItem(xt,tn.event.menuComp,tn.event.itemComp)}),Ge(Ku,(xt,tn)=>{t.onDehighlightItem(xt,tn.event.menuComp,tn.event.itemComp)}),...t.navigateOnHover?[Ge(vw(),(xt,tn)=>{const no=tn.event.item;Ke(xt,no),xe(xt,no,Ee.HighlightParent),t.onHover(xt,no)})]:[]]),Zt=xt=>Nt.getHighlighted(xt).bind(Nt.getHighlighted),Dn=xt=>{Zt(xt).each(tn=>{Ce(xt,tn)})},yn=xt=>{d.getPrimary().each(tn=>{O(xt,tn)})},as=xt=>A.from(xt.components()[0]).filter(tn=>bs(tn.element,"role")==="menu"),Eo={collapseMenu:Dn,highlightPrimary:yn,repositionMenus:xt=>{d.getPrimary().bind(no=>Zt(xt).bind($n=>{const kn=h($n),Yn=ur(d.getMenus()),Vs=ea(We(Yn,BM.extractPreparedMenu));return d.getTriggeringPath(kn,gs=>y(xt,Vs,gs))}).map($n=>({primary:no,triggeringPath:$n}))).fold(()=>{as(xt).each(no=>{t.onRepositionMenu(xt,no,[])})},({primary:no,triggeringPath:$n})=>{t.onRepositionMenu(xt,no,$n)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gc(t.tmenuBehaviours,[mn.config({mode:"special",onRight:je(Pe),onLeft:je(ht),onEscape:je(Rt),focusIn:(xt,tn)=>{d.getPrimary().each(no=>{d1(xt,no.element,c1())})}}),Nt.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Vo.config({find:xt=>Nt.getHighlighted(xt)}),Zn.config({})]),eventOrder:t.eventOrder,apis:Eo,events:cn}},LM=W("collapse-item"),E6=(t,s,a)=>({primary:t,menus:s,expansions:a}),tT=(t,s)=>({primary:t,menus:vs(t,s),expansions:{}}),FM=t=>({value:Ut(LM()),meta:{text:t}}),nb=ai({name:"TieredMenu",configFields:[$m("onExecute"),$m("onEscape"),hu("onOpenMenu"),hu("onOpenSubmenu"),Ho("onRepositionMenu"),Ho("onCollapseMenu"),Se("highlightOnOpen",ci.HighlightMenuAndItem),ud("data",[Ze("primary"),Ze("menus"),Ze("expansions")]),Se("fakeFocus",!1),Ho("onHighlightItem"),Ho("onDehighlightItem"),Ho("onHover"),jg(),Ze("dom"),Se("navigateOnHover",!0),Se("stayInDom",!1),fc("tmenuBehaviours",[mn,Nt,Vo,Zn]),Se("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:IM,extraApis:{tieredData:E6,singleData:tT,collapseItem:FM}}),k6=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>xv(),onRtl:()=>Kg()}}:{},y=_=>_.length===2,w=_=>y(_)?h:{};return nb.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Wo.close(s),t.onEscape.map(_=>_(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(_,O)=>{Oc.positionWithinBounds(g().getOrDie(),O,a,d())},onOpenSubmenu:(_,O,B,H)=>{const z=g().getOrDie();Oc.position(z,B,{anchor:{type:"submenu",item:O,...w(H)}})},onRepositionMenu:(_,O,B)=>{const H=g().getOrDie();Oc.positionWithinBounds(H,O,a,d()),ut(B,z=>{const G=w(z.triggeringPath);Oc.position(H,z.triggeredMenu,{anchor:{type:"submenu",item:z.triggeringItem,...G}})})}})},nT=(t,s)=>{const a=(H,z)=>t.getRelated(H).exists(ne=>Bf(ne,z)),l=(H,z)=>{Wo.setContent(H,z)},d=(H,z,G)=>{const ne=A.none;g(H,z,G,ne)},g=(H,z,G,ne)=>{const Ee=t.lazySink(H).getOrDie();Wo.openWhileCloaked(H,z,()=>Oc.positionWithinBounds(Ee,H,G,ne())),Wt.setValue(H,A.some({mode:"position",config:G,getBounds:ne}))},h=(H,z,G)=>{y(H,z,G,A.none)},y=(H,z,G,ne)=>{const Ee=k6(t,H,z,G,ne);Wo.open(H,Ee),Wt.setValue(H,A.some({mode:"menu",menu:Ee}))},w=H=>{Wo.isOpen(H)&&(Wt.setValue(H,A.none()),Wo.close(H))},_=H=>Wo.getState(H),O=H=>{Wo.isOpen(H)&&Wt.getValue(H).each(z=>{switch(z.mode){case"menu":Wo.getState(H).each(nb.repositionMenus);break;case"position":const G=t.lazySink(H).getOrDie();Oc.positionWithinBounds(G,H,z.config,z.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:y,hide:w,getContent:_,reposition:O,isOpen:Wo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:gc(t.inlineBehaviours,[Wo.config({isPartOf:(H,z,G)=>Bf(z,G)||a(H,G),getAttachPoint:H=>t.lazySink(H).getOrDie(),onOpen:H=>{t.onShow(H)},onClose:H=>{t.onHide(H)}}),Wt.config({store:{mode:"memory",initialValue:A.none()}}),ri.config({channels:{...Wm({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...Xv({...t.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:B}},Er=ai({name:"InlineView",configFields:[Ze("lazySink"),Ho("onShow"),Ho("onHide"),Fu("onEscape"),fc("inlineBehaviours",[Wo,Wt,ri]),Fs("fireDismissalEventInstead",[Se("event",Ef())]),Fs("fireRepositionEventInstead",[Se("event",wy())]),Se("getRelated",A.none),Se("isExtraPart",so),Se("eventOrder",A.none)],factory:nT,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var yw=tinymce.util.Tools.resolve("tinymce.util.Delay"),ob=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),HM=tinymce.util.Tools.resolve("tinymce.EditorManager"),C0=tinymce.util.Tools.resolve("tinymce.Env"),Su;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Su||(Su={}));var w0;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(w0||(w0={}));const tr=t=>s=>s.options.get(t),Cw=t=>s=>A.from(t(s)),VM=t=>{const s=C0.deviceType.isPhone(),a=C0.deviceType.isTablet()||s,l=t.options.register,d=h=>Mt(h)||h===!1,g=h=>Mt(h)||Un(h);l("skin",{processor:h=>Mt(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:ob.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>Mt(h)||En(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>En(h)||Mt(h)||Cn(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),lo(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:w0.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||En(h),default:!C0.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},oT=tr("readonly"),iO=tr("height"),sb=tr("width"),S0=Cw(tr("min_width")),sT=Cw(tr("min_height")),ww=Cw(tr("max_width")),uO=Cw(tr("max_height")),zM=Cw(tr("style_formats")),UM=tr("style_formats_merge"),WM=tr("style_formats_autohide"),rT=tr("content_langs"),dO=tr("removed_menuitems"),rb=tr("toolbar_mode"),aT=tr("toolbar_groups"),mO=tr("toolbar_location"),ZM=tr("fixed_toolbar_container"),_6=tr("fixed_toolbar_container_target"),jM=tr("toolbar_persist"),GM=tr("toolbar_sticky_offset"),fO=tr("menubar"),cT=tr("toolbar"),qM=tr("file_picker_callback"),lT=tr("file_picker_validator_handler"),gO=tr("font_size_input_default_unit"),hO=tr("file_picker_types"),KM=tr("typeahead_urls"),iT=tr("anchor_top"),YM=tr("anchor_bottom"),XM=tr("draggable_modal"),JM=tr("statusbar"),QM=tr("elementpath"),pO=tr("branding"),bO=tr("resize"),uT=tr("paste_as_text"),eN=tr("sidebar_show"),Sw=tr("promotion"),tN=tr("help_accessibility"),nN=tr("default_font_stack"),vO=t=>t.options.get("skin")===!1,dT=t=>t.options.get("menubar")!==!1,yO=t=>{const s=t.options.get("skin_url");if(vO(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return HM.baseURL+"/skins/ui/"+a}},mT=t=>A.from(t.options.get("skin_url")),CO=t=>t.options.get("line_height_formats").split(" "),fT=t=>{const s=cT(t),a=Mt(s),l=Cn(s)&&s.length>0;return!ab(t)&&(l||a||s===!0)},wO=t=>{const s=lo(9,l=>t.options.get("toolbar"+(l+1))),a=uo(s,Mt);return pn(a.length>0,a)},ab=t=>wO(t).fold(()=>{const s=cT(t);return De(s,Mt)&&s.length>0},It),ph=t=>mO(t)===w0.bottom,oN=t=>{var s;if(!t.inline)return A.none();const a=(s=ZM(t))!==null&&s!==void 0?s:"";if(a.length>0)return ys(oo(),a);const l=_6(t);return Xe(l)?A.some(pe.fromDom(l)):A.none()},x0=t=>t.inline&&oN(t).isSome(),xw=t=>oN(t).getOrThunk(()=>ae(U(pe.fromDom(t.getElement())))),gT=t=>t.inline&&!dT(t)&&!fT(t)&&!ab(t),T0=t=>(t.options.get("toolbar_sticky")||t.inline)&&!x0(t)&&!gT(t),Np=t=>!x0(t)&&t.options.get("ui_mode")==="split",SO=t=>{const s=t.options.get("menu");return Je(s,a=>({...a,items:a.items}))};var A6=Object.freeze({__proto__:null,get ToolbarMode(){return Su},get ToolbarLocation(){return w0},register:VM,getSkinUrl:yO,getSkinUrlOption:mT,isReadOnly:oT,isSkinDisabled:vO,getHeightOption:iO,getWidthOption:sb,getMinWidthOption:S0,getMinHeightOption:sT,getMaxWidthOption:ww,getMaxHeightOption:uO,getUserStyleFormats:zM,shouldMergeStyleFormats:UM,shouldAutoHideStyleFormats:WM,getLineHeightFormats:CO,getContentLanguages:rT,getRemovedMenuItems:dO,isMenubarEnabled:dT,isMultipleToolbars:ab,isToolbarEnabled:fT,isToolbarPersist:jM,getMultipleToolbarsOption:wO,getUiContainer:xw,useFixedContainer:x0,isSplitUiMode:Np,getToolbarMode:rb,isDraggableModal:XM,isDistractionFree:gT,isStickyToolbar:T0,getStickyToolbarOffset:GM,getToolbarLocation:mO,isToolbarLocationBottom:ph,getToolbarGroups:aT,getMenus:SO,getMenubar:fO,getToolbar:cT,getFilePickerCallback:qM,getFilePickerTypes:hO,useTypeaheadUrls:KM,getAnchorTop:iT,getAnchorBottom:YM,getFilePickerValidatorHandler:lT,getFontSizeInputDefaultUnit:gO,useStatusBar:JM,useElementPath:QM,promotionEnabled:Sw,useBranding:pO,getResize:bO,getPasteAsText:uT,getSidebarShow:eN,useHelpAccessibility:tN,getDefaultFontStack:nN});const sN=["visible","hidden","clip"],xO=t=>Br(t).length>0&&!bo(sN,t),hT=t=>{if(Zc(t)){const s=xs(t,"overflow-x"),a=xs(t,"overflow-y");return xO(s)||xO(a)}else return!1},O6=t=>{const s=vp(t,hT),a=s.length===0?Ue(t).map(dt).map(l=>vp(l,hT)).getOr([]):s;return Us(a).map(l=>({element:l,others:a.slice(1)}))},bh=(t,s)=>Np(t)?O6(s):A.none(),cb=t=>{const s=[...We(t.others,xr),oa()];return _g(xr(t.element),s)},ol=ai({name:"Button",factory:t=>{const s=eT(t.action),a=t.dom.tag,l=g=>ft(t.dom,"attributes").bind(h=>ft(h,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),h=l("role").map(y=>({role:y})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:vu.augment(t.buttonBehaviours,[Fn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Se("uid",void 0),Ze("dom"),Se("components",[]),vu.field("buttonBehaviours",[Fn,mn]),es("action"),es("role"),Se("eventOrder",{})]}),D6=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return zo(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},TO=t=>Array.prototype.slice.call(t.dom.classList,0),qm=t=>{const s=pe.fromHtml(t),a=da(s),l=D6(s),d=TO(s),g=a.length===0?{}:{innerHtml:si(s)};return{tag:na(s),classes:d,attributes:l,...g}},ws=t=>{const s=EA(t)&&Ar(t,"uid")?t.uid:Gg("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var R6=Object.freeze({__proto__:null,exhibit:(t,s)=>Ci({attributes:rs([{key:s.tabAttr,value:"true"}])})}),M6=[Se("tabAttr","data-alloy-tabstop")];const lr=Ec({fields:M6,name:"tabstopping",active:R6}),aN=Ut("tooltip.exclusive"),Tw=Ut("tooltip.show"),Ew=Ut("tooltip.hide"),bT=Ut("tooltip.immediateHide"),vT=Ut("tooltip.immediateShow"),cN=(t,s,a)=>{t.getSystem().broadcastOn([aN],{})};var N6=Object.freeze({__proto__:null,hideAllExclusive:cN,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Zn.set(d,l)})}}),P6=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(y=>{y.getSystem().isConnected()&&(Um(y),t.onHide(h,y),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()){cN(h);const y=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:rr(t.mode==="normal"?[Ge(qd(),_=>{mo(h,Tw)}),Ge(zu(),_=>{mo(h,Ew)})]:[]),behaviours:gt([Zn.config({})])});s.setTooltip(w),sm(y,w),t.onShow(h,w),Oc.position(y,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(y=>{const w=t.lazySink(h).getOrDie();Oc.position(w,y,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ge(dd(),h=>{mo(h,vT)}),Ge(Tf(),h=>{mo(h,bT)}),Ge(qd(),h=>{mo(h,Tw)}),Ge(zu(),h=>{mo(h,Ew)})];case"follow-highlight":return[Ge(kf(),(h,y)=>{mo(h,Tw)}),Ge($g(),h=>{mo(h,Ew)})];case"children-normal":return[Ge(dd(),(h,y)=>{Bl(h.element).each(w=>{Os(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{mo(h,vT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Ge(Tf(),h=>{Bl(h.element).fold(()=>{mo(h,bT)},ee)}),Ge(qd(),h=>{ys(h.element,"[data-mce-tooltip]:hover").each(y=>{s.getTooltip().fold(()=>{mo(h,Tw)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Ge(zu(),h=>{ys(h.element,"[data-mce-tooltip]:hover").fold(()=>{mo(h,Ew)},ee)})];default:return[Ge(dd(),(h,y)=>{Bl(h.element).each(w=>{Os(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{mo(h,vT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Ge(Tf(),h=>{Bl(h.element).fold(()=>{mo(h,bT)},ee)})]}};return rr(gn([[Ge(Tw,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),Ge(Ew,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),Ge(vT,h=>{s.resetTimer(()=>{l(h)},0)}),Ge(bT,h=>{s.resetTimer(()=>{a(h)},0)}),Ge(mu(),(h,y)=>{const w=y;w.universal||bo(w.channels,aN)&&a(h)}),Jd(h=>{a(h)})],g()]))}}),B6=[Ze("lazySink"),Ze("tooltipDom"),Se("exclusive",!0),Se("tooltipComponents",[]),Vr("delayForShow",W(300)),Vr("delayForHide",W(300)),Hi("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Se("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:W([Oa,Ja,Fa,Ha,Aa,Rs]),onRtl:W([Oa,Ja,Fa,Ha,Aa,Rs])},bubble:ju(0,-2,{})})),Ho("onHide"),Ho("onShow")],EO=Object.freeze({__proto__:null,init:()=>{const t=Ts(),s=Ts(),a=()=>{t.on(clearTimeout)},l=(g,h)=>{a(),t.set(setTimeout(g,h))},d=W("not-implemented");return wi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const Vc=Ec({fields:B6,name:"tooltipping",active:P6,state:EO,apis:N6}),{entries:lN,setPrototypeOf:iN,isFrozen:uN,getPrototypeOf:$6,getOwnPropertyDescriptor:I6}=Object;let{freeze:xu,seal:Km,create:L6}=Object,{apply:kO,construct:kw}=typeof Reflect<"u"&&Reflect;kO||(kO=function(s,a,l){return s.apply(a,l)}),xu||(xu=function(s){return s}),Km||(Km=function(s){return s}),kw||(kw=function(s,a){return new s(...a)});const F6=um(Array.prototype.forEach),H6=um(Array.prototype.pop),_w=um(Array.prototype.push),yT=um(String.prototype.toLowerCase),_O=um(String.prototype.toString),V6=um(String.prototype.match),Ym=um(String.prototype.replace),z6=um(String.prototype.indexOf),U6=um(String.prototype.trim),kd=um(RegExp.prototype.test),Aw=W6(TypeError);function um(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return kO(t,s,l)}}function W6(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return kw(t,a)}}function ks(t,s,a){var l;a=(l=a)!==null&&l!==void 0?l:yT,iN&&iN(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=a(g);h!==g&&(uN(s)||(s[d]=h),g=h)}t[g]=!0}return t}function E0(t){const s=L6(null);for(const[a,l]of lN(t))s[a]=l;return s}function k0(t,s){for(;t!==null;){const l=I6(t,s);if(l){if(l.get)return um(l.get);if(typeof l.value=="function")return um(l.value)}t=$6(t)}function a(l){return console.warn("fallback value for",l),null}return a}const dN=xu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),AO=xu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),OO=xu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mN=xu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),DO=xu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),RO=xu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),CT=xu(["#text"]),MO=xu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ow=xu(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dw=xu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Rw=xu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ng=Km(/\{\{[\w\W]*|[\w\W]*\}\}/gm),NO=Km(/<%[\w\W]*|[\w\W]*%>/gm),Z6=Km(/\${[\w\W]*}/gm),j6=Km(/^data-[\-\w.\u00B7-\uFFFF]/),G6=Km(/^aria-[\-\w]+$/),fN=Km(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Mw=Km(/^(?:\w+script|data):/i),q6=Km(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PO=Km(/^html$/i);var wT=Object.freeze({__proto__:null,MUSTACHE_EXPR:ng,ERB_EXPR:NO,TMPLIT_EXPR:Z6,DATA_ATTR:j6,ARIA_ATTR:G6,IS_ALLOWED_URI:fN,IS_SCRIPT_OR_DATA:Mw,ATTR_WHITESPACE:q6,DOCTYPE_NAME:PO});const K6=()=>typeof window>"u"?null:window,BO=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(l=a.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function ST(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K6();const s=Lo=>ST(Lo);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,l=a.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:y,Element:w,NodeFilter:_,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:B,DOMParser:H,trustedTypes:z}=t,G=w.prototype,ne=k0(G,"cloneNode"),Ee=k0(G,"nextSibling"),le=k0(G,"childNodes"),xe=k0(G,"parentNode");if(typeof h=="function"){const Lo=d.createElement("template");Lo.content&&Lo.content.ownerDocument&&(d=Lo.content.ownerDocument)}let Ce,Ke="";const{implementation:Pe,createNodeIterator:ht,createDocumentFragment:Rt,getElementsByTagName:je}=d,{importNode:cn}=a;let Zt={};s.isSupported=typeof lN=="function"&&typeof xe=="function"&&Pe&&Pe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Dn,ERB_EXPR:yn,TMPLIT_EXPR:as,DATA_ATTR:Go,ARIA_ATTR:Eo,IS_SCRIPT_OR_DATA:xt,ATTR_WHITESPACE:tn}=wT;let{IS_ALLOWED_URI:no}=wT,$n=null;const kn=ks({},[...dN,...AO,...OO,...DO,...CT]);let Yn=null;const Vs=ks({},[...MO,...Ow,...Dw,...Rw]);let gs=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Wl=null,od=null,rf=!0,yl=!0,sd=!1,Ld=!0,eu=!1,hg=!1,Hb=!1,fR=!1,gy=!1,Kk=!1,gF=!1,ZG=!0,jG=!1;const yq="user-content-";let Nj=!0,gR=!1,Yk={},Xk=null;const GG=ks({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qG=null;const KG=ks({},["audio","video","img","source","image","track"]);let Pj=null;const YG=ks({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hF="http://www.w3.org/1998/Math/MathML",pF="http://www.w3.org/2000/svg",Vb="http://www.w3.org/1999/xhtml";let Jk=Vb,Bj=!1,$j=null;const Cq=ks({},[hF,pF,Vb],_O);let ZS;const wq=["application/xhtml+xml","text/html"],Sq="text/html";let tu,Qk=null;const xq=d.createElement("form"),XG=function(Fe){return Fe instanceof RegExp||Fe instanceof Function},Ij=function(Fe){if(!(Qk&&Qk===Fe)){if((!Fe||typeof Fe!="object")&&(Fe={}),Fe=E0(Fe),ZS=wq.indexOf(Fe.PARSER_MEDIA_TYPE)===-1?ZS=Sq:ZS=Fe.PARSER_MEDIA_TYPE,tu=ZS==="application/xhtml+xml"?_O:yT,$n="ALLOWED_TAGS"in Fe?ks({},Fe.ALLOWED_TAGS,tu):kn,Yn="ALLOWED_ATTR"in Fe?ks({},Fe.ALLOWED_ATTR,tu):Vs,$j="ALLOWED_NAMESPACES"in Fe?ks({},Fe.ALLOWED_NAMESPACES,_O):Cq,Pj="ADD_URI_SAFE_ATTR"in Fe?ks(E0(YG),Fe.ADD_URI_SAFE_ATTR,tu):YG,qG="ADD_DATA_URI_TAGS"in Fe?ks(E0(KG),Fe.ADD_DATA_URI_TAGS,tu):KG,Xk="FORBID_CONTENTS"in Fe?ks({},Fe.FORBID_CONTENTS,tu):GG,Wl="FORBID_TAGS"in Fe?ks({},Fe.FORBID_TAGS,tu):{},od="FORBID_ATTR"in Fe?ks({},Fe.FORBID_ATTR,tu):{},Yk="USE_PROFILES"in Fe?Fe.USE_PROFILES:!1,rf=Fe.ALLOW_ARIA_ATTR!==!1,yl=Fe.ALLOW_DATA_ATTR!==!1,sd=Fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ld=Fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,eu=Fe.SAFE_FOR_TEMPLATES||!1,hg=Fe.WHOLE_DOCUMENT||!1,gy=Fe.RETURN_DOM||!1,Kk=Fe.RETURN_DOM_FRAGMENT||!1,gF=Fe.RETURN_TRUSTED_TYPE||!1,fR=Fe.FORCE_BODY||!1,ZG=Fe.SANITIZE_DOM!==!1,jG=Fe.SANITIZE_NAMED_PROPS||!1,Nj=Fe.KEEP_CONTENT!==!1,gR=Fe.IN_PLACE||!1,no=Fe.ALLOWED_URI_REGEXP||fN,Jk=Fe.NAMESPACE||Vb,gs=Fe.CUSTOM_ELEMENT_HANDLING||{},Fe.CUSTOM_ELEMENT_HANDLING&&XG(Fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(gs.tagNameCheck=Fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Fe.CUSTOM_ELEMENT_HANDLING&&XG(Fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(gs.attributeNameCheck=Fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Fe.CUSTOM_ELEMENT_HANDLING&&typeof Fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(gs.allowCustomizedBuiltInElements=Fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eu&&(yl=!1),Kk&&(gy=!0),Yk&&($n=ks({},[...CT]),Yn=[],Yk.html===!0&&(ks($n,dN),ks(Yn,MO)),Yk.svg===!0&&(ks($n,AO),ks(Yn,Ow),ks(Yn,Rw)),Yk.svgFilters===!0&&(ks($n,OO),ks(Yn,Ow),ks(Yn,Rw)),Yk.mathMl===!0&&(ks($n,DO),ks(Yn,Dw),ks(Yn,Rw))),Fe.ADD_TAGS&&($n===kn&&($n=E0($n)),ks($n,Fe.ADD_TAGS,tu)),Fe.ADD_ATTR&&(Yn===Vs&&(Yn=E0(Yn)),ks(Yn,Fe.ADD_ATTR,tu)),Fe.ADD_URI_SAFE_ATTR&&ks(Pj,Fe.ADD_URI_SAFE_ATTR,tu),Fe.FORBID_CONTENTS&&(Xk===GG&&(Xk=E0(Xk)),ks(Xk,Fe.FORBID_CONTENTS,tu)),Nj&&($n["#text"]=!0),hg&&ks($n,["html","head","body"]),$n.table&&(ks($n,["tbody"]),delete Wl.tbody),Fe.TRUSTED_TYPES_POLICY){if(typeof Fe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Aw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Fe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Aw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ce=Fe.TRUSTED_TYPES_POLICY,Ke=Ce.createHTML("")}else Ce===void 0&&(Ce=BO(z,l)),Ce!==null&&typeof Ke=="string"&&(Ke=Ce.createHTML(""));xu&&xu(Fe),Qk=Fe}},JG=ks({},["mi","mo","mn","ms","mtext"]),QG=ks({},["foreignobject","desc","title","annotation-xml"]),Tq=ks({},["title","style","font","a","script"]),bF=ks({},AO);ks(bF,OO),ks(bF,mN);const Lj=ks({},DO);ks(Lj,RO);const Eq=function(Fe){let hn=xe(Fe);(!hn||!hn.tagName)&&(hn={namespaceURI:Jk,tagName:"template"});const qn=yT(Fe.tagName),Ua=yT(hn.tagName);return $j[Fe.namespaceURI]?Fe.namespaceURI===pF?hn.namespaceURI===Vb?qn==="svg":hn.namespaceURI===hF?qn==="svg"&&(Ua==="annotation-xml"||JG[Ua]):!!bF[qn]:Fe.namespaceURI===hF?hn.namespaceURI===Vb?qn==="math":hn.namespaceURI===pF?qn==="math"&&QG[Ua]:!!Lj[qn]:Fe.namespaceURI===Vb?hn.namespaceURI===pF&&!QG[Ua]||hn.namespaceURI===hF&&!JG[Ua]?!1:!Lj[qn]&&(Tq[qn]||!bF[qn]):!!(ZS==="application/xhtml+xml"&&$j[Fe.namespaceURI]):!1},jS=function(Fe){_w(s.removed,{element:Fe});try{Fe.parentNode.removeChild(Fe)}catch{Fe.remove()}},hR=function(Fe,hn){try{_w(s.removed,{attribute:hn.getAttributeNode(Fe),from:hn})}catch{_w(s.removed,{attribute:null,from:hn})}if(hn.removeAttribute(Fe),Fe==="is"&&!Yn[Fe])if(gy||Kk)try{jS(hn)}catch{}else try{hn.setAttribute(Fe,"")}catch{}},eq=function(Fe){let hn,qn;if(fR)Fe="<remove></remove>"+Fe;else{const pg=V6(Fe,/^[\r\n\t ]+/);qn=pg&&pg[0]}ZS==="application/xhtml+xml"&&Jk===Vb&&(Fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Fe+"</body></html>");const Ua=Ce?Ce.createHTML(Fe):Fe;if(Jk===Vb)try{hn=new H().parseFromString(Ua,ZS)}catch{}if(!hn||!hn.documentElement){hn=Pe.createDocument(Jk,"template",null);try{hn.documentElement.innerHTML=Bj?Ke:Ua}catch{}}const nu=hn.body||hn.documentElement;return Fe&&qn&&nu.insertBefore(d.createTextNode(qn),nu.childNodes[0]||null),Jk===Vb?je.call(hn,hg?"html":"body")[0]:hg?hn.documentElement:nu},tq=function(Fe){return ht.call(Fe.ownerDocument||Fe,Fe,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},kq=function(Fe){return Fe instanceof B&&(typeof Fe.nodeName!="string"||typeof Fe.textContent!="string"||typeof Fe.removeChild!="function"||!(Fe.attributes instanceof O)||typeof Fe.removeAttribute!="function"||typeof Fe.setAttribute!="function"||typeof Fe.namespaceURI!="string"||typeof Fe.insertBefore!="function"||typeof Fe.hasChildNodes!="function")},vF=function(Fe){return typeof y=="object"?Fe instanceof y:Fe&&typeof Fe=="object"&&typeof Fe.nodeType=="number"&&typeof Fe.nodeName=="string"},zb=function(Fe,hn,qn){Zt[Fe]&&F6(Zt[Fe],Ua=>{Ua.call(s,hn,qn,Qk)})},nq=function(Fe){let hn;if(zb("beforeSanitizeElements",Fe,null),kq(Fe))return jS(Fe),!0;const qn=tu(Fe.nodeName);if(zb("uponSanitizeElement",Fe,{tagName:qn,allowedTags:$n}),Fe.hasChildNodes()&&!vF(Fe.firstElementChild)&&(!vF(Fe.content)||!vF(Fe.content.firstElementChild))&&kd(/<[/\w]/g,Fe.innerHTML)&&kd(/<[/\w]/g,Fe.textContent))return jS(Fe),!0;if(!$n[qn]||Wl[qn]){if(!Wl[qn]&&sq(qn)&&(gs.tagNameCheck instanceof RegExp&&kd(gs.tagNameCheck,qn)||gs.tagNameCheck instanceof Function&&gs.tagNameCheck(qn)))return!1;if(Nj&&!Xk[qn]){const Ua=xe(Fe)||Fe.parentNode,nu=le(Fe)||Fe.childNodes;if(nu&&Ua){const pg=nu.length;for(let sl=pg-1;sl>=0;--sl)Ua.insertBefore(ne(nu[sl],!0),Ee(Fe))}}return jS(Fe),!0}return Fe instanceof w&&!Eq(Fe)||(qn==="noscript"||qn==="noembed"||qn==="noframes")&&kd(/<\/no(script|embed|frames)/i,Fe.innerHTML)?(jS(Fe),!0):(eu&&Fe.nodeType===3&&(hn=Fe.textContent,hn=Ym(hn,Dn," "),hn=Ym(hn,yn," "),hn=Ym(hn,as," "),Fe.textContent!==hn&&(_w(s.removed,{element:Fe.cloneNode()}),Fe.textContent=hn)),zb("afterSanitizeElements",Fe,null),!1)},oq=function(Fe,hn,qn){if(ZG&&(hn==="id"||hn==="name")&&(qn in d||qn in xq))return!1;if(!(yl&&!od[hn]&&kd(Go,hn))){if(!(rf&&kd(Eo,hn))){if(!Yn[hn]||od[hn]){if(!(sq(Fe)&&(gs.tagNameCheck instanceof RegExp&&kd(gs.tagNameCheck,Fe)||gs.tagNameCheck instanceof Function&&gs.tagNameCheck(Fe))&&(gs.attributeNameCheck instanceof RegExp&&kd(gs.attributeNameCheck,hn)||gs.attributeNameCheck instanceof Function&&gs.attributeNameCheck(hn))||hn==="is"&&gs.allowCustomizedBuiltInElements&&(gs.tagNameCheck instanceof RegExp&&kd(gs.tagNameCheck,qn)||gs.tagNameCheck instanceof Function&&gs.tagNameCheck(qn))))return!1}else if(!Pj[hn]){if(!kd(no,Ym(qn,tn,""))){if(!((hn==="src"||hn==="xlink:href"||hn==="href")&&Fe!=="script"&&z6(qn,"data:")===0&&qG[Fe])){if(!(sd&&!kd(xt,Ym(qn,tn,"")))){if(qn)return!1}}}}}}return!0},sq=function(Fe){return Fe.indexOf("-")>0},rq=function(Fe){let hn,qn,Ua,nu;zb("beforeSanitizeAttributes",Fe,null);const{attributes:pg}=Fe;if(!pg)return;const sl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Yn};for(nu=pg.length;nu--;){hn=pg[nu];const{name:bg,namespaceURI:Fj}=hn;qn=bg==="value"?hn.value:U6(hn.value);const Aq=qn;if(Ua=tu(bg),sl.attrName=Ua,sl.attrValue=qn,sl.keepAttr=!0,sl.forceKeepAttr=void 0,zb("uponSanitizeAttribute",Fe,sl),qn=sl.attrValue,sl.forceKeepAttr)continue;if(!sl.keepAttr){hR(bg,Fe);continue}if(!Ld&&kd(/\/>/i,qn)){hR(bg,Fe);continue}eu&&(qn=Ym(qn,Dn," "),qn=Ym(qn,yn," "),qn=Ym(qn,as," "));const aq=tu(Fe.nodeName);if(!oq(aq,Ua,qn)){hR(bg,Fe);continue}if(jG&&(Ua==="id"||Ua==="name")&&(hR(bg,Fe),qn=yq+qn),Ce&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!Fj)switch(z.getAttributeType(aq,Ua)){case"TrustedHTML":{qn=Ce.createHTML(qn);break}case"TrustedScriptURL":{qn=Ce.createScriptURL(qn);break}}if(qn!==Aq)try{Fj?Fe.setAttributeNS(Fj,bg,qn):Fe.setAttribute(bg,qn)}catch{hR(bg,Fe)}}zb("afterSanitizeAttributes",Fe,null)},_q=function Lo(Fe){let hn;const qn=tq(Fe);for(zb("beforeSanitizeShadowDOM",Fe,null);hn=qn.nextNode();)zb("uponSanitizeShadowNode",hn,null),!nq(hn)&&(hn.content instanceof g&&Lo(hn.content),rq(hn));zb("afterSanitizeShadowDOM",Fe,null)};return s.sanitize=function(Lo){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},hn,qn,Ua,nu;if(Bj=!Lo,Bj&&(Lo="<!-->"),typeof Lo!="string"&&!vF(Lo))if(typeof Lo.toString=="function"){if(Lo=Lo.toString(),typeof Lo!="string")throw Aw("dirty is not a string, aborting")}else throw Aw("toString is not a function");if(!s.isSupported)return Lo;if(Hb||Ij(Fe),s.removed=[],typeof Lo=="string"&&(gR=!1),gR){if(Lo.nodeName){const bg=tu(Lo.nodeName);if(!$n[bg]||Wl[bg])throw Aw("root node is forbidden and cannot be sanitized in-place")}}else if(Lo instanceof y)hn=eq("<!---->"),qn=hn.ownerDocument.importNode(Lo,!0),qn.nodeType===1&&qn.nodeName==="BODY"||qn.nodeName==="HTML"?hn=qn:hn.appendChild(qn);else{if(!gy&&!eu&&!hg&&Lo.indexOf("<")===-1)return Ce&&gF?Ce.createHTML(Lo):Lo;if(hn=eq(Lo),!hn)return gy?null:gF?Ke:""}hn&&fR&&jS(hn.firstChild);const pg=tq(gR?Lo:hn);for(;Ua=pg.nextNode();)nq(Ua)||(Ua.content instanceof g&&_q(Ua.content),rq(Ua));if(gR)return Lo;if(gy){if(Kk)for(nu=Rt.call(hn.ownerDocument);hn.firstChild;)nu.appendChild(hn.firstChild);else nu=hn;return(Yn.shadowroot||Yn.shadowrootmode)&&(nu=cn.call(a,nu,!0)),nu}let sl=hg?hn.outerHTML:hn.innerHTML;return hg&&$n["!doctype"]&&hn.ownerDocument&&hn.ownerDocument.doctype&&hn.ownerDocument.doctype.name&&kd(PO,hn.ownerDocument.doctype.name)&&(sl="<!DOCTYPE "+hn.ownerDocument.doctype.name+`>
`+sl),eu&&(sl=Ym(sl,Dn," "),sl=Ym(sl,yn," "),sl=Ym(sl,as," ")),Ce&&gF?Ce.createHTML(sl):sl},s.setConfig=function(Lo){Ij(Lo),Hb=!0},s.clearConfig=function(){Qk=null,Hb=!1},s.isValidAttribute=function(Lo,Fe,hn){Qk||Ij({});const qn=tu(Lo),Ua=tu(Fe);return oq(qn,Ua,hn)},s.addHook=function(Lo,Fe){typeof Fe=="function"&&(Zt[Lo]=Zt[Lo]||[],_w(Zt[Lo],Fe))},s.removeHook=function(Lo){if(Zt[Lo])return H6(Zt[Lo])},s.removeHooks=function(Lo){Zt[Lo]&&(Zt[Lo]=[])},s.removeAllHooks=function(){Zt={}},s}var Y6=ST();const $O=t=>Y6().sanitize(t);var Yu=tinymce.util.Tools.resolve("tinymce.util.I18n");const X6={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},gN="temporary-placeholder",IO=t=>()=>ft(t,gN).getOr("!not found!"),LO=(t,s)=>{const a=t.toLowerCase();if(Yu.isRtl()){const l=is(a,"-rtl");return yo(s,l)?l:a}else return a},hN=(t,s)=>ft(s,LO(t,s)),pN=(t,s)=>{const a=s();return hN(t,a).getOrThunk(IO(a))},bN=(t,s,a)=>{const l=s();return hN(t,l).or(a).getOrThunk(IO(l))},vN=t=>Yu.isRtl()?yo(X6,t):!1,FO=()=>ro("add-focusable",[gr(t=>{tC(t.element,"svg").each(s=>vt(s,"focusable","false"))})]),HO=(t,s,a,l)=>{var d,g;const h=vN(s)?["tox-icon--flip"]:[],y=ft(a,LO(s,a)).or(l).getOrThunk(IO(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:y},behaviours:gt([...(g=t.behaviours)!==null&&g!==void 0?g:[],FO()])}},qi=(t,s,a,l=A.none())=>HO(s,t,a(),l),yN=(t,s,a)=>{const l=a(),d=Sn(t,g=>yo(l,LO(g,l)));return HO(s,d.getOr(gN),l,A.none())},J6={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},xT=ai({name:"Notification",factory:t=>{const s=Ut("notification-text"),a=ws({dom:qm(`<p id=${s}>${$O(t.backstageProvider.translate(t.text))}</p>`),behaviours:gt([Zn.config({})])}),l=G=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${G}%`}}}),d=G=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${G}%`}}),g=ws({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:gt([Zn.config({})])}),w={updateProgress:(G,ne)=>{G.getSystem().isConnected()&&g.getOpt(G).each(Ee=>{Zn.set(Ee,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ne)]},d(ne)])})},updateText:(G,ne)=>{if(G.getSystem().isConnected()){const Ee=a.get(G);Zn.set(Ee,[qr(ne)])}}},_=gn([t.icon.toArray(),t.level.toArray(),t.level.bind(G=>A.from(J6[G])).toArray()]),O=ws(ol.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[qi("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:gt([lr.config({}),Vc.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:G=>{t.onAction(G)}})),B=yN(_,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:gt([Zn.config({})])},z=[B,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(G=>["tox-notification","tox-notification--in",`tox-notification--${G}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:gt([lr.config({}),Fn.config({}),mn.config({mode:"special",onEscape:G=>(t.onAction(G),A.some(!0))})]),components:z.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:w}},configFields:[es("level"),Ze("progress"),es("icon"),Ze("onAction"),Ze("text"),Ze("iconProvider"),Ze("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var Q6=(t,s,a,l)=>{const d=s.backstage.shared,g=()=>{const O=xr(pe.fromDom(t.getContentAreaContainer()));return A.some(O)},h=O=>{g().each(B=>{ut(O,H=>{rc(H.element)>B.width&&Yt(H.element,"width",B.width+"px")})})};return{open:(O,B,H)=>{const z=()=>{const le=Pe=>{Zn.remove(Pe,G),ne()},xe=(Pe,ht)=>{da(Pe.element).length===0?Ce(Pe,ht):Ke(Pe,ht)},Ce=(Pe,ht)=>{Er.hide(Pe),l.clear(),ht&&t.focus()},Ke=(Pe,ht)=>{ht&&mn.focusIn(Pe)};l.on(Pe=>{B();const ht=H();le(Pe),xe(Pe,ht)})},G=el(xT.sketch({text:O.text,level:bo(["success","error","warning","warn","info"],O.type)?O.type:void 0,progress:O.progressBar===!0,icon:O.icon,onAction:z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const le=fl(G);l.on(xe=>{Zn.append(xe,le),Er.reposition(xe),Nr.refresh(xe),h(xe.components())})}else{const le=el(Er.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gt([mn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Zn.config({}),...T0(t)&&!d.header.isPositionedAtTop()?[]:[Nr.config({contextual:{lazyContext:()=>A.some(xr(pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Pe=>bh(t,Pe.element).map(Rt=>({bounds:cb(Rt),optScrollEnv:A.some({currentScrollTop:Rt.element.dom.scrollTop,scrollElmTop:wa(Rt.element).top})})).getOrThunk(()=>({bounds:oa(),optScrollEnv:A.none()}))})]])})),xe=fl(G),Ce={maxHeightFunction:dp()},Ke={...d.anchors.banner(),overrides:Ce};l.set(le),a.add(le),Er.showWithinBounds(le,xe,{anchor:Ke},g)}Un(O.timeout)&&O.timeout>0&&yw.setEditorTimeout(t,()=>{z()},O.timeout);const ne=()=>{l.on(le=>{Er.reposition(le),Nr.refresh(le),h(le.components())})};return{close:z,reposition:ne,text:le=>{xT.updateText(G,le)},settings:O,getEl:()=>G.element.dom,progressBar:{value:le=>{xT.updateProgress(G,le)}}}},close:O=>{O.close()},getArgs:O=>O.settings}};const CN={setup:(t,s)=>{const a=(d,g)=>{Tn(d,Uu(),{raw:g})},l=()=>t.getMenu().bind(Nt.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(_f),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Nt.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var TT;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(TT||(TT={}));var dm=TT;const ET="tox-menu-nav__js",kT="tox-collection__item",VO="tox-swatch",wN={normal:ET,color:VO},_T="tox-collection__item--enabled",zO="tox-collection__group-heading",UO="tox-collection__item-icon",AT="tox-collection__item-label",SN="tox-collection__item-accessory",xN="tox-collection__item-caret",WO="tox-collection__item-checkmark",lb="tox-collection__item--active",ZO="tox-collection__item-container",TN="tox-collection__item-container--column",Pp="tox-collection__item-container--row",e8="tox-collection__item-container--align-right",jO="tox-collection__item-container--align-left",OT="tox-collection__item-container--valign-top",t8="tox-collection__item-container--valign-middle",EN="tox-collection__item-container--valign-bottom",GO=t=>ft(wN,t).getOr(ET),kN=t=>t==="color"?"tox-swatches":"tox-menu",Nw=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:kN(t),tieredMenu:"tox-tiered-menu"}),Bp=t=>{const s=Nw(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:GO(t)}},n8=(t,s,a)=>{const l=Nw(a);return{tag:"div",classes:gn([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},_N=[tb.parts.items({})],Pw=(t,s,a)=>{const l=Nw(a);return{dom:{tag:"div",classes:gn([[l.tieredMenu]])},markers:Bp(a)}},qO=W([es("data"),Se("inputAttributes",{}),Se("inputStyles",{}),Se("tag","input"),Se("inputClasses",[]),Ho("onSetValue"),Se("styles",{}),Se("eventOrder",{}),fc("inputBehaviours",[Wt,Fn]),Se("selectOnFocus",!0)]),KO=t=>gt([Fn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=Be(a);a.dom.setSelectionRange(0,l.length)}:ee})]),o8=t=>({...KO(t),...gc(t.inputBehaviours,[Wt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Be(s.element),setValue:(s,a)=>{Be(s.element)!==a&&om(s.element,a)}},onSetValue:t.onSetValue})])}),YO=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),s8=(t,s)=>({uid:t.uid,dom:YO(t),components:[],behaviours:o8(t),eventOrder:t.eventOrder}),ib=ai({name:"Input",configFields:qO(),factory:s8}),AN=Ut("refetch-trigger-event"),ON=Ut("redirect-menu-item-interaction"),XO="tox-menu__searcher",$p=t=>ys(t.element,`.${XO}`).bind(s=>t.getSystem().getByDom(s).toOptional()),JO=$p,r8=(t,s)=>{Wt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},DN=t=>{const s=Wt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},a8=(t,s)=>{$(s.element,"id").each(a=>vt(t.element,"aria-activedescendant",a))},c8=t=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Tn(d,ON,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[kT]},components:[ib.sketch({inputClasses:[XO,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:gt([ro(l,[Ge(Yd(),d=>{mo(d,AN)}),Ge(Uu(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),mn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,mn.name()]}})]}},DT="tox-collection--results__js",Bw=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ut("aria-item-search-result-id"),"aria-selected":"false"}}}:t},QO=(t,s)=>a=>{const l=Js(a,s);return We(l,d=>({dom:t,components:d}))},RN=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[tb.parts.items({preprocess:t!=="auto"?QO({tag:"div",classes:["tox-swatches__row"]},t):Ot})]}]}),l8=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[tb.parts.items({preprocess:QO({tag:"div",classes:["tox-collection__group"]},t)})]}),e4=(t,s)=>{const a=[];let l=[];return ut(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(yo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),We(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},RT=(t,s,a)=>tb.parts.items({preprocess:l=>{const d=We(l,a);return t!=="auto"&&t>1?QO({tag:"div",classes:["tox-collection__group"]},t)(d):e4(d,(g,h)=>s[h].type==="separator")}}),MN=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[RT(t,s,Ot)]}),NN=(t,s,a=!0)=>{const l=Ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",DT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[RT(t,s,Bw)]}},PN=(t,s,a)=>{const l=Ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[c8({i18n:Yu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],DT],attributes:{id:l}},components:[RT(t,s,Bw)]}]}},BN=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[tb.parts.items({preprocess:a=>e4(a,(l,d)=>t[d].type==="separator")})]}),$w=t=>zs(t,s=>"icon"in s&&s.icon!==void 0),vh=t=>(console.error(iu(t)),console.log(t),A.none()),i8=(t,s,a,l,d)=>{const g=BN(a);return{value:t,dom:g.dom,components:g.components,items:a}},t4=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?MN(l,a):d.searchMode.searchMode==="search-with-field"?PN(l,a,d.searchMode):NN(l,a);if(d.menuType==="color"){const h=RN(l);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const h=MN(l,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=l8(l);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:n8(s,l,d.menuType),components:_N,items:a}},Ra=ha("type"),MT=ha("name"),NT=ha("label"),yh=ha("text"),$N=ha("title"),IN=ha("icon"),Iw=ha("value"),u8=ti("fetch"),d8=ti("getSubmenuItems"),_0=ti("onAction"),n4=ti("onItemAction"),Ip=Vr("onSetup",()=>ee),m8=pa("name"),Lp=pa("text"),LN=pa("role"),_d=pa("icon"),Lw=pa("tooltip"),PT=pa("label"),BT=pa("shortcut"),FN=Fu("select"),$T=jr("active",!1),f8=jr("borderless",!1),mm=jr("enabled",!0),Fw=jr("primary",!1),IT=t=>Se("columns",t),o4=Se("meta",{}),s4=Vr("onAction",ee),ub=t=>ic("type",t),r4=t=>ka("name","name",wo(()=>Ut(`${t}-name`)),Ht),g8=t=>ka("value","value",wo(()=>Ut(`${t}-value`)),Li()),HN=Rn([Ra,Lp]),VN=t=>Tr("separatormenuitem",HN,t),zN=Rn([ub("autocompleteitem"),$T,mm,o4,Iw,Lp,_d]),h8=t=>Tr("Autocompleter.Separator",HN,t),p8=t=>Tr("Autocompleter.Item",zN,t),Hw=[mm,Lw,_d,Lp,Ip],Tu=Rn([Ra,_0,BT].concat(Hw)),fm=t=>Tr("toolbarbutton",Tu,t),a4=[$T].concat(Hw),c4=Rn(a4.concat([Ra,_0,BT])),LT=t=>Tr("ToggleButton",c4,t),UN=[Vr("predicate",so),Hi("scope","node",["node","editor"]),Hi("position","selection",["node","selection","line"])],b8=Hw.concat([ub("contextformbutton"),Fw,_0,ss("original",Ot)]),Vw=a4.concat([ub("contextformbutton"),Fw,_0,ss("original",Ot)]),FT=Hw.concat([ub("contextformbutton")]),l4=a4.concat([ub("contextformtogglebutton")]),v8=Ia("type",{contextformbutton:b8,contextformtogglebutton:Vw}),Xm=Rn([ub("contextform"),Vr("initValue",W("")),PT,ni("commands",v8),Lu("launch",Ia("type",{contextformbutton:FT,contextformtogglebutton:l4}))].concat(UN)),y8=t=>Tr("ContextForm",Xm,t),C8=Rn([ub("contexttoolbar"),ha("items")].concat(UN)),Ad=t=>Tr("ContextToolbar",C8,t),zw=[Ra,ha("src"),pa("alt"),k("classes",[],Ht)],gm=Rn(zw),w8=[Ra,yh,m8,k("classes",["tox-collection__item-label"],Ht)],Hs=Rn(w8),db=Ea(()=>jd("type",{cardimage:gm,cardtext:Hs,cardcontainer:HT})),HT=Rn([Ra,ic("direction","horizontal"),ic("align","left"),ic("valign","middle"),ni("items",db)]),mb=[mm,Lp,LN,BT,g8("menuitem"),o4],i4=Rn([Ra,PT,ni("items",db),Ip,s4].concat(mb)),u4=t=>Tr("cardmenuitem",i4,t),S8=Rn([Ra,$T,_d].concat(mb)),d4=t=>Tr("choicemenuitem",S8,t),WN=[Ra,ha("fancytype"),s4],ZN=[Se("initData",{})].concat(WN),jN=[Fu("select"),F("initData",{},[jr("allowCustomColors",!0),ic("storageKey","default"),uu("colors",Li())])].concat(WN),m4=Ia("fancytype",{inserttable:ZN,colorswatch:jN}),GN=t=>Tr("fancymenuitem",m4,t),VT=Rn([Ra,Ip,s4,_d].concat(mb)),x8=t=>Tr("menuitem",VT,t),T8=Rn([Ra,d8,Ip,_d].concat(mb)),E8=t=>Tr("nestedmenuitem",T8,t),k8=Rn([Ra,_d,$T,Ip,_0].concat(mb)),_8=t=>Tr("togglemenuitem",k8,t),zT=(t,s,a)=>{const l=nl(t.element,"."+a);if(l.length>0){const d=Ro(l,g=>{const h=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(h-y)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},qN=(t,s)=>gt([ro(t,s)]),A0={namedEvents:qN,unnamedEvents:t=>qN(Ut("unnamed-events"),t)},KN=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),YN="silver.readonly",A8=Rn([py("readonly")]),Uw=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&ut(d,g=>{g.broadcastOn([am()],{target:l})}),ut(d,g=>{g.broadcastOn([YN],{readonly:s})})},UT=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&Uw(s,!0)}),t.on("SwitchMode",()=>Uw(s,t.mode.isReadOnly())),oT(t)&&t.mode.set("readonly")},Qa=()=>ri.config({channels:{[YN]:{schema:A8,onReceive:(t,s)=>{In.set(t,s.readonly)}}}}),hm={item:t=>In.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>In.config({disabled:t}),splitButton:t=>In.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>In.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},WT=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},Ch=(t,s)=>gr(a=>{WT(t,a)(d=>{const g=t.onSetup(d);nt(g)&&s.set(g)})}),Vl=(t,s)=>Jd(a=>WT(t,a)(s.get())),O8=(t,s)=>Wu((a,l)=>{WT(t,a)(t.onAction),!t.triggersSubmenu&&s===dm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&mo(a,l1()),l.stop())}),f4={[fu()]:["disabling","alloy.base.behaviour","toggling","item-events"]},fb=ea,gb=(t,s,a,l)=>{const d=dn(ee);return{type:"item",dom:s.dom,components:fb(s.optComponents),data:t.data,eventOrder:f4,hasSubmenu:t.triggersSubmenu,itemBehaviours:gt([ro("item-events",[O8(t,a),Ch(t,d),Vl(t,d)]),hm.item(()=>!t.enabled||l.isDisabled()),Qa(),Zn.config({})].concat(t.itemBehaviours))}},O0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),ZT=t=>{const s=C0.os.isMacOS()||C0.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=We(g,y=>{const w=y.toLowerCase().trim();return yo(d,w)?d[w]:y});return s?h.join(""):h.join("+")},jT=(t,s,a=[UO])=>qi(t,{tag:"div",classes:a},s),g4=t=>({dom:{tag:"div",classes:[AT]},components:[qr(Yu.translate(t))]}),XN=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),D8=(t,s)=>({dom:{tag:"div",classes:[AT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[qr(Yu.translate(s))]}]}),R8=t=>({dom:{tag:"div",classes:[SN]},components:[qr(ZT(t))]}),JN=t=>jT("checkmark",t,[WO]),M8=t=>jT("chevron-right",t,[xN]),QN=t=>jT("chevron-down",t,[xN]),eP=(t,s)=>{const a=t.direction==="vertical"?TN:Pp,l=t.align==="left"?jO:e8;return{dom:{tag:"div",classes:[ZO,a,l,(()=>{switch(t.valign){case"top":return OT;case"middle":return t8;case"bottom":return EN}})()]},components:s}},tP=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),N8=(t,s,a)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(_=>bN(_,s.icons,a)),y=t.ariaLabel.map(_=>({"aria-label":s.translate(_),"data-mce-name":_})).getOr({});return{dom:(()=>{const _=VO,O=h.getOr(""),B={tag:"div",attributes:y,classes:[_]};return g===l?{...B,tag:"button",classes:[...B.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...B,classes:[...B.classes,"tox-swatch--remove"],innerHtml:O}:Xe(g)?{...B,attributes:{...B.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:B})(),optComponents:[]}},nP=t=>{const s=t.map(a=>({attributes:{id:Ut("menu-item"),"aria-label":Yu.translate(a)}})).getOr({});return{tag:"div",classes:[ET,kT],...s}},P8=(t,s,a,l)=>{const d={tag:"div",classes:[UO]},g=H=>qi(H,d,s.icons,l),h=()=>A.some({dom:d}),y=a?t.iconContent.map(g).orThunk(h):A.none(),w=t.checkMark,_=A.from(t.meta).fold(()=>g4,H=>yo(H,"style")?wn(D8,H.style):g4),O=t.htmlContent.fold(()=>t.textContent.map(_),H=>A.some(XN(H,[AT])));return{dom:nP(t.ariaLabel),optComponents:[y,O,t.shortcutContent.map(R8),w,t.caret]}},og=(t,s,a,l=A.none())=>t.presets==="color"?N8(t,s,l):P8(t,s,a,l),oP=(t,s,a)=>ft(t,"tooltipWorker").map(l=>[Vc.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:dp}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{Vc.setComponents(d,[hv({element:pe.fromDom(h)})])})}})]).getOrThunk(()=>a.map(l=>[Vc.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),sP=t=>ob.DOM.encode(t),h4=(t,s)=>{const a=Yu.translate(t),l=sP(a);if(s.length>0){const d=new RegExp(KN(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},rP=(t,s,a,l,d,g,h,y=!0)=>{const w=og({presets:l,textContent:A.none(),htmlContent:a?t.text.map(O=>h4(O,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,y,t.icon),_=t.text.filter(O=>!a&&O!=="");return gb({data:O0(t),enabled:t.enabled,getApi:W({}),onAction:O=>d(t.value,t.meta),onSetup:W(ee),triggersSubmenu:!1,itemBehaviours:oP(t,h,_)},w,g,h.providers)},p4=(t,s)=>We(t,a=>{switch(a.type){case"cardcontainer":return eP(a,p4(a.items,s));case"cardimage":return tP(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>bo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return XN(h4(a.text,d),a.classes)}}),b4=(t,s,a,l)=>{const d=h=>({isEnabled:()=>!In.isDisabled(h),setEnabled:y=>{In.set(h,!y),ut(nl(h.element,"*"),w=>{h.getSystem().getByDom(w).each(_=>{_.hasConfigured(In)&&In.set(_,!y)})})}}),g={dom:nP(t.label),optComponents:[A.some({dom:{tag:"div",classes:[ZO,Pp]},components:p4(t.items,l)})]};return gb({data:O0({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,a.providers)},v4=(t,s,a,l,d,g,h,y=!0)=>{const w=B=>({setActive:H=>{po.set(B,H)},isActive:()=>po.isOn(B),isEnabled:()=>!In.isDisabled(B),setEnabled:H=>In.set(B,!H)}),_=og({presets:a,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(JN(h.icons)):A.none(),caret:A.none(),value:t.value},h,y),O=t.text.filter(W(!s)).map(B=>Vc.config(h.tooltips.getConfig({tooltipText:h.translate(B)})));return Xs(gb({data:O0(t),enabled:t.enabled,getApi:w,onAction:B=>l(t.value),onSetup:B=>(B.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},_,g,h),{toggling:{toggleClass:_T,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},GT=tw(cO(),lO()),y4=t=>({value:lP(t)}),aP=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,C4=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,cP=t=>aP.test(t)||C4.test(t),lP=t=>Cl(t,"#").toUpperCase(),B8=t=>cP(t)?A.some({value:lP(t)}):A.none(),iP=t=>({value:t.value.replace(aP,(a,l,d,g)=>l+l+d+d+g+g)}),uP=t=>{const s=iP(t),a=C4.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},qT=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Ww=t=>{const s=qT(t.red)+qT(t.green)+qT(t.blue);return y4(s)},dP=Math.min,mP=Math.max,KT=Math.round,$8=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,I8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,hb=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),w4=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},fP=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=mP(0,dP(g,1)),h=mP(0,dP(h,1)),g===0)return s=a=l=KT(255*h),hb(s,a,l,1);const y=d/60,w=h*g,_=w*(1-Math.abs(y%2-1)),O=h-w;switch(Math.floor(y)){case 0:s=w,a=_,l=0;break;case 1:s=_,a=w,l=0;break;case 2:s=0,a=w,l=_;break;case 3:s=0,a=_,l=w;break;case 4:s=_,a=0,l=w;break;case 5:s=w,a=0,l=_;break;default:s=a=l=0}return s=KT(255*(s+O)),a=KT(255*(a+O)),l=KT(255*(l+O)),hb(s,a,l,1)},Zw=t=>{const s=uP(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return hb(a,l,d,1)},gP=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),y=parseFloat(l);return hb(d,g,h,y)},YT=t=>{const s=$8.exec(t);if(s!==null)return A.some(gP(s[1],s[2],s[3],"1"));const a=I8.exec(t);return a!==null?A.some(gP(a[1],a[2],a[3],a[4])):A.none()},hP=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,pP=hb(255,0,0,1),L8=t=>{t.dispatch("SkinLoaded")},F8=(t,s)=>{t.dispatch("SkinLoadError",s)},H8=t=>{t.dispatch("ResizeEditor")},D0=(t,s)=>{t.dispatch("ResizeContent",s)},bP=(t,s)=>{t.dispatch("ScrollContent",s)},vP=(t,s)=>{t.dispatch("TextColorChange",s)},V8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},z8=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),U8=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},W8=(t,s)=>{t.dispatch("StylesTextUpdate",s)},Z8=(t,s)=>{t.dispatch("AlignTextUpdate",s)},S4=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},yP=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},CP=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},j8=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},jw=(t,s)=>()=>{t(),s()},li=t=>pb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),G8=(t,s)=>a=>{const l=ga(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},XT=(t,s)=>a=>{const l=li(t)(a),d=G8(t,s)(a);return()=>{l(),d()}},pb=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},wP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Eu=(t,s)=>()=>t.execCommand(s);var bb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const SP={},q8=(t,s=10)=>{const a=bb.getItem(t),l=Mt(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),h=_=>{qe(g,_).each(y),g.unshift(_),g.length>s&&g.pop(),bb.setItem(t,JSON.stringify(g))},y=_=>{g.splice(_,1)};return{add:h,state:()=>g.slice(0)}},xP=t=>ft(SP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=bb.getItem(s);if(Tt(a)){const d=bb.getItem("tinymce-custom-colors");bb.setItem(s,Xe(d)?d:"[]")}const l=q8(s,10);return SP[t]=l,l}),JT=t=>We(xP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),QT=(t,s)=>{xP(t).add(s)},vb=(t,s,a)=>({hue:t,saturation:s,value:a}),eE=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,y=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(y===w)return l=y,vb(0,0,l*100);const _=d===y?g-h:h===y?d-g:h-d;return s=d===y?3:h===y?1:5,s=60*(s-_/(w-y)),a=(w-y)/w,l=w,vb(Math.round(s),Math.round(a*100),Math.round(l*100))},K8=t=>eE(Zw(t)),TP=t=>Ww(fP(t)),x4=t=>B8(t).orThunk(()=>YT(t).map(Ww)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],y=l[3];return Ww(hb(d,g,h,y))}),Gw="forecolor",R0="hilitecolor",EP=5,Y8=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+x4(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},sg=t=>s=>s.options.get(t),T4="#000000",X8=t=>{const s=t.options.register,a=d=>De(d,Mt)?{value:Y8(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=d=>Un(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:l,default:E4(t)}),s("color_cols_foreground",{processor:l,default:kP(t,Gw)}),s("color_cols_background",{processor:l,default:kP(t,R0)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:T4}),s("color_default_background",{processor:"string",default:T4})},tE=(t,s)=>s===Gw&&t.options.isSet("color_map_foreground")?sg("color_map_foreground")(t):s===R0&&t.options.isSet("color_map_background")?sg("color_map_background")(t):sg("color_map")(t),E4=(t,s="default")=>Math.max(EP,Math.ceil(Math.sqrt(tE(t,s).length))),kP=(t,s)=>{const a=sg("color_cols")(t),l=E4(t,s);return a===E4(t)?l:a},_P=(t,s="default")=>Math.round(s===Gw?sg("color_cols_foreground")(t):s===R0?sg("color_cols_background")(t):sg("color_cols")(t)),AP=sg("custom_colors"),J8=sg("color_default_foreground"),Q8=sg("color_default_background"),e7="rgba(0, 0, 0, 0)",t7=t=>YT(t).exists(s=>s.alpha!==0),OP=t=>Gd(t,s=>{if(Fo(s)){const a=xs(s,"background-color");return pn(t7(a),a)}else return A.none()}).getOr(e7),DP=(t,s)=>{const a=pe.fromDom(t.selection.getStart()),l=s==="hilitecolor"?OP(a):xs(a,"color");return YT(l).map(d=>"#"+Ww(d).value)},n7=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},rg=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},o7=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{n7(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{rg(t,s)})},RP=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},qw=(t,s,a,l)=>{a==="custom"?IP(t)(g=>{g.each(h=>{QT(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},DP(t,s).getOr(T4)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},ec=(t,s,a)=>t.concat(JT(s).concat(RP(a))),MP=(t,s,a)=>l=>{l(ec(t,s,a))},k4=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},NP=(t,s)=>{t.setTooltip(s)},PP=(t,s)=>a=>{const l=DP(t,s);return la(l,a.toUpperCase())},_4=(t,s,a)=>{if(re(a))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=ec(tE(t,s),s,!1),g=Sn(d,h=>h.value===a).getOr({text:""}).text;return t.translate([l,t.translate(g)])},BP=(t,s,a,l)=>{t.ui.registry.addSplitButton(s,{tooltip:_4(t,a,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:PP(t,a),columns:_P(t,a),fetch:MP(tE(t,a),a,AP(t)),onAction:d=>{qw(t,a,l.get(),ee)},onItemAction:(d,g)=>{qw(t,a,g,h=>{l.set(h),vP(t,{name:s,color:h})})},onSetup:d=>{k4(d,s,l.get());const g=h=>{h.name===s&&(k4(d,h.name,h.color),NP(d,_4(t,a,h.color)))};return t.on("TextColorChange",g),jw(li(t)(d),()=>{t.off("TextColorChange",g)})}})},$P=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(NP(g,_4(t,a,d.get())),k4(g,s,d.get()),li(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:PP(t,a),initData:{storageKey:a},onAction:g=>{qw(t,a,g.value,h=>{d.set(h),vP(t,{name:s,color:h})})}}]})},IP=t=>(s,a)=>{let l=!1;const d=y=>{const _=y.getData().colorpicker;l?(s(A.from(_)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(y,w)=>{w.name==="hex-valid"&&(l=w.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ee,onCancel:()=>{s(A.none())}})},s7=t=>{o7(t);const s=J8(t),a=Q8(t),l=dn(s),d=dn(a);BP(t,"forecolor","forecolor",l),BP(t,"backcolor","hilitecolor",d),$P(t,"forecolor","forecolor","Text color",l),$P(t,"backcolor","hilitecolor","Background color",d)},A4=(t,s,a,l,d,g,h,y)=>{const w=$w(s),O=r7(s,a,l,d!=="color"?"normal":"color",g,h,y);return t4(t,w,O,l,{menuType:d})},r7=(t,s,a,l,d,g,h)=>ea(We(t,y=>y.type==="choiceitem"?d4(y).fold(vh,w=>A.some(v4(w,a===1,l,s,g(w.value),d,h,$w(t)))):A.none())),nE=(t,s)=>{const a=Bp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ys(d.element,"[aria-checked=true]"):A.none()}},a7=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${VO}`:`.${kT}`}},c7=(t,s)=>{const a=l7(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...A4(Ut("menu-value"),a,y=>{t.onAction({value:y})},l,d,dm.CLOSE_ON_EXECUTE,t.select.getOr(so),s.shared.providers),markers:Bp(d),movement:nE(l,d),showMenuRole:!1};return{type:"widget",data:{value:Ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GT.widget(tb.sketch(h))]}},l7=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>ec(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(RP(a)))},LP=Ut("cell-over"),FP=Ut("cell-execute"),i7=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),u7=(t,s,a)=>{const l=h=>Tn(h,LP,{row:t,col:s}),d=h=>Tn(h,FP,{row:t,col:s}),g=(h,y)=>{y.stop(),d(h)};return el({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:gt([ro("insert-table-picker-cell",[Ge(qd(),Fn.focus),Ge(fu(),d),Ge(Ng(),g),Ge(gd(),g)]),po.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Fn.config({onFocus:l})])})},d7=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const y=t(d+1,h+1);g.push(u7(d,h,y))}l.push(g)}return l},m7=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)po.set(t[g][h],g<=s&&h<=a)},f7=t=>ye(t,s=>We(s,fl)),HP=(t,s)=>qr(`${s}x${t}`),g7={inserttable:(t,s)=>{const d=i7(s),g=d7(d,10,10),h=HP(0,0),y=ws({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:gt([Zn.config({})])});return{type:"widget",data:{value:Ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GT.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:f7(g).concat(y.asSpec()),behaviours:gt([ro("insert-table-picker",[gr(w=>{Zn.set(y.get(w),[h])}),Ey(LP,(w,_,O)=>{const{row:B,col:H}=O.event;m7(g,B,H,10,10),Zn.set(y.get(w),[HP(B+1,H+1)])}),Ey(FP,(w,_,O)=>{const{row:B,col:H}=O.event;t.onAction({numRows:B+1,numColumns:H+1}),mo(w,l1())})]),mn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:c7},VP=(t,s)=>ft(g7,t.fancytype).map(a=>a(t,s)),h7=(t,s,a,l=!0,d=!1)=>{const g=d?QN(a.icons):M8(a.icons),h=w=>({isEnabled:()=>!In.isDisabled(w),setEnabled:_=>In.set(w,!_),setIconFill:(_,O)=>{ys(w.element,`svg path[class="${_}"], rect[class="${_}"]`).each(B=>{vt(B,"fill",O)})},setTooltip:_=>{const O=a.translate(_);vt(w.element,"aria-label",O)}}),y=og({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},a,l);return gb({data:O0(t),getApi:h,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,a)},zP=(t,s,a,l=!0)=>{const d=h=>({isEnabled:()=>!In.isDisabled(h),setEnabled:y=>In.set(h,!y)}),g=og({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},a,l);return gb({data:O0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},p7=t=>({type:"separator",dom:{tag:"div",classes:[kT,zO]},components:t.text.map(qr).toArray()}),b7=(t,s,a,l=!0)=>{const d=h=>({setActive:y=>{po.set(h,y)},isActive:()=>po.isOn(h),isEnabled:()=>!In.isDisabled(h),setEnabled:y=>In.set(h,!y)}),g=og({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(JN(a.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return Xs(gb({data:O0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:_T,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},v7=rP,O4=p7,y7=zP,C7=h7,w7=b7,S7=VP,UP=b4;var T7=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),WP=[Qo("others",lu(eo.value,Li()))],E7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(qo(g.others).length===0)throw new Error("Cannot find any known coupled components");return ft(t,h)},a=(g,h,y)=>s(h,y).getOrThunk(()=>{const _=ft(h.others,y).getOrDie("No information found for coupled component: "+y)(g),O=g.getSystem().build(_);return t[y]=O,O}),l=(g,h,y)=>s(h,y).orThunk(()=>(ft(h.others,y).getOrDie("No information found for coupled component: "+y),A.none())),d=W({});return wi({readState:d,getExisting:l,getOrCreate:a})}});const aa=Ec({fields:WP,name:"coupling",apis:T7,state:E7}),D4=t=>{let s=A.none(),a=[];const l=_=>D4(O=>{d(B=>{O(_(B))})}),d=_=>{h()?w(_):a.push(_)},g=_=>{h()||(s=A.some(_),y(a),a=[])},h=()=>s.isSome(),y=_=>{ut(_,w)},w=_=>{s.each(O=>{setTimeout(()=>{_(O)},0)})};return t(g),{get:d,map:l,isReady:h}},k7={nu:D4,pure:t=>D4(s=>{s(t)})},_7=t=>{setTimeout(()=>{throw t},0)},M0=t=>{const s=w=>{t().then(w,_7)};return{map:w=>M0(()=>t().then(w)),bind:w=>M0(()=>t().then(_=>w(_).toPromise())),anonBind:w=>M0(()=>t().then(()=>w.toPromise())),toLazy:()=>k7.nu(s),toCached:()=>{let w=null;return M0(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},bl={nu:t=>M0(()=>new Promise(t)),pure:t=>M0(()=>Promise.resolve(t))},ZP=W("sink"),jP=W(Gi({name:ZP(),overrides:W({dom:{tag:"div"},behaviours:gt([Oc.config({useFixed:It})]),events:rr([pd(Uu()),pd(Dl()),pd(Ng())])})})),R4=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},A7=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},O7=(t,s,a,l,d,g,h)=>{const y=A7(t,s,l),w=GP(l,t);return y.map(_=>_.bind(O=>{const B=O.menus[O.primary];return A.from(B).each(H=>{t.listRole.each(z=>{H.role=z})}),A.from(nb.sketch({...g.menu(),uid:Gg(""),data:O,highlightOnOpen:h,onOpenMenu:(H,z)=>{const G=w().getOrDie();Oc.position(G,z,{anchor:a}),Wo.decloak(d)},onOpenSubmenu:(H,z,G)=>{const ne=w().getOrDie();Oc.position(ne,G,{anchor:{type:"submenu",item:z}}),Wo.decloak(d)},onRepositionMenu:(H,z,G)=>{const ne=w().getOrDie();Oc.position(ne,z,{anchor:a}),ut(G,Ee=>{Oc.position(ne,Ee.triggeredMenu,{anchor:{type:"submenu",item:Ee.triggeringItem}})})},onEscape:()=>(Fn.focus(l),Wo.close(d),A.some(!0))}))}))},oE=(t,s,a,l,d,g,h)=>{const y=R4(t,a);return O7(t,s,y,a,l,d,h).map(_=>(_.fold(()=>{Wo.isOpen(l)&&Wo.close(l)},O=>{Wo.cloak(l),Wo.open(l,O),g(l)}),l))},D7=(t,s,a,l,d,g,h)=>(Wo.close(l),bl.pure(l)),M4=(t,s,a,l,d,g)=>{const h=aa.getCoupled(a,"sandbox");return(Wo.isOpen(h)?D7:oE)(t,s,a,h,l,d,g)},N4=(t,s,a)=>{const l=Vo.getCurrent(s).getOr(s),d=rc(t.element);a?Yt(l.element,"min-width",d+"px"):To(l.element,d)},GP=(t,s)=>t.getSystem().getByUid(s.uid+"-"+ZP()).map(a=>()=>eo.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>eo.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),qP=t=>{Wo.getState(t).each(s=>{nb.repositionMenus(s)})},P4=(t,s,a)=>{const l=vv(),d=(y,w)=>{const _=R4(t,s);l.link(s.element),t.matchWidth&&N4(_.hotspot,w,t.useMinWidth),t.onOpen(_,y,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(y,w)},g=(y,w)=>{l.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(y,w)},h=GP(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:vu.augment(t.sandboxBehaviours,[Wt.config({store:{mode:"memory",initialValue:s}}),Wo.config({onOpen:d,onClose:g,isPartOf:(y,w,_)=>Bf(w,_)||Bf(s,_),getAttachPoint:()=>h().getOrDie()}),Vo.config({find:y=>Wo.getState(y).bind(w=>Vo.getCurrent(w))}),ri.config({channels:{...Wm({isExtraPart:so}),...Xv({doReposition:qP})}})])}},B4=t=>{const s=aa.getCoupled(t,"sandbox");qP(s)},sE=()=>[Se("sandboxClasses",[]),vu.field("sandboxBehaviours",[Vo,ri,Wo,Wt])],R7=W([Ze("dom"),Ze("fetch"),Ho("onOpen"),Nl("onExecute"),Se("getHotspot",A.some),Se("getAnchorOverrides",W({})),Uf(),fc("dropdownBehaviours",[po,aa,mn,Fn]),Ze("toggleClass"),Se("eventOrder",{}),es("lazySink"),Se("matchWidth",!1),Se("useMinWidth",!1),es("role"),es("listRole")].concat(sE())),M7=W([yu({schema:[jg(),Se("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),jP()]),KP=(t,s,a,l)=>{const d=O=>ft(t.dom,"attributes").bind(B=>ft(B,O)),g=O=>{Wo.getState(O).each(B=>{nb.highlightPrimary(B)})},h=(O,B,H)=>M4(t,Ot,O,l,B,H),y=O=>{h(O,g,ci.HighlightMenuAndItem).get(ee)},w={expand:O=>{po.isOn(O)||h(O,ee,ci.HighlightNone).get(ee)},open:O=>{po.isOn(O)||h(O,ee,ci.HighlightMenuAndItem).get(ee)},refetch:O=>aa.getExistingCoupled(O,"sandbox").fold(()=>h(O,ee,ci.HighlightMenuAndItem).map(ee),H=>oE(t,Ot,O,H,l,ee,ci.HighlightMenuAndItem).map(ee)),isOpen:po.isOn,close:O=>{po.isOn(O)&&h(O,ee,ci.HighlightMenuAndItem).get(ee)},repositionMenus:O=>{po.isOn(O)&&B4(O)}},_=(O,B)=>(_f(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.dropdownBehaviours,[po.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),aa.config({others:{sandbox:O=>P4(t,O,{onOpen:()=>po.on(O),onClose:()=>po.off(O)})}}),mn.config({mode:"special",onSpace:_,onEnter:_,onDown:(O,B)=>{if(Od.isOpen(O)){const H=aa.getCoupled(O,"sandbox");g(H)}else Od.open(O);return A.some(!0)},onEscape:(O,B)=>Od.isOpen(O)?(Od.close(O),A.some(!0)):A.none()}),Fn.config({})]),events:eT(A.some(y)),eventOrder:{...t.eventOrder,[fu()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Od=pl({name:"Dropdown",configFields:R7(),partFields:M7(),factory:KP,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),N7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},P7=t=>{const s=Wt.getValue(t),a=$p(t).map(DN);Od.refetch(s).get(()=>{const l=aa.getCoupled(s,"sandbox");a.each(d=>$p(l).each(g=>r8(g,d)))})},B7=(t,s)=>{$7(t).each(a=>{xy(t,a.element,s.event.eventType,s.event.interactionEvent)})},$7=t=>Wo.getState(t).bind(Nt.getHighlighted).bind(Nt.getHighlighted),I7=t=>Si(t.element,DT)?A.some(t.element):ys(t.element,"."+DT),Kw=(t,s,a)=>{JO(t).each(l=>{a8(l,a),I7(s).each(g=>{$(g,"id").each(h=>vt(l.element,"aria-controls",h))})}),vt(a.element,"aria-selected","true")},L7=(t,s,a)=>{vt(a.element,"aria-selected","false")},rE=t=>{JO(t).each(s=>Fn.focus(s))},F7=t=>aa.getExistingCoupled(t,"sandbox").bind($p).map(DN).map(a=>a.fetchPattern).getOr("");var aE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(aE||(aE={}));const H7=(t,s,a,l,d)=>{const g=a.shared.providers,h=y=>d?{...y,shortcut:A.none(),icon:y.text.isSome()?A.none():y.icon}:y;switch(t.type){case"menuitem":return x8(t).fold(vh,y=>A.some(y7(h(y),s,g,l)));case"nestedmenuitem":return E8(t).fold(vh,y=>A.some(C7(h(y),s,g,l,d)));case"togglemenuitem":return _8(t).fold(vh,y=>A.some(w7(h(y),s,g,l)));case"separator":return VN(t).fold(vh,y=>A.some(O4(y)));case"fancymenuitem":return GN(t).fold(vh,y=>S7(y,a));default:return console.error("Unknown item in general menu",t),A.none()}},V7=(t,s,a,l,d,g,h)=>{const y=l===1,w=!y||$w(t);return ea(We(t,_=>{switch(_.type){case"separator":return h8(_).fold(vh,O=>A.some(O4(O)));case"cardmenuitem":return u4(_).fold(vh,O=>A.some(UP({...O,onAction:B=>{O.onAction(B),a(O.value,O.meta)}},d,g,{itemBehaviours:oP(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return p8(_).fold(vh,O=>A.some(v7(O,s,y,"normal",a,d,g,w)))}}))},z7=(t,s,a,l,d,g)=>{const h=$w(s),y=ea(We(s,O=>{const B=z=>d?!yo(z,"text"):h,H=z=>H7(z,a,l,B(z),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?H({...O,enabled:!1}):H(O)})),w=N7(g);return(d?i8:t4)(t,h,y,1,w)},N0=t=>nb.singleData(t.value,t),P0=(t,s,a,l)=>{const d=nE(s,l),g=Bp(l);return{data:N0({...t,movement:d,menuBehaviours:A0.unnamedEvents(s!=="auto"?[]:[gr((h,y)=>{zT(h,4,g.item).each(({numColumns:w,numRows:_})=>{mn.setGridSize(h,_,w)})})])}),menu:{markers:Bp(l),fakeFocus:a===aE.ContentFocus}}},YP=t=>mp.create(pe.fromDom(t.startContainer),t.startOffset,pe.fromDom(t.endContainer),t.endOffset),W7={register:(t,s)=>{const a=Ut("autocompleter"),l=dn(!1),d=dn(!1),g=Ts(),h=el(Er.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:gt([ro("dismissAutocompleter",[Ge(Ef(),()=>B()),Ge(kf(),(le,xe)=>{$(xe.event.target,"id").each(Ce=>vt(pe.fromDom(t.getBody()),"aria-activedescendant",Ce))})])]),lazySink:s.getSink})),y=()=>Er.isOpen(h),w=d.get,_=()=>{if(y()){Er.hide(h),t.dom.remove(a,!1);const le=pe.fromDom(t.getBody());$(le,"aria-owns").filter(xe=>xe===a).each(()=>{oe(le,"aria-owns"),oe(le,"aria-activedescendant")})}},O=()=>Er.getContent(h).bind(le=>ms(le.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),H=le=>{const xe=ls(le,Ce=>A.from(Ce.columns)).getOr(1);return ye(le,Ce=>{const Ke=Ce.items;return V7(Ke,Ce.matchText,(Pe,ht)=>{const Rt={hide:()=>B(),reload:je=>{_(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:je})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(je=>{l.set(!0),Ce.onAction(Rt,je,Pe,ht),l.set(!1)})},xe,dm.BUBBLE_TO_SANDBOX,s,Ce.highlightOn)})},z=(le,xe)=>{const Ce=ls(le,Ke=>A.from(Ke.columns)).getOr(1);Er.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(YP),root:pe.fromDom(t.getBody())}},P0(t4("autocompleter-value",!0,xe,Ce,{menuType:"normal"}),Ce,aE.ContentFocus,"normal")),O().each(Nt.highlightFirst)},G=le=>{const xe=H(le);xe.length>0?(z(le,xe),vt(pe.fromDom(t.getBody()),"aria-owns",a),t.inline||ne()):_()},ne=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const le=t.getDoc().documentElement,xe=t.selection.getNode(),Ce=m_(h.element);Gs(Ce,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${xe.offsetTop}px`,left:`${xe.offsetLeft}px`}),t.dom.add(le,Ce.dom),ys(Ce,'[role="menu"]').each(Ke=>{_o(Ke,"position"),_o(Ke,"max-height")})};t.on("AutocompleterStart",({lookupData:le})=>{d.set(!0),l.set(!1),G(le)}),t.on("AutocompleterUpdate",({lookupData:le})=>G(le)),t.on("AutocompleterUpdateActiveRange",({range:le})=>g.set(le)),t.on("AutocompleterEnd",()=>{_(),d.set(!1),l.set(!1),g.clear()});const Ee={cancelIfNecessary:B,isMenuOpen:y,isActive:w,isProcessingAction:l.get,getMenu:O};CN.setup(Ee,t)}},Yw=(t,s,a)=>Sd(t,s,a).isSome(),XP=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},JP=5,Z7=400,QP=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},j7=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>JP||l>JP},G7=t=>{const s=Ts(),a=dn(!1),l=XP(_=>{t.triggerEvent(Jc(),_),a.set(!0)},Z7),d=_=>(QP(_).each(O=>{l.cancel();const B={x:O.clientX,y:O.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(B)}),A.none()),g=_=>(l.cancel(),QP(_).each(O=>{s.on(B=>{j7(O,B)&&s.clear()})}),A.none()),h=_=>{l.cancel();const O=B=>jo(B.target,_.target);return s.get().filter(O).map(B=>a.get()?(_.prevent(),!1):t.triggerEvent(gd(),_))},y=rs([{key:Ao(),value:d},{key:fr(),value:g},{key:_a(),value:h}]);return{fireIfReady:(_,O)=>ft(y,O).bind(B=>B(_))}},q7=t=>t.raw.which===ds[0]&&!bo(["input","textarea"],na(t.target))&&!Yw(t.target,'[contenteditable="true"]'),K7=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=G7(a),g=We(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),z=>$l(t,z,G=>{d.fireIfReady(G,z).each(Ee=>{Ee&&G.kill()}),a.triggerEvent(z,G)&&G.kill()})),h=Ts(),y=$l(t,"paste",z=>{d.fireIfReady(z,"paste").each(ne=>{ne&&z.kill()}),a.triggerEvent("paste",z)&&z.kill(),h.set(setTimeout(()=>{a.triggerEvent(Nm(),z)},0))}),w=$l(t,"keydown",z=>{a.triggerEvent("keydown",z)?z.kill():a.stopBackspace&&q7(z)&&z.prevent()}),_=$l(t,"focusin",z=>{a.triggerEvent("focusin",z)&&z.kill()}),O=Ts(),B=$l(t,"focusout",z=>{a.triggerEvent("focusout",z)&&z.kill(),O.set(setTimeout(()=>{a.triggerEvent(Tf(),z)},0))});return{unbind:()=>{ut(g,z=>{z.unbind()}),w.unbind(),_.unbind(),B.unbind(),y.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},eB=(t,s)=>{const a=ft(t,"target").getOr(s);return dn(a)},tB=(t,s)=>{const a=dn(!1),l=dn(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},B0=t=>{const s=dn(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:so,event:t,setSource:ie("Cannot set source of a broadcasted event"),getSource:ie("Cannot get source of a broadcasted event")}},Jm=fe.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),nB=(t,s,a,l,d,g)=>{const h=t(s,l),y=tB(a,d);return h.fold(()=>(g.logEventNoHandlers(s,l),Jm.complete()),w=>{const _=w.descHandler;return Nf(_)(y),y.isStopped()?(g.logEventStopped(s,w.element,_.purpose),Jm.stopped()):y.isCut()?(g.logEventCut(s,w.element,_.purpose),Jm.complete()):Ca(w.element).fold(()=>(g.logNoParent(s,w.element,_.purpose),Jm.complete()),B=>(g.logEventResponse(s,w.element,_.purpose),Jm.resume(B)))})},$4=(t,s,a,l,d,g)=>nB(t,s,a,l,d,g).fold(It,h=>$4(t,s,a,h,d,g),so),oB=(t,s,a,l,d)=>{const g=eB(a,l);return nB(t,s,a,l,g,d)},cE=(t,s,a)=>{const l=B0(s);return ut(t,d=>{const g=d.descHandler;Nf(g)(l)}),l.isStopped()},Y7=(t,s,a,l)=>$0(t,s,a,a.target,l),$0=(t,s,a,l,d)=>{const g=eB(a,l);return $4(t,s,a,l,g,d)},Xw=(t,s)=>({element:t,descHandler:s}),X7=(t,s)=>({id:t,descHandler:s}),J7=()=>{const t={},s=(h,y,w)=>{$e(w,(_,O)=>{const B=t[O]!==void 0?t[O]:{};B[y]=x1(_,h),t[O]=B})},a=(h,y)=>S1(y).bind(w=>ft(h,w)).map(w=>Xw(y,w));return{registerId:s,unregisterId:h=>{$e(t,(y,w)=>{yo(y,h)&&delete y[h]})},filterByType:h=>ft(t,h).map(y=>Hn(y,(w,_)=>X7(_,w))).getOr([]),find:(h,y,w)=>ft(t,y).bind(_=>Gd(w,O=>a(_,O),h))}},Q7=()=>{const t=J7(),s={},a=_=>{const O=_.element;return S1(O).getOrThunk(()=>v_("uid-",_.element))},l=(_,O)=>{const B=s[O];if(B===_)g(_);else throw new Error('The tagId "'+O+'" is already used by: '+Ti(B.element)+`
Cannot use it for: `+Ti(_.element)+`
The conflicting element is`+(ko(B.element)?" ":" not ")+"already in the DOM")},d=_=>{const O=a(_);Ar(s,O)&&l(_,O);const B=[_];t.registerId(B,O,_.events),s[O]=_},g=_=>{S1(_.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(_,O,B)=>t.find(_,O,B),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>ft(s,_)}},Qm=ai({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:V1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Se("components",[]),fc("containerBehaviours",[]),Se("events",{}),Se("domModification",{}),Se("eventOrder",{})]}),I4=t=>{const s=le=>Ca(t.element).fold(It,xe=>jo(le,xe)),a=Q7(),l=(le,xe)=>a.find(s,le,xe),d=K7(t.element,{triggerEvent:(le,xe)=>Cd(le,xe.target,Ce=>Y7(l,le,xe,Ce))}),g={debugInfo:W("real"),triggerEvent:(le,xe,Ce)=>{Cd(le,xe,Ke=>$0(l,le,Ce,xe,Ke))},triggerFocus:(le,xe)=>{S1(le).fold(()=>{Vi(le)},Ce=>{Cd(fd(),le,Ke=>(oB(l,fd(),{originator:xe,kill:ee,prevent:ee,target:le},le,Ke),!1))})},triggerEscape:(le,xe)=>{g.triggerEvent("keydown",le.element,xe.event)},getByUid:le=>ne(le),getByDom:le=>Ee(le),build:el,buildOrPatch:pv,addToGui:le=>{w(le)},removeFromGui:le=>{_(le)},addToWorld:le=>{h(le)},removeFromWorld:le=>{y(le)},broadcast:le=>{H(le)},broadcastOn:(le,xe)=>{z(le,xe)},broadcastEvent:(le,xe)=>{G(le,xe)},isConnected:It},h=le=>{le.connect(g),dr(le.element)||(a.register(le),ut(le.components(),h),g.triggerEvent(i1(),le.element,{target:le.element}))},y=le=>{dr(le.element)||(ut(le.components(),y),a.unregister(le)),le.disconnect()},w=le=>{sm(t,le)},_=le=>{Um(le)},O=()=>{d.unbind(),Ql(t.element)},B=le=>{const xe=a.filter(mu());ut(xe,Ce=>{const Ke=Ce.descHandler;Nf(Ke)(le)})},H=le=>{B({universal:!0,data:le})},z=(le,xe)=>{B({universal:!1,channels:le,data:xe})},G=(le,xe)=>{const Ce=a.filter(le);return cE(Ce,xe)},ne=le=>a.getById(le).fold(()=>eo.error(new Error('Could not find component with uid: "'+le+'" in system.')),eo.value),Ee=le=>{const xe=S1(le).getOr("not found");return ne(xe)};return h(t),{root:t,element:t.element,destroy:O,add:w,remove:_,getByUid:ne,getByDom:Ee,addToWorld:h,removeFromWorld:y,broadcast:H,broadcastOn:z,broadcastEvent:G}},lE=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:We(t.items,s.interpreter)}),eH=W([Se("prefix","form-field"),fc("fieldBehaviours",[Vo,Wt])]),L4=W([Gi({schema:[Ze("dom")],name:"label"}),Gi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),Hc({factory:{sketch:t=>{const s=ho(t,["factory"]);return t.factory.sketch(s)}},schema:[Ze("factory")],name:"field"})]),tH=(t,s,a,l)=>{const d=gc(t.fieldBehaviours,[Vo.config({find:y=>mt(y,t,"field")}),Wt.config({store:{mode:"manual",getValue:y=>Vo.getCurrent(y).bind(Wt.getValue),setValue:(y,w)=>{Vo.getCurrent(y).each(_=>{Wt.setValue(_,w)})}}})]),g=rr([gr((y,w)=>{const _=$x(y,t,["label","field","aria-descriptor"]);_.field().each(O=>{const B=Ut(t.prefix);_.label().each(H=>{vt(H.element,"for",B),vt(O.element,"id",B)}),_["aria-descriptor"]().each(H=>{const z=Ut(t.prefix);vt(H.element,"id",z),vt(O.element,"aria-describedby",z)})})})]),h={getField:y=>mt(y,t,"field"),getLabel:y=>mt(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},_s=pl({name:"FormField",configFields:eH(),partFields:L4(),factory:tH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var nH=tinymce.util.Tools.resolve("tinymce.html.Entities");const I0=(t,s,a,l)=>{const d=sH(t,s,a,l);return _s.sketch(d)},oH=(t,s)=>I0(t,s,[],[]),sH=(t,s,a,l)=>({dom:F4(a),components:t.toArray().concat([s]),fieldBehaviours:gt(l)}),rH=()=>F4([]),F4=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Fp=(t,s)=>_s.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[qr(s.translate(t))]}),Ki=Ut("form-component-change"),Jw=Ut("form-close"),Hp=Ut("form-cancel"),ag=Ut("form-action"),L0=Ut("form-submit"),iE=Ut("form-block"),H4=Ut("form-unblock"),sB=Ut("form-tabchange"),rB=Ut("form-resize"),aH=(t,s,a)=>{const l=t.label.map(z=>Fp(z,s)),d=s.icons(),g=z=>{var G;return(G=d[z])!==null&&G!==void 0?G:z},h=z=>(G,ne)=>{Sd(ne.event.target,"[data-collection-item-value]").each(Ee=>{z(G,ne,Ee,bs(Ee,"data-collection-item-value"))})},y=(z,G)=>{const ne=We(G,xe=>{const Ce=Yu.translate(xe.text),Ke=t.columns===1?`<div class="tox-collection__item-label">${Ce}</div>`:"",Pe=`<div class="tox-collection__item-icon">${g(xe.icon)}</div>`,ht={_:" "," - ":" ","-":" "},Rt=Ce.replace(/\_| \- |\-/g,cn=>ht[cn]),je=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Rt}" class="tox-collection__item${je}" tabindex="-1" data-collection-item-value="${nH.encodeAllRaw(xe.value)}" aria-label="${Rt}">${Pe}${Ke}</div>`}),Ee=t.columns!=="auto"&&t.columns>1?Js(ne,t.columns):[ne],le=We(Ee,xe=>`<div class="tox-collection__group">${xe.join("")}</div>`);np(z.element,le.join(""))},w=h((z,G,ne,Ee)=>{G.stop(),s.isDisabled()||Tn(z,ag,{name:t.name,value:Ee})}),_=[Ge(qd(),h((z,G,ne)=>{Vi(ne)})),Ge(Ng(),w),Ge(gd(),w),Ge(dd(),h((z,G,ne)=>{ys(z.element,"."+lb).each(Ee=>{Lr(Ee,lb)}),ar(ne,lb)})),Ge(Kd(),h(z=>{ys(z.element,"."+lb).each(G=>{Lr(G,lb),A1(G)})})),Wu(h((z,G,ne,Ee)=>{Tn(z,ag,{name:t.name,value:Ee})}))],O=(z,G)=>We(nl(z.element,".tox-collection__item"),G),B=_s.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ot},behaviours:gt([In.config({disabled:s.isDisabled,onDisabled:z=>{O(z,G=>{ar(G,"tox-collection__item--state-disabled"),vt(G,"aria-disabled",!0)})},onEnabled:z=>{O(z,G=>{Lr(G,"tox-collection__item--state-disabled"),oe(G,"aria-disabled")})}}),Qa(),Zn.config({}),Vc.config({...s.tooltips.getConfig({tooltipText:"",onShow:z=>{ys(z.element,"."+lb+"[data-mce-tooltip]").each(G=>{$(G,"data-mce-tooltip").each(ne=>{Vc.setComponents(z,s.tooltips.getComponents({tooltipText:ne}))})})}}),mode:"children-keyboard-focus",anchor:z=>({type:"node",node:ys(z.element,"."+lb).orThunk(()=>bv(".tox-collection__item")),root:z.element,layouts:{onLtr:W([Oa,Ja,Fa,Ha,Aa,Rs]),onRtl:W([Oa,Ja,Fa,Ha,Aa,Rs])},bubble:ju(0,-2,{})})}),Wt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(z,G)=>{y(z,G),t.columns==="auto"&&zT(z,5,"tox-collection__item").each(({numRows:ne,numColumns:Ee})=>{mn.setGridSize(z,ne,Ee)}),mo(z,rB)}}),lr.config({}),mn.config(a7(t.columns,"normal")),ro("collection-events",_)]),eventOrder:{[fu()]:["disabling","alloy.base.behaviour","collection-events"],[dd()]:["collection-events","tooltipping"]}});return I0(l,B,["tox-form__group--collection"],[])},cH=["input","textarea"],V4=t=>{const s=na(t);return bo(cH,s)},yb=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Lr(a,s.invalidClass),s.notify.each(l=>{V4(t.element)&&vt(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{np(d,l.validHtml)}),l.onValid(t)})},aB=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);ar(d,s.invalidClass),s.notify.each(g=>{V4(t.element)&&vt(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{np(h,l)}),g.onInvalid(t,l)})},cB=(t,s,a)=>s.validator.fold(()=>bl.pure(eo.value(!0)),l=>l.validate(t)),z4=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),cB(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(aB(t,s,a,d),eo.error(d)),d=>(yb(t,s),eo.value(d))):eo.error("No longer in system")));var Dd=Object.freeze({__proto__:null,markValid:yb,markInvalid:aB,query:cB,run:z4,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Si(a,s.invalidClass)}}),iB=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>rr([Ge(a.onEvent,l=>{z4(l,t,s).get(Ot)})].concat(a.validateOnLoad?[gr(l=>{z4(l,t,s).get(ee)})]:[]))).getOr({})}),lH=[Ze("invalidClass"),Se("getRoot",A.none),Fs("notify",[Se("aria","alert"),Se("getContainer",A.none),Se("validHtml",""),Ho("onValid"),Ho("onInvalid"),Ho("onValidate")]),Fs("validator",[Ze("validate"),Se("onEvent","input"),Se("validateOnLoad",!0)])];const cg=Ec({fields:lH,name:"invalidating",active:iB,apis:Dd,extra:{validation:t=>s=>{const a=Wt.getValue(s);return bl.pure(t(a))}}});var uB=Object.freeze({__proto__:null,events:()=>rr([t2(vy(),It)]),exhibit:()=>Ci({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const F0=Ec({fields:[],name:"unselecting",active:uB}),iH=(t,s)=>Od.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:gt([hm.button(s.providers.isDisabled),Qa(),F0.config({}),lr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>bl.nu(l=>t.fetch(l)).map(l=>A.from(N0(Xs(A4(Ut("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,dm.CLOSE_ON_EXECUTE,so,s.providers),{movement:nE(t.columns,t.presets)})))),parts:{menu:Pw(!1,1,t.presets)}}),dB=Ut("color-input-change"),W4=Ut("color-swatch-change"),mB=Ut("color-picker-cancel"),fB=(t,s,a,l)=>{const d=_s.parts.field({factory:ib,inputClasses:["tox-textfield"],data:l,onSetValue:_=>cg.run(_).get(ee),inputBehaviours:gt([In.config({disabled:s.providers.isDisabled}),Qa(),lr.config({}),cg.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>vc(_.element),notify:{onValid:_=>{const O=Wt.getValue(_);Tn(_,dB,{color:O})}},validator:{validateOnLoad:!1,validate:_=>{const O=Wt.getValue(_);if(O.length===0)return bl.pure(eo.value(!0));{const B=pe.fromTag("span");Yt(B,"background-color",O);const H=$s(B,"background-color").fold(()=>eo.error("blah"),z=>eo.value(O));return bl.pure(H)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>Fp(_,s.providers)),h=(_,O)=>{Tn(_,W4,{value:O})},y=(_,O)=>{w.getOpt(_).each(B=>{O==="custom"?a.colorPicker(H=>{H.fold(()=>mo(B,mB),z=>{h(B,z),QT(t.storageKey,z)})},"#ffffff"):O==="remove"?h(B,""):h(B,O)})},w=ws(iH({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Aa,Fa,Oa],onLtr:()=>[Fa,Aa,Oa]},components:[],fetch:MP(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:y},s));return _s.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:gt([ro("form-field-events",[Ge(dB,(_,O)=>{w.getOpt(_).each(B=>{Yt(B.element,"background-color",O.event.color)}),Tn(_,Ki,{name:t.name})}),Ge(W4,(_,O)=>{_s.getField(_).each(B=>{Wt.setValue(B,O.event.value),Vo.getCurrent(_).each(Fn.focus)})}),Ge(mB,(_,O)=>{_s.getField(_).each(B=>{Vo.getCurrent(_).each(Fn.focus)})})])])})},gB=Gi({schema:[Ze("dom")],name:"label"}),wh=t=>Gi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:rr([Ig(Ao(),(d,g,h)=>l(d,h),[s]),Ig(Dl(),(d,g,h)=>l(d,h),[s]),Ig(Wh(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),uH=wh("top-left"),dH=wh("top"),mH=wh("top-right"),fH=wh("right"),gH=wh("bottom-right"),hH=wh("bottom"),Z4=wh("bottom-left"),pH=wh("left"),bH=Hc({name:"thumb",defaults:W({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:rr([Lg(Ao(),t,"spectrum"),Lg(fr(),t,"spectrum"),Lg(_a(),t,"spectrum"),Lg(Dl(),t,"spectrum"),Lg(Wh(),t,"spectrum"),Lg(Mm(),t,"spectrum")])})}),Qw=t=>im(t.event),vH=Hc({schema:[ss("mouseIsDown",()=>dn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:gt([mn.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,Qw(g)),onRight:(d,g)=>a.onRight(d,t,Qw(g)),onUp:(d,g)=>a.onUp(d,t,Qw(g)),onDown:(d,g)=>a.onDown(d,t,Qw(g))}),lr.config({}),Fn.config({})]),events:rr([Ge(Ao(),l),Ge(fr(),l),Ge(Dl(),l),Ge(Wh(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var yH=[gB,pH,fH,dH,hH,uH,mH,Z4,gH,bH,vH];const eS=W("slider.change.value"),CH=t=>t.type.indexOf("touch")!==-1,j4=t=>{const s=t.event.raw;if(CH(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(l=>or(l.clientX,l.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(l=>or(l.clientX,l.clientY)):A.none()}},hB="top",wH="right",pB="bottom",bB="left",Cb=t=>t.model.minX,wb=t=>t.model.minY,uE=t=>t.model.minX-1,dE=t=>t.model.minY-1,Sb=t=>t.model.maxX,xb=t=>t.model.maxY,tS=t=>t.model.maxX+1,Tb=t=>t.model.maxY+1,G4=(t,s,a)=>s(t)-a(t),nS=t=>G4(t,Sb,Cb),q4=t=>G4(t,xb,wb),K4=t=>nS(t)/2,vB=t=>q4(t)/2,H0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,yB=t=>t.snapToGrid,CB=t=>t.snapStart,mE=t=>t.rounded,pm=(t,s)=>t[s+"-edge"]!==void 0,wB=t=>pm(t,bB),V0=t=>pm(t,wH),SB=t=>pm(t,hB),fE=t=>pm(t,pB),Sh=t=>t.model.value.get(),Vp=(t,s)=>({x:t,y:s}),bm=(t,s)=>{Tn(t,eS(),{value:s})},xB=(t,s)=>{bm(t,Vp(uE(s),dE(s)))},SH=(t,s)=>{bm(t,dE(s))},Y4=(t,s)=>{bm(t,Vp(K4(s),dE(s)))},X4=(t,s)=>{bm(t,Vp(tS(s),dE(s)))},J4=(t,s)=>{bm(t,tS(s))},xH=(t,s)=>{bm(t,Vp(tS(s),vB(s)))},Xu=(t,s)=>{bm(t,Vp(tS(s),Tb(s)))},TH=(t,s)=>{bm(t,Tb(s))},EH=(t,s)=>{bm(t,Vp(K4(s),Tb(s)))},TB=(t,s)=>{bm(t,Vp(uE(s),Tb(s)))},EB=(t,s)=>{bm(t,uE(s))},kH=(t,s)=>{bm(t,Vp(uE(s),vB(s)))},Q4=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),eD=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),kB=(t,s,a)=>Math.max(s,Math.min(a,t)),_H=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return kB(s+h,s-1,a+1)},g=>{const h=(t-g)%l,y=Math.round(h/l),w=Math.floor((t-g)/l),_=Math.floor((a-g)/l),O=Math.min(_,w+y),B=g+O*l;return Math.max(g,B)}),AH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,_B=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:h,snapStart:y,rounded:w,hasMinEdge:_,hasMaxEdge:O,minBound:B,maxBound:H,screenRange:z}=t,G=_?s-1:s,ne=O?a+1:a;if(d<B)return G;if(d>H)return ne;{const Ee=AH(d,B,H),le=kB(Ee/z*l+s,G,ne);return h&&le>=s&&le<=a?_H(le,s,a,g,y):w?Math.round(le):le}},tD=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:y,maxOffset:w,centerMinEdge:_,centerMaxEdge:O}=t;return d<s?g?0:_:d>a?h?y:O:(d-s)/l*w},nD="top",AB="right",OB="bottom",gE="left",oD="width",DB="height",ef=t=>t.element.dom.getBoundingClientRect(),Rd=(t,s)=>t[s],oS=t=>{const s=ef(t);return Rd(s,gE)},hE=t=>{const s=ef(t);return Rd(s,AB)},pE=t=>{const s=ef(t);return Rd(s,nD)},bE=t=>{const s=ef(t);return Rd(s,OB)},Eb=t=>{const s=ef(t);return Rd(s,oD)},sD=t=>{const s=ef(t);return Rd(s,DB)},rD=(t,s,a)=>(t+s)/2-a,aD=(t,s)=>{const a=ef(t),l=ef(s),d=Rd(a,gE),g=Rd(a,AB),h=Rd(l,gE);return rD(d,g,h)},RB=(t,s)=>{const a=ef(t),l=ef(s),d=Rd(a,nD),g=Rd(a,OB),h=Rd(l,nD);return rD(d,g,h)},vE=(t,s)=>{Tn(t,eS(),{value:s})},z0=(t,s,a)=>{const l={min:Cb(s),max:Sb(s),range:nS(s),value:a,step:H0(s),snap:yB(s),snapStart:CB(s),rounded:mE(s),hasMinEdge:wB(s),hasMaxEdge:V0(s),minBound:oS(t),maxBound:hE(t),screenRange:Eb(t)};return _B(l)},OH=(t,s,a)=>{const l=z0(t,s,a);return vE(t,l),l},DH=(t,s)=>{const a=Cb(s);vE(t,a)},MB=(t,s)=>{const a=Sb(s);vE(t,a)},NB=(t,s,a,l)=>{const g=(t>0?eD:Q4)(Sh(a),Cb(a),Sb(a),H0(a,l));return vE(s,g),A.some(g)},yE=t=>(s,a,l)=>NB(t,s,a,l).map(It),PB=t=>j4(t).map(a=>a.left),Ri=(t,s,a,l,d)=>{const h=Eb(t),y=l.bind(O=>A.some(aD(O,t))).getOr(0),w=d.bind(O=>A.some(aD(O,t))).getOr(h),_={min:Cb(s),max:Sb(s),range:nS(s),value:a,hasMinEdge:wB(s),hasMaxEdge:V0(s),minBound:oS(t),minOffset:0,maxBound:hE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return tD(_)},CE=(t,s,a,l,d,g)=>{const h=Ri(s,g,a,l,d);return oS(s)-oS(t)+h},RH=(t,s,a,l)=>{const d=Sh(a),g=CE(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),h=rc(s.element)/2;Yt(s.element,"left",g-h+"px")},MH=yE(-1),BB=yE(1),NH=A.none,PH=A.none,BH={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(J4),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(EB)};var $B=Object.freeze({__proto__:null,setValueFrom:OH,setToMin:DH,setToMax:MB,findValueOfOffset:z0,getValueFromEvent:PB,findPositionOfValue:CE,setPositionFromValue:RH,onLeft:MH,onRight:BB,onUp:NH,onDown:PH,edgeActions:BH});const Md=(t,s)=>{Tn(t,eS(),{value:s})},sS=(t,s,a)=>{const l={min:wb(s),max:xb(s),range:q4(s),value:a,step:H0(s),snap:yB(s),snapStart:CB(s),rounded:mE(s),hasMinEdge:SB(s),hasMaxEdge:fE(s),minBound:pE(t),maxBound:bE(t),screenRange:sD(t)};return _B(l)},IB=(t,s,a)=>{const l=sS(t,s,a);return Md(t,l),l},wE=(t,s)=>{const a=wb(s);Md(t,a)},cD=(t,s)=>{const a=xb(s);Md(t,a)},$H=(t,s,a,l)=>{const g=(t>0?eD:Q4)(Sh(a),wb(a),xb(a),H0(a,l));return Md(s,g),A.some(g)},LB=t=>(s,a,l)=>$H(t,s,a,l).map(It),IH=t=>j4(t).map(a=>a.top),LH=(t,s,a,l,d)=>{const h=sD(t),y=l.bind(O=>A.some(RB(O,t))).getOr(0),w=d.bind(O=>A.some(RB(O,t))).getOr(h),_={min:wb(s),max:xb(s),range:q4(s),value:a,hasMinEdge:SB(s),hasMaxEdge:fE(s),minBound:pE(t),minOffset:0,maxBound:bE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return tD(_)},lD=(t,s,a,l,d,g)=>{const h=LH(s,g,a,l,d);return pE(s)-pE(t)+h},FH=(t,s,a,l)=>{const d=Sh(a),g=lD(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),h=Qs(s.element)/2;Yt(s.element,"top",g-h+"px")},HH=A.none,FB=A.none,VH=LB(-1),lg=LB(1),SE={"top-left":A.none(),top:A.some(SH),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(TH),"bottom-left":A.none(),left:A.none()};var zH=Object.freeze({__proto__:null,setValueFrom:IB,setToMin:wE,setToMax:cD,findValueOfOffset:sS,getValueFromEvent:IH,findPositionOfValue:lD,setPositionFromValue:FH,onLeft:HH,onRight:FB,onUp:VH,onDown:lg,edgeActions:SE});const xE=(t,s)=>{Tn(t,eS(),{value:s})},rS=(t,s)=>({x:t,y:s}),HB=(t,s,a)=>{const l=z0(t,s,a.left),d=sS(t,s,a.top),g=rS(l,d);return xE(t,g),g},iD=(t,s,a,l,d)=>{const g=t>0?eD:Q4,h=s?Sh(l).x:g(Sh(l).x,Cb(l),Sb(l),H0(l,d)),y=s?g(Sh(l).y,wb(l),xb(l),H0(l,d)):Sh(l).y;return xE(a,rS(h,y)),A.some(h)},kb=(t,s)=>(a,l,d)=>iD(t,s,a,l,d).map(It),aS=(t,s)=>{const a=Cb(s),l=wb(s);xE(t,rS(a,l))},cS=(t,s)=>{const a=Sb(s),l=xb(s);xE(t,rS(a,l))},VB=t=>j4(t),zB=(t,s,a,l)=>{const d=Sh(a),g=CE(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),h=lD(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),y=rc(s.element)/2,w=Qs(s.element)/2;Yt(s.element,"left",g-y+"px"),Yt(s.element,"top",h-w+"px")},UB=kb(-1,!1),WB=kb(1,!1),UH=kb(-1,!0),WH=kb(1,!0),ZH={"top-left":A.some(xB),top:A.some(Y4),"top-right":A.some(X4),right:A.some(xH),"bottom-right":A.some(Xu),bottom:A.some(EH),"bottom-left":A.some(TB),left:A.some(kH)};var jH=Object.freeze({__proto__:null,setValueFrom:HB,setToMin:aS,setToMax:cS,getValueFromEvent:VB,setPositionFromValue:zB,onLeft:UB,onRight:WB,onUp:UH,onDown:WH,edgeActions:ZH});const GH=[Se("stepSize",1),Se("speedMultiplier",10),Se("onChange",ee),Se("onChoose",ee),Se("onInit",ee),Se("onDragStart",ee),Se("onDragEnd",ee),Se("snapToGrid",!1),Se("rounded",!0),es("snapStart"),Qo("model",Ia("mode",{x:[Se("minX",0),Se("maxX",100),ss("value",t=>dn(t.mode.minX)),Ze("getInitialValue"),cr("manager",$B)],y:[Se("minY",0),Se("maxY",100),ss("value",t=>dn(t.mode.minY)),Ze("getInitialValue"),cr("manager",zH)],xy:[Se("minX",0),Se("maxX",100),Se("minY",0),Se("maxY",100),ss("value",t=>dn({x:t.mode.minX,y:t.mode.minY})),Ze("getInitialValue"),cr("manager",jH)]})),fc("sliderBehaviours",[mn,Wt]),ss("mouseIsDown",()=>dn(!1))],Nd=pl({name:"Slider",configFields:GH,partFields:yH,factory:(t,s,a,l)=>{const d=Pe=>Ll(Pe,t,"thumb"),g=Pe=>Ll(Pe,t,"spectrum"),h=Pe=>mt(Pe,t,"left-edge"),y=Pe=>mt(Pe,t,"right-edge"),w=Pe=>mt(Pe,t,"top-edge"),_=Pe=>mt(Pe,t,"bottom-edge"),O=t.model,B=O.manager,H=(Pe,ht)=>{B.setPositionFromValue(Pe,ht,t,{getLeftEdge:h,getRightEdge:y,getTopEdge:w,getBottomEdge:_,getSpectrum:g})},z=(Pe,ht)=>{O.value.set(ht);const Rt=d(Pe);H(Pe,Rt)},G=(Pe,ht)=>{z(Pe,ht);const Rt=d(Pe);return t.onChange(Pe,Rt,ht),A.some(!0)},ne=Pe=>{B.setToMin(Pe,t)},Ee=Pe=>{B.setToMax(Pe,t)},le=Pe=>{const ht=()=>{mt(Pe,t,"thumb").each(je=>{const cn=O.value.get();t.onChoose(Pe,je,cn)})},Rt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Rt&&ht()},xe=(Pe,ht)=>{ht.stop(),t.mouseIsDown.set(!0),t.onDragStart(Pe,d(Pe))},Ce=(Pe,ht)=>{ht.stop(),t.onDragEnd(Pe,d(Pe)),le(Pe)},Ke=Pe=>{mt(Pe,t,"spectrum").map(mn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.sliderBehaviours,[mn.config({mode:"special",focusIn:Ke}),Wt.config({store:{mode:"manual",getValue:Pe=>O.value.get(),setValue:z}}),ri.config({channels:{[L1()]:{onReceive:le}}})]),events:rr([Ge(eS(),(Pe,ht)=>{G(Pe,ht.event.value)}),gr((Pe,ht)=>{const Rt=O.getInitialValue();O.value.set(Rt);const je=d(Pe);H(Pe,je);const cn=g(Pe);t.onInit(Pe,je,cn,O.value.get())}),Ge(Ao(),xe),Ge(_a(),Ce),Ge(Dl(),(Pe,ht)=>{Ke(Pe),xe(Pe,ht)}),Ge(Mm(),Ce)]),apis:{resetToMin:ne,resetToMax:Ee,setValue:z,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),uD=Ut("rgb-hex-update"),dD=Ut("slider-update"),ZB=Ut("palette-update"),jB=(t,s)=>{const a=Nd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Nd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:W(0)},components:[a,l],sliderBehaviours:gt([Fn.config({})]),onChange:(d,g,h)=>{vt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Tn(d,dD,{value:h})}})},U0="form",KH=[fc("formBehaviours",[Wt])],mD=t=>"<alloy.field."+t+">",YH=t=>{const s=(()=>{const g=[];return{field:(y,w)=>(g.push(y),Bx(U0,mD(y),w)),record:W(g)}})(),a=t(s),l=s.record(),d=We(l,g=>Hc({name:g,pname:mD(g)}));return jm(U0,KH,d,JH,a)},XH=(t,s)=>t.fold(()=>eo.error(s),eo.value),JH=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.formBehaviours,[Wt.config({store:{mode:"manual",getValue:a=>{const l=ow(a,t);return Je(l,(d,g)=>d().bind(h=>{const y=Vo.getCurrent(h);return XH(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ti(h.element)))}).map(Wt.getValue))},setValue:(a,l)=>{$e(l,(d,g)=>{mt(a,t,g).each(h=>{Vo.getCurrent(h).each(y=>{Wt.setValue(y,d)})})})}}})]),apis:{getField:(a,l)=>mt(a,t,l).bind(Vo.getCurrent)}}),W0={getField:ap((t,s,a)=>t.getField(s,a)),sketch:YH},fD=Ut("valid-input"),GB=Ut("invalid-input"),gD=Ut("validating-input"),lS="colorcustom.rgb.",xh=(t,s,a,l)=>{const d=(H,z)=>cg.config({invalidClass:s("invalid"),notify:{onValidate:G=>{Tn(G,gD,{type:H})},onValid:G=>{Tn(G,fD,{type:H,value:Wt.getValue(G)})},onInvalid:G=>{Tn(G,GB,{type:H,value:Wt.getValue(G)})}},validator:{validate:G=>{const ne=Wt.getValue(G),Ee=z(ne)?eo.value(!0):eo.error(t("aria.input.invalid"));return bl.pure(Ee)},validateOnLoad:!1}}),g=(H,z,G,ne,Ee)=>{const le=t(lS+"range"),xe=_s.parts.label({dom:{tag:"label",attributes:{"aria-label":ne}},components:[qr(G)]}),Ce=_s.parts.field({data:Ee,factory:ib,inputAttributes:{type:"text",...z==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:gt([d(z,H),lr.config({})]),onSetValue:Rt=>{cg.isInvalid(Rt)&&cg.run(Rt).get(ee)}}),Ke=[xe,Ce],Pe=z!=="hex"?[_s.parts["aria-descriptor"]({text:le})]:[],ht=Ke.concat(Pe);return{dom:{tag:"div",attributes:{role:"presentation"}},components:ht}},h=(H,z)=>{const G=Ww(z);return W0.getField(H,"hex").each(ne=>{Fn.isFocused(ne)||Wt.setValue(H,{hex:G.value})}),G},y=(H,z)=>{const G=z.red,ne=z.green,Ee=z.blue;Wt.setValue(H,{red:G,green:ne,blue:Ee})},w=ws({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(H,z)=>{w.getOpt(H).each(G=>{Yt(G.element,"background-color","#"+z.value)})};return ai({factory:()=>{const H={red:dn(A.some(255)),green:dn(A.some(255)),blue:dn(A.some(255)),hex:dn(A.some("ffffff"))},z=(yn,as)=>{const Go=Zw(as);y(yn,Go),le(Go)},G=yn=>H[yn].get(),ne=(yn,as)=>{H[yn].set(as)},Ee=()=>G("red").bind(yn=>G("green").bind(as=>G("blue").map(Go=>hb(yn,as,Go,1)))),le=yn=>{const as=yn.red,Go=yn.green,Eo=yn.blue;ne("red",A.some(as)),ne("green",A.some(Go)),ne("blue",A.some(Eo))},xe=(yn,as)=>{const Go=as.event;Go.type!=="hex"?ne(Go.type,A.none()):l(yn)},Ce=(yn,as)=>{a(yn);const Go=y4(as);ne("hex",A.some(Go.value));const Eo=Zw(Go);y(yn,Eo),le(Eo),Tn(yn,uD,{hex:Go}),_(yn,Go)},Ke=(yn,as,Go)=>{const Eo=parseInt(Go,10);ne(as,A.some(Eo)),Ee().each(xt=>{const tn=h(yn,xt);Tn(yn,uD,{hex:tn}),_(yn,tn)})},Pe=yn=>yn.type==="hex",ht=(yn,as)=>{const Go=as.event;Pe(Go)?Ce(yn,Go.value):Ke(yn,Go.type,Go.value)},Rt=yn=>({label:t(lS+yn+".label"),description:t(lS+yn+".description")}),je=Rt("red"),cn=Rt("green"),Zt=Rt("blue"),Dn=Rt("hex");return Xs(W0.sketch(yn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[yn.field("red",_s.sketch(g(w4,"red",je.label,je.description,255))),yn.field("green",_s.sketch(g(w4,"green",cn.label,cn.description,255))),yn.field("blue",_s.sketch(g(w4,"blue",Zt.label,Zt.description,255))),yn.field("hex",_s.sketch(g(cP,"hex",Dn.label,Dn.description,"ffffff"))),w.asSpec()],formBehaviours:gt([cg.config({invalidClass:s("form-invalid")}),ro("rgb-form-events",[Ge(fD,ht),Ge(GB,xe),Ge(gD,xe)])])})),{apis:{updateHex:(yn,as)=>{Wt.setValue(yn,{hex:as.value}),z(yn,as),_(yn,as)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(H,z,G)=>{H.updateHex(z,G)}},extraApis:{}})},hD=(t,s)=>{const a=Nd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Nd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,O)=>{const{width:B,height:H}=_,z=_.getContext("2d");if(z===null)return;z.fillStyle=O,z.fillRect(0,0,B,H);const G=z.createLinearGradient(0,0,B,0);G.addColorStop(0,"rgba(255,255,255,1)"),G.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=G,z.fillRect(0,0,B,H);const ne=z.createLinearGradient(0,0,0,H);ne.addColorStop(0,"rgba(0,0,0,0)"),ne.addColorStop(1,"rgba(0,0,0,1)"),z.fillStyle=ne,z.fillRect(0,0,B,H)},g=(_,O)=>{const B=_.components()[0].element.dom,H=vb(O,100,100),z=fP(H);d(B,hP(z))},h=(_,O)=>{const B=eE(Zw(O));Nd.setValue(_,{x:B.saturation,y:100-B.value}),vt(_.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",B.saturation,B.value]))};return ai({factory:_=>{const O=W({x:0,y:0}),B=(G,ne,Ee)=>{Un(Ee)||vt(G.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ee.x),Math.floor(100-Ee.y)])),Tn(G,ZB,{value:Ee})},H=(G,ne,Ee,le)=>{d(Ee.element.dom,hP(pP))},z=gt([Vo.config({find:A.some}),Fn.config({})]);return Nd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[a,l],onChange:B,onInit:H,sliderBehaviours:z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,O,B)=>{g(O,B)},setThumb:(_,O,B)=>{h(O,B)}},extraApis:{}})},qB=(t,s)=>{const a=d=>{const g=xh(t,s,d.onValidHex,d.onInvalidHex),h=hD(t,s),y=ht=>(100-ht)/100*360,w=ht=>100-ht/360*100,_={paletteRgba:dn(pP),paletteHue:dn(0)},O=ws(jB(t,s)),B=ws(h.sketch({})),H=ws(g.sketch({})),z=(ht,Rt,je)=>{B.getOpt(ht).each(cn=>{h.setHue(cn,je)})},G=(ht,Rt)=>{H.getOpt(ht).each(je=>{g.updateHex(je,Rt)})},ne=(ht,Rt,je)=>{O.getOpt(ht).each(cn=>{Nd.setValue(cn,w(je))})},Ee=(ht,Rt)=>{B.getOpt(ht).each(je=>{h.setThumb(je,Rt)})},le=(ht,Rt)=>{const je=Zw(ht);_.paletteRgba.set(je),_.paletteHue.set(Rt)},xe=(ht,Rt,je,cn)=>{le(Rt,je),ut(cn,Zt=>{Zt(ht,Rt,je)})},Ce=()=>{const ht=[G];return(Rt,je)=>{const cn=je.event.value,Zt=_.paletteHue.get(),Dn=vb(Zt,cn.x,100-cn.y),yn=TP(Dn);xe(Rt,yn,Zt,ht)}},Ke=()=>{const ht=[z,G];return(Rt,je)=>{const cn=y(je.event.value),Zt=_.paletteRgba.get(),Dn=eE(Zt),yn=vb(cn,Dn.saturation,Dn.value),as=TP(yn);xe(Rt,as,cn,ht)}},Pe=()=>{const ht=[z,ne,Ee];return(Rt,je)=>{const cn=je.event.hex,Zt=K8(cn);xe(Rt,cn,Zt.hue,ht)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),O.asSpec(),H.asSpec()],behaviours:gt([ro("colour-picker-events",[Ge(uD,Pe()),Ge(ZB,Ce()),Ge(dD,Ke())]),Vo.config({find:ht=>H.getOpt(ht)}),mn.config({mode:"acyclic"})])}};return ai({name:"ColourPicker",configFields:[Ze("dom"),Se("onValidHex",ee),Se("onInvalidHex",ee)],factory:a})},ku={self:()=>Vo.config({find:A.some}),memento:t=>Vo.config({find:t.getOpt}),childAt:t=>Vo.config({find:s=>yc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},YB=Rn([Se("preprocess",Ot),Se("postprocess",Ot)]),XB=(t,s)=>{const a=Xc("RepresentingConfigs.memento processors",YB,s);return Wt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=Wt.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),h=t.get(l);Wt.setValue(h,g)}}})},_b=(t,s,a)=>Wt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),JB=(t,s,a)=>_b(t,l=>s(l.element),(l,d)=>a(l.element,d)),tV=t=>JB(t,si,np),TE=t=>Wt.config({store:{mode:"memory",initialValue:t}}),nV={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},QB=t=>s=>Mt(s)?t.translate(nV[s]):t.translate(s),e$=(t,s,a)=>{const l=w=>"tox-"+w,d=qB(QB(s),l),g=w=>{Tn(w,ag,{name:"hex-valid",value:!0})},h=w=>{Tn(w,ag,{name:"hex-valid",value:!1})},y=ws(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:h}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:gt([_b(a,w=>{const _=y.get(w);return Vo.getCurrent(_).bind(H=>Wt.getValue(H).hex).map(H=>"#"+Cl(H,"#")).getOr("")},(w,_)=>{const O=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=A.from(O.exec(_)).bind(G=>ms(G,1)),H=y.get(w);Vo.getCurrent(H).fold(()=>{console.log("Can not find form")},G=>{Wt.setValue(G,{hex:B.getOr("")}),W0.getField(G,"hex").each(ne=>{mo(ne,Yd())})})}),ku.self()])}};var oV=tinymce.util.Tools.resolve("tinymce.Resource");const t$=t=>yo(t,"init"),sV=t=>{const s=Ts(),a=ws({dom:{tag:t.tag}}),l=Ts(),d=!t$(t)&&t.onFocus.isSome()?[Fn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),lr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:gt([ro("custom-editor-events",[gr(g=>{a.getOpt(g).each(h=>{(t$(t)?t.init(h.element.dom):oV.load(t.scriptId,t.scriptUrl).then(y=>y(h.element.dom,t.settings))).then(y=>{l.on(w=>{y.setValue(w)}),l.clear(),s.set(y)})})})]),_b(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),y=>y.setValue(h))}),ku.self()].concat(d)),components:[a.asSpec()]}};var vm=tinymce.util.Tools.resolve("tinymce.util.Tools");const rV=(t,s)=>{const a=vm.explode(s.getOption("images_file_types")),l=d=>zs(a,g=>Na(d.name.toLowerCase(),`.${g.toLowerCase()}`));return uo(Ps(t),l)},aV=(t,s,a)=>{const l=(H,z)=>{z.stop()},d=H=>(z,G)=>{ut(H,ne=>{ne(z,G)})},g=(H,z)=>{var G;if(!In.isDisabled(H)){const ne=z.event.raw;y(H,(G=ne.dataTransfer)===null||G===void 0?void 0:G.files)}},h=(H,z)=>{const G=z.event.raw.target;y(H,G.files)},y=(H,z)=>{z&&(Wt.setValue(H,rV(z,s)),Tn(H,Ki,{name:t.name}))},w=ws({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:gt([ro("input-file-events",[pd(Ng()),pd(gd())])])}),_=H=>({uid:H.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:gt([TE(a.getOr([])),ku.self(),In.config({}),po.config({toggleClass:"dragenter",toggleOnExecute:!1}),ro("dropzone-events",[Ge("dragenter",d([l,po.toggle])),Ge("dragleave",d([l,po.toggle])),Ge("dragover",l),Ge("drop",d([l,g])),Ge(Zh(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[qr(s.translate("Drop an image here"))]},ol.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[qr(s.translate("Browse for an image")),w.asSpec()],action:z=>{w.get(z).element.dom.click()},buttonBehaviours:gt([lr.config({}),hm.button(s.isDisabled),Qa()])})]}]}),O=t.label.map(H=>Fp(H,s)),B=_s.parts.field({factory:{sketch:_}});return I0(O,B,["tox-form__group--stretched"],[])},n$=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:We(t.items,s.interpreter)}),o$=(t,s)=>{let a=null,l=null;return{cancel:()=>{qt(a)||(clearTimeout(a),a=null,l=null)},throttle:(...h)=>{l=h,qt(a)&&(a=setTimeout(()=>{const y=l;a=null,l=null,t.apply(null,y)},s))}}},cV=(t,s)=>{let a=null;return{cancel:()=>{qt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{qt(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},pD=(t,s)=>{let a=null;const l=()=>{qt(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},iS=Ut("alloy-fake-before-tabstop"),bD=Ut("alloy-fake-after-tabstop"),vD=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:gt([Fn.config({ignore:!0}),lr.config({})])}),s$=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[vD([iS]),s,vD([bD])],behaviours:gt([ku.childAt(1)])}),r$=(t,s)=>{Tn(t,Uu(),{raw:{which:9,shiftKey:s}})},lV=(t,s)=>{const a=s.element;Si(a,iS)?r$(t,!0):Si(a,bD)&&r$(t,!1)},Z0=t=>Yw(t,["."+iS,"."+bD].join(","),so),uS=Ut("update-dialog"),a$=Ut("update-title"),c$=Ut("update-body"),l$=Ut("update-footer"),i$=Ut("body-send-message"),dS=Ut("dialog-focus-shifted"),yD=ul().browser,j0=yD.isSafari(),iV=yD.isFirefox(),u$=j0||iV,uV=yD.isChromium(),dV=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,d$=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),mV=(t,s)=>{const a=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!uV&&!j0||Xe(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},m$=(t,s,a)=>{const l=t.dom;A.from(l.contentDocument).fold(a,d=>{let g=0;const h=mV(d,s).map(w=>(g=w.scrollTop,w)).forall(dV),y=()=>{const w=l.contentWindow;Xe(w)&&(h?d$(w,"bottom"):!h&&u$&&g!==0&&d$(w,g))};j0&&l.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),j0||y()})},fV=pn(u$,j0?500:200).map(t=>o$(m$,t)),CD=(t,s)=>{const a=dn(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,d)=>{if(a.get()!==d){const g=l.element,h=()=>vt(g,"srcdoc",d);s?fV.fold(W(m$),y=>y.throttle)(g,d,h):h()}a.set(d)}}},gV=(t,s,a)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=CD(a,t.streamContent),w=t.label.map(B=>Fp(B,s)),_=B=>s$(A.from(g),{uid:B.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:gt([lr.config({}),Fn.config({}),_b(a,y.getValue,y.setValue),ri.config({channels:{[dS]:{onReceive:(H,z)=>{z.newFocus.each(G=>{vc(H.element).each(ne=>{(jo(H.element,G)?ar:Lr)(ne,"tox-navobj-bordered-focus")})})}}}})])}),O=_s.parts.field({factory:{sketch:_}});return I0(w,O,["tox-form__group--stretched"],[])},hV=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[$l(t,"load",l),$l(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>ut(d,h=>h.unbind());t.dom.complete&&l()}),pV=(t,s,a,l,d)=>{const g=a*d,h=l*d,y=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:y.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},mS=(t,s,a)=>{const l=rc(t),d=Qs(t);return Math.min(l/s,d/a,1)},wD=(t,s)=>{const a=dn(s.getOr({url:""})),l=ws({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=ws({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(w,_)=>{const O={url:_.url};_.zoom.each(H=>O.zoom=H),_.cachedWidth.each(H=>O.cachedWidth=H),_.cachedHeight.each(H=>O.cachedHeight=H),a.set(O);const B=()=>{const{cachedWidth:H,cachedHeight:z,zoom:G}=O;if(!At(H)&&!At(z)){if(At(G)){const Ee=mS(w.element,H,z);O.zoom=Ee}const ne=pV(rc(w.element),Qs(w.element),H,z,O.zoom);d.getOpt(w).each(Ee=>{Gs(Ee.element,ne)})}};l.getOpt(w).each(H=>{const z=H.element;_.url!==bs(z,"src")&&(vt(z,"src",_.url),Lr(w.element,"tox-imagepreview__loaded")),B(),hV(z).then(G=>{w.getSystem().isConnected()&&(ar(w.element,"tox-imagepreview__loaded"),O.cachedWidth=G.dom.naturalWidth,O.cachedHeight=G.dom.naturalHeight,B())})})},h={};t.height.each(w=>h.height=w);const y=s.map(w=>({url:w.url,zoom:A.from(w.zoom),cachedWidth:A.from(w.cachedWidth),cachedHeight:A.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:gt([ku.self(),_b(y,()=>a.get(),g)])}},bV=(t,s,a)=>{const l="tox-label",d=t.align==="center"?[`${l}--center`]:[],g=t.align==="end"?[`${l}--end`]:[],h=ws({dom:{tag:"label",classes:[l,...d,...g]},components:[qr(s.providers.translate(t.label))]}),y=We(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...y],behaviours:gt([ku.self(),Zn.config({}),tV(A.none()),mn.config({mode:"acyclic"}),ro("label",[gr(w=>{t.for.each(_=>{a(_).each(O=>{h.getOpt(w).each(B=>{var H;const z=(H=bs(O.element,"id"))!==null&&H!==void 0?H:Ut("form-field");vt(O.element,"id",z),vt(B.element,"for",z)})})})})])])}},f$=Ut("toolbar.button.execute"),SD=t=>Wu((s,a)=>{WT(t,s)(l=>{Tn(s,f$,{buttonApi:l}),t.onAction(l)})}),Ab=Ut("common-button-display-events"),EE={[fu()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Rl()]:["toolbar-button-events",Ab],[gu()]:["toolbar-button-events","dropdown-events","tooltipping"],[Dl()]:["focusing","alloy.base.behaviour",Ab]},kE=t=>Yt(t.element,"width",xs(t.element,"width")),g$=(t,s,a)=>qi(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),xD=(t,s)=>g$(t,s,[]),Th=(t,s)=>g$(t,s,[Zn.config({})]),TD=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[qr(a.translate(t))],behaviours:gt([Zn.config({})])}),Pd=Ut("update-menu-text"),zp=Ut("update-menu-icon"),_E=(t,s,a,l)=>{const d=dn(ee),g=t.text.map(ne=>ws(TD(ne,s,a.providers))),h=t.icon.map(ne=>ws(Th(ne,a.providers.icons))),y=(ne,Ee)=>{const le=Wt.getValue(ne);return Fn.focus(le),Tn(le,"keydown",{raw:Ee.event.raw}),Od.close(le),A.some(!0)},w=t.role.fold(()=>({}),ne=>({role:ne})),_=A.from(t.listRole).map(ne=>({listRole:ne})).getOr({}),O=t.ariaLabel.fold(()=>({}),ne=>({"aria-label":a.providers.translate(ne)})),B=qi("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),H=Ut("common-button-display-events"),z="dropdown-events";return ws(Od.sketch({...t.uid?{uid:t.uid}:{},...w,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(We(t.classes,ne=>`${s}--${ne}`)),attributes:{...O,...Xe(l)?{"data-mce-name":l}:{}}},components:fb([h.map(ne=>ne.asSpec()),g.map(ne=>ne.asSpec()),A.some(B)]),matchWidth:!0,useMinWidth:!0,onOpen:(ne,Ee,le)=>{t.searchable&&rE(le)},dropdownBehaviours:gt([...t.dropdownBehaviours,hm.button(()=>t.disabled||a.providers.isDisabled()),Qa(),F0.config({}),Zn.config({}),...t.tooltip.map(ne=>Vc.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ne)}))).toArray(),ro(z,[Ch(t,d),Vl(t,d)]),ro(H,[gr((ne,Ee)=>kE(ne))]),ro("menubutton-update-display-text",[Ge(Pd,(ne,Ee)=>{g.bind(le=>le.getOpt(ne)).each(le=>{Zn.set(le,[qr(a.providers.translate(Ee.event.text))])})}),Ge(zp,(ne,Ee)=>{h.bind(le=>le.getOpt(ne)).each(le=>{Zn.set(le,[Th(Ee.event.icon,a.providers.icons)])})})])]),eventOrder:Xs(EE,{[Dl()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Rl()]:["toolbar-button-events",Vc.name(),z,H]}),sandboxBehaviours:gt([mn.config({mode:"special",onLeft:y,onRight:y}),ro("dropdown-sandbox-events",[Ge(AN,(ne,Ee)=>{P7(ne),Ee.stop()}),Ge(ON,(ne,Ee)=>{B7(ne,Ee),Ee.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Pw(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Kw,onCollapseMenu:(ne,Ee,le)=>{Nt.getHighlighted(le).each(xe=>{Kw(ne,le,xe)})},onDehighlightItem:L7}}},getAnchorOverrides:()=>({maxHeightFunction:(ne,Ee)=>{Av()(ne,Ee-10)}}),fetch:ne=>bl.nu(wn(t.fetch,ne))})).asSpec()},vV=t=>Mt(t),ED=t=>t.type==="separator",h$=t=>yo(t,"getSubmenuItems"),p$={type:"separator"},yV=(t,s)=>{const a=zo(t,(l,d)=>vV(d)?d===""?l:d==="|"?l.length>0&&!ED(l[l.length-1])?l.concat([p$]):l:yo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&ED(a[a.length-1])&&a.pop(),a},CV=(t,s)=>{const a=t.getSubmenuItems(),l=kD(a,s),d=Xs(l.menus,{[t.value]:l.items}),g=Xs(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},wV=t=>{const s=ft(t,"value").getOrThunk(()=>Ut("generated-menu-item"));return Xs({value:s},t)},kD=(t,s)=>{const a=yV(Mt(t)?t.split(" "):t,s);return cs(a,(l,d)=>{if(h$(d)){const g=wV(d),h=CV(g,s);return{menus:Xs(l.menus,h.menus),items:[h.item,...l.items],expansions:Xs(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},SV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),b$=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),G0=(t,s,a,l)=>{const d=Ut("primary-menu"),g=kD(t,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=SV(l),y=z7(d,g.items,s,a,l.isHorizontalMenu,h),w=b$(l),_=Je(g.menus,(B,H)=>z7(H,B,s,a,!1,w)),O=Xs(_,vs(d,y));return A.from(nb.tieredData(d,O,g.expansions))},AE=t=>!yo(t,"items"),OE="data-value",v$=(t,s,a,l,d)=>We(a,g=>AE(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{Wt.setValue(t,g.value),Tn(t,Ki,{name:s}),Fn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>v$(t,s,g.items,l,d)}),_D=(t,s)=>ls(t,a=>AE(a)?pn(a.value===s,a):_D(a.items,s)),xV=(t,s,a)=>{const l=zs(t.items,_=>!AE(_)),d=s.shared.providers,g=a.bind(_=>_D(t.items,_)).orThunk(()=>Us(t.items).filter(AE)),h=t.label.map(_=>Fp(_,d)),y=_s.parts.field({dom:{},factory:{sketch:_=>_E({uid:_.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:pn(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,B)=>{const H=v$(O,t.name,t.items,Wt.getValue(O),l);B(G0(H,dm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:W(ee),getApi:W({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[lr.config({}),_b(g.map(O=>O.value),O=>bs(O.element,OE),(O,B)=>{_D(t.items,B).each(H=>{vt(O.element,OE,H.value),Tn(O,Pd,{text:H.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[y]};return _s.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:gn([h.toArray(),[w]]),fieldBehaviours:gt([In.config({disabled:W(!t.enabled),onDisabled:_=>{_s.getField(_).each(In.disable)},onEnabled:_=>{_s.getField(_).each(In.enable)}})])})},AD=(t,s)=>({dom:{tag:"div",classes:t.classes},components:We(t.items,s.shared.interpreter)}),TV=(t,s)=>{const a=We(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>vs("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:gc(t.selectBehaviours,[Fn.config({}),Wt.config({store:{mode:"manual",getValue:d=>Be(d.element),setValue:(d,g)=>{const h=Us(t.options);Sn(t.options,w=>w.value===g).isSome()?om(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>om(d.element,w.value))},...l}})])}},y$=ai({name:"HtmlSelect",configFields:[Ze("options"),fc("selectBehaviours",[Fn,Wt]),Se("selectClasses",[]),Se("selectAttributes",{}),es("data")],factory:TV}),EV=(t,s,a)=>{const l=We(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>Fp(w,s)),g=_s.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:l,factory:y$,selectBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled()}),lr.config({}),ro("selectbox-change",[Ge(Zh(),(w,_)=>{Tn(w,Ki,{name:t.name})})])])}),h=t.size>1?A.none():A.some(qi("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:gn([[g],h.toArray()])};return _s.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:gn([d.toArray(),[y]]),fieldBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{_s.getField(w).each(In.disable)},onEnabled:w=>{_s.getField(w).each(In.enable)}}),Qa()])})},C$=W([Se("field1Name","field1"),Se("field2Name","field2"),hu("onLockedChange"),tm(["lockClass"]),Se("locked",!1),vu.field("coupledFieldBehaviours",[Vo,Wt])]),kV=(t,s,a)=>mt(t,s,a).bind(Vo.getCurrent),w$=(t,s)=>Hc({factory:_s,name:t,overrides:a=>({fieldBehaviours:gt([ro("coupled-input-behaviour",[Ge(Yd(),l=>{kV(l,a,s).each(d=>{mt(l,a,"lock").each(g=>{po.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),_V=W([w$("field1","field2"),w$("field2","field1"),Hc({factory:ol,schema:[Ze("dom")],name:"lock",overrides:t=>({buttonBehaviours:gt([po.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),AV=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:vu.augment(t.coupledFieldBehaviours,[Vo.config({find:A.some}),Wt.config({store:{mode:"manual",getValue:d=>{const g=j1(d,t,["field1","field2"]);return{[t.field1Name]:Wt.getValue(g.field1()),[t.field2Name]:Wt.getValue(g.field2())}},setValue:(d,g)=>{const h=j1(d,t,["field1","field2"]);Ar(g,t.field1Name)&&Wt.setValue(h.field1(),g[t.field1Name]),Ar(g,t.field2Name)&&Wt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>mt(d,t,"field1"),getField2:d=>mt(d,t,"field2"),getLock:d=>mt(d,t,"lock")}}),Ju=pl({name:"FormCoupledInputs",configFields:C$(),partFields:_V(),factory:AV,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),S$=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},OD=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return eo.value({value:l,unit:d})}else return eo.error(t)},x$=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>yo(a,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?A.some(t.value):A.some(t.value/a[t.unit]*a[s]):A.none()},DE=t=>A.none(),OV=(t,s)=>a=>x$(a,s).map(l=>({value:l*t,unit:s})),DV=(t,s)=>{const a=OD(t).toOptional(),l=OD(s).toOptional();return va(a,l,(d,g)=>x$(d,g.unit).map(h=>g.value/h).map(h=>OV(h,g.unit)).getOr(DE)).getOr(DE)},RV=(t,s)=>{let a=DE;const l=Ut("ratio-event"),d=z=>qi(z,{tag:"span",classes:["tox-icon","tox-lock-icon__"+z]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),y=Ju.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled()}),Qa(),lr.config({}),Vc.config(s.tooltips.getConfig({tooltipText:h}))])}),w=z=>({dom:{tag:"div",classes:["tox-form__group"]},components:z}),_=z=>_s.parts.field({factory:ib,inputClasses:["tox-textfield"],inputBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled()}),Qa(),lr.config({}),ro("size-input-events",[Ge(dd(),(G,ne)=>{Tn(G,l,{isField1:z})}),Ge(Zh(),(G,ne)=>{Tn(G,Ki,{name:t.name})})])]),selectOnFocus:!1}),O=z=>({dom:{tag:"label",classes:["tox-label"]},components:[qr(s.translate(z))]}),B=Ju.parts.field1(w([_s.parts.label(O("Width")),_(!0)])),H=Ju.parts.field2(w([_s.parts.label(O("Height")),_(!1)]));return Ju.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[B,H,w([O(Wf),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(z,G,ne)=>{OD(Wt.getValue(z)).each(Ee=>{a(Ee).each(le=>{Wt.setValue(G,S$(le))})})},coupledFieldBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:z=>{Ju.getField1(z).bind(_s.getField).each(In.disable),Ju.getField2(z).bind(_s.getField).each(In.disable),Ju.getLock(z).each(In.disable)},onEnabled:z=>{Ju.getField1(z).bind(_s.getField).each(In.enable),Ju.getField2(z).bind(_s.getField).each(In.enable),Ju.getLock(z).each(In.enable)}}),Qa(),ro("size-input-events2",[Ge(l,(z,G)=>{const ne=G.event.isField1,Ee=ne?Ju.getField1(z):Ju.getField2(z),le=ne?Ju.getField2(z):Ju.getField1(z),xe=Ee.map(Wt.getValue).getOr(""),Ce=le.map(Wt.getValue).getOr("");a=DV(xe,Ce)})])])})},T$=(t,s,a)=>{const l=Nd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[qr(s.translate(t.label))]}),d=Nd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Nd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:W(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:gt([ku.self(),Fn.config({})]),onChoose:(h,y,w)=>{Tn(h,Ki,{name:t.name,value:w})},onChange:(h,y,w)=>{Tn(h,Ki,{name:t.name,value:w})}})},MV=(t,s)=>{const a=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:We(y,a)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:We(y,d)}),h=y=>({dom:{tag:"tbody"},components:We(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:gt([lr.config({}),Fn.config({})])}},E$=(t,s)=>{const a=t.label.map(z=>Fp(z,s)),l=[In.config({disabled:()=>t.disabled||s.isDisabled()}),Qa(),mn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:z=>(mo(z,L0),A.some(!0))}),ro("textfield-change",[Ge(Yd(),(z,G)=>{Tn(z,Ki,{name:t.name})}),Ge(Nm(),(z,G)=>{Tn(z,Ki,{name:t.name})})]),lr.config({})],d=t.validation.map(z=>cg.config({getRoot:G=>vc(G.element),invalidClass:"tox-invalid",validator:{validate:G=>{const ne=Wt.getValue(G),Ee=z.validator(ne);return bl.pure(Ee===!0?eo.value(ne):eo.error(Ee))},validateOnLoad:z.validateOnLoad}})).toArray(),g=t.placeholder.fold(W({}),z=>({placeholder:s.translate(z)})),h=t.inputMode.fold(W({}),z=>({inputmode:z})),y={...g,...h},w=_s.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(z=>({data:z})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:gt(gn([l,d])),selectOnFocus:!1,factory:ib}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),H=[In.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:z=>{_s.getField(z).each(In.disable)},onEnabled:z=>{_s.getField(z).each(In.enable)}}),Qa()];return I0(a,_,B,H)},NV=(t,s,a)=>E$({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:a},s),k$=(t,s,a)=>E$({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:a},s),q0=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),ig=t=>t.dimension.property,ug=(t,s)=>t.dimension.getDimension(s),RE=(t,s)=>{const a=q0(t,s);xi(a,[s.shrinkingClass,s.growingClass])},DD=(t,s)=>{Lr(t.element,s.openClass),ar(t.element,s.closedClass),Yt(t.element,ig(s),"0px"),Ka(t.element)},RD=(t,s)=>{Lr(t.element,s.closedClass),ar(t.element,s.openClass),_o(t.element,ig(s))},_$=(t,s,a,l)=>{a.setCollapsed(),Yt(t.element,ig(s),ug(s,t.element)),RE(t,s),DD(t,s),s.onStartShrink(t),s.onShrunk(t)},A$=(t,s,a,l)=>{const d=l.getOrThunk(()=>ug(s,t.element));a.setCollapsed(),Yt(t.element,ig(s),d),Ka(t.element);const g=q0(t,s);Lr(g,s.growingClass),ar(g,s.shrinkingClass),DD(t,s),s.onStartShrink(t)},O$=(t,s,a)=>{const l=ug(s,t.element);(l==="0px"?_$:A$)(t,s,a,A.some(l))},D$=(t,s,a)=>{const l=q0(t,s),d=Si(l,s.shrinkingClass),g=ug(s,t.element);RD(t,s);const h=ug(s,t.element);(d?()=>{Yt(t.element,ig(s),g),Ka(t.element)}:()=>{DD(t,s)})(),Lr(l,s.shrinkingClass),ar(l,s.growingClass),RD(t,s),Yt(t.element,ig(s),h),a.setExpanded(),s.onStartGrow(t)},PV=(t,s,a)=>{if(a.isExpanded()){_o(t.element,ig(s));const l=ug(s,t.element);Yt(t.element,ig(s),l)}},R$=(t,s,a)=>{a.isExpanded()||D$(t,s,a)},M$=(t,s,a)=>{a.isExpanded()&&O$(t,s,a)},BV=(t,s,a)=>{a.isExpanded()&&_$(t,s,a)},$V=(t,s,a)=>a.isExpanded(),N$=(t,s,a)=>a.isCollapsed(),P$=(t,s,a)=>{const l=q0(t,s);return Si(l,s.growingClass)===!0},B$=(t,s,a)=>{const l=q0(t,s);return Si(l,s.shrinkingClass)===!0};var $$=Object.freeze({__proto__:null,refresh:PV,grow:R$,shrink:M$,immediateShrink:BV,hasGrown:$V,hasShrunk:N$,isGrowing:P$,isShrinking:B$,isTransitioning:(t,s,a)=>P$(t,s)||B$(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?O$:D$)(t,s,a)},disableTransitions:RE,immediateGrow:(t,s,a)=>{a.isExpanded()||(RD(t,s),Yt(t.element,ig(s),ug(s,t.element)),RE(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),I$=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return Ci(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:vs(s.dimension.property,"0px")})},events:(t,s)=>rr([jh(md(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(RE(a,t),s.isExpanded()&&_o(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),gG=[Ze("closedClass"),Ze("openClass"),Ze("shrinkingClass"),Ze("growingClass"),es("getAnimationRoot"),Ho("onShrunk"),Ho("onStartShrink"),Ho("onGrown"),Ho("onStartGrow"),Se("expanded",!1),Qo("dimension",Ia("property",{width:[cr("property","width"),cr("getDimension",t=>rc(t)+"px")],height:[cr("property","height"),cr("getDimension",t=>Qs(t)+"px")]}))],HV=Object.freeze({__proto__:null,init:t=>{const s=dn(t.expanded),a=()=>"expanded: "+s.get();return wi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:wn(s.set,!1),setExpanded:wn(s.set,!0),readState:a})}});const Mi=Ec({fields:gG,name:"sliding",active:I$,apis:$$,state:HV}),L$=t=>({isEnabled:()=>!In.isDisabled(t),setEnabled:s=>In.set(t,!s),setActive:s=>{const a=t.element;s?(ar(a,"tox-tbtn--enabled"),vt(a,"aria-pressed",!0)):(Lr(a,"tox-tbtn--enabled"),oe(a,"aria-pressed"))},isActive:()=>Si(t.element,"tox-tbtn--enabled"),setText:s=>{Tn(t,Pd,{text:s})},setIcon:s=>Tn(t,zp,{icon:s})}),fS=(t,s,a,l,d=!0,g)=>_E({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,y)=>{const w={pattern:t.search.isSome()?F7(h):""};t.fetch(_=>{y(G0(_,dm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},w,L$(h))},onSetup:t.onSetup,getApi:L$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[lr.config({})]:[]]},s,a.shared,g),VV=(t,s,a)=>{const l=g=>h=>{const y=!h.isActive();h.setActive(y),g.storage.set(y),a.shared.getSink().each(w=>{s().getOpt(w).each(_=>{Vi(_.element),Tn(_,ag,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(We(t,h=>{const y=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...y,onAction:l(h),onSetup:d(h)}}))}},MD=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[qr(t)]}),PE=Ut("leaf-label-event-id"),BE=({leaf:t,onLeafAction:s,visible:a,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>fS(w,"tox-mbtn",g,A.none(),a)),y=[MD(t.title)];return h.each(w=>y.push(w)),ol.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Uu()]:[PE,"keying"]},buttonBehaviours:gt([...a?[lr.config({})]:[],po.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ri.config({channels:{[`update-active-item-${l}`]:{onReceive:(w,_)=>{(_.value===t.id?po.on:po.off)(w)}}}}),ro(PE,[gr((w,_)=>{d.each(O=>{(O===t.id?po.on:po.off)(w)})}),Ge(Uu(),(w,_)=>{const O=_.event.raw.code==="ArrowLeft",B=_.event.raw.code==="ArrowRight";O?(Lm(w.element,".tox-tree--directory").each(H=>{w.getSystem().getByDom(H).each(z=>{tC(H,".tox-tree--directory__label").each(G=>{z.getSystem().getByDom(G).each(Fn.focus)})})}),_.stop()):B&&_.stop()})])])})},zV=(t,s,a)=>qi(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),UV=(t,s)=>zV(t,s,[]),F$=Ut("directory-label-event-id"),WV=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(y=>fS(y,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[UV("chevron-right",l.shared.providers.icons)]},MD(t.title)];d.each(y=>{g.push(y)});const h=y=>{Lm(y.element,".tox-tree--directory").each(w=>{y.getSystem().getByDom(w).each(_=>{const O=!po.isOn(_);po.toggle(_),Tn(y,"expand-tree-node",{expanded:O,node:t.id})})})};return ol.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Uu()]:[F$,"keying"]},buttonBehaviours:gt([...s?[lr.config({})]:[],ro(F$,[Ge(Uu(),(y,w)=>{const _=w.event.raw.code==="ArrowRight",O=w.event.raw.code==="ArrowLeft";_&&a&&w.stop(),(_||O)&&Lm(y.element,".tox-tree--directory").each(B=>{y.getSystem().getByDom(B).each(H=>{!po.isOn(H)&&_||po.isOn(H)&&O?(h(y),w.stop()):O&&!po.isOn(H)&&(Lm(H.element,".tox-tree--directory").each(z=>{tC(z,".tox-tree--directory__label").each(G=>{H.getSystem().getByDom(G).each(Fn.focus)})}),w.stop())})})})])])})},ZV=({children:t,onLeafAction:s,visible:a,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?BE({leaf:y,selectedId:g,onLeafAction:s,visible:a,treeId:l,backstage:h}):ND({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:h})),behaviours:gt([Mi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Zn.config({})])}),jV=Ut("directory-event-id"),ND=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:y}=t,w=dn(g),_=B=>y.map(H=>H.type==="leaf"?BE({leaf:H,selectedId:h,onLeafAction:s,visible:B,treeId:l,backstage:d}):ND({directory:H,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:B,treeId:l,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[WV({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),ZV({children:y,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:l,backstage:d})],behaviours:gt([ro(jV,[gr((B,H)=>{po.set(B,O)}),Ge("expand-tree-node",(B,H)=>{const{expanded:z,node:G}=H.event;w.set(z?[...w.get(),G]:w.get().filter(ne=>ne!==G))})]),po.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(B,H)=>{const z=B.components()[1],G=_(H);H?Mi.grow(z):Mi.shrink(z),Zn.set(z,G)}})])}},GV=Ut("tree-event-id"),qV=(t,s)=>{const a=t.onLeafAction.getOr(ee),l=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,g=dn(d),h=dn(t.defaultSelectedId),y=Ut("tree-id"),w=(_,O)=>t.items.map(B=>B.type==="leaf"?BE({leaf:B,selectedId:_,onLeafAction:a,visible:!0,treeId:y,backstage:s}):ND({directory:B,selectedId:_,onLeafAction:a,expandedIds:O,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:gt([mn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),ro(GV,[Ge("expand-tree-node",(_,O)=>{const{expanded:B,node:H}=O.event;g.set(B?[...g.get(),H]:g.get().filter(z=>z!==H)),l(g.get(),{expanded:B,node:H})})]),ri.config({channels:{[`update-active-item-${y}`]:{onReceive:(_,O)=>{h.set(A.some(O.value)),Zn.set(_,w(A.some(O.value),g.get()))}}}}),Zn.config({})])}};var H$=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return rr([Ge(t.event,l),Jd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ge(d,()=>s.cancel())]).getOr([])))}});const V$=t=>{const s=dn(null);return wi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var KV=Object.freeze({__proto__:null,throttle:V$,init:t=>t.stream.streams.state(t)});const YV=(t,s)=>{const a=t.stream,l=pD(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var XV=[Qo("stream",Ia("mode",{throttle:[Ze("delay"),Se("stopEvent",!0),cr("streams",{setup:YV,state:V$})]})),Se("event","input"),es("cancelEvent"),hu("onStream")];const PD=Ec({fields:XV,name:"streaming",active:H$,state:KV}),$E=(t,s,a)=>{const l=Wt.getValue(a);Wt.setValue(s,l),U$(s)},z$=(t,s)=>{const a=t.element,l=Be(a),d=a.dom;bs(a,"type")!=="number"&&s(d,l)},U$=t=>{z$(t,(s,a)=>s.setSelectionRange(a.length,a.length))},JV=(t,s)=>{z$(t,(a,l)=>a.setSelectionRange(s,l.length))},QV=(t,s,a)=>{if(t.selectsOver){const l=Wt.getValue(s),d=t.getDisplayText(l),g=Wt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{$E(t,s,a),JV(s,d.length)}):A.none()}else return A.none()},IE=W("alloy.typeahead.itemexecute"),ez=(t,s,a,l)=>{const d=(B,H,z)=>{t.previewing.set(!1);const G=aa.getCoupled(B,"sandbox");if(Wo.isOpen(G))Vo.getCurrent(G).each(ne=>{Nt.getHighlighted(ne).fold(()=>{z(ne)},()=>{Xd(G,ne.element,"keydown",H)})});else{const ne=Ee=>{Vo.getCurrent(Ee).each(z)};oE(t,h(B),B,G,l,ne,ci.HighlightMenuAndItem).get(ee)}},g=KO(t),h=B=>H=>H.map(z=>{const G=ur(z.menus),ne=ye(G,le=>uo(le.items,xe=>xe.type==="item"));return Wt.getState(B).update(We(ne,le=>le.data)),z}),y=B=>Vo.getCurrent(B),w="typeaheadevents",_=[Fn.config({}),Wt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>Be(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,H)=>{om(B.element,t.model.getDisplayText(H))},...t.initialData.map(B=>vs("initialValue",B)).getOr({})}}),PD.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,H)=>{const z=aa.getCoupled(B,"sandbox");if(Fn.isFocused(B)&&Be(B.element).length>=t.minChars){const ne=y(z).bind(le=>Nt.getHighlighted(le).map(Wt.getValue));t.previewing.set(!0);const Ee=le=>{y(z).each(xe=>{ne.fold(()=>{t.model.selectsOver&&Nt.highlightFirst(xe)},Ce=>{Nt.highlightBy(xe,Ke=>Wt.getValue(Ke).value===Ce.value),Nt.getHighlighted(xe).orThunk(()=>(Nt.highlightFirst(xe),A.none()))})})};oE(t,h(B),B,z,l,Ee,ci.HighlightJustMenu).get(ee)}},cancelEvent:yy()}),mn.config({mode:"special",onDown:(B,H)=>(d(B,H,Nt.highlightFirst),A.some(!0)),onEscape:B=>{const H=aa.getCoupled(B,"sandbox");return Wo.isOpen(H)?(Wo.close(H),A.some(!0)):A.none()},onUp:(B,H)=>(d(B,H,Nt.highlightLast),A.some(!0)),onEnter:B=>{const H=aa.getCoupled(B,"sandbox"),z=Wo.isOpen(H);if(z&&!t.previewing.get())return y(H).bind(G=>Nt.getHighlighted(G)).map(G=>(Tn(B,IE(),{item:G}),!0));{const G=Wt.getValue(B);return mo(B,yy()),t.onExecute(H,B,G),z&&Wo.close(H),A.some(!0)}}}),po.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),aa.config({others:{sandbox:B=>P4(t,B,{onOpen:()=>po.on(B),onClose:()=>{t.lazyTypeaheadComp.get().each(H=>oe(H.element,"aria-activedescendant")),po.off(B)}})}}),ro(w,[gr(B=>{t.lazyTypeaheadComp.set(A.some(B))}),Jd(B=>{t.lazyTypeaheadComp.set(A.none())}),Wu(B=>{const H=ee;M4(t,h(B),B,l,H,ci.HighlightMenuAndItem).get(ee)}),Ge(IE(),(B,H)=>{const z=aa.getCoupled(B,"sandbox");$E(t.model,B,H.event.item),mo(B,yy()),t.onItemExecute(B,z,H.event.item,Wt.getValue(B)),Wo.close(z),U$(B)})].concat(t.dismissOnBlur?[Ge(Tf(),B=>{const H=aa.getCoupled(B,"sandbox");Bl(H.element).isNone()&&Wo.close(H)})]:[]))],O={[gu()]:[Wt.name(),PD.name(),w],...t.eventOrder};return{uid:t.uid,dom:YO(Xs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...gc(t.typeaheadBehaviours,_)},eventOrder:O}},tz=W([es("lazySink"),Ze("fetch"),Se("minChars",5),Se("responseTime",1e3),Ho("onOpen"),Se("getHotspot",A.some),Se("getAnchorOverrides",W({})),Se("layouts",A.none()),Se("eventOrder",{}),F("model",{},[Se("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Se("selectsOver",!0),Se("populateFromBrowse",!0)]),Ho("onSetValue"),Nl("onExecute"),Ho("onItemExecute"),Se("inputClasses",[]),Se("inputAttributes",{}),Se("inputStyles",{}),Se("matchWidth",!0),Se("useMinWidth",!1),Se("dismissOnBlur",!0),tm(["openClass"]),es("initialData"),es("listRole"),fc("typeaheadBehaviours",[Fn,Wt,PD,mn,po,aa]),ss("lazyTypeaheadComp",()=>dn(A.none)),ss("previewing",()=>dn(!0))].concat(qO()).concat(sE())),nz=W([yu({schema:[jg()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{QV(t.model,d,l).fold(()=>{t.model.selectsOver?(Nt.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&$E(t.model,d,l),$(l.element,"id").each(g=>vt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(Tn(l,IE(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&$E(t.model,l,a)})}})})]),oz=pl({name:"Typeahead",configFields:tz(),partFields:nz(),factory:ez}),ym=t=>({...t,toCached:()=>ym(t.toCached()),bindFuture:w=>ym(t.bind(_=>_.fold(O=>bl.pure(eo.error(O)),O=>w(O)))),bindResult:w=>ym(t.map(_=>_.bind(w))),mapResult:w=>ym(t.map(_=>_.map(w))),mapError:w=>ym(t.map(_=>_.mapError(w))),foldResult:(w,_)=>t.map(O=>O.fold(w,_)),withTimeout:(w,_)=>ym(bl.nu(O=>{let B=!1;const H=setTimeout(()=>{B=!0,O(eo.error(_()))},w);t.get(z=>{B||(clearTimeout(H),O(z))})}))}),W$=t=>ym(bl.nu(t)),BD=t=>ym(bl.pure(eo.value(t))),Z$={nu:W$,wrap:ym,pure:BD,value:BD,error:t=>ym(bl.pure(eo.error(t))),fromResult:t=>ym(bl.pure(t)),fromFuture:t=>ym(t.map(eo.value)),fromPromise:t=>W$(s=>{t.then(a=>{s(eo.value(a))},a=>{s(eo.error(a))})})},K0=(t,s,a=[],l,d,g,h)=>{const y=s.fold(()=>({}),O=>({action:O})),w={buttonBehaviours:gt([hm.button(()=>!t.enabled||h.isDisabled()),Qa(),lr.config({}),...g.map(O=>Vc.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),ro("button press",[Kb("click"),Kb("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...y},_=Xs(w,{dom:l});return Xs(_,{components:d})},az=(t,s,a,l=[],d)=>{const g=t.tooltip.map(_=>({"aria-label":a.translate(_)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},y=t.icon.map(_=>xD(_,a.icons)),w=fb([y]);return K0(t,s,l,h,w,t.tooltip,a)},LE=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},$D=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(z=>xD(z,a.icons)),y=[h.getOrThunk(()=>qr(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...LE(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},H=t.icon.map(W(g));return K0(t,s,l,B,y,H,a)},j$=(t,s,a,l=[],d=[])=>{const g=$D(t,A.some(s),a,l,d);return ol.sketch(g)},ID=(t,s)=>a=>{s==="custom"?Tn(a,ag,{name:t,value:{}}):s==="submit"?mo(a,L0):s==="cancel"?mo(a,Hp):console.error("Unknown button type: ",s)},cz=(t,s)=>s==="menu",lz=(t,s)=>s==="custom"||s==="cancel"||s==="submit",tf=(t,s)=>s==="togglebutton",FE=(t,s,a)=>{var l,d;const g=t.icon.map(Ce=>Th(Ce,s.icons)).map(ws),h=Ce=>{Tn(Ce,ag,{name:t.name,value:{setIcon:Ke=>{g.map(Pe=>Pe.getOpt(Ce).each(ht=>{Zn.set(ht,[Th(Ke,s.icons)])}))}}})},y=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:y==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},_=w.tooltip.or(t.text).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),O=LE(y??"secondary"),B=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:{..._,...Xe(a)?{"data-mce-name":a}:{}}},z=[],G=s.translate(t.text.getOr("")),ne=qr(G),le=[...fb([g.map(Ce=>Ce.asSpec())]),...t.text.isSome()?[ne]:[]],xe=K0(w,A.some(h),z,H,le,t.tooltip,s);return ol.sketch(xe)},Ob=(t,s,a)=>{if(cz(t,s)){const l=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:y=>(y.setEnabled(t.enabled),ee),fetch:VV(d.items,l,a)},h=ws(fS(g,"tox-tbtn",a,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(lz(t,s)){const l=ID(t.name,s),d={...t,borderless:!1};return j$(d,l,a.shared.providers,[])}else{if(tf(t,s))return FE(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},iz=(t,s)=>{const a=ID(t.name,"custom");return oH(A.none(),_s.parts.field({factory:ol,...$D(t,A.some(a),s,[TE(""),ku.self()])}))},LD={type:"separator"},uz=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),gS=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),G$=t=>We(t,uz),FD=(t,s)=>uo(s,a=>a.type===t),q$=(t,s)=>G$(FD(t,s)),dz=t=>q$("header",t.targets),K$=t=>q$("anchor",t.targets),mz=t=>A.from(t.anchorTop).map(s=>gS("<top>",s)).toArray(),fz=t=>A.from(t.anchorBottom).map(s=>gS("<bottom>",s)).toArray(),HD=t=>We(t,s=>gS(s,s)),gz=t=>zo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(LD,a),[]),VD=(t,s)=>{const a=t.toLowerCase();return uo(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return nr(g.toLowerCase(),a)||nr(h.toLowerCase(),a)})},Y$=(t,s,a)=>{var l,d;const g=Wt.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const _=VD(h,HD(a.getHistory(t)));return t==="file"?gz([_,VD(h,dz(w)),VD(h,gn([mz(w),K$(w),fz(w)]))]):_})},zD=Ut("aria-invalid"),hz=(t,s,a,l)=>{const d=s.shared.providers,g=xe=>{const Ce=Wt.getValue(xe);a.addToHistory(Ce.value,t.filetype)},h={...l.map(xe=>({initialData:xe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":zD,type:"url"},minChars:0,responseTime:0,fetch:xe=>{const Ce=Y$(t.filetype,xe,a),Ke=G0(Ce,dm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return bl.pure(Ke)},getHotspot:xe=>G.getOpt(xe),onSetValue:(xe,Ce)=>{xe.hasConfigured(cg)&&cg.run(xe).get(ee)},typeaheadBehaviours:gt([...a.getValidationHandler().map(xe=>cg.config({getRoot:Ce=>vc(Ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ce,Ke)=>{O.getOpt(Ce).each(Pe=>{vt(Pe.element,"title",d.translate(Ke))})}},validator:{validate:Ce=>{const Ke=Wt.getValue(Ce);return Z$.nu(Pe=>{xe({type:t.filetype,url:Ke.value},ht=>{if(ht.status==="invalid"){const Rt=eo.error(ht.message);Pe(Rt)}else{const Rt=eo.value(ht.message);Pe(Rt)}})})},validateOnLoad:!1}})).toArray(),In.config({disabled:()=>!t.enabled||d.isDisabled()}),lr.config({}),ro("urlinput-events",[Ge(Yd(),xe=>{const Ce=Be(xe.element),Ke=Ce.trim();Ke!==Ce&&om(xe.element,Ke),t.filetype==="file"&&Tn(xe,Ki,{name:t.name})}),Ge(Zh(),xe=>{Tn(xe,Ki,{name:t.name}),g(xe)}),Ge(Nm(),xe=>{Tn(xe,Ki,{name:t.name}),g(xe)})])]),eventOrder:{[Yd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:xe=>xe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Pw(!1,1,"normal")},onExecute:(xe,Ce,Ke)=>{Tn(Ce,L0,{})},onItemExecute:(xe,Ce,Ke,Pe)=>{g(xe),Tn(xe,Ki,{name:t.name})}},y=_s.parts.field({...h,factory:oz}),w=t.label.map(xe=>Fp(xe,d)),O=ws(((xe,Ce,Ke=xe,Pe=xe)=>qi(Ke,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+xe],attributes:{title:d.translate(Pe),"aria-live":"polite",...Ce.fold(()=>({}),ht=>({id:ht}))}},d.icons))("invalid",A.some(zD),"warning")),B=ws({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),H=a.getUrlPicker(t.filetype),z=Ut("browser.url.event"),G=ws({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,B.asSpec()],behaviours:gt([In.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ne=ws(j$({name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},xe=>mo(xe,z),d,[],["tox-browse-url"])),Ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:gn([[G.asSpec()],H.map(()=>ne.asSpec()).toArray()])}),le=xe=>{Vo.getCurrent(xe).each(Ce=>{const Ke=Wt.getValue(Ce),Pe={fieldname:t.name,...Ke};H.each(ht=>{ht(Pe).get(Rt=>{Wt.setValue(Ce,Rt),Tn(xe,Ki,{name:t.name})})})})};return _s.sketch({dom:rH(),components:w.toArray().concat([Ee()]),fieldBehaviours:gt([In.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:xe=>{_s.getField(xe).each(In.disable),ne.getOpt(xe).each(In.disable)},onEnabled:xe=>{_s.getField(xe).each(In.enable),ne.getOpt(xe).each(In.enable)}}),Qa(),ro("url-input-events",[Ge(z,le)])])})},pz=(t,s)=>{const a=pN(t.icon,s.icons);return Qm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[ol.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:l=>Tn(l,ag,{name:"alert-banner",value:t.url}),buttonBehaviours:gt([FO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},bz=(t,s)=>{t.dom.checked=s},vz=t=>t.dom.checked,X$=(t,s,a)=>{const l=w=>(w.element.dom.click(),A.some(!0)),d=_s.parts.field({factory:{sketch:Ot},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:gt([ku.self(),In.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{vc(w.element).each(_=>ar(_,"tox-checkbox--disabled"))},onEnabled:w=>{vc(w.element).each(_=>Lr(_,"tox-checkbox--disabled"))}}),lr.config({}),Fn.config({}),JB(a,vz,bz),mn.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),ro("checkbox-events",[Ge(Zh(),(w,_)=>{Tn(w,Ki,{name:t.name})})])])}),g=_s.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[qr(s.translate(t.label))],behaviours:gt([F0.config({})])}),h=w=>qi(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),y=ws({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return _s.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:gt([In.config({disabled:()=>!t.enabled||s.isDisabled()}),Qa()])})},nf=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=ro("htmlpanel",[gr(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?Qm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:gt([Vc.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{ys(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Bl(d.element)).each(g=>{$(g,"data-mce-tooltip").each(h=>{Vc.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:ys(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Bl(d.element).filter(g=>$(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:W([Oa,Ja,Fa,Ha,Aa,Rs]),onRtl:W([Oa,Ja,Fa,Ha,Aa,Rs])},bubble:ju(0,-2,{})})}),l])}):Qm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:gt([lr.config({}),Fn.config({}),l])})},Va=t=>(s,a,l,d,g)=>ft(a,"name").fold(()=>t(a,d,A.none(),g),h=>s.field(h,t(a,d,ft(l,h),g))),yz=t=>(s,a,l,d,g)=>{const h=Xs(a,{source:"dynamic"});return Va(t)(s,h,l,d,g)},Cz={bar:Va((t,s)=>lE(t,s.shared)),collection:Va((t,s,a)=>aH(t,s.shared.providers,a)),alertbanner:Va((t,s)=>pz(t,s.shared.providers)),input:Va((t,s,a)=>NV(t,s.shared.providers,a)),textarea:Va((t,s,a)=>k$(t,s.shared.providers,a)),label:Va((t,s,a,l)=>bV(t,s.shared,l)),iframe:yz((t,s,a)=>gV(t,s.shared.providers,a)),button:Va((t,s)=>iz(t,s.shared.providers)),checkbox:Va((t,s,a)=>X$(t,s.shared.providers,a)),colorinput:Va((t,s,a)=>fB(t,s.shared,s.colorinput,a)),colorpicker:Va((t,s,a)=>e$(t,s.shared.providers,a)),dropzone:Va((t,s,a)=>aV(t,s.shared.providers,a)),grid:Va((t,s)=>n$(t,s.shared)),listbox:Va((t,s,a)=>xV(t,s,a)),selectbox:Va((t,s,a)=>EV(t,s.shared.providers,a)),sizeinput:Va((t,s)=>RV(t,s.shared.providers)),slider:Va((t,s,a)=>T$(t,s.shared.providers,a)),urlinput:Va((t,s,a)=>hz(t,s,s.urlinput,a)),customeditor:Va(sV),htmlpanel:Va((t,s)=>nf(t,s.shared.providers)),imagepreview:Va((t,s,a)=>wD(t,a)),table:Va((t,s)=>MV(t,s.shared.providers)),tree:Va((t,s)=>qV(t,s)),panel:Va((t,s)=>AD(t,s))},wz={field:(t,s)=>s,record:W([])},J$=(t,s,a,l,d)=>{const g=Xs(l,{shared:{interpreter:h=>UD(t,h,a,g,d)}});return UD(t,s,a,g,d)},UD=(t,s,a,l,d)=>ft(Cz,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,l,d)),WD=(t,s,a,l)=>UD(wz,t,s,a,l),Eh="layout-inset",Q$=t=>t.x,Sz=(t,s)=>t.x+t.width/2-s.width/2,zc=(t,s)=>t.x+t.width-s.width,hS=t=>t.y,ZD=(t,s)=>t.y+t.height-s.height,pS=(t,s)=>t.y+t.height/2-s.height/2,HE=(t,s,a)=>_c(zc(t,s),ZD(t,s),a.insetSouthwest(),rC(),"southwest",Ac(t,{right:0,bottom:3}),Eh),VE=(t,s,a)=>_c(Q$(t),ZD(t,s),a.insetSoutheast(),sC(),"southeast",Ac(t,{left:1,bottom:3}),Eh),bS=(t,s,a)=>_c(zc(t,s),hS(t),a.insetNorthwest(),oC(),"northwest",Ac(t,{right:0,top:2}),Eh),vS=(t,s,a)=>_c(Q$(t),hS(t),a.insetNortheast(),ip(),"northeast",Ac(t,{left:1,top:2}),Eh),Cm=(t,s,a)=>_c(Sz(t,s),hS(t),a.insetNorth(),aC(),"north",Ac(t,{top:2}),Eh),yS=(t,s,a)=>_c(Sz(t,s),ZD(t,s),a.insetSouth(),Kt(),"south",Ac(t,{bottom:3}),Eh),e5=(t,s,a)=>_c(zc(t,s),pS(t,s),a.insetEast(),cC(),"east",Ac(t,{right:0}),Eh),t5=(t,s,a)=>_c(Q$(t),pS(t,s),a.insetWest(),_1(),"west",Ac(t,{left:1}),Eh),n5=t=>{switch(t){case"north":return Cm;case"northeast":return vS;case"northwest":return bS;case"south":return yS;case"southeast":return VE;case"southwest":return HE;case"east":return e5;case"west":return t5}},CS=(t,s,a,l,d)=>Z2(l).map(n5).getOr(Cm)(t,s,a,l,d),o5=t=>{switch(t){case"north":return yS;case"northeast":return VE;case"northwest":return HE;case"south":return Cm;case"southeast":return vS;case"southwest":return bS;case"east":return t5;case"west":return e5}},s5=(t,s,a,l,d)=>Z2(l).map(o5).getOr(Cm)(t,s,a,l,d),wS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},r5=(t,s,a)=>{const d={maxHeightFunction:dp()},g=()=>({type:"node",root:ae(U(t())),node:A.from(t()),bubble:ju(12,12,wS),layouts:{onRtl:()=>[vS],onLtr:()=>[bS]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:ju(-12,12,wS),layouts:{onRtl:()=>[Fa,Aa,Oa],onLtr:()=>[Aa,Fa,Oa]},overrides:d});return()=>a()?g():h()},xz=(t,s,a,l)=>{const g={maxHeightFunction:dp()},h=()=>({type:"node",root:ae(U(s())),node:A.from(s()),bubble:ju(12,12,wS),layouts:{onRtl:()=>[Cm],onLtr:()=>[Cm]},overrides:g}),y=()=>t?{type:"node",root:ae(U(s())),node:A.from(s()),bubble:ju(0,-Ru(s()),wS),layouts:{onRtl:()=>[Ja],onLtr:()=>[Ja]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:ju(0,0,wS),layouts:{onRtl:()=>[Ja],onLtr:()=>[Ja]},overrides:g};return()=>l()?h():y()},Tz=(t,s,a)=>{const l=()=>({type:"node",root:ae(U(t())),node:A.from(t()),layouts:{onRtl:()=>[Cm],onLtr:()=>[Cm]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Oa],onLtr:()=>[Oa]}});return()=>a()?l():d()},a5=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:pe.fromDom(d),lastCell:pe.fromDom(g)};return A.some(h)}return A.some(hp.range(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset))}}),yG=t=>s=>({type:"node",root:t(),node:s}),CG=(t,s,a,l)=>{const d=x0(t),g=()=>pe.fromDom(t.getBody()),h=()=>pe.fromDom(t.getContentAreaContainer()),y=()=>d||!l();return{inlineDialog:r5(h,s,y),inlineBottomDialog:xz(t.inline,h,a,y),banner:Tz(h,s,y),cursor:a5(t,g),node:yG(g)}},Ez=t=>(s,a)=>{IP(t)(s,a)},kz=t=>()=>AP(t),_z=t=>s=>tE(t,s),c5=t=>s=>_P(t,s),jD=t=>({colorPicker:Ez(t),hasCustomColors:kz(t),getColors:_z(t),getColorCols:c5(t)}),Az=t=>()=>XM(t),Oz=t=>({isDraggableModal:Az(t)}),l5=t=>{const s=dn(ph(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},i5=t=>Ar(t,"items"),u5=t=>Ar(t,"format"),d5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],Dz=t=>yo(t,"items"),GD=t=>yo(t,"block"),m5=t=>yo(t,"inline"),Rz=t=>yo(t,"selector"),f5=t=>zo(t,(s,a)=>{if(Dz(a)){const l=f5(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(m5(a)||GD(a)||Rz(a)){const d=`custom-${Mt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),Mz=(t,s)=>{const a=f5(s),l=d=>{ut(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},g5=t=>zM(t).map(s=>{const a=Mz(t,s);return UM(t)?d5.concat(a):a}).getOr(d5),h5=t=>{const s=qo(t);return s.length===1&&bo(s,"title")},p5=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),SS=(t,s,a,l)=>{const d=w=>p5(w,a,l),g=w=>{const _=y(w.items);return{...w,type:"submenu",getStyleItems:W(_)}},h=w=>{const _=Mt(w.name)?w.name:Ut(w.title),O=`custom-${_}`,B={...w,type:"formatter",format:O,isSelected:a(O),getStylePreview:l(O)};return t.formatter.register(_,B),B},y=w=>We(w,_=>i5(_)?g(_):u5(_)?d(_):h5(_)?{..._,type:"separator"}:h(_));return y(s)},Nz=t=>{const s=y=>()=>t.formatter.match(y),a=y=>()=>{const w=t.formatter.get(y);return w!==void 0?A.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):A.none()},l=dn([]),d=dn([]),g=dn(!1);return t.on("PreInit",y=>{const w=g5(t),_=SS(t,w,s,a);l.set(_)}),t.on("addStyleModifications",y=>{const w=SS(t,y.items,s,a);d.set(w),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:l.get(),w=d.get();return y.concat(w)}}},zE=t=>{let l=0;const d=()=>l>0,g=y=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[qr(y.tooltipText)]}];return{getConfig:y=>({delayForShow:()=>d()?60:300,delayForHide:W(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(y),onShow:(w,_)=>{l++,y.onShow&&y.onShow(w,_)},onHide:(w,_)=>{l--,y.onHide&&y.onHide(w,_)}}),getComponents:g}},Pz=t=>Xe(t)&&t.nodeType===1,qD=vm.trim,Y0=t=>s=>!!(Pz(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),b5=Y0("true"),Bz=Y0("false"),KD=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),v5=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return b5(s)}return!1},y5=(t,s)=>We(nl(pe.fromDom(s),t),a=>a.dom),C5=t=>t.innerText||t.textContent,YD=t=>t.id?t.id:Ut("h"),UE=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,$z=t=>UE(t)&&Db(t),w5=t=>t&&/^(H[1-6])$/.test(t.nodeName),Db=t=>v5(t)&&!Bz(t),S5=t=>w5(t)&&Db(t),Iz=t=>w5(t)?parseInt(t.nodeName.substr(1),10):0,x5=t=>{var s;const a=YD(t),l=()=>{t.id=a};return KD("header",(s=C5(t))!==null&&s!==void 0?s:"","#"+a,Iz(t),l)},XD=t=>{const s=t.id||t.name,a=C5(t);return KD("anchor",a||"#"+s,"#"+s,0,ee)},JD=t=>We(uo(t,S5),x5),Lz=t=>We(uo(t,$z),XD),Fz=t=>y5("h1,h2,h3,h4,h5,h6,a:not([href])",t),Hz=t=>qD(t.title).length>0,Vz={find:t=>{const s=Fz(t);return uo(JD(s).concat(Lz(s)),Hz)}},WE="tinymce-url-history",E5=5,k5=t=>Mt(t)&&/^https?/.test(t),zz=t=>Cn(t)&&t.length<=E5&&Ct(t,k5),_5=t=>Gt(t)&&fs(t,s=>!zz(s)).isNone(),A5=()=>{const t=bb.getItem(WE);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+WE+" was not valid JSON",a),{};throw a}return _5(s)?s:(console.log("Local storage "+WE+" was not valid format",s),{})},O5=t=>{if(!_5(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));bb.setItem(WE,JSON.stringify(t))},Uz=t=>{const s=A5();return ft(s,t).getOr([])},xS=(t,s)=>{if(!k5(t))return;const a=A5(),l=ft(a,s).getOr([]),d=uo(l,g=>g!==t);a[s]=[t].concat(d).slice(0,E5),O5(a)},D5=t=>!!t,Wz=t=>Je(vm.makeMap(t,/[, ]/),D5),TS=t=>A.from(qM(t)),R5=t=>{const s=A.from(hO(t)).filter(D5).map(Wz);return TS(t).fold(so,a=>s.fold(It,l=>qo(l).length>0?l:!1))},Zz=(t,s)=>{const a=R5(t);return En(a)?a?TS(t):A.none():a[s]?TS(t):A.none()},jz=(t,s)=>Zz(t,s).map(a=>l=>bl.nu(d=>{const g=(y,w)=>{if(!Mt(y))throw new Error("Expected value to be string");if(w!==void 0&&!Gt(w))throw new Error("Expected meta to be a object");d({value:y,meta:w})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};a.call(t,g,l.value,h)})),M5=t=>A.from(t).filter(Mt).getOrUndefined(),Gz=t=>KM(t)?A.some({targets:Vz.find(t.getBody()),anchorTop:M5(iT(t)),anchorBottom:M5(YM(t))}):A.none(),qz=t=>A.from(lT(t)),Kz=t=>({getHistory:Uz,addToHistory:xS,getLinkInformation:()=>Gz(t),getValidationHandler:()=>qz(t),getUrlPicker:s=>jz(t,s)}),Yz=(t,s,a,l)=>{const d=dn(!1),g=l5(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Yu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:zE(t.dialog)},y=Kz(s),w=Nz(s),_=jD(s),O=Oz(s),B=()=>d.get(),H=le=>d.set(le),z={shared:{providers:h,anchors:CG(s,a,l,g.isPositionedAtTop),header:g},urlinput:y,styles:w,colorinput:_,dialog:O,isContextMenuOpen:B,setContextMenuState:H},G=le=>A.none(),ne={...z,shared:{...z.shared,interpreter:le=>WD(le,{},ne,G),getSink:t.popup}},Ee={...z,shared:{...z.shared,interpreter:le=>WD(le,{},Ee,G),getSink:t.dialog}};return{popup:ne,dialog:Ee}},Xz=(t,s,a)=>{const l=(je,cn)=>{ut([s,...a],Zt=>{Zt.broadcastEvent(je,cn)})},d=(je,cn)=>{ut([s,...a],Zt=>{Zt.broadcastOn([je],cn)})},g=je=>d(am(),{target:je.target}),h=kl(),y=$l(h,"touchstart",g),w=$l(h,"touchmove",je=>l(u1(),je)),_=$l(h,"touchend",je=>l(Cy(),je)),O=$l(h,"mousedown",g),B=$l(h,"mouseup",je=>{je.raw.button===0&&d(L1(),{target:je.target})}),H=je=>d(am(),{target:pe.fromDom(je.target)}),z=je=>{je.button===0&&d(L1(),{target:pe.fromDom(je.target)})},G=()=>{ut(t.editorManager.get(),je=>{t!==je&&je.dispatch("DismissPopups",{relatedTarget:t})})},ne=je=>l(Pg(),vC(je)),Ee=je=>{d(lh(),{}),l(hd(),vC(je))},le=U(pe.fromDom(t.getElement())),xe=bC(le,"scroll",je=>{requestAnimationFrame(()=>{const cn=t.getContainer();if(cn!=null){const Dn=bh(t,s.element).map(yn=>[yn.element,...yn.others]).getOr([]);zs(Dn,yn=>jo(yn,je.target))&&(t.dispatch("ElementScroll",{target:je.target.dom}),l(JS(),je))}})}),Ce=()=>d(lh(),{}),Ke=je=>{je.state&&d(am(),{target:pe.fromDom(t.getContainer())})},Pe=je=>{d(am(),{target:pe.fromDom(je.relatedTarget.getContainer())})},ht=je=>t.dispatch("focusin",je),Rt=je=>t.dispatch("focusout",je);t.on("PostRender",()=>{t.on("click",H),t.on("tap",H),t.on("mouseup",z),t.on("mousedown",G),t.on("ScrollWindow",ne),t.on("ResizeWindow",Ee),t.on("ResizeEditor",Ce),t.on("AfterProgressState",Ke),t.on("DismissPopups",Pe),ut([s,...a],je=>{je.element.dom.addEventListener("focusin",ht),je.element.dom.addEventListener("focusout",Rt)})}),t.on("remove",()=>{t.off("click",H),t.off("tap",H),t.off("mouseup",z),t.off("mousedown",G),t.off("ScrollWindow",ne),t.off("ResizeWindow",Ee),t.off("ResizeEditor",Ce),t.off("AfterProgressState",Ke),t.off("DismissPopups",Pe),ut([s,...a],je=>{je.element.dom.removeEventListener("focusin",ht),je.element.dom.removeEventListener("focusout",Rt)}),O.unbind(),y.unbind(),w.unbind(),_.unbind(),B.unbind(),xe.unbind()}),t.on("detach",()=>{ut([s,...a],UC),ut([s,...a],je=>je.destroy())})},Rc=Ix,kh=Mx,Jz=W([Se("shell",!1),Ze("makeItem"),Se("setupItem",ee),vu.field("listBehaviours",[Zn])]),N5=Gi({name:"items",overrides:()=>({behaviours:gt([Zn.config({})])})}),ZE=W([N5]),P5=W("CustomList"),e9=(t,s,a,l)=>{const d=(y,w)=>{h(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const O=Zn.contents(_),B=w.length,H=B-O.length,z=H>0?lo(H,()=>t.makeItem()):[],G=O.slice(B);ut(G,Ee=>Zn.remove(_,Ee)),ut(z,Ee=>Zn.append(_,Ee));const ne=Zn.contents(_);ut(ne,(Ee,le)=>{t.setupItem(y,Ee,w[le],le)})})},g=t.shell?{behaviours:[Zn.config({})],components:[]}:{behaviours:[],components:s},h=y=>t.shell?A.some(y):mt(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:gc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},B5=pl({name:P5(),configFields:Jz(),partFields:ZE(),factory:e9,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),X0=W([Ze("dom"),Se("shell",!0),fc("toolbarBehaviours",[Zn])]),t9=W([Gi({name:"groups",overrides:()=>({behaviours:gt([Zn.config({})])})})]),n9=(t,s,a,l)=>{const d=(y,w)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Zn.set(_,w)})},g=y=>t.shell?A.some(y):mt(y,t,"groups"),h=t.shell?{behaviours:[Zn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:gc(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ee},domModification:{attributes:{role:"group"}}}},of=pl({name:"Toolbar",configFields:X0(),partFields:t9(),factory:n9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),$5=ee,I5=so,L5=W([]);var F5=Object.freeze({__proto__:null,setup:$5,isDocked:I5,getBehaviours:L5});const QD=W(Ut("toolbar-height-change")),dg={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},H5="tox-tinymce--toolbar-sticky-on",Up="tox-tinymce--toolbar-sticky-off",V5=(t,s)=>{const a=Ba(s),d=Pc(s).dom.innerHeight,g=Xa(a),h=pe.fromDom(t.elm),y=Gc(h),w=Qs(h),_=y.y,O=_+w,B=wa(s),H=Qs(s),z=B.top,G=z+H,ne=Math.abs(z-g.top)<2,Ee=Math.abs(G-(g.top+d))<2;if(ne&&_<G)lf(g.left,_-H,a);else if(Ee&&O>z){const le=_-d+w+H;lf(g.left,le,a)}},Wp=(t,s)=>bo(Nr.getModes(t),s),J0=t=>{const s=l=>Ru(l)+(parseInt(xs(l,"margin-top"),10)||0)+(parseInt(xs(l,"margin-bottom"),10)||0),a=t.element;vc(a).each(l=>{const d="padding-"+Nr.getModes(t)[0];if(Nr.isDocked(t)){const g=rc(l);Yt(a,"width",g+"px"),Yt(l,d,s(a)+"px")}else _o(a,"width"),_o(l,d)})},e3=(t,s)=>{s?(Lr(t,dg.fadeOutClass),Kh(t,[dg.transitionClass,dg.fadeInClass])):(Lr(t,dg.fadeInClass),Kh(t,[dg.fadeOutClass,dg.transitionClass]))},t3=(t,s)=>{const a=pe.fromDom(t.getContainer());s?(ar(a,H5),Lr(a,Up)):(ar(a,Up),Lr(a,H5))},z5=(t,s)=>{const a=Ba(s);xd(a).filter(l=>!jo(s,l)).filter(l=>jo(l,pe.fromDom(a.dom.body))||Wr(t,l)).each(()=>Vi(s))},SG=(t,s)=>Bl(t).orThunk(()=>s().toOptional().bind(a=>Bl(a.element))),o9=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Nr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(J0)}),t.on("SkinLoaded",()=>{a().each(l=>{Nr.isDocked(l)?Nr.reset(l):Nr.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Nr.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Nr.refresh(d);const g=d.element;IR(g)&&V5(l,g)})}),t.on("PostRender",()=>{t3(t,!1)})},s9=t=>t().map(Nr.isDocked).getOr(!1),r9=()=>[ri.config({channels:{[QD()]:{onReceive:J0}}})],U5=(t,s)=>{const a=Ts(),l=s.getSink,d=y=>{l().each(w=>y(w.element))},g=y=>{t.inline||J0(y),t3(t,Nr.isDocked(y)),y.getSystem().broadcastOn([lh()],{}),l().each(w=>w.getSystem().broadcastOn([lh()],{}))},h=t.inline?[]:r9();return[Fn.config({}),Nr.config({contextual:{lazyContext:y=>{const w=Ru(y.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(_).map(O=>{const B=xr(pe.fromDom(O));return bh(t,y.element).fold(()=>{const z=B.height-w,G=B.y+(Wp(y,"top")?0:w);return Ys(B.x,G,B.width,z)},z=>{const G=kg(B,cb(z)),ne=Wp(y,"top")?G.y:G.y+w;return Ys(G.x,ne,G.width,G.height-w)})})},onShow:()=>{d(y=>e3(y,!0))},onShown:y=>{d(w=>xi(w,[dg.transitionClass,dg.fadeInClass])),a.get().each(w=>{z5(y.element,w),a.clear()})},onHide:y=>{SG(y.element,l).fold(a.clear,a.set),d(w=>e3(w,!1))},onHidden:()=>{d(y=>xi(y,[dg.transitionClass]))},...dg},lazyViewport:y=>bh(t,y.element).fold(()=>{const _=oa(),O=GM(t),B=_.y+(Wp(y,"top")?O:0),H=_.height-(Wp(y,"bottom")?O:0);return{bounds:Ys(_.x,B,_.width,H),optScrollEnv:A.none()}},_=>({bounds:cb(_),optScrollEnv:A.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:wa(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var a9=Object.freeze({__proto__:null,setup:o9,isDocked:s9,getBehaviours:U5});const Q0=t=>{const s=t.editor,a=t.sticky?U5:L5;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:gt(a(s,t.sharedBackstage))}},ES=Rn([Ra,Qo("items",vf([o1([MT,ni("items",Ht)]),Ht]))].concat(Hw)),n3=t=>Tr("GroupToolbarButton",ES,t),c9=[pa("text"),pa("tooltip"),pa("icon"),vi("search",!1,vf([ei,Rn([pa("placeholder")])],t=>En(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),ti("fetch"),Vr("onSetup",()=>ee)],W5=Rn([Ra,...c9]),jE=t=>Tr("menubutton",W5,t),l9=Rn([Ra,Lw,_d,Lp,FN,u8,Ip,Hi("presets","normal",["normal","color","listpreview"]),IT(1),_0,n4]),kS=t=>Tr("SplitButton",l9,t);var o3=ai({factory:(t,s)=>{const a=(d,g)=>{const h=We(g,y=>{const w={type:"menubutton",text:y.text,fetch:O=>{O(y.getItems())}},_=jE(w).mapError(O=>iu(O)).getOrDie();return fS(_,"tox-mbtn",s.backstage,A.some("menuitem"))});Zn.set(d,h)},l={focus:mn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:gt([Zn.config({}),ro("menubar-events",[gr(d=>{t.onSetup(d)}),Ge(qd(),(d,g)=>{ys(d.element,".tox-mbtn--active").each(h=>{Sd(g.event.target,".tox-mbtn").each(y=>{jo(h,y)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(y).each(_=>{Od.expand(_),Od.close(w),Fn.focus(_)})})})})}),Ge(Bg(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{Od.isOpen(h)&&(Od.expand(y),Od.close(h))})})})]),mn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),lr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ze("dom"),Ze("uid"),Ze("onEscape"),Ze("backstage"),Se("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const u9="⚡️Upgrade",d9="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",m9=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:d9,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:u9}}]}),Z5="container",f9=[fc("slotBehaviours",[])],s3=t=>"<alloy.field."+t+">",j5=t=>{const s=(()=>{const g=[];return{slot:(y,w)=>(g.push(y),Bx(Z5,s3(y),w)),record:W(g)}})(),a=t(s),l=s.record(),d=We(l,g=>Hc({name:g,pname:s3(g)}));return jm(Z5,f9,d,r3,a)},r3=(t,s)=>{const a=ne=>Z1(t),l=(ne,Ee)=>mt(ne,t,Ee),d=(ne,Ee)=>(le,xe)=>mt(le,t,xe).map(Ce=>ne(Ce,xe)).getOr(Ee),g=ne=>(Ee,le)=>{ut(le,xe=>ne(Ee,xe))},h=(ne,Ee)=>bs(ne.element,"aria-hidden")!=="true",y=(ne,Ee)=>{if(!h(ne)){const le=ne.element;_o(le,"display"),oe(le,"aria-hidden"),Tn(ne,Sy(),{name:Ee,visible:!0})}},w=(ne,Ee)=>{if(h(ne)){const le=ne.element;Yt(le,"display","none"),vt(le,"aria-hidden","true"),Tn(ne,Sy(),{name:Ee,visible:!1})}},_=d(h,!1),O=d(w),B=g(O),H=ne=>B(ne,a()),z=d(y),G={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:O,hideAllSlots:H,showSlot:z};return{uid:t.uid,dom:t.dom,components:s,behaviours:V1(t.slotBehaviours),apis:G}},Uc={...Je({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>ap(t)),sketch:j5},GE=Rn([_d,Lw,Vr("onShow",ee),Vr("onHide",ee),Ip]),G5=t=>Tr("sidebar",GE,t),g9=t=>{const{sidebars:s}=t.ui.registry.getAll();ut(qo(s),a=>{const l=s[a],d=()=>la(A.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},h9=t=>({element:()=>t.element.dom}),p9=(t,s)=>{const a=We(qo(s),l=>{const d=s[l],g=at(G5(d));return{name:l,getApi:h9,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return We(a,l=>{const d=dn(ee);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:A0.unnamedEvents([Ch(l,d),Vl(l,d),Ge(Sy(),(g,h)=>{const y=h.event;Sn(a,_=>_.name===y.name).each(_=>{(y.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},b9=t=>Uc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:p9(s,t),slotBehaviours:A0.unnamedEvents([gr(a=>Uc.hideAllSlots(a))])})),a3=(t,s,a)=>{Vo.getCurrent(t).each(d=>{Zn.set(d,[b9(s)]);const g=a==null?void 0:a.toLowerCase();Mt(g)&&yo(s,g)&&Vo.getCurrent(d).each(h=>{Uc.showSlot(h,g),Mi.immediateGrow(d),_o(d.element,"width"),ey(t.element,"region")})})},ey=(t,s)=>{vt(t,"role",s)},v9=(t,s)=>{Vo.getCurrent(t).each(l=>{Vo.getCurrent(l).each(g=>{Mi.hasGrown(l)?Uc.isShowing(g,s)?(Mi.shrink(l),ey(t.element,"presentation")):(Uc.hideAllSlots(g),Uc.showSlot(g,s),ey(t.element,"region")):(Uc.hideAllSlots(g),Uc.showSlot(g,s),Mi.grow(l),ey(t.element,"region"))})})},c3=t=>Vo.getCurrent(t).bind(a=>Mi.isGrowing(a)||Mi.hasGrown(a)?Vo.getCurrent(a).bind(g=>Sn(Uc.getSlotNames(g),h=>Uc.isShowing(g,h))):A.none()),l3=Ut("FixSizeEvent"),i3=Ut("AutoSizeEvent"),y9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:gt([lr.config({}),Fn.config({}),Mi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Vo.getCurrent(s).each(Uc.hideAllSlots),mo(s,i3)},onGrown:s=>{mo(s,i3)},onStartGrow:s=>{Tn(s,l3,{width:$s(s.element,"width").getOr("")})},onStartShrink:s=>{Tn(s,l3,{width:rc(s.element)+"px"})}}),Zn.config({}),Vo.config({find:s=>{const a=Zn.contents(s);return Us(a)}})])}],behaviours:gt([ku.childAt(0),ro("sidebar-sliding-events",[Ge(l3,(s,a)=>{Yt(s.element,"width",a.event.width)}),Ge(i3,(s,a)=>{_o(s.element,"width")})])])});var kG=Object.freeze({__proto__:null,block:(t,s,a,l)=>{vt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=gt([mn.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Fn.config({})]),h=l(d,g),y=d.getSystem().build(h);Zn.append(d,fl(y)),y.hasConfigured(mn)&&s.focus&&mn.focusIn(y),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Zn.remove(d,y))},unblock:(t,s,a)=>{oe(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),q5=[Vr("getRoot",A.none),jr("focus",!0),Ho("onBlock"),Ho("onUnblock")],K5=Object.freeze({__proto__:null,init:()=>{const t=Ph(),s=a=>{t.set({destroy:a})};return wi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const sf=Ec({fields:q5,name:"blocking",apis:kG,state:K5}),C9=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:qm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Y5=t=>Vo.getCurrent(t).each(s=>Vi(s.element,!0)),w9=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;A.from(t.iframeElement).map(pe.fromDom).each(d=>{s?($(d,a).each(g=>vt(d,l,g)),vt(d,a,-1)):(oe(d,a),$(d,l).each(g=>{vt(d,a,g),oe(d,l)}))})},S9=(t,s,a,l)=>{const d=s.element;if(w9(t,a),a)sf.block(s,C9(l)),_o(d,"display"),oe(d,"aria-hidden"),t.hasFocus()&&Y5(s);else{const g=Vo.getCurrent(s).exists(h=>O1(h.element));sf.unblock(s),Yt(d,"display","none"),vt(d,"aria-hidden","true"),g&&t.focus()}},X5=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:gt([Zn.config({}),sf.config({focus:!1}),Vo.config({find:s=>Us(s.components())})]),components:[]}),x9=t=>t.type==="focusin",T9=t=>x9(t)?(t.composed?Us(t.composedPath()):A.from(t.target)).map(pe.fromDom).filter(Fo).exists(a=>Si(a,"mce-pastebin")):!1,E9=(t,s,a)=>{const l=dn(!1),d=Ts(),g=y=>{l.get()&&!T9(y)&&(y.preventDefault(),Y5(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const h=y=>{y!==l.get()&&(l.set(y),S9(t,s(),y,a.providers),V8(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),Un(y.time)){const w=yw.setEditorTimeout(t,()=>h(y.state),y.time);d.set(w)}else h(y.state),d.clear()})},AG=(t,s)=>zo(t,(d,g)=>s(g,d.len).fold(W(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,J5=(t,s,a)=>({within:t,extra:s,withinWidth:a}),u3=(t,s,a)=>{const l=AG(t,(y,w)=>{const _=a(y);return A.some({element:y,start:w,finish:w+_,width:_})}),d=uo(l,y=>y.finish<=s),g=cs(d,(y,w)=>y+w.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},_S=t=>We(t,s=>s.element),k9=(t,s,a)=>{const l=_S(t.concat(s));return J5(l,[],a)},_9=(t,s,a,l)=>{const d=_S(t).concat([a]);return J5(d,_S(s),l)},Qu=(t,s,a)=>J5(_S(t),[],a),A9=(t,s,a)=>{const l=u3(s,t,a);return l.extra.length===0?A.some(l):A.none()},Q5=(t,s,a,l)=>{const d=A9(t,s,a).getOrThunk(()=>u3(s,t-a(l),a)),g=d.within,h=d.extra,y=d.withinWidth;return h.length===1&&h[0].width<=a(l)?k9(g,h,y):h.length>=1?_9(g,h,l,y):Qu(g,h,y)},d3=(t,s)=>{const a=We(s,l=>fl(l));of.setGroups(t,a)},O9=t=>ls(t,s=>Bl(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),ty=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Ll(t,s,"primary"),g=aa.getCoupled(t,"overflowGroup");Yt(d.element,"visibility","hidden");const h=l.concat([g]),y=O9(h);a([]),d3(d,h);const w=rc(d.element),_=Q5(w,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);_.extra.length===0?(Zn.remove(d,g),a([])):(d3(d,_.within),a(_.extra)),_o(d.element,"visibility"),Ka(d.element),y.each(Fn.focus)},eI=W([fc("splitToolbarBehaviours",[aa]),ss("builtGroups",()=>dn([]))]),qE=W([tm(["overflowToggledClass"]),Fu("getOverflowBounds"),Ze("lazySink"),ss("overflowGroups",()=>dn([])),Ho("onOpened"),Ho("onClosed")].concat(eI())),D9=W([Hc({factory:of,schema:X0(),name:"primary"}),yu({schema:X0(),name:"overflow"}),yu({name:"overflow-button"}),yu({name:"overflow-group"})]),ny=W((t,s)=>{K(t,Math.floor(s))}),R9=W([tm(["toggledClass"]),Ze("lazySink"),ti("fetch"),Fu("getBounds"),Fs("fireDismissalEventInstead",[Se("event",Ef())]),Uf(),Ho("onToggled")]),M9=W([yu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:gt([po.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),yu({factory:of,schema:X0(),name:"toolbar",overrides:t=>({toolbarBehaviours:gt([mn.config({mode:"cyclic",onEscape:s=>(mt(s,t,"button").each(Fn.focus),A.none())})])})})]),Yi=Ts(),N9=(t,s)=>{Yi.set(!0),oy(t,s),Yi.clear()},oy=(t,s)=>{const a=aa.getCoupled(t,"toolbarSandbox");Wo.isOpen(a)?Wo.close(a):Wo.open(a,s.toolbar())},KE=(t,s,a,l)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();Oc.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:ny()}}},d)},m3=(t,s,a,l,d)=>{of.setGroups(s,d),KE(t,s,a,l),po.on(t)},P9=(t,s,a)=>{const l=vv(),d=(h,y)=>{const w=Yi.get().getOr(!1);a.fetch().get(_=>{m3(t,y,a,s.layouts,_),l.link(t.element),w||mn.focusIn(y)})},g=()=>{po.off(t),Yi.get().getOr(!1)||Fn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:gt([mn.config({mode:"special",onEscape:h=>(Wo.close(h),A.some(!0))}),Wo.config({onOpen:d,onClose:g,isPartOf:(h,y,w)=>Bf(y,w)||Bf(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ri.config({channels:{...Wm({isExtraPart:so,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...Xv({doReposition:()=>{Wo.getState(aa.getCoupled(t,"toolbarSandbox")).each(h=>{KE(t,h,a,s.layouts)})}})}})])}},Zp=pl({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...ol.sketch({...l.button(),action:d=>{oy(d,l)},buttonBehaviours:vu.augment({dump:l.button().buttonBehaviours},[aa.config({others:{toolbarSandbox:d=>P9(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Wo.getState(aa.getCoupled(d,"toolbarSandbox")).each(h=>{m3(d,h,t,a.layouts,g)})},reposition:d=>{Wo.getState(aa.getCoupled(d,"toolbarSandbox")).each(g=>{KE(d,g,t,a.layouts)})},toggle:d=>{oy(d,l)},toggleWithoutFocusing:d=>{N9(d,l)},getToolbar:d=>Wo.getState(aa.getCoupled(d,"toolbarSandbox")),isOpen:d=>Wo.isOpen(aa.getCoupled(d,"toolbarSandbox"))}}),configFields:R9(),partFields:M9(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),$9=W([Ze("items"),tm(["itemSelector"]),fc("tgroupBehaviours",[mn])]),I9=W([l0({name:"items",unit:"item"})]),L9=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.tgroupBehaviours,[mn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),YE=pl({name:"ToolbarGroup",configFields:$9(),partFields:I9(),factory:L9}),tI=t=>We(t,s=>fl(s)),nI=(t,s,a)=>{ty(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{Zp.setGroups(d,tI(l))})})},oI=(t,s,a,l)=>{const d=ws(Zp.sketch({fetch:()=>bl.nu(g=>{g(tI(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Aa,Fa],onRtl:()=>[Fa,Aa],onBottomLtr:()=>[Rs,Ha],onBottomRtl:()=>[Ha,Rs]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.splitToolbarBehaviours,[aa.config({others:{overflowGroup:()=>YE.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(We(h,g.getSystem().build)),nI(g,d,t)},refresh:g=>nI(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Zp.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Zp.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Zp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Zp.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Zp.getToolbar)},domModification:{attributes:{role:"group"}}}},f3=pl({name:"SplitFloatingToolbar",configFields:qE(),partFields:D9(),factory:oI,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),sI=W([tm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ho("onOpened"),Ho("onClosed")].concat(eI())),F9=W([Hc({factory:of,schema:X0(),name:"primary"}),Hc({factory:of,schema:X0(),name:"overflow",overrides:t=>({toolbarBehaviours:gt([Mi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{mt(s,t,"overflow-button").each(a=>{po.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{mt(s,t,"overflow-button").each(po.on)}}),mn.config({mode:"acyclic",onEscape:s=>(mt(s,t,"overflow-button").each(Fn.focus),A.some(!0))})])})}),yu({name:"overflow-button",overrides:t=>({buttonBehaviours:gt([po.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),yu({name:"overflow-group"})]),H9=(t,s)=>mt(t,s,"overflow").map(Mi.hasGrown).getOr(!1),XE=(t,s,a)=>{mt(t,s,"overflow-button").each(l=>{mt(t,s,"overflow").each(d=>{if(JE(t,s),Mi.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||mn.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Fn.focus(l),g(h),s.onClosed=g}}Mi.toggleGrow(d)})})},JE=(t,s)=>{mt(t,s,"overflow").each(a=>{ty(t,s,l=>{const d=We(l,g=>fl(g));of.setGroups(a,d)}),mt(t,s,"overflow-button").each(l=>{Mi.hasGrown(a)&&po.on(l)}),Mi.refresh(a)})},rI=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(h,y)=>{const w=We(y,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.splitToolbarBehaviours,[aa.config({others:{overflowGroup:h=>YE.sketch({...l["overflow-group"](),items:[ol.sketch({...l["overflow-button"](),action:y=>{mo(h,d)}})]})}}),ro("toolbar-toggle-events",[Ge(d,h=>{XE(h,t,!1)})])]),apis:{setGroups:(h,y)=>{g(h,y),JE(h,t)},refresh:h=>JE(h,t),toggle:h=>{XE(h,t,!1)},toggleWithoutFocusing:h=>{XE(h,t,!0)},isOpen:h=>H9(h,t)},domModification:{attributes:{role:"group"}}}},g3=pl({name:"SplitSlidingToolbar",configFields:sI(),partFields:F9(),factory:rI,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),aI=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[YE.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:gt([lr.config({}),Fn.config({})])}},QE=t=>YE.sketch(aI(t)),h3=(t,s)=>{const a=gr(l=>{const d=We(t.initGroups,QE);of.setGroups(l,d)});return gt([hm.toolbarButton(t.providers.isDisabled),Qa(),mn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ro("toolbar-events",[a])])},cI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":aI({title:A.none(),items:[]}),"overflow-button":az({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:h3(t,s)}},V9=t=>{const s=cI(t),a=4,l=f3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return f3.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Gc(d),h=oc(d),y=Gc(h),w=Math.max(h.dom.scrollHeight,y.height);return Ys(g.x+a,y.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},z9=t=>{const s=g3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=g3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=cI(t);return g3.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([QD()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([QD()],{type:"closed"}),t.onToggled(d,!1)}})},ek=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return of.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Su.scrolling?["tox-toolbar--scrolling"]:[])},components:[of.parts.groups({})],toolbarBehaviours:h3(t,s)})},lI=[Lp,_d,pa("tooltip"),Hi("buttonType","secondary",["primary","secondary"]),jr("borderless",!1),ti("onAction")],U9=[...lI,yh,Tc("type",["button"])],W9=[...lI,jr("active",!1),Tc("type",["togglebutton"])],iI={button:U9,togglebutton:W9},Z9=[Tc("type",["group"]),k("buttons",[],Ia("type",iI))],j9=Ia("type",{...iI,group:Z9}),uI=Rn([k("buttons",[],j9),ti("onShow"),ti("onHide")]),G9=t=>Tr("view",uI,t),q9=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map(Ce=>Th(Ce,s.icons)).map(ws),y=Ce=>{const Ke=Rt=>{g.map(je=>je.getOpt(Ce).each(cn=>{Zn.set(cn,[Th(Rt,s.icons)])}))},Pe=Rt=>{const je=Ce.element;Rt?(ar(je,"tox-button--enabled"),vt(je,"aria-pressed",!0)):(Lr(je,"tox-button--enabled"),oe(je,"aria-pressed"))},ht=()=>Si(Ce.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Ke,setActive:Pe,isActive:ht});if(t.type==="button")return t.onAction({setIcon:Ke})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=LE((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),B=O.map(qr),H=w.tooltip.or(O).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),z=g.map(Ce=>Ce.asSpec()),G=fb([z,B]),ne=t.icon.isSome()&&B.isSome(),Ee={tag:"button",classes:_.concat(...t.icon.isSome()&&!ne?["tox-button--icon"]:[]).concat(...ne?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:H},le=[],xe=K0(w,A.some(y),le,Ee,G,t.tooltip,s);return ol.sketch(xe)},tk=(t,s)=>q9(t,s),K9=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:We(t.buttons,a=>tk(a,s))}),AS=ul().deviceType,Y9=AS.isPhone(),dI=AS.isTablet(),X9=t=>{let s=!1;const a=We(t.buttons,l=>l.type==="group"?(s=!0,K9(l,t.providers)):tk(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Y9||dI?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:gt([Fn.config({}),mn.config({mode:"flow",selector:"button, .tox-button",focusInside:mh.OnEnterOrSpaceMode})]),components:s?a:[Qm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Qm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},J9=t=>({uid:t.uid,behaviours:gt([Fn.config({}),lr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),OG=(t,s,a,l)=>{const d={getPane:g=>Rc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:gt([Fn.config({}),mn.config({mode:"cyclic",focusInside:mh.OnEnterOrSpaceMode})]),apis:d}};var sy=pl({name:"silver.View",configFields:[Ze("viewConfig")],partFields:[Gi({factory:{sketch:X9},schema:[Ze("buttons"),Ze("providers")],name:"header"}),Gi({factory:{sketch:J9},schema:[],name:"pane"})],factory:OG,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const Q9=(t,s,a)=>Hn(s,(l,d)=>{const g=at(G9(l));return t.slot(d,sy.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[sy.parts.header({buttons:g.buttons,providers:a})]:[],sy.parts.pane({})]}))}),p3=(t,s)=>Uc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Q9(a,t,s),slotBehaviours:A0.unnamedEvents([gr(l=>Uc.hideAllSlots(l))])})),mI=t=>Sn(Uc.getSlotNames(t),s=>Uc.isShowing(t,s)),nk=t=>{const s=t.element;Yt(s,"display","none"),vt(s,"aria-hidden","true")},fI=t=>{const s=t.element;_o(s,"display"),oe(s,"aria-hidden")},gI=t=>({getContainer:W(t)}),ok=(t,s,a)=>{Uc.getSlot(t,s).each(l=>{sy.getPane(l).each(d=>{a(l)(gI(d.element.dom))})})},eU=(t,s)=>ok(t,s,sy.getOnShow),hI=(t,s)=>ok(t,s,sy.getOnHide);var DS=ai({factory:(t,s)=>{const g={setViews:(h,y)=>{Zn.set(h,[p3(y,s.backstage.shared.providers)])},whichView:h=>Vo.getCurrent(h).bind(mI),toggleView:(h,y,w,_)=>Vo.getCurrent(h).exists(O=>{const B=mI(O),H=B.exists(G=>_===G),z=Uc.getSlot(O,_).isSome();return z&&(Uc.hideAllSlots(O),H?(nk(h),y()):(w(),fI(h),Uc.showSlot(O,_),eU(O,_)),B.each(G=>hI(O,G))),z})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:gt([Zn.config({}),Vo.config({find:h=>{const y=Zn.contents(h);return Us(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ze("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const tU=(t,s,a)=>{let l=!1;const d=h=>{Pl(h,".tox-statusbar").each(y=>{xs(y,"display")==="none"&&bs(y,"aria-hidden")==="true"?(_o(y,"display"),oe(y,"aria-hidden")):(Yt(y,"display","none"),vt(y,"aria-hidden","true"))})},g={getSocket:h=>Rc.getPart(h,t,"socket"),setSidebar:(h,y,w)=>{Rc.getPart(h,t,"sidebar").each(_=>a3(_,y,w))},toggleSidebar:(h,y)=>{Rc.getPart(h,t,"sidebar").each(w=>v9(w,y))},whichSidebar:h=>Rc.getPart(h,t,"sidebar").bind(c3).getOrNull(),getHeader:h=>Rc.getPart(h,t,"header"),getToolbar:h=>Rc.getPart(h,t,"toolbar"),setToolbar:(h,y)=>{Rc.getPart(h,t,"toolbar").each(w=>{const _=We(y,QE);w.getApis().setGroups(w,_)})},setToolbars:(h,y)=>{Rc.getPart(h,t,"multiple-toolbar").each(w=>{const _=We(y,O=>We(O,QE));B5.setItems(w,_)})},refreshToolbar:h=>{Rc.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{Rc.getPart(h,t,"toolbar").each(y=>{os(y.getApis().toggle,w=>w(y))})},toggleToolbarDrawerWithoutFocusing:h=>{Rc.getPart(h,t,"toolbar").each(y=>{os(y.getApis().toggleWithoutFocusing,w=>w(y))})},isToolbarDrawerToggled:h=>Rc.getPart(h,t,"toolbar").bind(y=>A.from(y.getApis().isOpen).map(w=>w(y))).getOr(!1),getThrobber:h=>Rc.getPart(h,t,"throbber"),focusToolbar:h=>{Rc.getPart(h,t,"toolbar").orThunk(()=>Rc.getPart(h,t,"multiple-toolbar")).each(w=>{mn.focusIn(w)})},setMenubar:(h,y)=>{Rc.getPart(h,t,"menubar").each(w=>{o3.setMenus(w,y)})},focusMenubar:h=>{Rc.getPart(h,t,"menubar").each(y=>{o3.focus(y)})},setViews:(h,y)=>{Rc.getPart(h,t,"viewWrapper").each(w=>{DS.setViews(w,y)})},toggleView:(h,y)=>Rc.getPart(h,t,"viewWrapper").exists(w=>DS.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),y)),whichView:h=>Rc.getPart(h,t,"viewWrapper").bind(DS.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),Rc.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),Yt(w,"display","none"),vt(w,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),Rc.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),_o(w,"display"),oe(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},nU=kh.optional({factory:o3,name:"menubar",schema:[Ze("backstage")]}),oU=t=>t.type===Su.sliding?z9:t.type===Su.floating?V9:ek,b3=kh.optional({factory:{sketch:t=>B5.sketch({uid:t.uid,dom:t.dom,listBehaviours:gt([mn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>ek({type:t.type,uid:Ut("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,a,l,d)=>{of.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Ze("dom"),Ze("onEscape")]}),sU=kh.optional({factory:{sketch:t=>{const s=oU(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ze("dom"),Ze("onEscape"),Ze("getSink")]}),rU=kh.optional({factory:{sketch:Q0},name:"header",schema:[Ze("dom")]}),pI=kh.optional({factory:{sketch:m9},name:"promotion",schema:[Ze("dom")]}),bI=kh.optional({name:"socket",schema:[Ze("dom")]}),sk=kh.optional({factory:{sketch:y9},name:"sidebar",schema:[Ze("dom")]}),v3=kh.optional({factory:{sketch:X5},name:"throbber",schema:[Ze("dom")]}),aU=kh.optional({factory:DS,name:"viewWrapper",schema:[Ze("backstage")]}),cU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),vI=kh.optional({factory:{sketch:cU},name:"editorContainer",schema:[]});var ir=pl({name:"OuterContainer",factory:tU,configFields:[Ze("dom"),Ze("behaviours")],partFields:[rU,nU,sU,b3,bI,sk,pI,v3,aU,vI],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const lU="file edit view insert format tools table help",yI={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},CI=(t,s,a)=>{const l=dO(a).split(/[ ,]/);return{text:t.title,getItems:()=>ye(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:zs(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},y3=t=>t.split(" "),wI=(t,s)=>{const a={...yI,...s.menus},l=qo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?y3(lU):y3(s.menubar===!1?"":s.menubar),g=uo(d,y=>{const w=yo(yI,y);return l?w||ft(s.menus,y).exists(_=>yo(_,"items")):w}),h=We(g,y=>{const w=a[y];return CI({title:w.title,items:y3(w.items)},s,t)});return uo(h,y=>{const w=_=>Mt(_)||_.type!=="separator";return y.getItems().length>0&&zs(y.getItems(),w)})},C3=t=>{const s=()=>{t._skinLoaded=!0,L8(t)};return()=>{t.initialized?s():t.on("init",s)}},iU=(t,s)=>()=>F8(t,{message:s}),SI=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),rk=(t,s,a,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,a)),uU=async(t,s)=>{const l="ui/"+mT(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(l);if(Mt(d))rk(t,l,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return SI(t,h,t.ui.styleSheetLoader)}},xI=async(t,s)=>{if(ve(pe.fromDom(t.getElement()))){const d="ui/"+mT(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(Mt(g))rk(t,d,g,ob.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,y=s+`/skin.shadowdom${h}.css`;return SI(t,y,ob.DOM.styleSheetLoader)}}},dU=async(t,s)=>{const a=()=>{const d=yO(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};mT(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);Mt(h)?rk(s,g,h,s.ui.styleSheetLoader):a()});const l=yO(s);if(!vO(s)&&Mt(l))return Promise.all([uU(s,l),xI(s,l)]).then()},w3=(t,s)=>dU(t,s).then(C3(s),iU(s,"Skin could not be loaded")),mU=wn(w3,!1),fU=wn(w3,!0),ry=(t,s,a)=>re(a)?t.translate(s):t.translate([s,t.translate(a)]),TI=(t,s)=>{const a=(h,y,w,_)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const B=ye(h.getStyleItems(),H=>l(H,y,_));return y===0&&B.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:B.length>0,getSubmenuItems:()=>ye(h.getStyleItems(),H=>l(H,y,_))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(_),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),B=>({meta:{style:B}}))})},l=(h,y,w)=>{const _=h.type==="formatter"&&s.isInvalid(h);return y===0?_?[]:a(h,y,!1,w).toArray():a(h,y,_,w).toArray()},d=h=>{const y=s.getCurrentValue(),w=s.shouldHide?0:1;return ye(h,_=>l(_,w,y))};return{validateItems:d,getFetch:(h,y)=>(w,_)=>{const O=y(),B=d(O),H=G0(B,dm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});_(H)}}},ay=(t,s)=>{const a=s.dataset,l=a.type==="basic"?()=>We(a.data,d=>p5(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:TI(t,s),getStyleItems:l}},RS=(t,s,a,l,d,g)=>{const{items:h,getStyleItems:y}=ay(s,a),w=dn(a.tooltip),_=B=>({getComponent:W(B),setTooltip:H=>{const z=s.shared.providers.translate(H);vt(B.element,"aria-label",z),w.set(H)}}),O=B=>{const H=z=>B.setTooltip(ry(t,l(z.value),z.value));return t.on(d,H),jw(pb(t,"NodeChange",z=>{const G=z.getComponent();a.updateText(G),In.set(z.getComponent(),!t.selection.isEditable())})(B),()=>t.off(d,H))};return _E({text:a.icon.isSome()?A.none():a.text,icon:a.icon,ariaLabel:A.some(a.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,y),onSetup:O,getApi:_,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Vc.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:B=>{if(a.tooltip!==w.get()){const H=s.shared.providers.translate(w.get());Vc.setComponents(B,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},gU=t=>We(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),S3=t=>({type:"basic",data:t});var jp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(jp||(jp={}));const hU=(t,s)=>s===jp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),x3=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:gU(hU(l,a))}},pU="Align",EI=W("Alignment {0}"),kI="left",T3=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],_I=t=>{const s=()=>Sn(T3,y=>t.formatter.match(y.format)),a=y=>()=>t.formatter.match(y),l=y=>A.none,d=y=>{const _=s().fold(W(kI),O=>O.title.toLowerCase());Tn(y,zp,{icon:`align-${_}`}),Z8(t,{value:_})},g=S3(T3),h=y=>()=>Sn(T3,w=>w.format===y.format).each(w=>t.execCommand(w.command));return{tooltip:ry(t,EI(),kI),text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},bU=(t,s)=>RS(t,s,_I(t),EI,"AlignTextUpdate","align"),vU=(t,s)=>{const a=ay(s,_I(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(pU),onSetup:li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},E3=(t,s)=>{const a=s(),l=We(a,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>Sn(a,g=>g.format===d))},ak="Blocks",ck=W("Block {0}"),lk="Paragraph",_h=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const y=E3(t,()=>d.data).fold(W(lk),w=>w.title);Tn(g,Pd,{text:y}),CP(t,{value:y})},d=x3(t,"block_formats",jp.SemiColon);return{tooltip:ry(t,ck(),lk),text:A.some(lk),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:a,onAction:wP(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},AI=(t,s)=>RS(t,s,_h(t),ck,"BlocksTextUpdate","blocks"),yU=(t,s)=>{const a=ay(s,_h(t));t.ui.registry.addNestedMenuItem("blocks",{text:ak,onSetup:li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},CU="Fonts",OI=W("Font {0}"),k3="System Font",wU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],DI=t=>{const s=t.split(/\s*,\s*/);return We(s,a=>a.replace(/^['"]+|['"]+$/g,""))},RI=(t,s)=>s.length>0&&Ct(s,a=>t.indexOf(a.toLowerCase())>-1),MI=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=DI(t.toLowerCase());return RI(a,wU)||RI(a,s)}else return!1},NI=t=>{const s=()=>{const w=G=>G?DI(G)[0]:"",_=t.queryCommandValue("FontName"),O=y.data,B=_?_.toLowerCase():"",H=nN(t);return{matchOpt:Sn(O,G=>{const ne=G.format;return ne.toLowerCase()===B||w(ne).toLowerCase()===w(B).toLowerCase()}).orThunk(()=>pn(MI(B,H),{title:k3,format:B})),font:_}},a=w=>_=>_.exists(O=>O.format===w),l=()=>{const{matchOpt:w}=s();return w},d=w=>()=>A.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:_,font:O}=s(),B=_.fold(W(O),H=>H.title);Tn(w,Pd,{text:B}),j8(t,{value:B})},y=x3(t,"font_family_formats",jp.SemiColon);return{tooltip:ry(t,OI(),k3),text:A.some(k3),icon:A.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:so}},SU=(t,s)=>RS(t,s,NI(t),OI,"FontFamilyTextUpdate","fontfamily"),_3=(t,s)=>{const a=ay(s,NI(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(CU),onSetup:li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},TU=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=y=>`(?:${y})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),EU=(t,s)=>zs(s,a=>zs(xU[a],l=>t===l)),ik=(t,s)=>A.from(TU.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return EU(g,s)?A.some({value:d,unit:g}):A.none()}),kU=(t,s)=>ik(t,s).map(({value:a,unit:l})=>a+l),PI={tab:W(9),escape:W(27),enter:W(13),backspace:W(8),delete:W(46),left:W(37),up:W(38),right:W(39),down:W(40),space:W(32),home:W(36),end:W(35),pageUp:W(33),pageDown:W(34)},BI=(t,s,a,l)=>{let d=A.none();const g=Ce=>Ce.map(Ke=>Wt.getValue(Ke)).getOr(""),h=pb(t,"NodeChange SwitchMode",Ce=>{const Ke=Ce.getComponent();d=A.some(Ke),a.updateInputValue(Ke),In.set(Ke,!t.selection.isEditable())}),y=Ce=>({getComponent:W(Ce)}),w=dn(ee),_=Ut("custom-number-input-events"),O=(Ce,Ke,Pe)=>{const ht=g(d),Rt=a.getNewValue(ht,Ce),je=ht.length-`${Rt}`.length,cn=d.map(Dn=>Dn.element.dom.selectionStart-je),Zt=d.map(Dn=>Dn.element.dom.selectionEnd-je);a.onAction(Rt,Pe),d.each(Dn=>{Wt.setValue(Dn,Rt),Ke&&(cn.each(yn=>Dn.element.dom.selectionStart=yn),Zt.each(yn=>Dn.element.dom.selectionEnd=yn))})},B=(Ce,Ke)=>O((Pe,ht)=>Pe-ht,Ce,Ke),H=(Ce,Ke)=>O((Pe,ht)=>Pe+ht,Ce,Ke),z=Ce=>vc(Ce.element).fold(A.none,Ke=>(Vi(Ke),A.some(!0))),G=Ce=>O1(Ce.element)?(xl(Ce.element).each(Ke=>Vi(Ke)),A.some(!0)):A.none(),ne=(Ce,Ke,Pe,ht)=>{const Rt=dn(ee),je=s.shared.providers.translate(Pe),cn=Ut("altExecuting"),Zt=pb(t,"NodeChange SwitchMode",yn=>{In.set(yn.getComponent(),!t.selection.isEditable())}),Dn=yn=>{In.isDisabled(yn)||Ce(!0)};return ol.sketch({dom:{tag:"button",attributes:{"aria-label":je,"data-mce-name":Ke},classes:ht.concat(Ke)},components:[xD(Ke,s.shared.providers.icons)],buttonBehaviours:gt([In.config({}),Vc.config(s.shared.providers.tooltips.getConfig({tooltipText:je})),ro(cn,[Ch({onSetup:Zt,getApi:y},Rt),Vl({getApi:y},Rt),Ge(Uu(),(yn,as)=>{(as.event.raw.keyCode===PI.space()||as.event.raw.keyCode===PI.enter())&&(In.isDisabled(yn)||Ce(!1))}),Ge(Ng(),Dn),Ge(_a(),Dn)])]),eventOrder:{[Uu()]:[cn,"keying"],[Ng()]:[cn,"alloy.base.behaviour"],[_a()]:[cn,"alloy.base.behaviour"],[Rl()]:["alloy.base.behaviour",cn,"tooltipping"],[gu()]:[cn,"tooltipping"]}})},Ee=ws(ne(Ce=>B(!1,Ce),"minus","Decrease font size",[])),le=ws(ne(Ce=>H(!1,Ce),"plus","Increase font size",[])),xe=ws({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ib.sketch({inputBehaviours:gt([In.config({}),ro(_,[Ch({onSetup:h,getApi:y},w),Vl({getApi:y},w)]),ro("input-update-display-text",[Ge(Pd,(Ce,Ke)=>{Wt.setValue(Ce,Ke.event.text)}),Ge(Kd(),Ce=>{a.onAction(Wt.getValue(Ce))}),Ge(Zh(),Ce=>{a.onAction(Wt.getValue(Ce))})]),mn.config({mode:"special",onEnter:Ce=>(O(Ot,!0,!0),A.some(!0)),onEscape:z,onUp:Ce=>(H(!0,!1),A.some(!0)),onDown:Ce=>(B(!0,!1),A.some(!0)),onLeft:(Ce,Ke)=>(Ke.cut(),A.none()),onRight:(Ce,Ke)=>(Ke.cut(),A.none())})])})],behaviours:gt([Fn.config({}),mn.config({mode:"special",onEnter:G,onSpace:G,onEscape:z}),ro("input-wrapper-events",[Ge(qd(),Ce=>{ut([Ee,le],Ke=>{const Pe=pe.fromDom(Ke.get(Ce).element.dom);O1(Pe)&&A1(Pe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Xe(l)?{"data-mce-name":l}:{}}},components:[Ee.asSpec(),xe.asSpec(),le.asSpec()],behaviours:gt([Fn.config({}),mn.config({mode:"flow",focusInside:mh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ce=>O1(Ce.element)?A.none():(Vi(Ce.element),A.some(!0))})])}},$I="Font sizes",A3=W("Font size {0}"),II="12pt",LI={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},_U={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},AU=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},OU=(t,s)=>/[0-9.]+px$/.test(t)?AU(parseInt(t,10)*72/96,s||0)+"pt":ft(_U,t).getOr(t),FI=t=>ft(LI,t).getOr(""),HI=t=>{const s=()=>{let w=A.none();const _=y.data,O=t.queryCommandValue("FontSize");if(O)for(let B=3;w.isNone()&&B>=0;B--){const H=OU(O,B),z=FI(H);w=Sn(_,G=>G.format===O||G.format===H||G.format===z)}return{matchOpt:w,size:O}},a=w=>_=>_.exists(O=>O.format===w),l=()=>{const{matchOpt:w}=s();return w},d=W(A.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:_,size:O}=s(),B=_.fold(W(O),H=>H.title);Tn(w,Pd,{text:B}),S4(t,{value:B})},y=x3(t,"font_size_formats",jp.Space);return{tooltip:ry(t,A3(),II),text:A.some(II),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:so}},VI=(t,s)=>RS(t,s,HI(t),A3,"FontSizeTextUpdate","fontsize"),DU=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},RU=16,MU=t=>t>=0,NU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Tn(l,Pd,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{ik(l,["unsupportedLength","empty"]);const g=s(),h=ik(l,["unsupportedLength","empty"]).or(ik(g,["unsupportedLength","empty"])),y=h.map(H=>H.value).getOr(RU),w=gO(t),_=h.map(H=>H.unit).filter(H=>H!=="").getOr(w),O=d(y,DU(_).step),B=`${MU(O)?O:y}${_}`;return B!==g&&yP(t,{value:B}),B}}},PU=(t,s)=>BI(t,s,NU(t),"fontsizeinput"),BU=(t,s)=>{const a=ay(s,HI(t));t.ui.registry.addNestedMenuItem("fontsize",{text:$I,onSetup:li(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},$U="Formats",O3=t=>re(t)?"Formats":"Format {0}",zI=(t,s)=>{const a="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const y=t.formatter.get(h);return y!==void 0?A.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const y=B=>i5(B)?ye(B.items,y):u5(B)?[{title:B.title,format:B.format}]:[],w=ye(g5(t),y),O=E3(t,W(w)).fold(W({title:a,tooltipLabel:""}),B=>({title:B.title,tooltipLabel:B.title}));Tn(h,Pd,{text:O.title}),W8(t,{value:O.tooltipLabel})};return{tooltip:ry(t,O3(""),""),text:A.some(a),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:wP(t),updateText:g,shouldHide:WM(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},IU=(t,s)=>{const a={type:"advanced",...s.styles};return RS(t,s,zI(t,a),O3,"StylesTextUpdate","styles")},LU=(t,s)=>{const a={type:"advanced",...s.styles},l=ay(s,zI(t,a));t.ui.registry.addNestedMenuItem("styles",{text:$U,onSetup:li(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},FU=W([Ze("toggleClass"),Ze("fetch"),hu("onExecute"),Se("getHotspot",A.some),Se("getAnchorOverrides",W({})),Uf(),hu("onItemExecute"),es("lazySink"),Ze("dom"),Ho("onOpen"),fc("splitDropdownBehaviours",[aa,mn,Fn]),Se("matchWidth",!1),Se("useMinWidth",!1),Se("eventOrder",{}),es("role"),es("listRole")].concat(sE())),HU=Hc({factory:ol,schema:[Ze("dom")],name:"arrow",defaults:()=>({buttonBehaviours:gt([Fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(_f)},buttonBehaviours:gt([po.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),VU=Hc({factory:ol,schema:[Ze("dom")],name:"button",defaults:()=>({buttonBehaviours:gt([Fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),zU=W([HU,VU,Gi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),yu({schema:[jg()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),jP()]),UI=(t,s,a,l)=>{const d=O=>{Vo.getCurrent(O).each(B=>{Nt.highlightFirst(B),mn.focusIn(B)})},g=O=>{M4(t,Ot,O,l,d,ci.HighlightMenuAndItem).get(ee)},h=O=>(g(O),A.some(!0)),y=O=>{const B=Ll(O,t,"button");return _f(B),A.some(!0)},w={...rr([gr((O,B)=>{mt(O,t,"aria-descriptor").each(z=>{const G=Ut("aria");vt(z.element,"id",G),vt(O.element,"aria-describedby",G)})})]),...eT(A.some(g))},_={repositionMenus:O=>{po.isOn(O)&&B4(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[fu()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:gc(t.splitDropdownBehaviours,[aa.config({others:{sandbox:O=>{const B=Ll(O,t,"arrow");return P4(t,O,{onOpen:()=>{po.on(B),po.on(O)},onClose:()=>{po.off(B),po.off(O)}})}}}),mn.config({mode:"special",onSpace:y,onEnter:y,onDown:h}),Fn.config({}),po.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},uk=pl({name:"SplitDropdown",configFields:FU(),partFields:zU(),factory:UI,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),WI=t=>({isEnabled:()=>!In.isDisabled(t),setEnabled:s=>In.set(t,!s),setText:s=>Tn(t,Pd,{text:s}),setIcon:s=>Tn(t,zp,{icon:s})}),ZI=t=>({setActive:s=>{po.set(t,s)},isActive:()=>po.isOn(t),isEnabled:()=>!In.isDisabled(t),setEnabled:s=>In.set(t,!s),setText:s=>Tn(t,Pd,{text:s}),setIcon:s=>Tn(t,zp,{icon:s})}),jI=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),D3=Ut("focus-button"),dk=(t,s,a,l,d,g)=>{const h=s.map(w=>ws(TD(w,"tox-tbtn",d))),y=t.map(w=>ws(Th(w,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...jI(a,d),...Xe(g)?{"data-mce-name":g}:{}}},components:fb([y.map(w=>w.asSpec()),h.map(w=>w.asSpec())]),eventOrder:{[Dl()]:["focusing","alloy.base.behaviour",Ab],[Rl()]:[Ab,"toolbar-group-button-events"]},buttonBehaviours:gt([hm.toolbarButton(d.isDisabled),Qa(),ro(Ab,[gr((w,_)=>kE(w)),Ge(Pd,(w,_)=>{h.bind(O=>O.getOpt(w)).each(O=>{Zn.set(O,[qr(d.translate(_.event.text))])})}),Ge(zp,(w,_)=>{y.bind(O=>O.getOpt(w)).each(O=>{Zn.set(O,[Th(_.event.icon,d.icons)])})}),Ge(Dl(),(w,_)=>{_.event.prevent(),mo(w,D3)})])].concat(l.getOr([])))}},UU=(t,s,a,l,d)=>{const g=s.shared,h=dn(ee),y={toolbarButtonBehaviours:[],getApi:WI,onSetup:t.onSetup},w=[ro("toolbar-group-button-events",[Ch(y,h),Vl(y,h)])];return Zp.sketch({lazySink:g.getSink,fetch:()=>bl.nu(_=>{_(We(a(t.items),QE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:dk(t.icon,t.text,t.tooltip,A.some(w),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},GI=(t,s,a,l)=>{var d;const g=dn(ee),h=dk(t.icon,t.text,t.tooltip,A.none(),a,l);return ol.sketch({dom:h.dom,components:h.components,eventOrder:EE,buttonBehaviours:{...gt([ro("toolbar-button-events",[SD({onAction:t.onAction,getApi:s.getApi}),Ch(s,g),Vl(s,g)]),...t.tooltip.map(y=>Vc.config(a.tooltips.getConfig({tooltipText:a.translate(y)+t.shortcut.map(w=>` (${ZT(w)})`).getOr("")}))).toArray(),hm.toolbarButton(()=>!t.enabled||a.isDisabled()),Qa()].concat(s.toolbarButtonBehaviours)),[Ab]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Ab]}})},WU=(t,s,a)=>Rb(t,s,[],a),Rb=(t,s,a,l)=>GI(t,{toolbarButtonBehaviours:a.length>0?[ro("toolbarButtonWith",a)]:[],getApi:WI,onSetup:t.onSetup},s,l),ZU=(t,s,a)=>qI(t,s,[],a),qI=(t,s,a,l)=>GI(t,{toolbarButtonBehaviours:[Zn.config({}),po.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ro("toolbarToggleButtonWith",a)]:[]),getApi:ZI,onSetup:t.onSetup},s,l),jU=(t,s,a)=>l=>bl.nu(d=>s.fetch(d)).map(d=>A.from(N0(Xs(A4(Ut("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,dm.CLOSE_ON_EXECUTE,s.select.getOr(so),a),{movement:nE(s.columns,s.presets),menuBehaviours:A0.unnamedEvents(s.columns!=="auto"?[]:[gr((g,h)=>{zT(g,4,GO(s.presets)).each(({numRows:y,numColumns:w})=>{mn.setGridSize(g,y,w)})})])})))),GU=(t,s,a)=>{const l=dn(t.tooltip.getOr("")),d=y=>({isEnabled:()=>!In.isDisabled(y),setEnabled:w=>In.set(y,!w),setIconFill:(w,_)=>{ys(y.element,`svg path[class="${w}"], rect[class="${w}"]`).each(O=>{vt(O,"fill",_)})},setActive:w=>{vt(y.element,"aria-pressed",w),ys(y.element,"span").each(_=>{y.getSystem().getByDom(_).each(O=>po.set(O,w))})},isActive:()=>ys(y.element,"span").exists(w=>y.getSystem().getByDom(w).exists(po.isOn)),setText:w=>ys(y.element,"span").each(_=>y.getSystem().getByDom(_).each(O=>Tn(O,Pd,{text:w}))),setIcon:w=>ys(y.element,"span").each(_=>y.getSystem().getByDom(_).each(O=>Tn(O,zp,{icon:w}))),setTooltip:w=>{const _=s.providers.translate(w);vt(y.element,"aria-label",_),l.set(w)}}),g=dn(ee),h={getApi:d,onSetup:t.onSetup};return uk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...jI(t.tooltip,s.providers),...Xe(a)?{"data-mce-name":a}:{}}},onExecute:y=>{const w=d(y);w.isEnabled()&&t.onAction(w)},onItemExecute:(y,w,_)=>{},splitDropdownBehaviours:gt([hm.splitButton(s.providers.isDisabled),Qa(),ro("split-dropdown-events",[gr((y,w)=>kE(y)),Ge(D3,Fn.focus),Ch(h,g),Vl(h,g)]),F0.config({}),...t.tooltip.map(y=>Vc.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(y),onShow:w=>{if(l.get()!==y){const _=s.providers.translate(l.get());Vc.setComponents(w,s.providers.tooltips.getComponents({tooltipText:_}))}}})})).toArray()]),eventOrder:{[Rl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[gu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:jU(d,t,s.providers),parts:{menu:Pw(!1,t.columns,t.presets)},components:[uk.parts.button(dk(t.icon,t.text,A.none(),A.some([po.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),uk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:pN("chevron-down",s.providers.icons)},buttonBehaviours:gt([hm.splitButton(s.providers.isDisabled),Qa(),FO()])}),uk.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},qU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],MS=(t,s)=>(a,l,d,g)=>{const h=t(a).mapError(y=>iu(y)).getOrDie();return s(h,l,d,g)},KU={button:MS(fm,(t,s,a,l)=>WU(t,s.shared.providers,l)),togglebutton:MS(LT,(t,s,a,l)=>ZU(t,s.shared.providers,l)),menubutton:MS(jE,(t,s,a,l)=>fS(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:MS(kS,(t,s,a,l)=>GU(t,s.shared,l)),grouptoolbarbutton:MS(n3,(t,s,a,l)=>{const d=a.ui.registry.getAll().buttons,g=y=>fk(a,{buttons:d,toolbar:y,allowToolbarGroups:!1},s,A.none()),h={[zf]:s.shared.header.isPositionedAtTop()?Vf.TopToBottom:Vf.BottomToTop};switch(rb(a)){case Su.floating:return UU(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},YU=(t,s,a,l)=>ft(KU,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,a,l))),mk={styles:IU,fontsize:VI,fontsizeinput:PU,fontfamily:SU,blocks:AI,align:bU},XU=t=>{const s=We(qU,a=>{const l=uo(a.items,d=>yo(t,d)||yo(mk,d));return{name:a.name,items:l}});return uo(s,a=>a.items.length>0)},JU=t=>{const s=t.split("|");return We(s,a=>({items:a.trim().split(" ")}))},KI=t=>De(t,s=>yo(s,"name")&&yo(s,"items")),YI=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?XU(a):Mt(s)?JU(s):KI(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},QU=(t,s,a,l,d,g)=>ft(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ls(h,y=>ft(s,y+a.toLowerCase())))).fold(()=>ft(mk,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):YU(h,d,t,a.toLowerCase())),fk=(t,s,a,l)=>{const d=YI(s),g=We(d,h=>{const y=ye(h.items,w=>w.trim().length===0?[]:QU(t,s.buttons,w,s.allowToolbarGroups,a,l).toArray());return{title:A.from(t.translate(h.name)),items:y}});return uo(g,h=>h.items.length>0)},XI=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(De(g,Mt)){const y=g.map(w=>{const _={toolbar:w,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return fk(t,_,l,A.none())});ir.setToolbars(d,y)}else ir.setToolbar(d,fk(t,a,l,A.none()))},JI=ul(),eW=JI.os.isiOS()&&JI.os.version.major<=12,tW=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=dn(or(d.innerWidth,d.innerHeight)),y=dn(or(g.offsetWidth,g.offsetHeight)),w=()=>{const H=h.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(h.set(or(d.innerWidth,d.innerHeight)),D0(t))},_=()=>{const H=t.getDoc().documentElement,z=y.get();(z.left!==H.offsetWidth||z.top!==H.offsetHeight)&&(y.set(or(H.offsetWidth,H.offsetHeight)),D0(t))},O=H=>{bP(t,H)};l.bind(d,"resize",w),l.bind(d,"scroll",O);const B=bC(pe.fromDom(t.getBody()),"load",_);t.on("hide",()=>{ut(a,H=>{Yt(H.element,"display","none")})}),t.on("show",()=>{ut(a,H=>{_o(H.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",w),l.unbind(d,"scroll",O),d=null})},QI=(t,s,a)=>{Np(t)&&rm(a.mainUi.mothership.element,a.popupUi.mothership),wx(s,a.dialogUi.mothership)};var nW=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=s,y=dn(0),w=g.outerContainer;mU(t);const _=pe.fromDom(d.targetNode),O=ae(U(_));rm(_,g.mothership),QI(t,O,s),t.on("SkinLoaded",()=>{ir.setSidebar(w,a.sidebar,eN(t)),XI(t,s,a,l),y.set(t.getWin().innerWidth),ir.setMenubar(w,wI(t,a)),ir.setViews(w,a.views),tW(t,s)});const B=ir.getSocket(w).getOrDie("Could not find expected socket element");if(eW){Gs(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ne=cV(()=>{t.dispatch("ScrollContent")},20),Ee=$l(B.element,"scroll",ne.throttle);t.on("remove",Ee.unbind)}UT(t,s),t.addCommand("ToggleSidebar",(ne,Ee)=>{ir.toggleSidebar(w,Ee),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ne;return(ne=ir.whichSidebar(w))!==null&&ne!==void 0?ne:""}),t.addCommand("ToggleView",(ne,Ee)=>{if(ir.toggleView(w,Ee)){const le=w.element;g.mothership.broadcastOn([am()],{target:le}),ut(h,xe=>{xe.broadcastOn([am()],{target:le})}),qt(ir.whichView(w))&&(t.focus(),t.nodeChanged(),ir.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var ne;return(ne=ir.whichView(w))!==null&&ne!==void 0?ne:""});const H=rb(t),z=()=>{ir.refreshToolbar(s.mainUi.outerContainer)};(H===Su.sliding||H===Su.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ne=t.getWin().innerWidth;ne!==y.get()&&(z(),y.set(ne))});const G={setEnabled:ne=>{Uw(s,!ne)},isEnabled:()=>!In.isDisabled(w)};return{iframeContainer:B.element.dom,editorContainer:w.element.dom,api:G}}});const eL=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),R3=t=>Un(t)?t+"px":t,Mb=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},oW=t=>{const s=iO(t),a=sT(t),l=uO(t);return eL(s).map(d=>Mb(d,a,l))},gk=t=>oW(t).getOr(iO(t)),NS=t=>{const s=sb(t),a=S0(t),l=ww(t);return eL(s).map(d=>Mb(d,a,l))},tL=t=>NS(t).getOr(sb(t)),{ToolbarLocation:M3,ToolbarMode:nL}=A6,sW=40,rW=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=a,y=ob.DOM,w=x0(t),_=T0(t),O=ww(t).or(NS(t)),B=l.shared.header,H=B.isPositionedAtTop,z=150,G=rb(t),ne=G===nL.sliding||G===nL.floating,Ee=dn(!1),le=()=>Ee.get()&&!t.removed,xe=Eo=>ne?Eo.fold(W(0),xt=>xt.components().length>1?Qs(xt.components()[1].element):0):0,Ce=Eo=>{switch(mO(t)){case M3.auto:const xt=ir.getToolbar(g.outerContainer),tn=xe(xt),no=Qs(Eo.element)-tn,$n=xr(s);if($n.y>no)return"top";{const Yn=oc(s),Vs=Math.max(Yn.dom.scrollHeight,Qs(Yn));return $n.bottom<Vs-no||oa().bottom<$n.bottom-no?"bottom":"top"}case M3.bottom:return"bottom";case M3.top:default:return"top"}},Ke=Eo=>{d.on(xt=>{Nr.setModes(xt,[Eo]),B.setDockingMode(Eo);const tn=H()?Vf.TopToBottom:Vf.BottomToTop;vt(xt.element,zf,tn)})},Pe=()=>{d.on(Eo=>{const xt=O.getOrThunk(()=>Em().width-Ya(s).left-10);Yt(Eo.element,"max-width",xt+"px")})},ht=(Eo,xt)=>{d.on(tn=>{const no=ir.getToolbar(g.outerContainer),$n=xe(no),kn=xr(s),Yn=Rt(t,g.outerContainer.element),Vs=()=>Yn.fold(()=>kn.x,yl=>{const sd=xr(yl);return jo(yl,oo())?kn.x:kn.x-sd.x}),gs=()=>Yn.fold(()=>H()?Math.max(kn.y-Qs(tn.element)+$n,0):kn.bottom,yl=>{var sd;const Ld=xr(yl),eu=(sd=yl.dom.scrollTop)!==null&&sd!==void 0?sd:0,Hb=jo(yl,oo())?Math.max(kn.y-Qs(tn.element)+$n,0):kn.y-Ld.y+eu-Qs(tn.element)+$n;return H()?Hb:kn.bottom}),Wl=Vs(),od=pn(Eo,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(yl=>yl>z).map(yl=>{const sd=xt.getOr(Xa()),Ld=window.innerWidth-(Wl-sd.left),eu=Math.max(Math.min(yl,Ld),z);return Ld<yl&&Yt(g.outerContainer.element,"width",eu+"px"),{width:eu+"px"}}).getOr({width:"max-content"}),rf={position:"absolute",left:Math.round(Wl)+"px",top:gs()+"px"};Gs(g.outerContainer.element,{...rf,...od})})},Rt=(Eo,xt)=>Np(Eo)?Df(xt):A.none(),je=()=>{ut(h,Eo=>{Eo.broadcastOn([lh()],{})})},cn=()=>!w&&(wa(g.outerContainer.element).left+$a(g.outerContainer.element)>=window.innerWidth-sW||$s(g.outerContainer.element,"width").isSome())?(Yt(g.outerContainer.element,"position","absolute"),Yt(g.outerContainer.element,"left","0px"),_o(g.outerContainer.element,"width"),!0):!1,Zt=Eo=>{if(!le())return;w||Pe();const xt=Xa(),tn=w?!1:cn();if(ne&&ir.refreshToolbar(g.outerContainer),!w){const no=Xa(),$n=pn(xt.left!==no.left,xt);ht(tn,$n),$n.each(kn=>{lf(kn.left,no.top)})}_&&d.on(Eo),je()},Dn=()=>w||!_||!le()?!1:d.get().exists(Eo=>{const xt=B.getDockingMode(),tn=Ce(Eo);return tn!==xt?(Ke(tn),!0):!1});return{isVisible:le,isPositionedAtTop:H,show:()=>{Ee.set(!0),Yt(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),ut(h,Eo=>{_o(Eo.element,"display")}),Dn(),Np(t)?Zt(Eo=>Nr.isDocked(Eo)?Nr.reset(Eo):Nr.refresh(Eo)):Zt(Nr.refresh)},hide:()=>{Ee.set(!1),Yt(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),ut(h,Eo=>{Yt(Eo.element,"display","none")})},update:Zt,updateMode:()=>{Dn()&&Zt(Nr.reset)},repositionPopups:je}},oL=(t,s)=>{const a=xr(t);return{pos:s?a.y:a.bottom,bounds:a}},hk=(t,s,a,l)=>{const d=dn(oL(s,a.isPositionedAtTop())),g=_=>{const{pos:O,bounds:B}=oL(s,a.isPositionedAtTop()),{pos:H,bounds:z}=d.get(),G=B.height!==z.height||B.width!==z.width;d.set({pos:O,bounds:B}),G&&D0(t,_),a.isVisible()&&(H!==O?a.update(Nr.reset):G&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Nr.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let h=0;const y=pD(()=>a.update(Nr.refresh),33);t.on("ScrollWindow",()=>{const _=Xa().left;_!==h&&(h=_,y.throttle()),a.updateMode()}),Np(t)&&t.on("ElementScroll",_=>{a.update(Nr.refresh)});const w=ga();w.set(bC(pe.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{w.clear()})};var sL=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g}=s,h=Ts(),y=pe.fromDom(d.targetNode),w=rW(t,y,s,l,h),_=jM(t);fU(t);const O=()=>{if(h.isSet()){w.show();return}h.set(ir.getHeader(g.outerContainer).getOrDie());const H=xw(t);Np(t)?(rm(y,g.mothership),rm(y,s.popupUi.mothership)):wx(H,g.mothership),wx(H,s.dialogUi.mothership);const z=()=>{XI(t,s,a,l),ir.setMenubar(g.outerContainer,wI(t,a)),w.show(),hk(t,y,w,_),t.nodeChanged()};_?t.once("SkinLoaded",z):z()};t.on("show",O),t.on("hide",w.hide),_||(t.on("focus",O),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||_)&&O()}),UT(t,s);const B={show:O,hide:w.hide,setEnabled:H=>{Uw(s,!H)},isEnabled:()=>!In.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const rL=()=>{const t=Ts(),s=Ts(),a=Ts();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),h=s.get().map(y=>y.mothership);return g.fold(()=>h.toArray(),y=>h.fold(()=>[y],w=>jo(y.element,w.element)?[y]:[y,w]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(y=>h(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},aL="contexttoolbar-show",cL="contexttoolbar-hide",lL=t=>({hide:()=>mo(t,l1()),getValue:()=>Wt.getValue(t)}),iL=(t,s)=>Ge(f$,(a,l)=>{const d=t.get(a),g=lL(d);s.onAction(g,l.event.buttonApi)}),cW=(t,s,a)=>{const{primary:l,...d}=s.original,g=at(fm({...d,type:"button",onAction:ee}));return Rb(g,a,[iL(t,s)])},lW=(t,s,a)=>{const{primary:l,...d}=s.original,g=at(LT({...d,type:"togglebutton",onAction:ee}));return qI(g,a,[iL(t,s)])},iW=t=>t.type==="contextformtogglebutton",uW=(t,s,a)=>iW(s)?lW(t,s,a):cW(t,s,a),PS=(t,s,a)=>{const l=We(s,h=>ws(uW(t,h,a)));return{asSpecs:()=>We(l,h=>h.asSpec()),findPrimary:h=>ls(s,(y,w)=>y.primary?A.from(l[w]).bind(_=>_.getOpt(h)).filter(_e(In.isDisabled)):A.none())}},uL=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=ws(ib.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:gt([mn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(_f(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=PS(l,t.commands,s);return[{title:A.none(),items:[l.asSpec()]},{title:A.none(),items:d.asSpecs()}]},dW={renderContextForm:(t,s,a)=>ek({type:t,uid:Ut("context-toolbar"),initGroups:uL(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:uL},N3=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,mW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Ou(pe.fromDom(t.startContainer),t.startOffset).element;return(dr(a)?Ca(a):A.some(a)).filter(Fo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},pk=t=>{const s=t.selection.getRng(),a=mW(s);if(t.inline){const l=Xa();return Ys(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=Gc(pe.fromDom(t.getBody()));return Ys(l.x+a.left,l.y+a.top,a.width,a.height)}},fW=(t,s)=>s.filter(a=>ko(a)&&Zc(a)).map(Gc).getOrThunk(()=>pk(t)),gW=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},hW=(t,s,a,l,d,g)=>{const h=pe.fromDom(t.getContainer()),y=ys(h,".tox-editor-header").getOr(h),w=xr(y),_=w.y>=s.bottom,O=l&&!_;if(t.inline&&O)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!O)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const B=d==="line"?xr(h):s;return O?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},dL=(t,s,a,l=0)=>{const d=Em(window),g=xr(pe.fromDom(t.getContentAreaContainer())),h=dT(t)||fT(t)||ab(t),{x:y,width:w}=gW(g,d,l);if(t.inline&&!h)return Ys(y,d.y,w,d.height);{const _=s.header.isPositionedAtTop(),{y:O,bottom:B}=hW(t,g,d,_,a,l);return Ys(y,O,w,B-O)}},bk=12,cy={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},P3={maxHeightFunction:dp(),maxWidthFunction:ny()},pW=(t,s)=>{const a=t.selection.getRng(),l=Ou(pe.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&jo(l.element,s)},bW=(t,s,a)=>{const l=$s(t,"position");Yt(t,"position",s);const d=a(t);return l.each(g=>Yt(t,"position",g)),d},B3=t=>t==="node",$3=(t,s,a,l,d)=>{const g=pk(t),h=l.lastElement().exists(y=>jo(a,y));if(pW(t,a))return h?CS:Cm;if(h)return bW(s,l.getMode(),()=>N3(g,xr(s),-20)&&!l.isReposition()?s5:CS);{const y=l.getMode()==="fixed"?d.y+Xa().top:d.y,w=Qs(s)+bk;return y+w<=g.y?Cm:yS}},mL=(t,s,a,l)=>{const d=w=>(_,O,B,H,z)=>{const G=$3(t,H,w,a,z),ne={..._,y:z.y,height:z.height};return{...G(ne,O,B,H,z),alwaysFit:!0}},g=w=>B3(l)?[d(w)]:[];return s?{onLtr:w=>[Oa,Fa,Aa,Ha,Rs,Ja].concat(g(w)),onRtl:w=>[Oa,Aa,Fa,Rs,Ha,Ja].concat(g(w))}:{onLtr:w=>[Ja,Oa,Ha,Fa,Rs,Aa].concat(g(w)),onRtl:w=>[Ja,Oa,Rs,Aa,Ha,Fa].concat(g(w))}},fL=(t,s,a,l)=>s==="line"?{bubble:ju(bk,0,cy),layouts:{onLtr:()=>[iC],onRtl:()=>[wv]},overrides:P3}:{bubble:ju(0,bk,cy,1/bk),layouts:mL(t,a,l,s),overrides:P3},I3=(t,s)=>{const a=uo(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Jr(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},ly=t=>{if(t.length<=1)return t;{const s=g=>zs(t,h=>h.position===g),a=g=>uo(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),h=We(a("selection"),y=>({...y,position:"node"}));return g.concat(h)}else return a(l?"selection":"node");else return a("line")}},vk=t=>{if(t.length<=1)return t;{const s=l=>Sn(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>uo(t,d=>d.position===l))}},yk=(t,s,a)=>{const l=I3(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=I3(t,a);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=ly(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},L3=(t,s,a)=>t(s)?A.none():Vu(s,l=>{if(Fo(l)){const{contextToolbars:d,contextForms:g}=I3(l,a.inNodeScope),h=g.length>0?g:vk(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),F3=(t,s)=>{const a=pe.fromDom(s.getBody()),l=h=>jo(h,a),d=h=>!l(h)&&!Wr(a,h),g=pe.fromDom(s.selection.getNode());return d(g)?A.none():yk(g,t.inNodeScope,t.inEditorScope).orThunk(()=>L3(l,g,t))},gL=(t,s)=>{const a={},l=[],d=[],g={},h={},y=(O,B)=>{const H=at(y8(B));a[O]=H,H.launch.map(z=>{g["form:"+O]={...B.launch,type:z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):l.push(H),h[O]=H},w=(O,B)=>{Ad(B).each(H=>{B.scope==="editor"?d.push(H):l.push(H),h[O]=H})},_=qo(t);return ut(_,O=>{const B=t[O];B.type==="contextform"?y(O,B):B.type==="contexttoolbar"&&w(O,B)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},BS=Ut("forward-slide"),H3=Ut("backward-slide"),Ck=Ut("change-slide-event"),$S="tox-pop--resizing",vW=t=>{const s=dn([]);return Er.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Er.getContent(a).each(l=>{_o(l.element,"visibility")}),Lr(a.element,$S),_o(a.element,"width")},inlineBehaviours:gt([ro("context-toolbar-events",[jh(md(),(a,l)=>{l.event.raw.propertyName==="width"&&(Lr(a.element,$S),_o(a.element,"width"))}),Ge(Ck,(a,l)=>{const d=a.element;_o(d,"width");const g=rc(d);Er.setContent(a,l.event.contents),ar(d,$S);const h=rc(d);Yt(d,"width",g+"px"),Er.getContent(a).each(y=>{l.event.focus.bind(w=>(Vi(w),Bl(d))).orThunk(()=>(mn.focusIn(y),xd(U(d))))}),setTimeout(()=>{Yt(a.element,"width",h+"px")},0)}),Ge(BS,(a,l)=>{Er.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:xd(U(a.element))}]))}),Tn(a,Ck,{contents:l.event.forwardContents,focus:A.none()})}),Ge(H3,(a,l)=>{tc(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Tn(a,Ck,{contents:fl(d.bar),focus:d.focus})})})]),mn.config({mode:"special",onEscape:a=>tc(s.get()).fold(()=>t.onEscape(),l=>(mo(a,H3),A.some(!0)))})]),lazySink:()=>eo.value(t.sink)})},wk="tox-pop--transition",yW=(t,s,a,l)=>{const d=l.backstage,g=d.shared,h=ul().deviceType.isTouch,y=Ts(),w=Ts(),_=Ts(),O=el(vW({sink:a,onEscape:()=>(t.focus(),A.some(!0))})),B=()=>{const Zt=_.get().getOr("node"),Dn=B3(Zt)?1:0;return dL(t,g,Zt,Dn)},H=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),z=Zt=>la(va(Zt,y.get(),jo),!0),G=()=>{if(H()){const Zt=B(),Dn=la(_.get(),"node")?fW(t,y.get()):pk(t);return Zt.height<=0||!N3(Dn,Zt,.01)}else return!0},ne=()=>{y.clear(),w.clear(),_.clear(),Er.hide(O)},Ee=()=>{if(Er.isOpen(O)){const Zt=O.element;_o(Zt,"display"),G()?Yt(Zt,"display","none"):(w.set(0),Er.reposition(O))}},le=Zt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Zt],behaviours:gt([mn.config({mode:"acyclic"}),ro("pop-dialog-wrap-events",[gr(Dn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>mn.focusIn(Dn))}),Jd(Dn=>{t.shortcuts.remove("ctrl+F9")})])])}),xe=se(()=>gL(s,Zt=>{const Dn=Pe([Zt]);Tn(O,BS,{forwardContents:le(Dn)})})),Ce=(Zt,Dn)=>fk(t,{buttons:Zt,toolbar:Dn.items,allowToolbarGroups:!1},l.backstage,A.some(["form:"])),Ke=(Zt,Dn)=>dW.buildInitGroups(Zt,Dn),Pe=Zt=>{const{buttons:Dn}=t.ui.registry.getAll(),yn=xe(),as={...Dn,...yn.formNavigators},Go=rb(t)===Su.scrolling?Su.scrolling:Su.default,Eo=gn(We(Zt,xt=>xt.type==="contexttoolbar"?Ce(as,xt):Ke(xt,g.providers)));return ek({type:Go,uid:Ut("context-toolbar"),initGroups:Eo,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},ht=(Zt,Dn)=>{const yn=Zt==="node"?g.anchors.node(Dn):g.anchors.cursor(),as=fL(t,Zt,h(),{lastElement:y.get,isReposition:()=>la(w.get(),0),getMode:()=>Oc.getMode(a)});return Xs(yn,as)},Rt=(Zt,Dn)=>{if(cn.cancel(),!H())return;const yn=Pe(Zt),as=Zt[0].position,Go=ht(as,Dn);_.set(as),w.set(1);const Eo=O.element;_o(Eo,"display"),z(Dn)||(Lr(Eo,wk),Oc.reset(a,O)),Er.showWithinBounds(O,le(yn),{anchor:Go,transition:{classes:[wk],mode:"placement"}},()=>A.some(B())),Dn.fold(y.clear,y.set),G()&&Yt(Eo,"display","none")};let je=!1;const cn=pD(()=>{if(!(!t.hasFocus()||t.removed||je))if(Si(O.element,wk))cn.throttle();else{const Zt=xe();F3(Zt,t).fold(ne,Dn=>{Rt(Dn.toolbars,A.some(Dn.elem))})}},17);t.on("init",()=>{t.on("remove",ne),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ee),t.on("click keyup focus SetContent",cn.throttle),t.on(cL,ne),t.on(aL,Zt=>{const Dn=xe();ft(Dn.lookupTable,Zt.toolbarKey).each(yn=>{Rt([yn],pn(Zt.target!==t,Zt.target)),Er.getContent(O).each(mn.focusIn)})}),t.on("focusout",Zt=>{yw.setEditorTimeout(t,()=>{Bl(a.element).isNone()&&Bl(O.element).isNone()&&ne()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ne()}),t.on("ExecCommand",({command:Zt})=>{Zt.toLowerCase()==="toggleview"&&ne()}),t.on("AfterProgressState",Zt=>{Zt.state?ne():t.hasFocus()&&cn.throttle()}),t.on("dragstart",()=>{je=!0}),t.on("dragend drop",()=>{je=!1}),t.on("NodeChange",Zt=>{Bl(O.element).fold(cn.throttle,ee)})})},CW=t=>{ut([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Eu(t,a.cmd),onSetup:XT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:li(t),onAction:Eu(t,"JustifyNone")})},IS=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Ts();return We(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:y=>{const w=O=>{O&&(g.on(B=>B.setActive(!1)),g.set(y)),y.setActive(O)};w(la(d,s.hash(h)));const _=s.watcher(t,h,w);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},hL=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:CO,hash:s=>kU(s,["fixed","relative","empty"]).getOr(s),display:Ot,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:li(t),onMenuSetup:li(t)}),wW=t=>A.from(rT(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:W(a),hash:l=>At(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=pe.fromDom(l.selection.getNode());return Gd(d,g=>A.some(g).filter(Fo).bind(h=>$(h,"lang").map(w=>{const _=$(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=ga();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),jw(d.clear,li(t)(l))},onMenuSetup:li(t)})),SW=t=>{IS(t,hL(t)),wW(t).each(s=>IS(t,s))},xW=(t,s)=>{vU(t,s),_3(t,s),LU(t,s),yU(t,s),BU(t,s)},TW=t=>pb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),EW=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:TW(t),onAction:Eu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:li(t),onAction:Eu(t,"indent")})},pL=t=>{EW(t)},V3=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),jw(()=>t.off("PastePlainTextToggle",l),li(t)(a))},bL=t=>{const s=dn(uT(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:V3(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:V3(t,s)})},Sk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},kW=t=>{vm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:XT(t,s.name),onAction:Sk(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:XT(t,a),onAction:Sk(t,a),shortcut:l})}},vL=t=>{vm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Eu(t,s.action),shortcut:s.shortcut})}),vm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:li(t),onAction:Eu(t,s.action)})})},yL=t=>{vm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Eu(t,s.action),onSetup:XT(t,s.name)})})},_W=t=>{kW(t),vL(t),yL(t)},MG=t=>{vm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Eu(t,s.action)})}),vm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:li(t),onAction:Eu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:li(t),onAction:Sk(t,"code")})},AW=t=>{_W(t),MG(t)},xk=(t,s)=>pb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),OW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:xk(t,"hasUndo"),onAction:Eu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:xk(t,"hasRedo"),onAction:Eu(t,"redo")})},DW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:xk(t,"hasUndo"),onAction:Eu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:xk(t,"hasRedo"),onAction:Eu(t,"redo"),shortcut:"Meta+Y"})},RW=t=>{OW(t),DW(t)},MW=t=>pb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),NW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:MW(t),onAction:Eu(t,"mceToggleVisualAid")})},PW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Eu(t,"mceToggleVisualAid")})},BW=t=>{PW(t),NW(t)},$W=(t,s)=>{CW(t),AW(t),xW(t,s),RW(t),s7(t),BW(t),pL(t),SW(t),bL(t)},IW=t=>Mt(t)?t.split(/[ ,]/):t,CL=t=>s=>s.options.get(t),LW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Mt(a)||De(a,Mt)?{value:IW(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},z3=CL("contextmenu_never_use_native"),FW=CL("contextmenu_avoid_overlap"),HW=t=>wL(t).length===0,wL=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:uo(a,l=>yo(s,l))},LS=(t,s)=>({type:"makeshift",x:t,y:s}),VW=(t,s,a)=>LS(t.x+s,t.y+a),SL=t=>t.type==="longpress"||t.type.indexOf("touch")===0,zW=t=>{if(SL(t)){const s=t.touches[0];return LS(s.pageX,s.pageY)}else return LS(t.pageX,t.pageY)},UW=t=>{if(SL(t)){const s=t.touches[0];return LS(s.clientX,s.clientY)}else return LS(t.clientX,t.clientY)},WW=(t,s)=>{const a=ob.DOM.getPos(t);return VW(s,a.x,a.y)},U3=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?zW(s):WW(t.getContentAreaContainer(),UW(s)):xL(t),xL=t=>({type:"selection",root:pe.fromDom(t.selection.getNode())}),ZW=t=>({type:"node",node:A.some(pe.fromDom(t.selection.getNode())),root:pe.fromDom(t.getBody())}),Tk=(t,s,a)=>{switch(a){case"node":return ZW(t);case"point":return U3(t,s);case"selection":return xL(t)}},TL=(t,s,a,l,d,g)=>{const h=a(),y=Tk(t,s,g);G0(h,dm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(w=>{s.preventDefault(),Er.showMenuAt(d,{anchor:y},{menu:{markers:Bp("normal")},data:w})})},EL={onLtr:()=>[Oa,Fa,Aa,Ha,Rs,Ja,Cm,yS,vS,VE,bS,HE],onRtl:()=>[Oa,Aa,Fa,Rs,Ha,Ja,Cm,yS,bS,HE,vS,VE]},jW=12,GW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},qW=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return dc(t.getWin(),hp.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},KW=t=>{const s=t.selection.getRng(),a=()=>{yw.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},YW=(t,s,a)=>{const l=Tk(t,s,a);return{bubble:ju(0,a==="point"?jW:0,GW),layouts:EL,overrides:{maxWidthFunction:ny(),maxHeightFunction:dp()},...l}},W3=(t,s,a,l,d,g,h)=>{const y=YW(t,s,g);G0(a,dm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(w=>{s.preventDefault();const _=h?ci.HighlightMenuAndItem:ci.HighlightNone;Er.showMenuWithinBounds(d,{anchor:y},{menu:{markers:Bp("normal"),highlightOnOpen:_},data:w,type:"horizontal"},()=>A.some(dL(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(cL)})},XW=(t,s,a,l,d,g)=>{const h=ul(),y=h.os.isiOS(),w=h.os.isMacOS(),_=h.os.isAndroid(),O=h.deviceType.isTouch(),B=()=>!(_||y||w&&O),H=()=>{const z=a();W3(t,s,z,l,d,g,B())};if((w||y)&&g!=="node"){const z=()=>{KW(t),H()};qW(t,s)?z():(t.once("selectionchange",z),t.once("touchend",()=>t.off("selectionchange",z)))}else H()},Z3=t=>Mt(t)?t==="|":t.type==="separator",j3={type:"separator"},kL=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Mt(t))return t;switch(t.type){case"separator":return j3;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Mt(l)?l:We(l,kL)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ye(a.onAction)}}},Ek=(t,s)=>{if(s.length===0)return t;const l=tc(t).filter(d=>!Z3(d)).fold(()=>[],d=>[j3]);return t.concat(l).concat(s).concat([j3])},JW=(t,s,a)=>{const l=zo(s,(d,g)=>ft(t,g.toLowerCase()).map(h=>{const y=h.update(a);if(Mt(y)&&ue(Br(y)))return Ek(d,y.split(" "));if(Cn(y)&&y.length>0){const w=We(y,kL);return Ek(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&Z3(l[l.length-1])&&l.pop(),l},_L=(t,s)=>s.ctrlKey&&!z3(t),QW=t=>t.type==="longpress"||yo(t,"touches"),AL=(t,s)=>!QW(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),kk=(t,s)=>AL(t,s)?t.selection.getStart(!0):s.target,eZ=(t,s)=>{const a=FW(t),l=AL(t,s)?"selection":"point";if(ue(a)){const d=kk(t,s);return Yw(pe.fromDom(d),a)?"node":l}else return l},tZ=(t,s,a)=>{const d=ul().deviceType.isTouch,g=el(Er.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:gt([ro("dismissContextMenu",[Ge(Ef(),(w,_)=>{Wo.close(w),t.focus()})])])})),h=()=>Er.hide(g),y=w=>{if(z3(t)&&w.preventDefault(),_L(t,w)||HW(t))return;const _=eZ(t,w),O=()=>{const H=kk(t,w),z=t.ui.registry.getAll(),G=wL(t);return JW(z.contextMenus,G,H)};(d()?XW:TL)(t,w,O,a,g,_)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",y)})},G3=fe.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),_k=t=>s=>s.translate(-t.left,-t.top),Ak=t=>s=>s.translate(t.left,t.top),mg=t=>(s,a)=>zo(t,(l,d)=>d(l),or(s,a)),Ok=(t,s,a)=>t.fold(mg([Ak(a),_k(s)]),mg([_k(s)]),mg([])),iy=(t,s,a)=>t.fold(mg([Ak(a)]),mg([]),mg([Ak(s)])),OL=(t,s,a)=>t.fold(mg([]),mg([_k(a)]),mg([Ak(s),_k(a)])),nZ=(t,s,a,l,d,g)=>{const h=iy(t,d,g),y=iy(s,d,g);return Math.abs(h.left-y.left)<=a&&Math.abs(h.top-y.top)<=l},oZ=(t,s,a,l,d,g)=>{const h=iy(t,d,g),y=iy(s,d,g),w=Math.abs(h.left-y.left),_=Math.abs(h.top-y.top);return or(w,_)},DL=(t,s,a)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},sZ=(t,s,a)=>t.fold((l,d)=>FS(l+s,d+a),(l,d)=>Gp(l+s,d+a),(l,d)=>qp(l+s,d+a)),q3=(t,s,a,l)=>{const d=(g,h)=>(y,w)=>{const _=g(s,a,l);return h(y.getOr(_.left),w.getOr(_.top))};return t.fold(d(OL,FS),d(iy,Gp),d(Ok,qp))},FS=G3.offset,Gp=G3.absolute,qp=G3.fixed,RL=(t,s)=>{const a=bs(t,s);return At(a)?NaN:parseInt(a,10)},rZ=(t,s)=>{const a=t.element,l=RL(a,s.leftAttr),d=RL(a,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(or(l,d))},aZ=(t,s,a)=>{const l=t.element;vt(l,s.leftAttr,a.left+"px"),vt(l,s.topAttr,a.top+"px")},Nb=(t,s)=>{const a=t.element;oe(a,s.leftAttr),oe(a,s.topAttr)},ML=(t,s,a,l)=>rZ(t,s).fold(()=>a,d=>qp(d.left+l.left,d.top+l.top)),cZ=(t,s,a,l,d,g)=>{const h=ML(t,s,a,l),y=s.mustSnap?iZ(t,s,h,d,g):PL(t,s,h,d,g),w=Ok(h,d,g);return aZ(t,s,w),y.fold(()=>({coord:qp(w.left,w.top),extra:A.none()}),_=>({coord:_.output,extra:_.extra}))},lZ=(t,s)=>{Nb(t,s)},NL=(t,s,a,l)=>ls(t,d=>{const g=d.sensor;return nZ(s,g,d.range.left,d.range.top,a,l)?A.some({output:q3(d.output,s,a,l),extra:d.extra}):A.none()}),iZ=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return NL(g,a,l,d).orThunk(()=>zo(g,(w,_)=>{const O=_.sensor,B=oZ(a,O,_.range.left,_.range.top,l,d);return w.deltas.fold(()=>({deltas:A.some(B),snap:A.some(_)}),H=>{const z=(B.left+B.top)/2,G=(H.left+H.top)/2;return z<=G?{deltas:A.some(B),snap:A.some(_)}:w})},{deltas:A.none(),snap:A.none()}).snap.map(w=>({output:q3(w.output,a,l,d),extra:w.extra})))},PL=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return NL(g,a,l,d)},uZ=(t,s,a)=>({coord:q3(t.output,t.output,s,a),extra:t.extra});var dZ=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ba(t.element),h=Xa(g),y=My(d),w=uZ(l,h,y),_=DL(w.coord,h,y);ct(d,_)}}});const K3="data-initial-z-index",mZ=t=>{Ca(t.element).filter(Fo).each(s=>{$(s,K3).fold(()=>_o(s,"z-index"),a=>Yt(s,"z-index",a)),oe(s,K3)})},fZ=t=>{Ca(t.element).filter(Fo).each(s=>{$s(s,"z-index").each(a=>{vt(s,K3,a)}),Yt(s,"z-index",xs(t.element,"z-index"))})},BL=(t,s)=>{t.getSystem().addToGui(s),fZ(s)},gZ=t=>{mZ(t),t.getSystem().removeFromGui(t)},$L=(t,s,a)=>t.getSystem().build(Qm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var hZ=Fs("snaps",[Ze("getSnapPoints"),Ho("onSensor"),Ze("leftAttr"),Ze("topAttr"),Se("lazyViewport",oa),Se("mustSnap",!1)]);const Dk=[Se("useFixed",so),Ze("blockerClass"),Se("getTarget",Ot),Se("onDrag",ee),Se("repositionTarget",!0),Se("onDrop",ee),Vr("getBounds",oa),hZ],IL=t=>Wa($s(t,"left"),$s(t,"top"),$s(t,"position"),(s,a,l)=>(l==="fixed"?qp:FS)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=wa(t);return Gp(s.left,s.top)}),pZ=(t,s,a,l,d)=>{const g=d.bounds,h=iy(s,a,l),y=Zu(h.left,g.x,g.x+g.width-d.width),w=Zu(h.top,g.y,g.y+g.height-d.height),_=Gp(y,w);return s.fold(()=>{const O=OL(_,a,l);return FS(O.left,O.top)},W(_),()=>{const O=Ok(_,a,l);return qp(O.left,O.top)})},HS=(t,s,a,l,d,g,h)=>{const y=s.fold(()=>{const w=sZ(a,g.left,g.top),_=Ok(w,l,d);return qp(_.left,_.top)},w=>{const _=cZ(t,w,a,g,l,d);return _.extra.each(O=>{w.onSensor(t,O)}),_.coord});return pZ(t,y,l,d,h)},bZ=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ba(t.element),h=Xa(g),y=My(d),w=IL(d),_=HS(t,s.snaps,w,h,y,l,a),O=DL(_,h,y);ct(d,O)}s.onDrag(t,d,l)},LL=(t,s)=>({bounds:t.getBounds(),height:Ru(s.element),width:$a(s.element)}),VS=(t,s,a,l,d)=>{const g=a.update(l,d),h=a.getStartData().getOrThunk(()=>LL(s,t));g.each(y=>{bZ(t,s,h,y)})},FL=(t,s,a,l)=>{s.each(gZ),a.snaps.each(g=>{lZ(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},Y3=t=>(s,a)=>{const l=d=>{a.setStartData(LL(s,d))};return rr([Ge(Pg(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},vZ=t=>rr([Ge(Dl(),t.forceDrop),Ge(Mm(),t.drop),Ge(Wh(),(s,a)=>{t.move(a.event)}),Ge(zu(),t.delayDrop)]);var yZ=Object.freeze({__proto__:null,getData:t=>A.from(or(t.x,t.y)),getDelta:(t,s)=>or(s.left-t.left,s.top-t.top)});const HL=(t,s,a)=>[Ge(Dl(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>FL(l,A.some(_),t,s),y=XP(h,200),w={drop:h,delayDrop:y.schedule,forceDrop:h,move:B=>{y.cancel(),VS(l,t,s,yZ,B)}},_=$L(l,t.blockerClass,vZ(w));(()=>{a(l),BL(l,_)})()})],CZ=[...Dk,cr("dragger",{handlers:Y3(HL)})],wZ=t=>rr([Ge(Ao(),t.forceDrop),Ge(_a(),t.drop),Ge(oi(),t.drop),Ge(fr(),(s,a)=>{t.move(a.event)})]),SZ=t=>{const s=t[0];return A.some(or(s.clientX,s.clientY))};var VL=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?SZ(a):A.none()},getDelta:(t,s)=>or(s.left-t.left,s.top-t.top)});const zL=(t,s,a)=>{const l=Ts(),d=g=>{FL(g,l.get(),t,s),l.clear()};return[Ge(Ao(),(g,h)=>{h.stop();const y=()=>d(g),w={drop:y,delayDrop:ee,forceDrop:y,move:B=>{VS(g,t,s,VL,B)}},_=$L(g,t.blockerClass,wZ(w));l.set(_),(()=>{a(g),BL(g,_)})()}),Ge(fr(),(g,h)=>{h.stop(),VS(g,t,s,VL,h.event)}),Ge(_a(),(g,h)=>{h.stop(),d(g)}),Ge(oi(),d)]},xZ=[...Dk,cr("dragger",{handlers:Y3(zL)})],TZ=(t,s,a)=>[...HL(t,s,a),...zL(t,s,a)],EZ=[...Dk,cr("dragger",{handlers:Y3(TZ)})];var kZ=Object.freeze({__proto__:null,mouse:CZ,touch:xZ,mouseOrTouch:EZ}),_Z=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const a=()=>{t=A.none(),s=A.none()},l=(w,_)=>{const O=t.map(B=>w.getDelta(B,_));return t=A.some(_),O},d=(w,_)=>w.getData(_).bind(O=>l(w,O)),g=w=>{s=A.some(w)},h=()=>s,y=W({});return wi({readState:y,reset:a,update:d,getStartData:h,setStartData:g})}});const Pb=a2({branchKey:"mode",branches:kZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:_Z,apis:dZ}),Rk=40,Mk=Rk/2,UL=(t,s,a,l,d,g)=>t.fold(()=>Pb.snap({sensor:Gp(a-Mk,l-Mk),range:or(d,g),output:Gp(A.some(a),A.some(l)),extra:{td:s}}),h=>{const y=a-Mk,w=l-Mk,_=Rk,O=Rk,B=h.element.dom.getBoundingClientRect();return Pb.snap({sensor:Gp(y,w),range:or(_,O),output:Gp(A.some(a-B.width/2),A.some(l-B.height/2)),extra:{td:s}})}),WL=(t,s,a)=>{const l=(d,g)=>d.exists(h=>jo(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},ZL=t=>ws(ol.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:gt([Pb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),F0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),AZ=(t,s)=>{const a=dn([]),l=dn([]),d=dn(!1),g=Ts(),h=Ts(),y=Rt=>{const je=Gc(Rt);return UL(z.getOpt(s),Rt,je.x,je.y,je.width,je.height)},w=()=>We(a.get(),Rt=>y(Rt)),_=Rt=>{const je=Gc(Rt);return UL(G.getOpt(s),Rt,je.right,je.bottom,je.width,je.height)},O=()=>We(l.get(),Rt=>_(Rt)),B=WL(w,g,Rt=>{h.get().each(je=>{t.dispatch("TableSelectorChange",{start:Rt,finish:je})})}),H=WL(O,h,Rt=>{g.get().each(je=>{t.dispatch("TableSelectorChange",{start:je,finish:Rt})})}),z=ZL(B),G=ZL(H),ne=el(z.asSpec()),Ee=el(G.asSpec()),le=(Rt,je,cn,Zt)=>{const Dn=je.dom.getBoundingClientRect();_o(Rt.element,"display");const yn=Pc(pe.fromDom(t.getBody())).dom.innerHeight,as=cn(Dn),Go=Zt(Dn,yn);(as||Go)&&Yt(Rt.element,"display","none")},xe=(Rt,je,cn,Zt)=>{const Dn=cn(je);Pb.snapTo(Rt,Dn),le(Rt,je,Go=>Go[Zt]<0,(Go,Eo)=>Go[Zt]>Eo)},Ce=Rt=>xe(ne,Rt,y,"top"),Ke=()=>g.get().each(Ce),Pe=Rt=>xe(Ee,Rt,_,"bottom"),ht=()=>h.get().each(Pe);if(ul().deviceType.isTouch()){const Rt=je=>We(je,pe.fromDom);t.on("TableSelectionChange",je=>{d.get()||(sm(s,ne),sm(s,Ee),d.set(!0));const cn=pe.fromDom(je.start),Zt=pe.fromDom(je.finish);g.set(cn),h.set(Zt),A.from(je.otherCells).each(Dn=>{a.set(Rt(Dn.upOrLeftCells)),l.set(Rt(Dn.downOrRightCells)),Ce(cn),Pe(Zt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ke(),ht()}),t.on("TableSelectionClear",()=>{d.get()&&(Um(ne),Um(Ee),d.set(!1)),g.clear(),h.clear()})}};var J3=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const jL=(t,s)=>{const a=A.from(bs(t,"id")).getOrThunk(()=>{const l=Ut("aria");return vt(s,"id",l),l});vt(t,"aria-describedby",a)},OZ=t=>{oe(t,"aria-describedby")},DZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",RZ=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,O,B)=>ol.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B}},components:[qr(_)],action:H=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:gt([Vc.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(H,z)=>{jL(H.element,z.element)},onHide:H=>{OZ(H.element)}})}),hm.button(a.isDisabled),Qa()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[qr(` ${d} `)]}),y=_=>zo(_,(O,B,H)=>{const z=g(B.name,B.element,H);return H===0?O.concat([z]):O.concat([h(),z])},[]),w=_=>{const O=[];let B=_.length;for(;B-- >0;){const H=_[B];if(H.nodeType===1&&!DZ(H)){const z=z8(t,H);if(z.isDefaultPrevented()||O.push({name:z.name,element:H}),z.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:gt([mn.config({mode:"flow",selector:"div[role=button]"}),In.config({disabled:a.isDisabled}),Qa(),lr.config({}),Zn.config({}),ro("elementPathEvents",[gr((_,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>mn.focusIn(_)),t.on("NodeChange",B=>{const H=w(B.parents),z=H.length>0?y(H):[];Zn.set(_,z)})})])]),components:[]}};var Kp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Kp||(Kp={}));const MZ=(t,s,a,l,d)=>{const g={height:Mb(l+s.top,sT(t),uO(t))};return a===Kp.Both&&(g.width=Mb(d+s.left,S0(t),ww(t))),g},GL=(t,s,a)=>{const l=pe.fromDom(t.getContainer()),d=MZ(t,s,a,Qs(l),rc(l));$e(d,(g,h)=>{Un(g)&&Yt(l,h,R3(g))}),H8(t)},NZ=t=>{const s=bO(t);return s===!1?Kp.None:s==="both"?Kp.Both:Kp.Vertical},Nk=(t,s,a,l)=>{const g=or(a*20,l*20);return GL(t,g,s),A.some(!0)},PZ=(t,s)=>{const a=NZ(t);if(a===Kp.None)return A.none();const l=a===Kp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(qi("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[Pb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>GL(t,h,a),blockerClass:"tox-blocker"}),mn.config({mode:"special",onLeft:()=>Nk(t,a,-1,0),onRight:()=>Nk(t,a,1,0),onUp:()=>Nk(t,a,0,-1),onDown:()=>Nk(t,a,0,1)}),lr.config({}),Fn.config({}),Vc.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},BZ=(t,s)=>{const a=(l,d,g)=>Zn.set(l,[qr(s.translate(["{0} "+g,d[g]]))]);return ol.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:gt([hm.button(s.isDisabled),Qa(),lr.config({}),Zn.config({}),Wt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ro("wordcount-events",[Wu(l=>{const d=Wt.getValue(l),g=d.mode==="words"?"characters":"words";Wt.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),gr(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=Wt.getValue(l);Wt.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[fu()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},$Z=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",J3.trim()])},behaviours:gt([Fn.config({})])}]}),l=()=>{const y=ZT("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[qr(Yu.translate(["Press {0} for help",y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(BZ(t,s)),pO(t)&&y.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],w=tN(t),_=QM(t),O=pO(t)||t.hasPlugin("wordcount"),B=()=>{const H="tox-statusbar__text-container--flex-start",z="tox-statusbar__text-container--flex-end",G="tox-statusbar__text-container--space-around";if(w){const ne="tox-statusbar__text-container-3-cols";return!O&&!_?[ne,G]:O&&!_?[ne,z]:[ne,H]}return[O&&!_?z:H]};return _&&y.push(RZ(t,{},s)),w&&y.push(l()),O&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...B()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),w=PZ(t,s);return y.concat(w.toArray())})()}},qL=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),IZ=(t,s)=>{const a=t.inline,l=a?sL:nW,d=T0(t)?a9:F5,g=rL(),h=Ts(),y=Ts(),w=Ts(),H=ul().deviceType.isTouch()?["tox-platform-touch"]:[],z=ph(t),G=rb(t),ne=ws({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ee=ws({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),le=()=>g.mainUi.get().map(kn=>kn.outerContainer).bind(ir.getHeader),xe=()=>eo.fromOption(g.dialogUi.get().map(kn=>kn.sink),"UI has not been rendered"),Ce=()=>eo.fromOption(g.popupUi.get().map(kn=>kn.sink),"(popup) UI has not been rendered"),Ke=g.lazyGetInOuterOrDie("anchor bar",ne.getOpt),Pe=g.lazyGetInOuterOrDie("bottom anchor bar",Ee.getOpt),ht=g.lazyGetInOuterOrDie("toolbar",ir.getToolbar),Rt=g.lazyGetInOuterOrDie("throbber",ir.getThrobber),je=Yz({popup:Ce,dialog:xe},t,Ke,Pe),cn=()=>{const kn={attributes:{[zf]:z?Vf.BottomToTop:Vf.TopToBottom}},Yn=ir.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:je.popup,onEscape:()=>{t.focus()}}),Vs=ir.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:je.popup.shared.getSink,providers:je.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Hb=>{U8(t,Hb)},type:G,lazyToolbar:ht,lazyHeader:()=>le().getOrDie("Could not find header element"),...kn}),gs=ir.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:je.popup.shared.providers,onEscape:()=>{t.focus()},type:G}),Wl=ab(t),od=fT(t),rf=dT(t),yl=Sw(t),sd=Zt(),Ld=Wl||od||rf,eu=()=>Wl?[gs]:od?[Vs]:[],hg=yl?[sd,Yn]:[Yn];return ir.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ld?[]:["tox-editor-header--empty"]),...kn},components:gn([rf?hg:[],eu(),x0(t)?[]:[ne.asSpec()]]),sticky:T0(t),editor:t,sharedBackstage:je.popup.shared})},Zt=()=>ir.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Dn=()=>{const kn=ir.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Yn=ir.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[kn,Yn]}},yn=()=>{const kn=xw(t),Yn=jo(oo(),kn)&&xs(kn,"display")==="grid",Vs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...Yu.isRtl()?{dir:"rtl"}:{}}},behaviours:gt([Oc.config({useFixed:()=>d.isDocked(le)})])},gs={dom:{styles:{width:document.body.clientWidth+"px"}},events:rr([Ge(hd(),rf=>{Yt(rf.element,"width",document.body.clientWidth+"px")})])},Wl=el(Xs(Vs,Yn?gs:{})),od=I4(Wl);return y.set(od),{sink:Wl,mothership:od}},as=()=>{const kn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...Yu.isRtl()?{dir:"rtl"}:{}}},behaviours:gt([Oc.config({useFixed:()=>d.isDocked(le),getBounds:()=>s.getPopupSinkBounds()})])},Yn=el(kn),Vs=I4(Yn);return w.set(Vs),{sink:Yn,mothership:Vs}},Go=()=>{const kn=cn(),Yn=Dn(),Vs=ir.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:je.popup}),gs=ir.parts.viewWrapper({backstage:je.popup}),Wl=JM(t)&&!a?A.some($Z(t,je.popup.shared.providers)):A.none(),od=gn([z?[]:[kn],a?[]:[Yn],z?[kn]:[]]),rf=ir.parts.editorContainer({components:gn([od,a?[]:[Ee.asSpec()]])}),yl=gT(t),sd={role:"application",...Yu.isRtl()?{dir:"rtl"}:{},...yl?{"aria-hidden":"true"}:{}},Ld=el(ir.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(z?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...yl?{opacity:"0",border:"0"}:{}},attributes:sd},components:[rf,...a?[]:[gs,...Wl.toArray()],Vs],behaviours:gt([Qa(),In.config({disableClass:"tox-tinymce--disabled"}),mn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),eu=I4(Ld);return h.set(eu),{mothership:eu,outerContainer:Ld}},Eo=kn=>{const Yn=R3(gk(t)),Vs=R3(tL(t));return t.inline||(il("div","width",Vs)&&Yt(kn.element,"width",Vs),il("div","height",Yn)?Yt(kn.element,"height",Yn):Yt(kn.element,"height","400px")),Yn},xt=kn=>{t.addShortcut("alt+F9","focus menubar",()=>{ir.focusMenubar(kn)}),t.addShortcut("alt+F10","focus toolbar",()=>{ir.focusToolbar(kn)}),t.addCommand("ToggleToolbarDrawer",(Yn,Vs)=>{Vs!=null&&Vs.skipFocus?ir.toggleToolbarDrawerWithoutFocusing(kn):ir.toggleToolbarDrawer(kn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>ir.isToolbarDrawerToggled(kn))},tn=kn=>{const{mainUi:Yn,popupUi:Vs,uiMotherships:gs}=kn;Je(aT(t),(gy,Kk)=>{t.ui.registry.addGroupToolbarButton(Kk,gy)});const{buttons:Wl,menuItems:od,contextToolbars:rf,sidebars:yl,views:sd}=t.ui.registry.getAll(),Ld=wO(t),eu={menuItems:od,menus:SO(t),menubar:fO(t),toolbar:Ld.getOrThunk(()=>cT(t)),allowToolbarGroups:G===Su.floating,buttons:Wl,sidebar:yl,views:sd};xt(Yn.outerContainer),Xz(t,Yn.mothership,gs),d.setup(t,je.popup.shared,le),$W(t,je.popup),tZ(t,je.popup.shared.getSink,je.popup),g9(t),E9(t,Rt,je.popup.shared),yW(t,rf,Vs.sink,{backstage:je.popup}),AZ(t,Vs.sink);const hg=t.getElement(),Hb=Eo(Yn.outerContainer),fR={targetNode:hg,height:Hb};return l.render(t,kn,eu,je.popup,fR)},no=kn=>(w.set(kn.mothership),kn),$n=()=>{const kn=Go(),Yn=yn(),Vs=Np(t)?as():no(Yn);g.dialogUi.set(Yn),g.popupUi.set(Vs),g.mainUi.set(kn);const gs={popupUi:Vs,dialogUi:Yn,mainUi:kn,uiMotherships:g.getUiMotherships()};return tn(gs)};return{popups:{backstage:je.popup,getMothership:()=>qL("popups",w)},dialogs:{backstage:je.dialog,getMothership:()=>qL("dialogs",y)},renderUI:$n}},LZ=t=>t.dom.textContent,KL=(t,s)=>{const a=$(t,"id").fold(()=>{const l=Ut("dialog-label");return vt(s,"id",l),l},Ot);vt(t,"aria-labelledby",a)},FZ=W([Ze("lazySink"),es("dragBlockClass"),Vr("getBounds",oa),Se("useTabstopAt",It),Se("firstTabstop",0),Se("eventOrder",{}),fc("modalBehaviours",[mn]),Nl("onExecute"),$m("onEscape")]),Q3={sketch:Ot},HZ=W([Gi({name:"draghandle",overrides:(t,s)=>({behaviours:gt([Pb.config({mode:"mouse",getTarget:a=>Lm(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Hc({schema:[Ze("dom")],name:"title"}),Hc({factory:Q3,schema:[Ze("dom")],name:"close"}),Hc({factory:Q3,schema:[Ze("dom")],name:"body"}),Gi({factory:Q3,schema:[Ze("dom")],name:"footer"}),yu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Se("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Se("components",[])],name:"blocker"})]),VZ=(t,s,a,l)=>{const d=Ts(),g=G=>{d.set(G);const ne=t.lazySink(G).getOrDie(),Ee=l.blocker(),le=ne.getSystem().build({...Ee,components:Ee.components.concat([fl(G)]),behaviours:gt([Fn.config({}),ro("dialog-blocker-events",[jh(dd(),()=>{sf.isBlocked(G)?ee():mn.focusIn(G)})])])});sm(ne,le),mn.focusIn(G)},h=G=>{d.clear(),Ca(G.element).each(ne=>{G.getSystem().getByDom(ne).each(Ee=>{Um(Ee)})})},y=G=>Ll(G,t,"body"),w=G=>mt(G,t,"footer"),_=(G,ne)=>{sf.block(G,ne)},O=G=>{sf.unblock(G)},B=Ut("modal-events"),H={...t.eventOrder,[Rl()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])},z=ul();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:y,getFooter:w,setIdle:O,setBusy:_},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:gc(t.modalBehaviours,[Zn.config({}),mn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),sf.config({getRoot:d.get}),ro(B,[gr(G=>{const ne=Ll(G,t,"title").element,Ee=LZ(ne);z.os.isMacOS()&&Xe(Ee)?vt(G.element,"aria-label",Ee):KL(G.element,ne)})])])}},hc=pl({name:"ModalDialog",configFields:FZ(),partFields:HZ(),factory:VZ,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),zZ=Rn([Ra,MT].concat(mb)),UZ=ei,eR=[r4("button"),_d,Hi("align","end",["start","end"]),Fw,mm,r1("buttonType",["primary","secondary"])],tR=[...eR,yh],Pk=[Tc("type",["submit","cancel","custom"]),...tR],Bb=[Tc("type",["menu"]),Lp,Lw,_d,ni("items",zZ),...eR],WZ=[...eR,Tc("type",["togglebutton"]),Lw,_d,Lp,jr("active",!1)],nR=Ia("type",{submit:Pk,cancel:Pk,custom:Pk,menu:Bb,togglebutton:WZ}),Bk=[Ra,yh,Tc("level",["info","warn","error","success"]),IN,Se("url","")],ZZ=Rn(Bk),jZ=t=>[Ra,t],GZ=[Ra,yh,mm,r4("button"),_d,f8,r1("buttonType",["primary","secondary","toolbar"]),Fw],qZ=Rn(GZ),uy=[Ra,MT],Ni=uy.concat([PT]),YL=uy.concat([NT,mm]),KZ=Rn(YL),YZ=ei,XZ=Ni.concat([IT("auto")]),JZ=Rn(XZ),QZ=o1([Iw,yh,IN]),ej=Ni.concat([ic("storageKey","default")]),tj=Rn(ej),nj=Ht,zS=Rn(Ni),oR=Ht,$k=uy.concat([ic("tag","textarea"),ha("scriptId"),ha("scriptUrl"),Fu("onFocus"),S("settings",void 0)]),$b=uy.concat([ic("tag","textarea"),ti("init")]),Ik=Rg(t=>Tr("customeditor.old",lc($b),t).orThunk(()=>Tr("customeditor.new",lc($k),t))),oj=Ht,JL=Rn(Ni),QL=Dm(),rj=t=>[Ra,Hh("columns"),t],aj=[Ra,ha("html"),Hi("presets","presentation",["presentation","document"]),Vr("onInit",ee),jr("stretched",!1)],cj=Rn(aj),eF=Ni.concat([jr("border",!1),jr("sandboxed",!0),jr("streamContent",!1),jr("transparent",!0)]),tF=Rn(eF),sR=Ht,lj=Rn(uy.concat([pa("height")])),ij=Rn([ha("url"),Rm("zoom"),Rm("cachedWidth"),Rm("cachedHeight")]),uj=Ni.concat([pa("inputMode"),pa("placeholder"),jr("maximized",!1),mm]),nF=Rn(uj),dj=Ht,mj=t=>[Ra,NT,t,Hi("align","start",["start","center","end"]),pa("for")],fj=[yh,Iw],rR=[yh,ni("items",Cf("items",()=>Lk))],Lk=vf([Rn(fj),Rn(rR)]),gj=Ni.concat([ni("items",Lk),mm]),oF=Rn(gj),hj=Ht,pj=Ni.concat([jb("items",[yh,Iw]),Sf("size",1),mm]),sF=Rn(pj),bj=Ht,vj=Ni.concat([jr("constrain",!0),mm]),Ib=Rn(vj),aR=Rn([ha("width"),ha("height")]),yj=uy.concat([NT,Sf("min",0),Sf("max",0)]),Fk=Rn(yj),dy=Zd,Hk=[Ra,ni("header",Ht),ni("cells",bi(Ht))],rF=Rn(Hk),Vk=Ni.concat([pa("placeholder"),jr("maximized",!1),mm]),Xi=Rn(Vk),zk=Ht,cR=[Tc("type",["directory","leaf"]),$N,ha("id"),Lu("menu",W5)],aF=Rn(cR),wj=cR.concat([ni("children",Cf("children",()=>jd("type",{directory:Ah,leaf:aF})))]),Ah=Rn(wj),VG=jd("type",{directory:Ah,leaf:aF}),Sj=[Ra,ni("items",VG),Fu("onLeafAction"),Fu("onToggleExpand"),k("defaultExpandedIds",[],Ht),pa("defaultSelectedId")],cF=Rn(Sj),my=Ni.concat([Hi("filetype","file",["image","media","file"]),mm,pa("picker_text")]),Uk=Rn(my),lF=Rn([Iw,o4]),lR=t=>ka("items","items",Al(),bi(Rg(s=>Tr(`Checking item of ${t}`,iR,s).fold(a=>eo.error(iu(a)),a=>eo.value(a))))),iR=Ea(()=>jd("type",{alertbanner:ZZ,bar:Rn(jZ(lR("bar"))),button:qZ,checkbox:KZ,colorinput:tj,colorpicker:zS,dropzone:JL,grid:Rn(rj(lR("grid"))),iframe:tF,input:nF,listbox:oF,selectbox:sF,sizeinput:Ib,slider:Fk,textarea:Xi,urlinput:Uk,customeditor:Ik,htmlpanel:cj,imagepreview:lj,collection:JZ,label:Rn(mj(lR("label"))),table:rF,tree:cF,panel:iF})),xj=[Ra,Se("classes",[]),ni("items",iR)],iF=Rn(xj),fy=[r4("tab"),$N,ni("items",iR)],zG=[Ra,jb("tabs",fy)],Tj=Rn(zG),Ej=tR,UG=nR,kj=Rn([ha("title"),Qo("body",jd("type",{panel:iF,tabpanel:Tj})),ic("size","normal"),k("buttons",[],UG),Se("initialData",{}),Vr("onAction",ee),Vr("onChange",ee),Vr("onSubmit",ee),Vr("onClose",ee),Vr("onCancel",ee),Vr("onTabChange",ee)]),_j=t=>Tr("dialog",kj,t),US=Rn([Tc("type",["cancel","custom"]),...Ej]),Aj=Rn([ha("title"),ha("url"),Rm("height"),Rm("width"),uu("buttons",US),Vr("onAction",ee),Vr("onCancel",ee),Vr("onClose",ee),Vr("onMessage",ee)]),Oj=t=>Tr("dialog",Aj,t),Wk=t=>Gt(t)?[t].concat(ye(ur(t),Wk)):Cn(t)?ye(t,Wk):[],Dj=t=>Mt(t.type)&&Mt(t.name),WG={checkbox:YZ,colorinput:nj,colorpicker:oR,dropzone:QL,input:dj,iframe:sR,imagepreview:ij,selectbox:bj,sizeinput:aR,slider:dy,listbox:hj,size:aR,textarea:zk,urlinput:lF,customeditor:oj,collection:QZ,togglemenuitem:UZ},e=t=>A.from(WG[t.type]),n=t=>uo(Wk(t),Dj),o=t=>{const s=n(t),a=ye(s,l=>e(l).fold(()=>[],d=>[Qo(l.name,d)]));return Rn(a)},r=t=>{var s;const a=at(_j(t)),l=o(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},c={open:(t,s)=>{const a=r(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=at(Oj(s));return t(a)},redial:t=>r(t)};var f=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?QA:v0)(l,h)})};return rr([Ge(mu(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;bo(g.channels,h)&&a(l,g.data)}}),gr((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),C=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),E=[Ze("channel"),es("renderComponents"),es("updateState"),es("initialData"),jr("reuseDom",!0)],N=Object.freeze({__proto__:null,init:()=>{const t=dn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const P=Ec({fields:E,name:"reflecting",active:f,apis:C,state:N}),j=t=>{const s=[],a={};return $e(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?eo.error(s):eo.value(a)},Q=(t,s,a,l)=>{const d=ws(W0.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:We(t.items,h=>J$(g,h,s,a,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:gt([mn.config({mode:"acyclic",useTabstopAt:_e(Z0)}),ku.memento(d),XB(d,{postprocess:g=>j(g).fold(h=>(console.error(h),{}),Ot)}),ro("dialog-body-panel",[Ge(dd(),(g,h)=>{g.getSystem().broadcastOn([dS],{newFocus:A.some(h.event.target)})})])])}},q=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:eT(t.action),behaviours:gc(t.tabButtonBehaviours,[Fn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0}),Wt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),te=ai({name:"TabButton",configFields:[Se("uid",void 0),Ze("value"),ka("dom","dom",pf(()=>({attributes:{role:"tab",id:Ut("aria"),"aria-selected":"false"}})),Li()),es("action"),Se("domModification",{}),fc("tabButtonBehaviours",[Fn,mn,Wt]),Ze("view")],factory:q}),he=W([Ze("tabs"),Ze("dom"),Se("clickToDismiss",!1),fc("tabbarBehaviours",[Nt,mn]),tm(["tabClass","selectedClass"])]),we=l0({factory:te,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Nt.dehighlight(l,d),Tn(l,e2(),{tabbar:l,button:d})},a=(l,d)=>{Nt.highlight(l,d),Tn(l,QS(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Nt.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?ee:a)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),be=W([we]),Ae=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:gc(t.tabbarBehaviours,[Nt.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{vt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{vt(g.element,"aria-selected","false")}}),mn.config({mode:"flow",getInitial:d=>Nt.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ot=pl({name:"Tabbar",configFields:he(),partFields:be(),factory:Ae}),wt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:gc(t.tabviewBehaviours,[Zn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),zt=ai({name:"Tabview",configFields:[fc("tabviewBehaviours",[Zn])],factory:wt}),Ve=W([Se("selectFirst",!0),Ho("onChangeTab"),Ho("onDismissTab"),Se("tabs",[]),fc("tabSectionBehaviours",[])]),Ie=Hc({factory:ot,schema:[Ze("dom"),ud("markers",[Ze("tabClass"),Ze("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),et=Hc({factory:zt,name:"tabview"}),Qt=W([Ie,et]),bn=(t,s,a,l)=>{const d=h=>{const y=Wt.getValue(h);mt(h,t,"tabview").each(w=>{Sn(t.tabs,O=>O.value===y).each(O=>{const B=O.view();$(h.element,"id").each(H=>{vt(w.element,"aria-labelledby",H)}),Zn.set(w,B),t.onChangeTab(w,h,B)})})},g=(h,y)=>{mt(h,t,"tabbar").each(w=>{y(w).each(_f)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:V1(t.tabSectionBehaviours),events:rr(gn([t.selectFirst?[gr((h,y)=>{g(h,Nt.getFirst)})]:[],[Ge(QS(),(h,y)=>{const w=y.event.button;d(w)}),Ge(e2(),(h,y)=>{const w=y.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>mt(h,t,"tabview").map(y=>Zn.contents(y)).getOr([]),showTab:(h,y)=>{g(h,_=>{const O=Nt.getCandidates(_);return Sn(O,H=>Wt.getValue(H)===y).filter(H=>!Nt.isHighlighted(_,H))})}}}},co=pl({name:"TabSection",configFields:Ve(),partFields:Qt(),factory:bn,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Do=(t,s,a)=>We(t,(l,d)=>{Zn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Zn.set(a,[]),g.height}),ps=t=>Us(zr(t,(s,a)=>s>a?-1:s<a?1:0)),Ns=(t,s,a)=>{const l=oc(t).dom,d=Lm(t,".tox-dialog-wrap").getOr(t),g=xs(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const y=Qs(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+rc(a)?Math.max(Qs(a),y):y,O=parseInt(xs(t,"margin-top"),10)||0,B=parseInt(xs(t,"margin-bottom"),10)||0,z=Qs(t)+O+B-_;return h-z},Yr=(t,s)=>{Us(t).each(a=>co.showTab(s,a.value))},Wc=(t,s)=>{Yt(t,"height",s+"px"),Yt(t,"flex-basis",s+"px")},As=(t,s,a)=>{Lm(t,'[role="dialog"]').each(l=>{ys(l,'[role="tablist"]').each(d=>{a.get().map(g=>(Yt(s,"height","0"),Yt(s,"flex-basis","0"),Math.min(g,Ns(l,s,d)))).each(g=>{Wc(s,g)})})})},_t=t=>ys(t,'[role="tabpanel"]'),fn=t=>{const s=Ts();return{extraEvents:[gr(d=>{const g=d.element;_t(g).each(h=>{Yt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(y=>{const w=Do(t,h,y);ps(w).fold(s.clear,s.set)}),As(g,h,s),_o(h,"visibility"),Yr(t,d),requestAnimationFrame(()=>{As(g,h,s)})})}),Ge(hd(),d=>{const g=d.element;_t(g).each(h=>{As(g,h,s)})}),Ge(rB,(d,g)=>{const h=d.element;_t(h).each(y=>{const w=xd(U(y));Yt(y,"visibility","hidden");const _=$s(y,"height").map(H=>parseInt(H,10));_o(y,"height"),_o(y,"flex-basis");const O=y.dom.getBoundingClientRect().height;_.forall(H=>O>H)?(s.set(O),As(h,y,s)):_.each(H=>{Wc(y,H)}),_o(y,"visibility"),w.each(Vi)})})],selectFirst:!1}},ts="send-data-to-section",$t="send-data-to-view",On=(t,s,a,l)=>{const d=dn({}),g=O=>{const B=Wt.getValue(O),H=j(B).getOr({}),z=d.get(),G=Xs(z,H);d.set(G)},h=O=>{const B=d.get();Wt.setValue(O,B)},y=dn(null),w=We(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[qr(a.shared.providers.translate(O.title))],view:()=>[W0.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:We(O.items,H=>J$(B,H,s,a,l)),formBehaviours:gt([mn.config({mode:"acyclic",useTabstopAt:_e(Z0)}),ro("TabView.form.events",[gr(h),Jd(g)]),ri.config({channels:rs([{key:ts,value:{onReceive:g}},{key:$t,value:{onReceive:h}}])})])}))]})),_=fn(w);return co.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,B,H)=>{const z=Wt.getValue(B);Tn(O,sB,{name:z,oldName:y.get()}),y.set(z)},tabs:w,components:[co.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ot.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:gt([lr.config({})])}),co.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:_.selectFirst,tabSectionBehaviours:gt([ro("tabpanel",_.extraEvents),mn.config({mode:"acyclic"}),Vo.config({find:O=>Us(co.getViewItems(O))}),_b(A.none(),O=>(O.getSystem().broadcastOn([ts],{}),d.get()),(O,B)=>{d.set(B),O.getSystem().broadcastOn([$t],{})})])})},So=(t,s,a,l,d,g)=>{const h=_=>{const O=_.body;switch(O.type){case"tabpanel":return[On(O,_.initialData,l,g)];default:return[Q(O,_.initialData,l,g)]}},y=(_,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(_=>({id:_})).getOr({}),...d?w:{}}},components:[],behaviours:gt([ku.childAt(0),P.config({channel:`${c$}-${s}`,updateState:y,renderComponents:h,initialData:t})])}},Vt=(t,s,a,l,d,g)=>So(t,s,A.some(a),l,d,g),xo=(t,s,a,l)=>{const d=So(t,s,A.none(),a,!1,l);return hc.parts.body(d)},Mo=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[s$(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:gt([lr.config({}),Fn.config({})])})]}],behaviours:gt([mn.config({mode:"acyclic",useTabstopAt:_e(Z0)})])};return hc.parts.body(s)},pc=C0.deviceType.isTouch(),Ss=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),za=(t,s)=>hc.parts.close(ol.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:gt([lr.config({})])})),ed=()=>hc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),wm=(t,s)=>hc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:qm(`<p>${$O(s.translate(t))}</p>`)}]}]}),zl=t=>hc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Ji=(t,s)=>[Qm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Qm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],_u=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return hc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!Z0(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:qm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:pc?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:gt([Fn.config({}),ro("dialog-events",t.dialogEvents.concat([jh(dd(),(g,h)=>{sf.isBlocked(g)?ee():mn.focusIn(g)}),Ge(Bg(),(g,h)=>{g.getSystem().broadcastOn([dS],{newFocus:h.event.newFocus})})])),ro("scroll-lock",[gr(()=>{ar(oo(),d)}),Jd(()=>{Lr(oo(),d)})]),...t.extraBehaviours]),eventOrder:{[fu()]:["dialog-events"],[Rl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[gu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Qi=t=>ol.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:gt([lr.config({}),Vc.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[qi("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{mo(s,Hp)}}),td=(t,s,a,l)=>{const d=g=>[qr(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:gt([P.config({channel:`${a$}-${s}`,initialData:t,renderComponents:d})])}},vn=()=>({dom:qm('<div class="tox-dialog__draghandle"></div>')}),Zo=(t,s,a,l)=>Qm.sketch({dom:qm('<div class="tox-dialog__header"></div>'),components:[td(t,s,A.some(a),l),vn(),Qi(l)],containerBehaviours:gt([Pb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Sd(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Fr=(t,s,a)=>{const l=hc.parts.title(td(t,s,A.none(),a)),d=hc.parts.draghandle(vn()),g=hc.parts.close(Qi(a)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return Qm.sketch({dom:qm('<div class="tox-dialog__header"></div>'),components:h})},Xr=(t,s,a)=>Fr({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Ma=(t,s,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:qm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Mc=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const d=ys(t().element,".tox-dialog__header").map(g=>Qs(g));hc.setBusy(t(),(g,h)=>Ma(l.message,h,s,d))},onUnblock:()=>{hc.setIdle(t())}}),ba="tox-dialog--fullscreen",ca="tox-dialog--width-lg",vl="tox-dialog--width-md",Au=t=>{switch(t){case"large":return A.some(ca);case"medium":return A.some(vl);default:return A.none()}},Bd=(t,s)=>{const a=pe.fromDom(s.element.dom);Si(a,ba)||(xi(a,[ca,vl]),Au(t).each(l=>ar(a,l)))},$d=(t,s)=>{const a=pe.fromDom(t.element.dom),l=a_(a),d=Sn(l,g=>g===ca||g===vl).or(Au(s));o_(a,[ba,...d.toArray()])},nd=(t,s,a)=>el(_u({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[TE({}),...t.extraBehaviours],onEscape:l=>{mo(l,Hp)},dialogEvents:s,eventOrder:{[mu()]:[P.name(),ri.name()],[Rl()]:["scroll-lock",P.name(),"messages","dialog-events","alloy.base.behaviour"],[gu()]:["alloy.base.behaviour","dialog-events","messages",P.name(),"scroll-lock"]}})),fg=(t,s={})=>{const a=l=>{const d=We(l.items,g=>{const h=ft(s,g.name).getOr(dn(!1));return{...g,storage:h}});return{...l,items:d}};return We(t,l=>l.type==="menu"?a(l):l)},Lb=t=>zo(t,(s,a)=>a.type==="menu"?zo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Fb=(t,s)=>[Ey(dd(),lV),t(Jw,(a,l,d,g)=>{xd(U(g.element)).fold(ee,A1),s.onClose(),l.onClose()}),t(Hp,(a,l,d,g)=>{l.onCancel(a),mo(g,Jw)}),Ge(H4,(a,l)=>s.onUnblock()),Ge(iE,(a,l)=>s.onBlock(l.event))],uR=(t,s)=>{const a=(d,g)=>Ge(d,(h,y)=>{l(h,(w,_)=>{g(t(),w,y.event,h)})}),l=(d,g)=>{P.getState(d).get().each(h=>{g(h,d)})};return[...Fb(a,s),a(ag,(d,g,h)=>{g.onAction(d,{name:h.name})})]},gg=(t,s,a)=>{const l=(g,h)=>Ge(g,(y,w)=>{d(y,(_,O)=>{h(t(),_,w.event,y)})}),d=(g,h)=>{P.getState(g).get().each(y=>{h(y.internalDialog,g)})};return[...Fb(l,s),l(L0,(g,h)=>h.onSubmit(g)),l(Ki,(g,h,y)=>{h.onChange(g,{name:y.name})}),l(ag,(g,h,y,w)=>{const _=()=>w.getSystem().isConnected()?mn.focusIn(w):void 0,O=z=>X(z,"disabled")||$(z,"aria-disabled").exists(G=>G==="true"),B=U(w.element),H=xd(B);h.onAction(g,{name:y.name,value:y.value}),xd(B).fold(_,z=>{O(z)||H.exists(G=>Wr(z,G)&&O(G))?_():a().toOptional().filter(G=>!Wr(G.element,z)).each(_)})}),l(sB,(g,h,y)=>{h.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),Jd(g=>{const h=t();Wt.setValue(g,h.getData())})]},Zk=(t,s)=>Ob(t,t.type,s),uF=(t,s,a)=>Sn(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),Ul=(t,s)=>{const a=s.map(y=>y.footerButtons).getOr([]),l=Jr(a,y=>y.align==="start"),d=(y,w)=>Qm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:We(w,_=>_.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},Yp=(t,s,a)=>{const l=(d,g)=>{const h=We(g.buttons,w=>{const _=ws(Zk(w,a));return{name:w.name,align:w.align,memento:_}}),y=w=>uF(d,h,w);return A.some({lookupByName:y,footerButtons:h})};return{dom:qm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:gt([P.config({channel:`${l$}-${s}`,initialData:t,updateState:l,renderComponents:Ul})])}},dF=(t,s,a)=>Yp(t,s,a),jk=(t,s,a)=>hc.parts.footer(Yp(t,s,a)),Id=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Vo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return W0.getField(l,s).orThunk(()=>t.getFooter().bind(h=>P.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},WS=(t,s)=>{const a=t.getRoot();return P.getState(a).get().map(l=>at(Tr("data",l.dataValidator,s))).getOr(s)},Ne=(t,s,a)=>{const l=G=>{const ne=t.getRoot();ne.getSystem().isConnected()&&G(ne)},z={getData:()=>{const G=t.getRoot(),ne=G.getSystem().isConnected()?t.getFormWrapper():G,Ee=Wt.getValue(ne),le=Je(a,xe=>xe.get());return{...Ee,...le}},setData:G=>{l(ne=>{const Ee=z.getData(),le=Xs(Ee,G),xe=WS(t,le),Ce=t.getFormWrapper();Wt.setValue(Ce,xe),$e(a,(Ke,Pe)=>{yo(le,Pe)&&Ke.set(le[Pe])})})},setEnabled:(G,ne)=>{Id(t,G).each(ne?In.enable:In.disable)},focus:G=>{Id(t,G).each(Fn.focus)},block:G=>{if(!Mt(G))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ne=>{Tn(ne,iE,{message:G})})},unblock:()=>{l(G=>{mo(G,H4)})},showTab:G=>{l(ne=>{const Ee=t.getBody();P.getState(Ee).get().exists(xe=>xe.isTabPanel())&&Vo.getCurrent(Ee).each(xe=>{co.showTab(xe,G)})})},redial:G=>{l(ne=>{const Ee=t.getId(),le=s(G),xe=fg(le.internalDialog.buttons,a);ne.getSystem().broadcastOn([`${uS}-${Ee}`],le),ne.getSystem().broadcastOn([`${a$}-${Ee}`],le.internalDialog),ne.getSystem().broadcastOn([`${c$}-${Ee}`],le.internalDialog),ne.getSystem().broadcastOn([`${l$}-${Ee}`],{...le.internalDialog,buttons:xe}),z.setData(le.initialData)})},close:()=>{l(G=>{mo(G,Jw)})},toggleFullscreen:t.toggleFullscreen};return z},Le=(t,s,a)=>{const l=Ut("dialog"),d=t.internalDialog,g=Xr(d.title,l,a),h=dn(d.size),y=Ce=>Id(le,Ce),w=Au(h.get()).toArray(),_=(Ce,Ke)=>(h.set(Ke.internalDialog.size),Bd(Ke.internalDialog.size,Ce),A.some(Ke)),O=xo({body:d.body,initialData:d.initialData},l,a,y),B=fg(d.buttons),H=Lb(B),z=pn(B.length!==0,jk({buttons:B},l,a)),G=gg(()=>xe,Mc(()=>Ee,a.shared.providers,s),a.shared.getSink),ne={id:l,header:g,body:O,footer:z,extraClasses:w,extraBehaviours:[P.config({channel:`${uS}-${l}`,updateState:_,initialData:t})],extraStyles:{}},Ee=nd(ne,G,a),le=(()=>{const Ce=()=>{const Pe=hc.getBody(Ee);return Vo.getCurrent(Pe).getOr(Pe)},Ke=()=>{$d(Ee,h.get())};return{getId:W(l),getRoot:W(Ee),getBody:()=>hc.getBody(Ee),getFooter:()=>hc.getFooter(Ee),getFormWrapper:Ce,toggleFullscreen:Ke}})(),xe=Ne(le,s.redial,H);return{dialog:Ee,instanceApi:xe}},kt=(t,s,a,l=!1,d)=>{const g=Ut("dialog"),h=Ut("dialog-label"),y=Ut("dialog-content"),w=t.internalDialog,_=cn=>Id(Rt,cn),O=dn(w.size),B=Au(O.get()).toArray(),H=(cn,Zt)=>(O.set(Zt.internalDialog.size),Bd(Zt.internalDialog.size,cn),d(),A.some(Zt)),z=ws(Zo({title:w.title,draggable:!0},g,h,a.shared.providers)),G=ws(Vt({body:w.body,initialData:w.initialData},g,y,a,l,_)),ne=fg(w.buttons),Ee=Lb(ne),le=pn(ne.length!==0,ws(dF({buttons:ne},g,a))),xe=gg(()=>je,{onBlock:cn=>{sf.block(Pe,(Zt,Dn)=>{const yn=z.getOpt(Pe).map(as=>Qs(as.element));return Ma(cn.message,Dn,a.shared.providers,yn)})},onUnblock:()=>{sf.unblock(Pe)},onClose:()=>s.closeWindow()},a.shared.getSink),Ce="tox-dialog-inline",Ke=ul().os,Pe=el({dom:{tag:"div",classes:["tox-dialog",Ce,...B],attributes:{role:"dialog",...Ke.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[mu()]:[P.name(),ri.name()],[fu()]:["execute-on-form"],[Rl()]:["reflecting","execute-on-form"]},behaviours:gt([mn.config({mode:"cyclic",onEscape:cn=>(mo(cn,Jw),A.some(!0)),useTabstopAt:cn=>!Z0(cn)&&(na(cn)!=="button"||bs(cn,"disabled")!=="disabled"),firstTabstop:1}),P.config({channel:`${uS}-${g}`,updateState:H,initialData:t}),Fn.config({}),ro("execute-on-form",xe.concat([jh(dd(),(cn,Zt)=>{mn.focusIn(cn)}),Ge(Bg(),(cn,Zt)=>{cn.getSystem().broadcastOn([dS],{newFocus:Zt.event.newFocus})})])),sf.config({getRoot:()=>A.some(Pe)}),Zn.config({}),TE({})]),components:[z.asSpec(),G.asSpec(),...le.map(cn=>cn.asSpec()).toArray()]}),ht=()=>{$d(Pe,O.get())},Rt={getId:W(g),getRoot:W(Pe),getFooter:()=>le.map(cn=>cn.get(Pe)),getBody:()=>G.get(Pe),getFormWrapper:()=>{const cn=G.get(Pe);return Vo.getCurrent(cn).getOr(cn)},toggleFullscreen:ht},je=Ne(Rt,s.redial,Ee);return{dialog:Pe,instanceApi:je}};var pt=tinymce.util.Tools.resolve("tinymce.util.URI");const Ln=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!Mt(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{Tn(y,iE,{message:h})})},unblock:()=>{s(h=>{mo(h,H4)})},close:()=>{s(h=>{mo(h,Jw)})},sendMessage:h=>{s(y=>{y.getSystem().broadcastOn([i$],h)})}}},Io=["insertContent","setContent","execCommand","close","block","unblock"],Pr=t=>Gt(t)&&Io.indexOf(t.mceAction)!==-1,Sm=t=>!Pr(t)&&Gt(t)&&yo(t,"mceAction"),Gk=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=En(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Rj=(t,s,a,l)=>{const d=Ut("dialog"),g=Xr(t.title,d,l),h=Mo(t),y=t.buttons.bind(Ce=>Ce.length===0?A.none():A.some(jk({buttons:Ce},d,l))),w=uR(()=>xe,Mc(()=>le,l.shared.providers,s)),_={...t.height.fold(()=>({}),Ce=>({height:Ce+"px","max-height":Ce+"px"})),...t.width.fold(()=>({}),Ce=>({width:Ce+"px","max-width":Ce+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new pt(t.url,{base_uri:new pt(window.location.href)}),H=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,z=ga(),G=(Ce,Ke)=>A.some(Ke),ne=[P.config({channel:`${uS}-${d}`,updateState:G,initialData:t}),ro("messages",[gr(()=>{const Ce=$l(pe.fromDom(window),"message",Ke=>{if(B.isSameOrigin(new pt(Ke.raw.origin))){const Pe=Ke.raw.data;Pr(Pe)?Gk(a,xe,Pe):Sm(Pe)&&t.onMessage(xe,Pe)}});z.set(Ce)}),Jd(z.clear)]),ri.config({channels:{[i$]:{onReceive:(Ce,Ke)=>{ys(Ce.element,"iframe").each(Pe=>{const ht=Pe.dom.contentWindow;Xe(ht)&&ht.postMessage(Ke,H)})}}}})],le=nd({id:d,header:g,body:h,footer:y,extraClasses:O,extraBehaviours:ne,extraStyles:_},w,l),xe=Ln(le);return{dialog:le,instanceApi:xe}},qk=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{hc.hide(_),d()},h=ws(Ob({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),y=ed(),w=za(g,s.providers),_=el(_u({lazySink:()=>s.getSink(),header:Ss(y,w),body:wm(l,s.providers),footer:A.some(zl(Ji([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ge(Hp,g)],eventOrder:{}}));hc.show(_);const O=h.get(_);Fn.focus(O)}}},Oh=t=>{const s=t.shared;return{open:(l,d)=>{const g=H=>{hc.hide(O),d(H)},h=ws(Ob({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),y=Ob({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),w=ed(),_=za(()=>g(!1),s.providers),O=el(_u({lazySink:()=>s.getSink(),header:Ss(w,_),body:wm(l,s.providers),footer:A.some(zl(Ji([],[y,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ge(Hp,()=>g(!1)),Ge(L0,()=>g(!0))],eventOrder:{}}));hc.show(O);const B=h.get(O);Fn.focus(B)}}},dR=(t,s)=>at(Tr("data",s,t)),mR=t=>Yw(t,".tox-alert-dialog")||Yw(t,".tox-confirm-dialog"),mF=(t,s,a)=>s&&a?[]:[Nr.config({contextual:{lazyContext:()=>A.some(xr(pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>bh(t,l.element).map(g=>({bounds:cb(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:wa(g.element).top})})).getOrThunk(()=>({bounds:oa(),optScrollEnv:A.none()}))})],fF=t=>{const s=t.editor,a=T0(s),l=qk(t.backstages.dialog),d=Oh(t.backstages.dialog),g=(G,ne,Ee)=>{if(!At(ne)){if(ne.inline==="toolbar")return _(G,t.backstages.popup.shared.anchors.inlineDialog(),Ee,ne);if(ne.inline==="bottom")return O(G,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ee,ne);if(ne.inline==="cursor")return _(G,t.backstages.popup.shared.anchors.cursor(),Ee,ne)}return w(G,Ee)},h=(G,ne)=>y(G,ne),y=(G,ne)=>{const Ee=le=>{const xe=Rj(le,{closeWindow:()=>{hc.hide(xe.dialog),ne(xe.instanceApi)}},s,t.backstages.dialog);return hc.show(xe.dialog),xe.instanceApi};return c.openUrl(Ee,G)},w=(G,ne)=>{const Ee=(le,xe,Ce)=>{const Ke=xe,ht=Le({dataValidator:Ce,initialData:Ke,internalDialog:le},{redial:c.redial,closeWindow:()=>{hc.hide(ht.dialog),ne(ht.instanceApi)}},t.backstages.dialog);return hc.show(ht.dialog),ht.instanceApi.setData(Ke),ht.instanceApi};return c.open(Ee,G)},_=(G,ne,Ee,le)=>{const xe=(Ce,Ke,Pe)=>{const ht=dR(Ke,Pe),Rt=Ts(),je=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:Pe,initialData:ht,internalDialog:Ce},Zt=()=>Rt.on(Go=>{Er.reposition(Go),(!a||!je)&&Nr.refresh(Go)}),Dn=kt(cn,{redial:c.redial,closeWindow:()=>{Rt.on(Er.hide),s.off("ResizeEditor",Zt),Rt.clear(),Ee(Dn.instanceApi)}},t.backstages.popup,le.ariaAttrs,Zt),yn=el(Er.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:le.persistent?{event:"doNotDismissYet"}:{},...je?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gt([ro("window-manager-inline-events",[Ge(Ef(),(Go,Eo)=>{mo(Dn.dialog,Hp)})]),...mF(s,a,je)]),isExtraPart:(Go,Eo)=>mR(Eo)}));Rt.set(yn);const as=()=>{const Go=s.inline?oo():pe.fromDom(s.getContainer()),Eo=xr(Go);return A.some(Eo)};return Er.showWithinBounds(yn,fl(Dn.dialog),{anchor:ne},as),(!a||!je)&&(Nr.refresh(yn),s.on("ResizeEditor",Zt)),Dn.instanceApi.setData(ht),mn.focusIn(Dn.dialog),Dn.instanceApi};return c.open(xe,G)},O=(G,ne,Ee,le)=>{const xe=(Ce,Ke,Pe)=>{const ht=dR(Ke,Pe),Rt=Ts(),je=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:Pe,initialData:ht,internalDialog:Ce},Zt=()=>Rt.on(Go=>{Er.reposition(Go),Nr.refresh(Go)}),Dn=kt(cn,{redial:c.redial,closeWindow:()=>{Rt.on(Er.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Zt),Rt.clear(),Ee(Dn.instanceApi)}},t.backstages.popup,le.ariaAttrs,Zt),yn=el(Er.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:le.persistent?{event:"doNotDismissYet"}:{},...je?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gt([ro("window-manager-inline-events",[Ge(Ef(),(Go,Eo)=>{mo(Dn.dialog,Hp)})]),Nr.config({contextual:{lazyContext:()=>A.some(xr(pe.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Go=>bh(s,Go.element).map(xt=>({bounds:cb(xt),optScrollEnv:A.some({currentScrollTop:xt.element.dom.scrollTop,scrollElmTop:wa(xt.element).top})})).getOrThunk(()=>({bounds:oa(),optScrollEnv:A.none()}))})]),isExtraPart:(Go,Eo)=>mR(Eo)}));Rt.set(yn);const as=()=>t.backstages.popup.shared.getSink().toOptional().bind(Go=>{const Eo=bh(s,Go.element),xt=15,tn=Eo.map(kn=>cb(kn)).getOr(oa()),no=xr(pe.fromDom(s.getContentAreaContainer())),$n=kg(no,tn);return A.some(Ys($n.x,$n.y,$n.width,$n.height-xt))});return Er.showWithinBounds(yn,fl(Dn.dialog),{anchor:ne},as),Nr.refresh(yn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Zt),Dn.instanceApi.setData(ht),mn.focusIn(Dn.dialog),Dn.instanceApi};return c.open(xe,G)};return{open:g,openUrl:h,alert:(G,ne)=>{l.open(G,ne)},close:G=>{G.close()},confirm:(G,ne)=>{d.open(G,ne)}}},Mj=t=>{VM(t),X8(t),LW(t)};var No=()=>{ld.add("silver",t=>{Mj(t);let s=()=>oa();const{dialogs:a,popups:l,renderUI:d}=IZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return bh(t,l.getMothership().element).each(B=>{s=()=>cb(B)}),_};W7.register(t,l.backstage.shared);const h=fF({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),y=Ts(),w=()=>Q6(t,{backstage:l.backstage},l.getMothership(),y);return{renderUI:g,getWindowManagerImpl:W(h),getNotificationManagerImpl:w}})};No()})();const dK=["id"],mK={class:"grid"},fK={class:"field"},gK={class:"type-label"},hK={class:"field"},pK={class:"type-label"},bK={class:"field half"},vK={class:"type-label"},yK={class:"field half-right"},CK={class:"type-label"},wK={class:"content"},SK={class:"content"},xK=["src"],TK={class:"grid"},EK={class:"field half"},kK={class:"type-label"},_K={class:"field half-right"},AK={class:"type-label"},OK={class:"field half"},DK={class:"type-label"},RK={class:"field half-right"},MK={class:"type-label"},NK={class:"field half"},PK={class:"type-label"},BK={key:1,class:"field half"},$K={class:"type-label"},IK={class:"content"},LK={key:0,class:"media-preview",controls:"true"},FK=["src"],HK=["src"],VK={class:"grid"},zK={class:"field"},UK={class:"type-label"},WK={class:"field half"},ZK={class:"type-label"},jK={class:"field half-right"},GK={class:"type-label"},qK={class:"grid"},KK={class:"field"},YK={class:"type-label"},XK=hq({__name:"input-rich-text-html",props:{value:{},field:{},toolbar:{default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","code","fullscreen"]},font:{default:"sans-serif"},customFormats:{default:()=>[]},tinymceOverrides:{},disabled:{type:Boolean},imageToken:{},folder:{},softLength:{},direction:{}},emits:["input"],setup(it,{emit:Pn}){var gn;const Xt=it,an=Pn,{t:bt}=Fq(),jt=Zl(null),zn=Zl(null),{imageToken:Mt}=pq(Xt),Gt=Rq(),Xn=Zl("all"),Cn=Zl([]);(gn=Gt.settings)!=null&&gn.storage_asset_transform&&(Xn.value=Gt.settings.storage_asset_transform,Cn.value=Gt.settings.storage_asset_presets??[]);const qt=Zl(0),{imageDrawerOpen:En,imageSelection:At,closeImageDrawer:Tt,onImageSelect:Xe,saveImage:nt,imageButton:Un}=aK(jt,Mt,{storageAssetTransform:Xn,storageAssetPresets:Cn}),{mediaDrawerOpen:De,mediaSelection:ee,closeMediaDrawer:Ye,openMediaTab:Bn,onMediaSelect:tt,embed:W,saveMedia:Ot,mediaHeight:en,mediaWidth:wn,mediaSource:_e,mediaButton:ie}=lK(jt,Mt),{linkButton:ns,linkDrawerOpen:so,closeLinkDrawer:It,saveLink:A,linkSelection:ao,linkNode:st}=cK(jt),{codeDrawerOpen:Po,code:nn,closeCodeDrawer:qe,saveCode:bo,sourceCodeButton:zs}=iK(jt),lo=qS({get(){return Xt.value||""},set(ye){Xt.value!==ye&&zo()}}),Js=Zl(!1),We=qS(()=>Js.value?Xt.disabled:!1);KS(()=>[Xt.direction,jt],()=>{var ye,Ct,fo,Bt,Is,Bo;jt.value&&(Xt.direction==="rtl"?(fo=(Ct=(ye=jt.value.editorCommands)==null?void 0:ye.commands)==null?void 0:Ct.exec)==null||fo.mcedirectionrtl():(Bo=(Is=(Bt=jt.value.editorCommands)==null?void 0:Bt.commands)==null?void 0:Is.exec)==null||Bo.mcedirectionltr())});const ut=qS(()=>{let ye=null;Array.isArray(Xt.customFormats)&&Xt.customFormats.length>0&&(ye=Xt.customFormats);let Ct=(Xt.toolbar??[]).map(fo=>fo.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return ye&&(Ct+=" styles"),{skin:!1,content_css:!1,content_style:rK(Xt.font),plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],license_key:"gpl",branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,highlight_on_focus:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:Ct,style_formats:ye,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:Xt.direction,paste_data_images:!1,setup:Sn,...Xt.tinymceOverrides||{}}}),L=qS(()=>Mq(qt.value,Xt.softLength)??100);let Jr,uo;function cs(){var Ct,fo,Bt;const ye=(Ct=jt.value)==null?void 0:Ct.contentWindow.document.getElementById("tinymce");qt.value=((Bt=(fo=ye==null?void 0:ye.textContent)==null?void 0:fo.replace(`
`,""))==null?void 0:Bt.length)??0}function zo(){if(cs(),!Jr)return;const ye=jt.value.getContent()?jt.value.getContent():null;ye!==uo&&(uo=ye,an("input",ye))}function Nc(){if(Jr)return;const ye=jt.value.contentWindow.document.getElementById("tinymce");Jr=new MutationObserver(fo=>{zo()});const Ct={characterData:!0,childList:!0,subtree:!0};Jr.observe(ye,Ct)}function Sn(ye){jt.value=ye;const Ct="meta+k";ye.ui.registry.addToggleButton("customImage",Un),ye.ui.registry.addToggleButton("customMedia",ie),ye.ui.registry.addToggleButton("customLink",{...ns,shortcut:Ct}),ye.ui.registry.addButton("customCode",zs),ye.on("init",function(){ye.shortcuts.remove(Ct),ye.addShortcut(Ct,"Insert Link",()=>{ye.ui.registry.getAll().buttons.customlink.onAction()}),cs(),Js.value=!0}),ye.on("OpenWindow",function(fo){var Bt,Is;if((Bt=fo.dialog)!=null&&Bt.getData){const Bo=(Is=fo.dialog)==null?void 0:Is.getData();Bo&&(Bo.url&&(fo.dialog.close(),ye.ui.registry.getAll().buttons.customlink.onAction()),Bo.src&&(fo.dialog.close(),ye.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function Ro(ye){var fo;if(zn.value==null)return;const Ct=(fo=zn.value.$el.parentElement)==null?void 0:fo.querySelector(".tox-tinymce");Ct!=null&&(ye?Ct.classList.add("focus"):Ct.classList.remove("focus"))}return(ye,Ct)=>{const fo=ou("v-card-title"),Bt=ou("v-input"),Is=ou("v-checkbox"),Bo=ou("v-card-text"),zr=ou("v-button"),ms=ou("v-card-actions"),Us=ou("v-card"),tc=ou("v-dialog"),Ps=ou("interface-input-code"),ls=ou("v-icon"),qo=ou("v-drawer"),Qr=ou("v-select"),$e=ou("v-upload"),Je=ou("v-tab"),on=ou("v-tabs"),Ft=ou("v-tab-item"),Jn=ou("v-textarea"),Ko=ou("v-tabs-items"),wr=Lq("tooltip");return vg(),hy("div",{id:ye.field,class:uq(["wysiwyg",{disabled:ye.disabled}])},[kr(Nn(eK),{ref_key:"editorElement",ref:zn,modelValue:lo.value,"onUpdate:modelValue":Ct[0]||(Ct[0]=Hn=>lo.value=Hn),init:ut.value,disabled:We.value,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:Ct[1]||(Ct[1]=Hn=>Ro(!0)),onFocusout:Ct[2]||(Ct[2]=Hn=>Ro(!1)),onFocus:Nc,onSetContent:zo},null,8,["modelValue","init","disabled"]),ye.softLength?(vg(),hy("span",{key:0,class:uq(["remaining",{warning:L.value<10,danger:L.value<5}])},ii(ye.softLength-qt.value),3)):pR("",!0),kr(tc,{modelValue:Nn(so),"onUpdate:modelValue":Ct[7]||(Ct[7]=Hn=>Xp(so)?so.value=Hn:null)},{default:rl(()=>[kr(Us,null,{default:rl(()=>[kr(fo,null,{default:rl(()=>[bR(ii(Nn(bt)("wysiwyg_options.link")),1)]),_:1}),kr(Bo,null,{default:rl(()=>[_r("div",mK,[_r("div",fK,[_r("div",gK,ii(Nn(bt)("url")),1),kr(Bt,{modelValue:Nn(ao).url,"onUpdate:modelValue":Ct[3]||(Ct[3]=Hn=>Nn(ao).url=Hn),placeholder:Nn(bt)("url_placeholder"),autofocus:""},null,8,["modelValue","placeholder"])]),_r("div",hK,[_r("div",pK,ii(Nn(bt)("display_text")),1),kr(Bt,{modelValue:Nn(ao).displayText,"onUpdate:modelValue":Ct[4]||(Ct[4]=Hn=>Nn(ao).displayText=Hn),placeholder:Nn(bt)("display_text_placeholder")},null,8,["modelValue","placeholder"])]),_r("div",bK,[_r("div",vK,ii(Nn(bt)("tooltip")),1),kr(Bt,{modelValue:Nn(ao).title,"onUpdate:modelValue":Ct[5]||(Ct[5]=Hn=>Nn(ao).title=Hn),placeholder:Nn(bt)("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),_r("div",yK,[_r("div",CK,ii(Nn(bt)("open_link_in")),1),kr(Is,{modelValue:Nn(ao).newTab,"onUpdate:modelValue":Ct[6]||(Ct[6]=Hn=>Nn(ao).newTab=Hn),block:"",label:Nn(bt)(Nn(ao).newTab?"new_tab":"current_tab")},null,8,["modelValue","label"])])])]),_:1}),kr(ms,null,{default:rl(()=>[kr(zr,{secondary:"",onClick:Nn(It)},{default:rl(()=>[bR(ii(Nn(bt)("cancel")),1)]),_:1},8,["onClick"]),kr(zr,{disabled:Nn(ao).url===null&&!Nn(st),onClick:Nn(A)},{default:rl(()=>[bR(ii(Nn(bt)("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),kr(qo,{modelValue:Nn(Po),"onUpdate:modelValue":Ct[9]||(Ct[9]=Hn=>Xp(Po)?Po.value=Hn:null),title:Nn(bt)("wysiwyg_options.source_code"),icon:"code",onCancel:Nn(qe)},{actions:rl(()=>[kr(zr,{icon:"",rounded:"",onClick:Nn(bo)},{default:rl(()=>[kr(ls,{name:"check"})]),_:1},8,["onClick"])]),default:rl(()=>[_r("div",wK,[kr(Ps,{value:Nn(nn),language:"htmlmixed","line-wrapping":"",onInput:Ct[8]||(Ct[8]=Hn=>nn.value=Hn)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),kr(qo,{modelValue:Nn(En),"onUpdate:modelValue":Ct[16]||(Ct[16]=Hn=>Xp(En)?En.value=Hn:null),title:Nn(bt)("wysiwyg_options.image"),icon:"image",onCancel:Nn(Tt)},{actions:rl(()=>[dq((vg(),yF(zr,{icon:"",rounded:"",onClick:Nn(nt)},{default:rl(()=>[kr(ls,{name:"check"})]),_:1},8,["onClick"])),[[wr,Nn(bt)("save_image"),void 0,{bottom:!0}]])]),default:rl(()=>[_r("div",SK,[Nn(At)?(vg(),hy(Hj,{key:0},[_r("img",{class:"image-preview",src:Nn(At).previewUrl},null,8,xK),_r("div",TK,[_r("div",EK,[_r("div",kK,ii(Nn(bt)("image_url")),1),kr(Bt,{modelValue:Nn(At).imageUrl,"onUpdate:modelValue":Ct[10]||(Ct[10]=Hn=>Nn(At).imageUrl=Hn)},null,8,["modelValue"])]),_r("div",_K,[_r("div",AK,ii(Nn(bt)("alt_text")),1),kr(Bt,{modelValue:Nn(At).alt,"onUpdate:modelValue":Ct[11]||(Ct[11]=Hn=>Nn(At).alt=Hn),nullable:!1},null,8,["modelValue"])]),Xn.value==="all"?(vg(),hy(Hj,{key:0},[_r("div",OK,[_r("div",DK,ii(Nn(bt)("width")),1),kr(Bt,{modelValue:Nn(At).width,"onUpdate:modelValue":Ct[12]||(Ct[12]=Hn=>Nn(At).width=Hn),disabled:!!Nn(At).transformationKey},null,8,["modelValue","disabled"])]),_r("div",RK,[_r("div",MK,ii(Nn(bt)("height")),1),kr(Bt,{modelValue:Nn(At).height,"onUpdate:modelValue":Ct[13]||(Ct[13]=Hn=>Nn(At).height=Hn),disabled:!!Nn(At).transformationKey},null,8,["modelValue","disabled"])])],64)):pR("",!0),_r("div",NK,[_r("div",PK,ii(Nn(bt)("wysiwyg_options.lazy_loading")),1),kr(Is,{modelValue:Nn(At).lazy,"onUpdate:modelValue":Ct[14]||(Ct[14]=Hn=>Nn(At).lazy=Hn),block:"",label:Nn(bt)("wysiwyg_options.lazy_loading_label")},null,8,["modelValue","label"])]),Xn.value!=="none"&&Cn.value.length>0?(vg(),hy("div",BK,[_r("div",$K,ii(Nn(bt)("transformation_preset_key")),1),kr(Qr,{modelValue:Nn(At).transformationKey,"onUpdate:modelValue":Ct[15]||(Ct[15]=Hn=>Nn(At).transformationKey=Hn),items:Cn.value.map(Hn=>({text:Hn.key,value:Hn.key})),"show-deselect":""},null,8,["modelValue","items"])])):pR("",!0)])],64)):(vg(),yF($e,{key:1,multiple:!1,"from-library":"","from-url":"",folder:ye.folder,onInput:Nn(Xe)},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),kr(qo,{modelValue:Nn(De),"onUpdate:modelValue":Ct[23]||(Ct[23]=Hn=>Xp(De)?De.value=Hn:null),title:Nn(bt)("wysiwyg_options.media"),icon:"slideshow",onCancel:Nn(Ye)},{sidebar:rl(()=>[kr(on,{modelValue:Nn(Bn),"onUpdate:modelValue":Ct[17]||(Ct[17]=Hn=>Xp(Bn)?Bn.value=Hn:null),vertical:""},{default:rl(()=>[kr(Je,{value:"video"},{default:rl(()=>[bR(ii(Nn(bt)("media")),1)]),_:1}),kr(Je,{value:"embed"},{default:rl(()=>[bR(ii(Nn(bt)("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:rl(()=>[dq((vg(),yF(zr,{icon:"",rounded:"",onClick:Nn(Ot)},{default:rl(()=>[kr(ls,{name:"check"})]),_:1},8,["onClick"])),[[wr,Nn(bt)("save_media"),void 0,{bottom:!0}]])]),default:rl(()=>[_r("div",IK,[kr(Ko,{modelValue:Nn(Bn),"onUpdate:modelValue":Ct[22]||(Ct[22]=Hn=>Xp(Bn)?Bn.value=Hn:null)},{default:rl(()=>[kr(Ft,{value:"video"},{default:rl(()=>[Nn(ee)?(vg(),hy(Hj,{key:0},[Nn(ee).tag!=="iframe"?(vg(),hy("video",LK,[_r("source",{src:Nn(ee).previewUrl},null,8,FK)])):pR("",!0),Nn(ee).tag==="iframe"?(vg(),hy("iframe",{key:1,class:"media-preview",src:Nn(ee).previewUrl},null,8,HK)):pR("",!0),_r("div",VK,[_r("div",zK,[_r("div",UK,ii(Nn(bt)("source")),1),kr(Bt,{modelValue:Nn(_e),"onUpdate:modelValue":Ct[18]||(Ct[18]=Hn=>Xp(_e)?_e.value=Hn:null)},null,8,["modelValue"])]),_r("div",WK,[_r("div",ZK,ii(Nn(bt)("width")),1),kr(Bt,{modelValue:Nn(wn),"onUpdate:modelValue":Ct[19]||(Ct[19]=Hn=>Xp(wn)?wn.value=Hn:null)},null,8,["modelValue"])]),_r("div",jK,[_r("div",GK,ii(Nn(bt)("height")),1),kr(Bt,{modelValue:Nn(en),"onUpdate:modelValue":Ct[20]||(Ct[20]=Hn=>Xp(en)?en.value=Hn:null)},null,8,["modelValue"])])])],64)):(vg(),yF($e,{key:1,multiple:!1,"from-library":"","from-url":"",folder:ye.folder,onInput:Nn(tt)},null,8,["folder","onInput"]))]),_:1}),kr(Ft,{value:"embed"},{default:rl(()=>[_r("div",qK,[_r("div",KK,[_r("div",YK,ii(Nn(bt)("embed")),1),kr(Jn,{modelValue:Nn(W),"onUpdate:modelValue":Ct[21]||(Ct[21]=Hn=>Xp(W)?W.value=Hn:null),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,dK)}}}),aY=Nq(XK,[["__scopeId","data-v-3feea970"]]);export{aY as default};
